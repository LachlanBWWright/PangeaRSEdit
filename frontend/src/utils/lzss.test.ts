import { expect, test, describe, beforeEach } from "vitest";
import { lzssCompress, lzssDecompress } from "./lzss";

describe("LZSS Compression Algorithm", () => {
  describe("Basic Functionality", () => {
    test("compress and decompress random data", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Fill with random data
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, Math.floor(Math.random() * 256)); // Fixed range to 0-255
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio for information
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`Random data compression ratio: ${ratio.toFixed(2)}`);
    });

    test("compress and decompress multiple times (idempotence)", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Fill with random data
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, Math.floor(Math.random() * 256));
      }

      // Test 10 iterations to ensure consistency
      for (let i = 0; i < 10; i++) {
        const compressedDataView = lzssCompress(inputDataView);
        const outputDataView = lzssDecompress(compressedDataView, 10_000);

        for (let j = 0; j < inputDataView.byteLength; j++) {
          expect(inputDataView.getUint8(j)).toEqual(outputDataView.getUint8(j));
        }
      }
    });
  });

  describe("Edge Cases", () => {
    test("compress and decompress all zeros", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Fill with zeros
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, 0);
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio for information
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`All zeros compression ratio: ${ratio.toFixed(2)}`);
    });

    test("compress and decompress all 255s", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Fill with max values (255)
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, 255);
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`All 255s compression ratio: ${ratio.toFixed(2)}`);
    });

    test("compress and decompress mixed data (half zeros, half random)", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // First half zeros, second half random
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(
          i,
          i < 5000 ? 0 : Math.floor(Math.random() * 256),
        );
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`Mixed data compression ratio: ${ratio.toFixed(2)}`);
    });

    test("compress and decompress small data (1 byte)", () => {
      const inputDataView = new DataView(new ArrayBuffer(1));
      inputDataView.setUint8(0, 42);

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 1);

      expect(outputDataView.getUint8(0)).toEqual(42);
    });

    test("compress and decompress empty data (0 bytes)", () => {
      const inputDataView = new DataView(new ArrayBuffer(0));

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 0);

      expect(outputDataView.byteLength).toEqual(0);
    });
  });

  describe("Pattern Tests", () => {
    test("compress and decompress repeating pattern", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Create a repeating pattern (good for LZSS)
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, i % 16); // Repeating 0-15 pattern
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`Repeating pattern compression ratio: ${ratio.toFixed(2)}`);
    });

    test("compress and decompress alternating bytes", () => {
      const inputDataView = new DataView(new ArrayBuffer(10_000));

      // Alternating 0 and 255
      for (let i = 0; i < 10_000; i++) {
        inputDataView.setUint8(i, i % 2 === 0 ? 0 : 255);
      }

      const compressedDataView = lzssCompress(inputDataView);
      const outputDataView = lzssDecompress(compressedDataView, 10_000);

      // Verify all bytes match
      for (let i = 0; i < inputDataView.byteLength; i++) {
        expect(inputDataView.getUint8(i)).toEqual(outputDataView.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressedDataView.byteLength / inputDataView.byteLength;
      console.log(`Alternating bytes compression ratio: ${ratio.toFixed(2)}`);
    });
  });

  describe("Real-World Examples", () => {
    test("Existinig image data (problem tile 1)", () => {
      const hexStr =
        "0x89504e470d0a1a0a0000000d4948445200000080000000800806000000c33e61cb000000017352474200aece1ce9000012e449444154785eed5d2b58e3d0123ec7454646565656222b914824128944225722914864652512595959591959d77bff7f664e4ed2b2b0b7d99b6c987edf2ed0c7697266ce3cfe79c5721e8e21847038e03ffd673ff077fee8fedd79d9fffcf7762096b3700c45c600e406e105f94f1f4efc7f8fbadfb8626100930019d129119cf8dfd8c27ffb2d6d0650a2b788df9504fff6fdfad5777620d20680c857fdefc4ff593c1267cb922a20e9fba223fa8b108aa2084511425916a1288bb07edefeac5d9af0dd0a03e0f46784cf790004c73f10bf04339445787ddc4c784b7ed6ad250980136ed63f7fd707090f2628f03384437d086fcfbb9fb54b13bedb38bf5615606a00c487c8971fa1ac70f2210542a87775a8f787f0beaa27bc253febd6e2fca66d0398be07f12b10bf2ca82148fc5d1da007dedf9c01a6c22671610ca04680197b38f9207d5d9b6f28fa1f6f7b7b72153049068098179d2fb7c7130f55401b407e822156bff653b9ff1f7f1f2a013237afd013af46214d034801b507eadd21ac5f5d054c8573e2d55d7534a39f843e1c42392b69fc41221c6a91044555846a51867a538737970053a17f2003d0bddbb789cf937f381021c46be5bc0cd5ac08bb8f3aac9e5d054c8503e2f21e1240c27f38f938e59004fbcd3ed44ae772565022c0050433b80a980af94388378fd51184a5f1578995bfdfd66482b22a435109140cdd5fef6b32c8dba34b80a9b000190004af66a5823de2fa8119f01c18c288cfe7feab0a5eeedd0d9c0c035c3f5447187924b6ea7dfafb0730027c4163883254733117df9e5c024c8701eecb230c3dc3ffa1ef610fecb7121fe66b41ec037a0587e038c054a81f4288d7f7e5113ade7c7d8878d804e9511fe802422ac000c46b6e044e8703680380f8d0f320f2ec0acc20e0cf1ecf8510665738fa817fe3e10c30250678102310a2bd5a88e1076b1f2a80febf0240781d4c022cc081a00931c0d54d71c4899f2dca00fd0f22e3f453ec331b08fa1f184008f5561041370227c60020b289f9dda6e6a99f5d55a2f3e112ce44ffdb6bab678f054c8505e2f543c9588045fa4068910665d8ac8006d6f4fdf13c6c0030cafac51960320c70fb54d10d340c003f910882c48fed7a4f75300303c006d0dfdd06980af943886400867b2ded0bde0052c1cab0dfc0383c10fe8517001710d2e0f5c191c0a9b0405cde212b5842c07880e8d0f98cfc6de00f8a1168601198e1e5ce19603a0c705b5005e06483cadb0f8185c5f217dd4000183982b3825e8033c054c86f4820623e08f76ec5d207a14d22c043801ab0645118826e044e8c0178da810602fc51918f2411101d0fbc6659434c0b7ff352e1a9b0405cde164764fb000d84becf0120c87d9c7ea0824c135f9464040782a6427ea880c7f2080c60ffa119c08a0052ed6bdf803c6184c120c701fe670e60e0eda402f77f5eeee20fc69b5fc807b06090e6feebb24c0fb74821810209136fde5d055cbcf32359202eefcb23743f53bf341184d14000427309038341601cf07544031d0a1e09f92ebf8cb8603008000f0161114fda2b00d141101d99c01614027338035cbef16359212eae0bf6082a2ba13b924329ed2d0804049046a07a04fb43d8ac5d058c8580975e47bcba2b6804d2d7870c001ec00c6089fd271b80f5012114b3103e5e9d012eddf8b17c3e2e1f8a23888e681f253fe3fe9208683600a401443fde505d1561fde4d1c0b110f0d2eb88cb27290fa7a107e34f51bfc080909687edb572480dc39533c0a5fb3e9acf9301240b48ae89aa5e61bf125e00ea02981ed6c403d6bf5c028c8682175e485cdc1564003bedc60c080957480645a5d01a95427013c546d838147ce1b68fe7e3716e6ee04242befb0f817d71fa1906ae0f61b7d6e718240ae1fdd98dc0f190f0b22b89f3eb4023104050bd13710f2203032024b0438e803c877430bc7775ef9541976dfb783e1de7b7818521f4fdad145c4f3a32810f44011b894024f0d16d80f190f0b22b89f31be9156cfd7f923d3083345040082d62b44a185ec287ab80cb767d449f8eb36538d2b803e8c36e206806a1f981c0030009687328be2fb80d3022fa5d7c29a2020cfed542506000c4042c59540b44cc3d740970f1be8f668178f52495410903601c40fe1926c093cf3e018206ba1b381afa5d7c2171712fd1c02405d8284a0c42217c1b0d846be8b1808bf77d340bc4d9b5198172eaf3292194005007600834095577d155c068e877f185d00648ab640323e8186a8348761043b3e8b9d8061f2f0e045dbcf32359802a40447e4654eb15a9c6a1b98625c0a1bdbb8123a15d2f9711170807c3c003e883241023fa5ee05f0e94da497510d04130834b805ef67e148b5002c0d8430c80529fa75c9b43322144d04040c0ec15b83bb817300ad2f573116203a00f201800114015f3c60c940ed9801018835b4f09eb67f747b04a02822c0b08a7dc0a4153af60e4046a2818afbf7b3ec00848d7cf25301f00279f0c90b586a7e8875b8854310807a8000d12ad1e3c18d4cff60fbf0a8d40b8762cff521b80279f46a18041789d99c3a80e2e82e7040e4fb7deae40904036811662d30844508879014d50881200b503076780de767f040b510530e843f9afbd8234411406211e608e942184da404f0a1d01e9fab904818255c4d3d0637998f2838e8e31db80cfd621bc7b71683fbb3f8255e2ec2a48af60b3f233a25322b044584022b3093c183402caf57409e205a8f897e48f2cf833cb54023c01cd0c5a794a584fdb3ffc3282049acb473750074923faa7563f9242a54184a0845e1c3a3ce1faba02cd099411611c0f576936104fbc968a29142c49216824d5d7d7fb3a43ef804403f591a6876979b8cd13ce2f12cfbd7b71e8d074ebedfbe3f297a68469d2474a0861bf20d1fb9632c66a61f408f29941bd1160e885e2d543ce00da31d4ba846b5c00ae1f0a43ac5b88db004393adbfef8f0b368a94ca603a035a112ce25ffa061005a42490b88033407f04187aa5385f221cac23e335fb9759c14c08c19430ab116c4ac4bd4bd8d064ebeffbc900d61b908c90d902323052becc52c521053e569e13d81f09865d894da2a4ec4b09cde210c9044af800f3055505d4681337ec45fbb7f7b70334020dff67545047c8596ea09586a16710c7c9a330c47180fe2830f04af11a2d62b40b08888cd30fb12fbd014425001d6c9a4916e1c353c206265b7f5f2f5e00ac7b847c2b691b6fa9608080393002c5a2da43105dc4573e3ebe3f0a0cbc529ca34fa0b60582afcf36f1da209ab304d92dac4c7d8321191c081a986a3d7e7d52014d0e80b68c833d60a9609623a0cce023637aa4c0c04bc5e54329194166fca9ee17fdaf25619d0ee2af0e050f4cb6febe9e3880257ad0efcf3282980d8c5a018c934182b00e94f6b981fd1160e89504074032281340a54b884904da063a418cf385314ab6f4d1b14313adcfef67bb7863002c6c1d43ed4b9823c08491a65d8ccf0dec9304c3ae15975a1d0c0990c4bc22bd9202a646613e2fc0934287a55a8fdf1eaf6ea55d3cc6c5c216e0b048a6891761a6f302304f889d42c00cb58f8ce971ff075f8a0c6023e2a1e3771817aba56018194bb5a063e4edf7f5ab97860d4eb99e2e80f30220ea9b09e1da1656cbc12d204423500b487c6c5c4fbb3f82656804e6c3a12c0f204d0a2d0a8e948314e084d15911566e038c8074fd5c42bcfda5c3a335e62f03a2241f50c6c9c2ff479528882f23655fee7d76703fdb3ffc2af1e6b13c02e0e1d028101b3500f0fd6d88144f3ed2c2caf49e179f1e3e3ce57aba82b80012780861be445688e0001c12cd717122fa991358498608a481a784f5b4fb2358265edf4b3e00c43bf4ff7e5793f8d60f08d728c3a3e46ac1206e038c80723d5d42bc7daed82e1e62bedee804517404435088fd01e59b9828329709e36fcf3e2fa0a7fd1f7c194a0043fb3817c08647707a582d51629d285e5545d86d313ddc7180c129d7d3052437107d022df98363623642e412d221881d603903ae027adafd112c936c006b12c52e616c13df84811910ca10c1b35e80a6948fe09efc12fe6007e2f2ae4ce5e1ac01b099f1b6485184d95c1244e101001b200374099e2a4bffe0dbfdad83ef405cde4a5ab8148108a12df66f29e1600cb8839c1c0a0678cc8020891b358fbc66247f3ebf557b8f4b8d31304079b40a20eb174cbb0f7d83ad2650cbc5d14f10347bfd2c2bf83bc43fc708836fc3cfbd00da00400139326e5f13f103e88fc00fb00169240d37a02910851b78f6f076a581edebb9e7bbcce2d566837061bc79ac8e10f16c14598aff8fdf658a88109f0d24c10cfab721812d9a7d41fc13132153039f9a0fce147f9d29e2cd13802041f8a43dbc7a01aa067005d0fb561e5ed721ac5f0408ead2e73395af4892dc8c0da5b0df1b90b159cf09ffd7096f5f10af1fc40b4803a4b528d48649b22a08c5229a140a23d118e0e42abb47b9cb11bf217ee20d27feff8df8f822868341a7dd4626454983084904e53f6b0ca1a3e5c100efab3f40023b043564d1aa8fd3dd8a93911e2d1bc399e2af3145bc7d991d71ba19f33f484308f60a04faafd9c07bcb11d022d18ff70e45548ca7a9339fd9035dbdd1711fcfda8ab9cb784eeffcb5adf9190b272088c69e460149178bfea9ffdf8c96ad5bd5c1d65780b4317731fb7cfa15cc64af7fa21aba5b9e4b8b7cc9f4fccfa0d15fbdcb78752349a1363bd0e60782b038f9781e4120b881901420a2a9809cf88901144c3c77d5f95caa4fefea0b719f5e9e985aa8aa32ecf77fa05a7b628b140b30d4cf90608482452a4884303fe11febdf5f28c3cbf681bcf5885db4eafbc4405de3f0dccd59fb9acf6e7c620cd1137dbf5c865e00c5ab7685b49e80696c8c896bd4052020841e41eb5adac8741eec36d651e42d66c80c3d7339452fe84327969e2c9cb5af31557082417c79abfe86733b9018802fdac1d691b17288a55b989d5648850d3a849cd1e3add98349698bf2cfe96c2369d39c02a37fd786e81880b646cbdbccdfe352e08fb93ca90031fcb435bceeb44d0f6792881a7178aec500da40aacb2ca4653687d896376392efd7d7f9bbfd77064d4a2e6147c09cd0db19e00206d0b27089fa894790334022580861636ea051ada5e71b66e1c9d74b32919fa2cd3683c08cc66c60353f7206144852240309ced2dc19e1db8cd052017622a54d7c06095bef4055f05b660b59869076961011a07367948019cc2ba892bc47ec0c049ce43a0933ab9ae87a1667ed83cc20345ec8a5c4b7efdedf18840192f1a5fa5ec7c78248ec22ab5d43edf46e3fa458d40c3e7bded448cb18d4d3488992119f7d07f54827699359780645e77645cb5eb47533229e93104ee3dfef00730293c8d5632410b07c900922da29c40ef916c52367d755775153ca722992184043cb220c3ab23acf46ead823c66c2db02927fe67f7e9eae0b71c10af1fcb236704da6954fcdf886f9f36daa08e70cb51b28d4f67ae636a35ab3604180039062036c2c9224d547a58d3896423e89ce20c2db4394579dca0f55df9ad75083d55c0a86f89462898a1601d1a95dc3de0ff3a4994d344f444e2c716bd824e0eaf8145cd70296005b5ba912c34d16ea38636b66ec6240e23cd624bb4540941880666f8f460e7b0829ffe2ff9252eb44fa00d89c4de5bfe5f72d9d4ce33896dc1216929ac9143eaf8ccb5cb74048d3c561549a999451b13a90de8d188a35cb5e82301a49adfed8e3e859595e80e147d497bbe81fd0108f4a413a89baea9e06ad76b204724c15e8dc2f415b6e9fad3fa0c1b11a413295c423532b5c6201f589998471147f30ac80a16484ad46f27a2b6a290fa1e770fbfc900660426571e95e06a049228aa9373f70c1220cd13341d9e190bc9ad83c1a7dea1218a0c3c711a69c310466cbe47cdcbc640cc71bfc673c899efb3d39e9837679cefedcb8f7917a3813c6519da27a08d4e0f57ff5cd040c1064c0524b73f838a45788bf107832d5516ab6b29865dd36da475ba73d3c2a867275a19b131561bece0845a6e107e9b8169045297ebc0c814cce1e96f903c9488a52252ed229e1dfab6d166ca1dd6bf320e194abd00bc2c1d471adc2141cdfa1ce5837ecf0916a0b6477afed426954bcb0d4297026799826e602efecf1a576a041a9180e009e8935820958eb19904ec07a6953573869ad432092499fecf3d8284061a6864ee290849a85a9982f5098d3af8ca204cbce05ec10913081268d0aa267c88df6da6396d7121aa6e3a19c088609fd1e00e3e978cc0ccef4766314f3dd2cd0d44b40053f2321aad4d989827dbfa189f878b4953750f8d27cf6100df711bbf2d3727f4468906a216a46e6a004425347ebd0c91684eb3d90cd878ba8c6608668c2308a210cf244257940b342c6ea19d52bafb997a90cf3441853c24cc6f36d7339748a612cea9802ef17eb85450159019771a9cb119c27662ad5ec0a4401a3343918fa291266720e5fe271fbebdeb34105bc11f39dd943a4845d3be042781a1aeae373ba56bf47589fa1923fc70e2832a2d064888a01242dcc046045b560763033654922365e4042b5ed332be8ca83953d4b5761ec5e7d41e20a3a12c2d486f02ac85323539e5929ed6d2f567886f46aa8047eac2768c3f0788da87915dc2a8466d56a012a56518c206601b9926ccdb300088a3465d16a7678ea112311980e6e79baac85c7c03899072c6e154568ba86ac2889f833ea652728f31bfc6138639a7bb7fb814f80f5feb7897890297480000000049454e44ae426082";

      const initDataView = new DataView(new ArrayBuffer(4906));
      const hex = hexStr.replace("0x", "");

      // Properly convert hex string to buffer
      for (let i = 0; i < hex.length; i += 2) {
        initDataView.setUint8(i / 2, parseInt(hex.substring(i, i + 2), 16)); // Fixed to parse 2 chars at a time
      }

      const compressed = lzssCompress(initDataView);
      const decompressed = lzssDecompress(compressed, 4906);

      // Compare decompressed with original
      for (let i = 0; i < initDataView.byteLength; i++) {
        expect(initDataView.getUint8(i)).toEqual(decompressed.getUint8(i));
      }

      // Test a second round of compression/decompression
      const compressed2 = lzssCompress(decompressed);
      const decompressed2 = lzssDecompress(compressed2, 4906);

      // Compare decompressed2 with original
      for (let i = 0; i < initDataView.byteLength; i++) {
        expect(initDataView.getUint8(i)).toEqual(decompressed2.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressed.byteLength / initDataView.byteLength;
      console.log(`PNG image compression ratio: ${ratio.toFixed(2)}`);
    });
    test("Existinig image data (problem tile 2)", () => {
      const hexStr =
        "0x89504e470d0a1a0a0000000d4948445200000080000000800806000000c33e61cb000000017352474200aece1ce90000200049444154785eed9dad7b5c49b2f45b4c505050d0d0d070a0e1c2812f7ce1fd132f1c6838d0505050ccf7c9ccf8454595dab396e4dd1960efb363b9d57dfa9caafc888cfca89b8f9f6fbf3d3d3e5feacfddfde5727b777bb9bdbdbd3c7d7dba3c3f5f2e7777b797e7e7e7fe993ff5dae5f6d2afd5ef2ef5befb79ede9ebbcf7b6de7c3bafdfd6ef9e9e2f8ffa5dbfff61beebf9e9b9bfeff6f6e2dfdfdd5de63397cba5eeedf969beb9dee3ef79accfad6bd47bfa7dfddabcb7fe3c3fea35fdbb7fa1fbabef7f7aaaebebe1eaf57afe7abe8beeeb2e9e732dc1f653ae433d0b0b707b7737f7514b54dff3fc7c797a8ce7985fcdeffaf9e6cdac75ffdd6b7c7cf12cb9feb3fffc9d5bfceecb371f3f5fbed5c2b1987dddfee2e759083679b6c08bdb0b2ec1c8cf3efe390f509b78f770db1bd697eb8d9c071d01d042ebb5fe5dddc71d9badcd799c079ccd1f01a8f795a0dddecf7b6b51e74d4b88fb6bea7d088a04601679fd2901b8e8f9eb4b2cdcdcab3668040ba90a85d066f4655b07e63d2d48ace5e57904edcae6cf7aaf1d9e1f43105200244c6b8f24e4a780bc420a6e3efe76f9c605e721462b6ba1ebffadd1da8016067ffb682d7f90e4a7af73fff70feb435884119ad9e4fb0fb391ad7d3c582d607d7f0996349ab5f1e63f972599cd1d8bb534a17e5e1b78e9456f6d2f8b101b82c663797adb62831f65fd5066ee711462361fed5c166794a5ffad0f7a5f4bc66465d27a6eebb7295a683d02c663a6401c96e015fbeeb7b600f030d6d6a7e7cbfdc35d2f5ab9026fb26eb217abff1366489bf6242daecd410bd1eac72fe5672e97870fb3e02c4a5da8dd9016707b10bd76ff30d2d616a66ea936bb0440025bbfc33dd475da75d4e66b6311142c4d5b0b2c5c7db6dcd0fd7caefe8f02d435e65acfe30e757363d2d7f511dabea6b4ba6d40cb0c3b55df59d2d8ef98f7c962d4c5da4a5cd1e614a4d4feedad6fb40237f71f2edfea7eda5c97bf931fedc57cc62faf07b07993a9ee676b3f3e9b61491726c0a095ff2f535d96a1fcbbfdae4c356e88f5d0da2d8daadb79920f958fc75f3ffef974b88f7211a3456925b685ecfb9de7c565b5204a534be01aa39460978bc1ba94cba9cdfa3a966b73191208fc765b9ecb5c63ac02425acf3f186b6e62042c37dffb99d626ac009298ef7b9305f8f0f1f2ad36a4367fc06099fed93624770739b381ad0de5636b53ca65c8ccd6462350e0072c4c69582faab433a5b9cdb780df2c048f2633d32643aff15201ccdbcbe5eb1799fab608b30c8f7fcedfe56a6c6dacbecb2db4c08377ecb3b5b1d2e45e9516ba5993b608e5cff5cce5248da3c222d5176f8843ee087739567484a12da770c4a6e502826985653a9665cee57aa514dc54140052ad8db47997ea0264acb1b7b717b4a37c25a81f73dc02200db5af5484516ea5ae53efc907d23aac5bdf711ae84a8e71f9615c4b69fb6cc65c6240e2fcfbe1536d9a841bf9b913d803814b334fdf6d05c0ec97966ab16dfe05fa7bb94a71a4b1e321e526754f4ba86371b5db630d76d46f9c81194d9faf6779b705f8f4f9f69b819d2496b0d02088855318561b597fbeb6e99d5f76b877372ea38197b4d3bbaab5c0158011e6bd6be300a27c773fbb801ea634c3a9fea4cc79ff18d8846b4d28b9c246a29ba7c7b2ff6395eeeee799788deba28df8780bd969a0640d0c3c4f210e1fcd3d2e6c50d862d60d3770fafdcd02c4b53663f94aedafb73b0a984dbc6b13f7f58fd1e2760b19832b46060d8396ebb35885128afaf3f0410b1a31361b979bdadf2b80c786b54f94a6f15ec24e6bb84df0ee871dc70b78b5f6d7e62b34b396117696f0b4b00e2e192b28d38d764b3b5b00017911bde022b8b711c49731bc853be2ff7e4d7c087c871f3d5cd6f65a5a8b58a737ecbf04400f5c5afcf8f87c79fc5251406dcc9dd0f973ff5c48196b510bd5be577e76acc2f8471609708623ccb0a7040c335ad766d1d0d6f1456315ebbde56a2afce3cf608659e912d4d1deb99fe60516be5a215e236d2177014003b9e03fd2771ba75d43f62cbe2240df9b7e70d88b85c2c2a2147d93f3e6171acffda5a90fcddf3ef30e21b8f9edf7db6fb5286d2291c442eb059e2a0c1491722feb004a2e20f7f8389bf0f0f1be9fa037400f9461d8ecc60268b3391026a581230d5fbf14a608360fbf5aa0ae50bdbe0ff0056bd6e16b994fb1861d6d7c90e004f9c23d95b5021734a9591b2376b39f3736c61b24e22ba31423f1700744c6032e8383c08d3d4e1481607798088b898fc77d9c2c6068fe55a1798309b8f9fcffefbeb1f0a650096f744136abfd23d2ad872ec168cb5180507e16f0770f0d7c053c618a41d7b5f0069041ee94364e6c0ebbb89345b61c411c956c15f8abbf894aac9d50cc02a210441381d477cd335a2331e566c196d6bed0c2a0463a2a08011e3a34029936fd7213b25856e443d3fd3df9fa5f5886d7c8c14d8140d3b715a36fe2bfc2a15a98128432d743a6cc1da44f5c0066ac894d3e929b260f6ca145c0f7820796b04dd8d8a65ac0d2481ce0cc170b398e46a359739fc3098ca6976baa3f5882663e8bf86a4b336a77650fb65c831541bc4992627679f87a36f800868b9c9230d4ef3bb49621252c6cae2522e3a465aedde82b24e0a67800805e9334ec9a366d21e6c2058396eda7e38b06a1031a8b49ab1d1000530cbdac87503949a5de8fb55198c48a0edacf3b4913142c6e056d3d5ccc22a804ee706b5885bbdb4b59a8c23c25606098160059405f4378a5d6c9ec237435ebc4e6c67dd8b4cb127813bdb67a6a0951af400a949665dbfcc3025f95d4d708c0fdc3e4026af340f20ec158f8ba2f21e9b664027abbf64b005a5b8b2b58c06ee8d08336861d836c915a0f1e59c91f7c64ba9ec6871b1329216944bf3284f35ce3423a7750ec9e184542b10297f59d454faf0d571e4414b09362ca108e2957bec274f08e730693cc5d9b1f10ebc87a274b84db6c39d2b3392c3ca28117ae67e9cf2bb67ede7af3504ca04c39269684109a678017a6b438ed95e27c721a19308900d4973c3e0e5f905c7adea9c33f52a1b51aa2a23b2d1d6195517c266622c9d41181c0ec09d296f6ce8a65c2a9040061c308026a9d057468b7acd5ecb0381c996a5cd4b6d16129f2f729d85cabac001112afb5022d08f63267f04657304c203c77b058686cc7eecae3d702de3fdcf7463605dc59b3e1b00b0c760ebf63e5028625204f97af5f1edbcc9aed53eedf024062c9966056aa3391cdfd8feb81976f0ebeb58ad86b68d95e3034a72dd6b20a68da964e868e9606df7f98dc7d0b45fdafaf39eec014edf36d6bbe3736dc726a6bee05908a6b18aef0d9e3cd7e96f0ffd6f878af41aa25e8d5ca3f16e0c3a7cb3783ab21c6fa4f833cc08798be79dff8542738647eac251452dc967f7d6a545dc230f840491199e1c983cb2cc777f6a24342957099cf5fe16a6d26425a20b62d67a5a04dbbbea4565b900a039079d4c30ea730d203c0adc76f6bd252a1eb92b0219174846993fc510109c102efadd795c606db20a4e90a3a0cded84fbe7b495bbae80d7cbe41061a04b6e628d1c1a6c34ad597d5c6378fdfb1fe48492d18406fcca9583455148d6528b37fd7d6a17e2e81407ba04c4bdb3aba2870d919324286951d7392a8d93725ab10c40e1f8561ca8c8b10a2e0e4f1cbca140e5fb02a9632f369ed976fc7ca10d7cfbad4834b60a32ec05a1eb9082c07c00e5268a299918e6db3111cf1161b3e9035636910b26dbfdfec02ba2064c226c0529bebd2f643a2b00aa3d1f35b361a92a52860b266b3db4bab1adc953029e61e63bb42cdc60a69cad1b0fe2a9e50c92059abb62c267b9655b8ff34bbf1f847a1bf55dae6705ea0144121ac0508b64581f6b56510c82c41a2540dad07a70487c0bdb92c8d84553d42b918e86c593340e3b6f0c908fea75cc0f0e7536c510b5426b76f029700825778d4396e272fe63330840f1fee49715b40ca6a98f695f0380696908d0519aea1fd7d102fcb2648e0142990eb873dec7a0699debbca4594d5a967c28fe7022a42e8cf04ca9e9fe5e72500533728d35c5106052c72557b84b3cb2ad8806ca5f98928755b9cc58a24fcccc1012430dc30c01bb5bf9ee8e6a130000f9a8596c5be89d9edea182582b00280b28e14c27d4c810424102657d46766dca45580aa891e14c2516422c1e4c15d3524538b6ba84d6e62ede358adb6082298c857b8e0752b211b6b82f5f202cbee6f891f59331483caa7b182cb54220c0b38467888c0141d1c3989ae44fa3af73d510c5a21307b4605c777be870b983050529d0520f86aeae640dd5d2e253f5f26bb1244f5ef065697f1f983f845c0b44d55ca55d1437dcef1b804ab8b4a7a17290f536e029f2c546c9e8aea9bd8f042f25d6ff0e714a8b40b08f760b745c6af177e78004c0716819a4317c6242b971a77d6e5052134267084110bd2e035595012595f2400c207ce119c2ce2a1ed697dde80018707a0968e7ab9bae854f58e7d1cbfbc7caf0b27e427a76c4af4ef517cb9121f249704ca7a41075c1221cc7aaddac089d355652c820790d778220a4f1ac957f6f2cfa7ae066aa14ea10908616281ec20fb1f82bb61116d6a2ef6849c7255103c111df8bb6571fa9e94c1b49560f3ebf3aa6c1e402eec546e026690ddfde902f0e9d21541ada8d4d08bbd223b988450d6d06d74af2cc1144eac92f229178bfa3ac7d113520e4b3811c3f84bd1c8aabdc3e59cc0685c0f2e63ad4a99d116e0280fdbeafe8c6c05e488f4e27a167a999b16d08c0e72f35b22c543487b0177562ca5b22d00bc1fe40fc1130ca74370934f2ff57bd37e872bafb303371f54159cc508a65ab9a8e360a98aeafa3bac6a299d4d1b4d1ec0d7a15f01bbe7e7feb9d7a9134834824414a1d768d2302f217099e0c79a17153e44235d084a834b6f9e4249212ac2a70d3be4a20bbbccc252d7b0ee936c274c29f7950011d067802a2d7e61b10e974228c9f66d350d81018c51afb99e3780410b003e1f406310536b91e649aa383840d9b3f2fd2ee8ac3b1361a4a2e7a68d7b33e10156a6902a9bc9d23ddadd988e8dac63af59134413fbdf57b22872fbd4019240eac5846954385a2f95db21fddc00b72a92647d26f10243b4361fb047b5d02a695fa58a6c1e88df5433059f7a03bf377b88550a734f68dbdf1b1602adcfc8e5753abfbfdb0290a8b51506b44c08a87cc132d363bea166298f76d8c3353a68d27b3bd313757b8a041a24a9041db36e01502ad8af0b244e0a57a85f5d37ad912514d4ef87bb591b48a1c8d0bdc303eca96361b71553fa85e52f36160face1678e6ea55cef0ea307e59bf2c5a8460149de2b3ffb6ff88f8836019b6f11849b87228268c91216b039ca005cdab4d0accaadc5c26101b228d2dd38ba3317568a5d9c3aff8935f1d31488189728164d01002f8ccb594011d6920d454b894aa04dcffe82861f6e6859d5454349efec211bb1c5e1027f6e552b3ab77dd19ec019a0bad2d38e6822c9e34d0cdfbf9461452b6cbaadfe1bcc7f5da3798034ffad45481702d0687f6e0d542a173b80abdc418537aac9735ea0ad8790b2b468f0c2eda5881afa055b23a226806292de98a06ee1175635ad289bdd62f77da2a1c4ffb3718309da5554fafbe3987e17821a7d4f68b853d0512b21800a103540a5adad04806a9fa8f7e75e58a717eb79720a911a6f6b4ba148beefc402af34032300296d68fa66fa572c6b30a39b7028e60e1bd2aa8aff85f4212b06e5af6cdfa8ff6cce16b6611a112aa941df9612555b22241331a1d1cd6aea33581962fc878f93a3d842ad603521b8e0421cf6d1671026bf2d82d6312b7ada924562c8e6ba19abd9adb6587c3c52db5b96b3efebd8dd9f50193444905ba057d184dbbc03ad26e7cec39af011e182598600418be6094755cdb0a97884c73a3b92d05a4abd711958a90921a3ca5717c23a4dbd3f26574d9d08ea834ac2d4dd64931ad604339f9680d7d21282ccbd8e14b47c58e1f566ee939a8ef06df231b1c961819d4c3a7900defe1e17e02f2eb35766b1845329d6ac66415a796d6975d4b0650a990a9c60edf88cb182cac2c01d9051ce50c2dad1ba96848e16cf8b0b8722bf8de61a27441f602681a082594b2c11c999bbee64aefa8783abcfcda3551db3adbe8a6e51abb0f8e3ee421d01e879b2b32a99c28573aed8f6779affbaa2a30024afea02eb9e9e60aeeadf47e2023e7c3454e55b0d6ed4b7afd87a98c46801370e587dfbd62e8a308472a7bd7cf9ebef11418479e08516d22841e367660894f04e6de38a626855a3bf1150ead902aa304afe9efbc1258263bc79b29ca47c5b00da7544797c083356ab892c3d8395a00a72a81b3c2d40b8ea57baff7e7b77079b7d2559214de92251f1f7f5e6cd14064d090ed8a65f408b469bb63cde585b112dd6de06678bf6b5e92eaba424917d79b276aeab5f03262c00f8d71e14212a9659011212d70baac9a43fdb994959350a5aa31864a2da35c700fa36852c337c5e9f2c08516a180636a907361e0573336d6cbef980f7ba80fb8f23000ad5b1d0ceccad5c00c596da28c5ad3dea85e28642d605ba58ac34d7caed5365d374b1081077127d514b5a5f23a67ba81c9ccdc21511ef77df8090fd24b6d0a255046a4ded0fcf1b58443610ed3d4d30e36ac60faf5d38f82295930d0dcdc68e8592f9075fe4081b2878b4be2d478ce58942d26444370178a3ff970bb8fdd6dad82a2e864e5ae50211496b6f741432dc55f74ddd6c54ddd665a82ba006af59be6a1c51ba13868c8dac70acbebf4cf1d4ee8b60ea3e8411a8ba265a3c71fd0293e0093e7b82c41751436c081cc1c2244b381a44aa5a6a2b85875d8cd072ac5360844ce1060194b8c9c033e6180124996fb034327096be6be322de62ffc100b3112a02916638f74e0993be1401289fd6e0489b3f1cbdf04257feac8ee1dedc2f32ab51b8c94692751c5268ed4e833855df7cad9cbf8095917f346a52d4622692983eb5d61a08f74a7cb618cdb1460a615503399d49abbb18c16d4e4161aaf1902c8cb5d5c2badad6b10ab96698fd51320da53836956823b57fe36cde2004371f7e9baa6062de34b34cf29a8d5db379ea011e3e4e79d7931a4487a39f8784a36751eaeff6ef6eac50aad9ab46edbeaa778288dad2d0ca3790a8c1d7db2c1381c83a0c829e2150bd2162e2a62e40d280c033dd2c04f44c1a358bd7f7bc2a939689d7408db0046e814728aa108459064d59cb5538b5ad82dbef947f3b14d43de47e735faf9581ae0a766c9b3e2a8b1fb5b17d7129cff8fedbd6ec66030bb56b03fa77bde9ba1db91434b8eb0ddd88bab47e29fff8f4ba1d6603116e98a6465155ae152173b370fd6bdd0fda58f8a436d1d60d131ecf8756b64794c0757f61a69e23d4cdf723cfee20a2f8433787eb1bd7380ad36b24e1cce82574632c2b7efe08fddebaf1084a13414e3dcac4baf25568d8fc3f804f5dbab5ca8f7fcca50873005b13122e9f580f87d04093f64620fde1826806adcf98c933d5169a93ed59d0d58e0a24002a6e61f3ebbeba37904d8135ac0d561b5aff2e46d68069f0cf2cdec63f443ea3d685d675107c0a64af43094055018555f446cb2a998f888aa514041b82778140598096f6d44a3de5c4d78af52144fedc4b9b89adf187adfd91dd6acd8faedc13cdf2a06dee3508aaf74053c030f9ce0b248a67159cd75fb38dda60f5c6ae9984d3d0b2ea0668c6249a997b636c9cb294f41d90f2cefefeb08a8e1e28eb52f869a590b075eb7aa7d2a305ee8ac59a9034d2c1cb71d983bd5708da05986a3dba8030a12c24e6b36e7cd0b1aa97c482a1559b592b73d7bb308bd90c23d9c0acb2690bb118b7c625b478a91a197f9ed4355ad8f718c594e3ae560f41167f16c9353826fb0657b20753dc7f2baaa96b4f1dc1d36c5c847269a21166b895168a28756f1c1424d7b81ab46d1145ce42261e880ee134fdef71036a0d530fbe3a63dbef1e84482f6ecf0dd4842c0d69f498b440c3bd40f5768589e3c446c4078cad3e840c731822e53903d0aa2aefa264ed6c14c98def906f01f9b13c99bca18f4056894198e4212826c14aade1191260e19a2dc9048f1215c7d64c4243b283f41b9405a09a5923726c41e1029cf48a717561991132afe16b116085819f7ebfed51b12cc4b461cda00450a77d11b4a3cc6ddfe781647bb1c5de391194371de362d315740c5f16a0ebe7c6a9356e3846c7ad8694c5433b1a888155c90db4e5d16859788ba496a76368b68c3949edbbb58b199ba3b1f441367e8a6250ac2080b87f474308e413a04ed6805077adc78a0600b7b6c6c1d64620b3b984d7c8c1cdc77fcd80880672311606f204fe1b7e1c307702165c42fbbb08c3b69ba9aa9f63f8f344061a28dde6f6a9f3108d94d513380fbf864aa3952325f30d46d835db88aaa1e7d5f6dd2493dc963b7034a0aa04c0da27d2aa92385d191d499ede7cdc8c7c8f0b601551b02e36fdb294fc3bcd3582c1efce67f1f349f11ce944aec3f8ef8d40b05d4085724ddc94068abb4fff4fd365fa591244eddf522a6b4f84a6b3b011378040d53529fe84bca104bc175a757a19c783ac1d12462957462a2515d3bf5042348527d520424f5ec8cd94be975bd0d490b67e02a2336768dc1e7e1c12067a7862e048fa9fb50200392c05a5ec24ad8a1b88da7f0b8e416d8480a14d2df0a7aabf41081c06e6f8f6f19973f56dd168220d2d4e2db480107fcbffb9fd4a37d86de6dd7ea6ce1c9575613e217f9c39231289a1cfad2d5e5c088cbd4cbc7b108bab28ab221a1ade7f5ccca29dd7dc8145053b72110b88a5e9cf6a9a2a20d4c3b3c4ed13f96c6d65c21d2e81af0b1da40f74b22bb06253cd00e6671082376c7e7df4e6ee8159c1b0818be532554918a8ee5a4b6c8488a0625b8e004646d5c20c938a5d851af69b7a98a68e55895c48bdd7a94c78d517881a4e32c77e16b3bc750dad2ce1061e457f4fc773349910768506421c2f139c55cd318534cac03a84956b31031a83a4b17ab676c54f309ea611b42aa5846b08c7ed2ed21ab4649ee6e0c7fe3de960f9b669cadc8b2cd1f0357869160c93ee0e1cdd0452ba3e1737a2b0b1df9a6c9ab4d916403c42bd5c96a219b31a140146d17068d3b0daa1a1b3176dd66b821512d2deea1629ff8a308d34f0c6f049829b9b88fc039b726da98757893a49065cb5c93f9a4d1599d8e2ea8234b94022b1e6e6c4b4e9ef0a032d00315bc7a697c9e6e2ce57be60ee10291fd338ac9e2d1256d959bb18c91299322364013900e4f879c919b9fc283a595c0200516954ea0f484645e68f6aa3ba6af207e7069e89319e0f5269db403c5968219f07d3c069108e829fe85e8232379d1ea96adc5c5ac99fc906ba26d09beb014d4b9b001c305368772ee4a6f95a5104643e27a9c76dc0f2c91c98f13a4caf5948064d432445d2a6efa3cbc0f64aa3095f09a946223be4a5c844a9e731c7390636dc2058a38490134b2244f477d3c042d85a194422a298856c2e43b9144ad4198f97b4f358a1455639dccd703c1267d72cd1bf7bede683a68567ad3c713112bcb159207eb53867f8c7971115782a176561c1bbf700879c1c9e99bccce675d3e9440c9d52ee668ec5129a793b35b081fb848ed64481c6d9b4118e59d441f9c344aecaa436f911d150dfd0d60eba5beeb3f101d78b831f6c0d241030818eb8ca6acad2b6c9776e6461322aa59679ddb7f55d2ee0c3bf6ebfd546388efe302295737909f59ad9a33e4e899e8ad5e1ef59589bbc700d1dbbeb10870aaf6a9267497bc5db537a16cd19cd44eaa0a94a37a71682a4e3c40e2f40600c879b54056fe71139e5efe35dc6ddac86d13117abbac75603bc42b653c51ecbecafaa21573f1703aa676fd7497829fec5d10c89210ddb22b44d2c900496a38210fe7fa7f1e7efbb3388cd87e46985c8f264d07bf7e1ede557848c486e0e384882a3c81dde5302507473157994ffebda02cdf343db217f5804e2f0c94784df5f84e05210d2d2c2351473107602ded610a8b114846c08a3b37af11d6e5ae9ac22790d692b42995347a80f20eed75a762a5d1359b2f2daa3f3d5e52c0f897c6ec4d74f6102ab267071ec636a17c858d5a82c8ae354e5ffeb1ca0de58a67a8688657845c164134065f22a442a01a80212591d8a25f8fe7625803821f0faf7aae25d4518a9813cc0d6a124538f4025bd4da36b09245a3f380717312a4624d4e63f8753e5f069551b136d2ce24842ce2494cb2840fda9e74f251c2c330bb9d53fb0b60112dfcd045214eaec9b561f50c884ee66cb208782ff77b5ad46b469dd660f0effd6e6cf6713aefcc34914d9472b858840c01c1a85bbdc6a6d54fb7b2d5c0a00e16dd2d4589919573f63f2cb1faf99810a795322234ce6796626a2e62270ac9d92637cb4e7128bcf20c46c812f524c3311add1473da1f73d0a449d087a87f9af8fde94002489c34d80f81b852b1b9735ed19038f460b8e46aede5a16e7faf57711aaebda4e9c48e40da614d313f77a9611e55b245aa28a76b31e314d94451cab126001d3aceee4998ca223ed040e4fbfe9884760750ed678d9626657a3e8c1d5cb5917492d25317d3496906eef3d56f4b2fc5c703f6f24814600ba1e604db9301993cd15305c942ec5d93800440f368a1bcd32314095336751380aabe7d85c654f63fee0e1f4e862eed03e4cf55c7f0d8400e583d8b7cb200412b832d708f7566b20ca177cd2cf2a361482699467f2050d3c8f926f300d6ec34a74443a6cac39016a0420cd08fdd63250bbeaeaa6b7b0816d01c89ffb0299de941967a3731873fa78adbfc79a6f5625349eecda8443eacd8f53c42c282ef008f32e8d8423da66194a4811a6c632dc54c4ca6c987f2581aaf7fa3c43cf2458df3d25eb8a82f8bd8665b5fba0e855e1e5ec93c96387a223b0f3db16d2a0d3c725cdefd32d12e55ccb286ecaff064bd0b9800c2d0c3ab8984c3a8838c3c0bae14c16155ee838bd338bea21a003b69e4b00d00fe981d02f0f4ccc8dea883ed2cca46e29f66051b3af70124a2274a4351dc1b9c96451de44270f1a2ee9f66ddc59a07bbb129f31ac4e228d9fe5fae326165fb0eeffc8ee49464cb219f82e808b90d02dfcc225f1c29b04a072016c3216372e8449ec1031626abb8a28c36a244b85b0fa0b31f9e00850b83b84f0b3512c311a30d6a1c34cf9575ac438b491ac216ea237ae7c3849a1b00000420330f1f1bee7027f1fe3e819995cb4af37484a0dc3d9ae438269a04acd016b18eecceee56cf3c6ddc6fa6f1348921a0e0b829179171174a76490af7b0a837ed14513710072660a7bd3d5e38e6020ad5808a513f60113ba36a0d0219ac81e72f1cbaccbb046070e1800b68f900e6a77e60e689a891a4f9a634200e8176056509e728ee58097a2efa1c2d64b753bcd2ec31662d657181dedeb4712c95a9ca039b289cc0270180c06c8d018217d046a851b000019eb4944415483e6f3fd37160080b12e9660064da38ab5a781e0af84112acca1e2968598fe80751cab0163d0a85b7e0190490347b49971cd168ac3dcb662e61136689d7210c4f35973d7875065c938ddc2a5d5753e31e4974f35398062e614a8050c6af9cc6d7458dde66c95abf7338171ed6ee422ae6cb4f1c3c903fc2c01e80dd24d0d8a5e95b2db5c1d57e208cc683053236167eed619c15b09969a257a70e2514904f879913dd30396152a4b63cdf39028dd4726ee655d108ce412866891f61eddc299c1c3f7e249b8df34bd0e2b8dd6257d58374055e0096bf759599c717e3a7a2e49a898eee91dfebf3e7a735b0521cea7af853cc326c7ea81051a8d47f9b6074d66f62bdbac05c23a1ea6ee4f1d32c3c02dbfdfcf58a5593a03b8ac095d42ae53acf764fb79f8d2c43568da96e6f539c4b33326aec846261b17134959ef1da4ceabed566262c91475f09abe27dad4325760614b2c845fa6c22a4d7e46c7efb500db4d639624b1ceb6658f7d3485661ab3635e66eed1635f0b2aad076d631e3d7f40255799851cb3be062833d089086233fb91f3b7e2842b834f05b7588385d40da2b078c135e43399fbbf9249ecfb496d24948e0d4ff60ec360422d4023eecef510588653380ecb9046e3477f6e0bb0f1df945381090026398255b36ceae67ba288b2877934fc42c573a16eefae8612080e5aa675a79396ddbb605851975729d6263a485c9061179bb100e10abd1254256e487e22c3cc119a29932ff7c6a923b4afd5be119d706d7712531226b7d8b822dd5456f7a60070be419b15cd36ca0a2a924d1486bec702dcde8b0a161b6860922024265562fa58bc2d95a922876c99e681cbe713229ee49e230a064d29dc342dad4df077da0ec3a99cce5fcd270895ea11f27b113672fc080d21261c830b382168a26114c5b129d786b9df8f461af325739f29787d1f2a30c1da3655ad7be63e095793604b6bf81616706100f8798625baf63d06212b0f3e37b91e045e1cd0e8f46dd8c4d46c7af0fad739e1cb295c75f036df3fa27d90c1ab5a4c3ef644f99934b25596100fb69857cf020fdccef4124e1b5bc6e3947025a0a49dad81a934d27c05fc458fc5a3b388eea897ddcbe9a29c4a57c4049194547adfc74bd9ff51ebdfef5b61a0f635cfd6cb1e2b1edaf13c664796029e80942e8b898060aea1530169c4e96d491a0becb37792d1cbcd8498eac885831dabfb87b1f13af3af4821ba84bc586411a35aa8c7cd50212c614f61060bb8844b29ed567a661b31cb48cf329660d1dd5dc7d02defb3d87d62ab19ceb56f5618b00dfd85ba2fafadf6fffd44109ac89c5d4ca6eec99b6fbe7d6f771a9a38cef8cd282004e5f495038062b43ca77911832bb53ae71144e9b6fa0b937c0281132ae286faeb3d0a57e72085c56b2b83450b66cfae50cfdcd7adb2347a0cc2dd016ea7dc7d0499c410c036c7e670f8c61c53ab6c6b80c88c484c0347a97b0ac0f8945729fdf6e6c905c482f7f58ec68f8e7569d0cc86cdd21af9af9c76e10e1e0bd05e4c61df2501687e0462461d4a6eef8a4ea5292619bab653c32abbf650cb8ce9014fa161de6b99318658e38759cb89edd7d81c6ff05d15713c69c8742472129491dc89b63236ec34df19462feb16dc71867fb16d6955dfa3fd76016d4ec9621d2ddbf0f2ad4874ab92c9a28c4bf1bd933169aa207182514b539ee66edcc3b08799c6e5215de0412126a3e540e226345615b21759d8a5fea28b07b39feecdb8845c84e2fbb108315d44e6190d37f0955fded653b8c3c45764fdfe0a5361097293bdf919fabec702545fc0903992e8e0d97bd07b90209ebecd0e52651bfdfbceab739074d0bbd6042d483ecc641007fd72e43ba3df6de5d44236807375d0b67fa6944d2ea57d7594b8dbecaaa9a47143cceaf5a9e51a07c3bfeb3d36d502c7f95940a0851aeb4429bcaaa731f54c3d8331edcf9d832014828f8b3c52c687c94778dfea066eee320c843c212174d4e479c174d3ce6bb78ba81d5745ecb13996170e728e86d2d37b2d84feb20e809234184147094736cdf3879845a0e7a88d9c587ebeb5075d6872289b4017b10734485b0d3a3b7a998159ed8534d3107058d7ad0ea6b16c61ced36a06684cb2c734ba867312fa198f44e22805eead9bdf2ea02d0026fb30252f488bd0984c6274dcea43a5d65066b0c03a50ead25dba2cd25884f5a599f3cf28c140088d569b1799c76df04498c62197d649a1162046dde84879a7b9a3322885bb374063660a6fe451b5fe6c1dfba68693160059a06931974070da68ac63ba967afead410445f36ebfac25783706a871f166c78e1b63e11d6aba246c9d2a6a06af36b3344c26ab5e4713ba555b9bc6916e5d151ccc9e352ccf26ee99417ba4d06b727405b5dfeed785c255a0d9b8456dd95d9469fe5fe63fce3e9a547770f90ccd3c387e9a377a4e62686ae606ba6c4c87610ca05c19d1596bf1280ce88c50b57ecfb83d2b2689a6b38ee06750c1d517e0d8de44d06a0bdb9a1b381c02ffde2aaca692d3966bc49b3581e64cba5d1136134c1a1251f9f86a045507719d500e105d99bae8ce8d0611df2b9d394c2be976741d5061a739375c15c1267d5cea154ce281018860ba6bf9f9d2a5dda5e5f775f680881f3a98d7500af9a838393d6f032b9509a1b3de02336f4c1056e1cad2fff04b371ffea559c1067fcac8e9128c64313f5e1b192d5d274509296382c6ac1b61dbca9acd9c8039c0a916af5179b3693332b67fd6798479dc0c2070063fcd8d26583d9f9eb38538357cc899d142c0e1d73f1ed7583ba69ae95cc136cd103f32378d1114eff708bafbdbcbd7ff7df2d837125e3908a38da369df45e18d302873e89942312626b814474d3f4b006a444c72d38d33ce61cf8431aa99a7065e0660789417d23d773d61952a7298b9df0bbfd2bbf6a98c6ad9c8a365d6397f30730dcc39def8f854af235c727ccf020a819f444d135b35df382389881c46134555abcef0eb1fe3424890e1d3cf4413a6fd1a8237228ae48ffd3cd1c26a9c1ec3f09e3090730313f061e6f0efb393a365ed4b235141abd4c9497b8144a8903de33a068898cda03d3b94765de0405f933f5d823d6605b4dfa63c8ead3b53c6fcdb758859c31f29d6dab8b40ec5facd86ca3d457da237516566f53c4dedeafd8d3f381f09ac1018632c9d423c8a7042582d1c84dadae4ff080f6034cd00cd1810eddf69c15b2818e9220a18e169f0a21abc51b09de6ed4d545bb8cfea91f5b342f6846e56625ec545a48f4793db7af53c40fa16a595146736aed1d46f255648d75a6834804a5658b7bedc8b672401babaa741e726d6a8371a3f544ae64152608c4e872f6b922e0ae2c974746bd74a94cdf3af727194d151d23b5d41cf07582197344f8727707c3838a029db886d6dfa65854c0bb7362e44eda48a4bccd6840ce851277695fa756807026ec4bc18925cb8258039c3503e3e295d4dfdc66214003cdd19b17b5b786864c92304506b79c7fad54ea676758daec9cd9dc41aef5bee21d71b4bb6c82009406cec56217c6c78ba8cfcee1ffdf9e6c3e789029a8410289a5c78ccce711822ad388a3960ac122c2509c2666d2e45c29055bb93b839809d0ea31e17b380d2687e98fee8c927a3e9b5d2c150e6f4ebc8180f9488c3ac23459dd549d7865b539bc809a64c0d837ba0fd8c3ac9c103121c8dbc41102d5891bfd8a384791287eb0ab5e54130b63fbae7dbfbe6cca028762024cc0320fded0af940e110865bfc1cf374378249174eb2c7c81e932f62a82b87e48f317923642b7d3ac6808885185f2798abe184620eb77d3ba9b5b2762cb49fa5cf3dae730d49d73e778857bffffa658ebd9fd4f71a0ed52ea07d92f68269a561be87ae5ef9845e87ccbed6a666f54f023be5172cd0fc0e5cb049c2ebe4605c80c7c169210385e38f726c1992884fa6566ea768934f06a9ca89fa88f9bd2388299e98d89cee418c5df7dadfa341151e552b2cb048ad092dfd280132d38a9e5ad51b5c615d65fefe78eacf57c75009f99fff5b83aae6fbbb154c65e5a8e6e0a3652587cbd0b7693936c5229996914aec9f019f966f22b460037f860014159c3d6fce6333cf37d8ba8c41eb61fba817a172a20167da8e36e9b122441351fd1b0737c2ace18aa62c2aab1ee8185a074c3807ef0e9dd9749332515f875b72e227075be1e7714d0c8916a349cf431140f5ecf4f64ff61213ad1670c6da70e0564c27e9e7a1a154f50fed6e9216b7395a918295fc10809f1206e29bb7ec588c7787e3b6b9a40aa8d9bd356675ccb57cb31e3eb38348f4d416acb1eefdba0162aa00afaf58d7c494c0e84a11cff70e31b5ba84c1036e26a98840099c3c37c02de3e16ad070c8ad16726a104431bb28a547fb2dce82a5f04c055aec0d2c67dd2613bb9f1492e1e119e32777f0decdaf7bec59c1ad2d54dc44c933a95962f7368f50bacae8d58267c70d374892a4e521064ab4bba127deacf8950e67d70b8a373f062f0d7095b0d927ad864f2c4e967af935845be364c77aad6ee204608863ef6d9571557530e3f2a3bbb7d6681336d50f381a8a4dce2459cb3ee7249c5cffe29a56759e00e0cfd8fc168002818e3bd91849694b719ce861691575fb57bdfb4e8992f0780163059878a0efa58889bd65036b1332e61fad8c4e5a99525ab1d2ba81a52cc4a2994d5f9f600adb1e4629cf36f4b5e58b19b3df63e04564391b19ddca58ad6c71eba84bb57f2c5586a22f6a06744fef15843e3002df0c11422b17281ef46af014091853c0e20830f908002e81f93ab088847499f9a2ecac2b82f0e35a5c34d05342389f6051ea5b9670f3a9a1493ee95c6416b8469e4bce5c7f6547503071594093e4545607399ad22ce91a5addf215e72a34c1058b290120dadd0a5ef48c2ff8809f910d6c01006506d7dcc98f20513275db020338c3779f8919d5076461857980c32dd4e55a2b237030db2853ea8a250a2d006b3e5bf89813243b9ed94c135afa1ec24adc145f8fdf4501181f7bba95d65446d36bc41be3edacbd743a3bcdbb0eccdc47d9ed24db48cb62040dc043e0afb9aa30563ff4e3cdc7cfebd4309b7c55f86448b5a67c8924a2e7ef078e7a717956cc12f06693c9b389d488c0ec00ee950e0a1abf1955c57bc209cd927fc55c52edac30d4256e3a5a6688a8bd88c426d65142e505a82718b0b903bd38f5937a039d41803b052012ed4cf8b8b2a4dff1962e0fdb3c55f2053fb4e5fb9bfac490ccae01f872a61ed248d1431687d6c670d40bbcfcca8baff97980a45e631d1b9b1ad91188441a69a7d60fc1dc58c378f0a188c7c3f7993e1e0d4f1e5e7823082fbb22aab614d9a456f5c6b0da021076415173009d4d289cd68b30755511edb58c0366a3752dc2ca2de6677922f63f2dd61bf67f8140873a32fb2ebe480ad620607d5567cf74d40bc7cec0968da4abf67dabd6c9d6ad1cec14831ce26c1d42bbc11159311c278469353ae7efec9ac232dd03263bef0b6163904586c27e4a7008cf90338d92ebb972c6310927ce1edca223c9674e284f622a85f11a29842579cbc6f3199d1ab634c4336e92598b34a8cd538e71e150867f7bd44b50b911fad4a2938a6ddfc9248f381184cda702697699aad9d921f31451ceb540a7a4028e20570dc4ded548c23e14c426a119fe1e02086096d60a967080eb6e7d1acb90750d8274e875788c45fd256e4ad3ff33b4bfae77f3b1c2c0334655f88769a3ba65922f1a1a51a64a20056b5117f4512ff2e10db044820ce4bdedfad1e6d2836574fd20a774d29f57a11ab97fea10b29c2c1671843338f996265904661c537113891f4cbdb57ff8ad957f8a527963a1c201e2fae7fe843754313cd6863e079da318099d537b5350acf9198686e93f2dd3fb2c400900a2851fd4f8136ecaa83867f09755384a9fa78f6f8d5299f4f16ac2446bfbf563365fb696ad36f33513b8d1b6082baeb3d667fd0434c86ce41977fb68d9d8d8653d82a5d4ca1222fa3d121014c361a114c759474e438d90d605ad47cedf02b157922f2230f91076fc9d00b02d0061a0b53d4a912c00f854921bc4d087e8d5ba9c47bd746164a55f39ea454994d4103fcf51f64d850de1e8e2f715f201c40a1b8037d83458b5380d9c2a9c0c2909f5287c99eb7c47a76092e2d72d1c8d9b56a571bf8d10ba63b995d3f07713469f5f150270923c2f6eeb6708c083c6c4798033c7c14bca97cf572ebecd6a54acd8192d1f562fcd512f6ac4d0512f5d62154d9e441ae9db180f579be50e21d1d33904b23eb328e8239912162d858bf54aa065e225b42ad71542e75cebed1a6139d9fcb4769201b9b2f0f30e2d9714bc10bee38bfdcf9fb0f96301aa2c9c922965f6c8c08d76ac8d67f41b12bff2df21f141a9b1d9dd3ea53ebec611a26e3d53686bd35a844e966e2598cb1672fcfe844c575625d8b26b6b96560ec1de5c8c8166a86a868c3151c548fddcd830dfc4fcbe5a004504257d3c46e7b406eff1fbf9d99b4fffbaedde40be20133bd0bc19336749360b469107f382fd90cd11a878c20730cfd7b35780bf3ebbd0f301173162f38fe569d55fa77a6282e7aae404c62c591eaef9cf6b2bb8a97edaf918fa9ac0ec8af9b6e6ffd50e7def7bd214ae04a816ec676df97e9d6102d5f2dd0b268904d50e5131d9c29ec21943a0662757c2c89f3d0e7fa876b0caa0cd418ceb80642a701b106a16af0b359d1f9f15f7a81609024ca20520863df8bec2aca7c66d4b109b611771acf5fa8eef6cc20bffa0f77dc74c6f50225d686e7adecc4f32f7d7ee7e4ac260a272f303e95295caa83626637b640a1d453a82be1b47e2a8979e1f2ce1690b1355b55b08d9c7d6adc99e0c60063913a6d5864cadbd4821d97130c2a648df59c8efae294a70eca1b1c2f750bade1f54fd94d287c5b0190ff228eff567c5f6afb1158e0258e4b3bd2a439d41f313bff7a632a8310e76c25db05950cb8479530b27137db48711367629d5dde5528d16f58766cb34e974f424fdeca4cd35bf9d1b7a4d63d3d9465eeac562be561b8348da8a3bce187f939cd76ce1fbde3b4ca038efbe872c728010121684d79e3afd29dc9c98de58715ce0c1a231d69d93315dfb579b1b840f9cf8ccd0b94cc97575107dbceb66109787f974ae35ec617209aa30396a08ac65afd9bcbf6943deb79daffff45800cc5a9ee63116767cbc7e3c4db1ff8d5f16fbc50741c5169c38e98368006e9c210cf599eec411f133c2544598d3a5e3f85a64125681df4d34b0dbefff14827efd72fff33e31074786c666b325266b1300f1d5e6a8979c48f3e3c0497d900c9a0f5510a398b4f1080bcd13d3b18b1b990150830df843a9f71e05bcac9afdb5f97f2d746d0140deab7032d2a08152c7ef46c78f414e8ce8e0fbd82cac881a4327d45321a436bd4db4a28999d871b79fc1a35d86a5cbcdc7e5bc48a49c3eff40dbff3c5dfc7beea879006aec16402ba0170d98b95100b742e1317cd1008748420290e11b7c81054e2de1f5e8152a96703c7c1c3ff4a2742a41da8b04d008ecb513357e59807f63017efb7f77df9a3409445e0a47feba072b34e72ec76a7f70349158f3573bf8ded3bfcac7692021e5f6f4e71471749f3df97e597b00e7c6d8b5368b1f40d3cf8e5f5e0f7cf2f7e8d83ffb5b6f7efbfdf65b155198cd4b73dcbd6c7b03a5f3a4a15aa6408ff2aeef1df5428bf93089abf57bd5c78f6f812318c26801d2a46cf96ef70208f21b075e29b5fe676fc97ff7ee6e3a19c4c61dae9c859ff06c9694fcc0222d94ed2252d0f48d398a4d9b5b3e9f0692a83822bc28ad47d0ba5903dc1053bec0095e9e83e3df5c4d4401d7d203ffdd25fe677fdbcdc343b486b1c9d9ac7954d064f66c0bb7e4fb27e49b210e19069a52e660882c36503ab7423d4e1d23fc2482c80455867e160c2670110686c7da08987ff67efcd7efeee6d3e7db6f64eb7a1e8feadaa692773f27e7c5dd45cc4d7c8ea9661e4f7dc69cbf8065697b6f1c53bb543892269fd12f73ac2b94ea5e713b564913b93a8c58d144deeb2f20f87db96a0c905db849eee4d4ab95ff966a4104f41eac89a2f555a5c554c176ad9f36b1ae870be9da80e840720956947fd57b7b8a97eebf9346bac632ed0ca95e19427f20f1c06b58c0ffba1efe7d5f78f3dbef77df88edb98d0ebb63161f5471e705987393bf97d518b55ee55e4c01732167207b57e038773e451d9d83d29490b62a253c4fcfdd9befc3a20aabd090a271ed3e4748d74b60facb02fc85052817b04060ceeae7e7c5c0958ea1b5ab2b77afcc5d3e799245e5c3aba192cf6db840c4d22678b6f74c181f3c3161a9ba7303d913c1908ae6fb3701f8a5fddf95809b8fc5043edc79ca16b4eb9a82392119169f6a2077d30a2b8c104d56691b3be7a192cb47d3609277352e46b1bd266c64e54fbb83fb313bd5fc810b70530bc413f38acf4aa05f427055086e3efd3620b0368ea60aa85a5707c5f16770f6bdd941f376591993ba18de9829cf007d6b20029943fc806604f914ee18efaacca4c7bde4c14a7a341a48323a49feea5734f052066e7efb7cfb6d66db16fbf7d466bb52b4b570eebf5758388b3faa44e4c0a20212a7df6ec6b2350917406f0622ccf5e722d13a4652491664ab4b086c4138b846c32c32698bf9d302fcd2feefbb80cf4d059379ab12eee1e21fbf7002928a389b6b5f93b95a40faec5c858e51a53b5cff0ad9b28ba60465fae865ee85ec3d1b301a360c078442b3d7bebf5f831cedf7632690434209cfdf87b3ffd9dfac286056a97c2ccd1d1da681c88b96a5e74e1d30d3d831337d9bc2f5a0e5e5c7d35d70dd76153db97b848c9cc308c99a533cd1650e850e36523d06dd7320e2698633add1f0ce5f8525f8676fc5df7377376501ce2c5d2d66e181067c8c5ccb5ec102765d165623d434284a6561003952b7a690a5ce149bf61c5e4fe89801d483e48f9943c286849fe77b0c0cc33da5f571a9f52f37701d04fefe3ff7dd1ededa2610c7f44c8622b9dc3a103eda56e9db9efdcfd818983f1fffb6c6c9cfd089757842fd4c66104b501b4c5d42599039db6f268ad327e00410a4119940c060b46259007eb982eb02d016409a083a9f586e15c56d19378d3903fc7561689f9039a119b97e08a13cb1a32960cdd2ebbb31754b8de1441244178d13f5ef72174350c9c5d008a24212c81ebe2f7900effd2f2bf042083a17d00b4d4bb5c89629fd5e25da5bf976b57a511aa6de3ba8df7419bd6183077bb3f320a6f9fc0c466a8a58d181c3cbb8554ef3c839439bf01cc2c4a0ce64007fb181d731c6ff015efb71a47b9afb430000000049454e44ae426082";
      const initDataView = new DataView(new ArrayBuffer(14909));
      const hex = hexStr.replace("0x", "");

      const hexLength = hex.length;
      console.log(`Hex length: ${hexLength}`);

      // Properly convert hex string to buffer
      for (let i = 0; i < hex.length; i += 2) {
        initDataView.setUint8(i / 2, parseInt(hex.substring(i, i + 2), 16)); // Fixed to parse 2 chars at a time
      }

      const compressed = lzssCompress(initDataView);
      const decompressed = lzssDecompress(compressed, 14909);

      // Compare decompressed with original
      for (let i = 0; i < initDataView.byteLength; i++) {
        expect(initDataView.getUint8(i)).toEqual(decompressed.getUint8(i));
      }

      // Test a second round of compression/decompression
      const compressed2 = lzssCompress(decompressed);
      const decompressed2 = lzssDecompress(compressed2, 14909);

      // Compare decompressed2 with original
      for (let i = 0; i < initDataView.byteLength; i++) {
        expect(initDataView.getUint8(i)).toEqual(decompressed2.getUint8(i));
      }

      // Log compression ratio
      const ratio = compressed.byteLength / initDataView.byteLength;
      console.log(`PNG image compression ratio: ${ratio.toFixed(2)}`);
    });
  });
});
