function nI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p5={exports:{}},Ux={},m5={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1=Symbol.for("react.element"),rI=Symbol.for("react.portal"),iI=Symbol.for("react.fragment"),sI=Symbol.for("react.strict_mode"),oI=Symbol.for("react.profiler"),aI=Symbol.for("react.provider"),lI=Symbol.for("react.context"),uI=Symbol.for("react.forward_ref"),cI=Symbol.for("react.suspense"),dI=Symbol.for("react.memo"),fI=Symbol.for("react.lazy"),Eb=Symbol.iterator;function hI(t){return t===null||typeof t!="object"?null:(t=Eb&&t[Eb]||t["@@iterator"],typeof t=="function"?t:null)}var g5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v5=Object.assign,_5={};function $p(t,e,n){this.props=t,this.context=e,this.refs=_5,this.updater=n||g5}$p.prototype.isReactComponent={};$p.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$p.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y5(){}y5.prototype=$p.prototype;function Z2(t,e,n){this.props=t,this.context=e,this.refs=_5,this.updater=n||g5}var Q2=Z2.prototype=new y5;Q2.constructor=Z2;v5(Q2,$p.prototype);Q2.isPureReactComponent=!0;var wb=Array.isArray,x5=Object.prototype.hasOwnProperty,J2={current:null},S5={key:!0,ref:!0,__self:!0,__source:!0};function E5(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x5.call(e,r)&&!S5.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:x1,type:t,key:s,ref:o,props:i,_owner:J2.current}}function pI(t,e){return{$$typeof:x1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eC(t){return typeof t=="object"&&t!==null&&t.$$typeof===x1}function mI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mb=/\/+/g;function QE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mI(""+t.key):e.toString(36)}function B_(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case x1:case rI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+QE(o,0):r,wb(i)?(n="",t!=null&&(n=t.replace(Mb,"$&/")+"/"),B_(i,e,n,"",function(u){return u})):i!=null&&(eC(i)&&(i=pI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Mb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+QE(s,a);o+=B_(s,e,n,l,i)}else if(l=hI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+QE(s,a++),o+=B_(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fv(t,e,n){if(t==null)return t;var r=[],i=0;return B_(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cs={current:null},z_={transition:null},vI={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:z_,ReactCurrentOwner:J2};function w5(){throw Error("act(...) is not supported in production builds of React.")}sn.Children={map:fv,forEach:function(t,e,n){fv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fv(t,function(){e++}),e},toArray:function(t){return fv(t,function(e){return e})||[]},only:function(t){if(!eC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};sn.Component=$p;sn.Fragment=iI;sn.Profiler=oI;sn.PureComponent=Z2;sn.StrictMode=sI;sn.Suspense=cI;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vI;sn.act=w5;sn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v5({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=J2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)x5.call(e,l)&&!S5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:x1,type:t.type,key:i,ref:s,props:r,_owner:o}};sn.createContext=function(t){return t={$$typeof:lI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aI,_context:t},t.Consumer=t};sn.createElement=E5;sn.createFactory=function(t){var e=E5.bind(null,t);return e.type=t,e};sn.createRef=function(){return{current:null}};sn.forwardRef=function(t){return{$$typeof:uI,render:t}};sn.isValidElement=eC;sn.lazy=function(t){return{$$typeof:fI,_payload:{_status:-1,_result:t},_init:gI}};sn.memo=function(t,e){return{$$typeof:dI,type:t,compare:e===void 0?null:e}};sn.startTransition=function(t){var e=z_.transition;z_.transition={};try{t()}finally{z_.transition=e}};sn.unstable_act=w5;sn.useCallback=function(t,e){return cs.current.useCallback(t,e)};sn.useContext=function(t){return cs.current.useContext(t)};sn.useDebugValue=function(){};sn.useDeferredValue=function(t){return cs.current.useDeferredValue(t)};sn.useEffect=function(t,e){return cs.current.useEffect(t,e)};sn.useId=function(){return cs.current.useId()};sn.useImperativeHandle=function(t,e,n){return cs.current.useImperativeHandle(t,e,n)};sn.useInsertionEffect=function(t,e){return cs.current.useInsertionEffect(t,e)};sn.useLayoutEffect=function(t,e){return cs.current.useLayoutEffect(t,e)};sn.useMemo=function(t,e){return cs.current.useMemo(t,e)};sn.useReducer=function(t,e,n){return cs.current.useReducer(t,e,n)};sn.useRef=function(t){return cs.current.useRef(t)};sn.useState=function(t){return cs.current.useState(t)};sn.useSyncExternalStore=function(t,e,n){return cs.current.useSyncExternalStore(t,e,n)};sn.useTransition=function(){return cs.current.useTransition()};sn.version="18.3.1";m5.exports=sn;var V=m5.exports;const Sn=y1(V),M5=nI({__proto__:null,default:Sn},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I=V,yI=Symbol.for("react.element"),xI=Symbol.for("react.fragment"),SI=Object.prototype.hasOwnProperty,EI=_I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wI={key:!0,ref:!0,__self:!0,__source:!0};function C5(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SI.call(e,r)&&!wI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yI,type:t,key:s,ref:o,props:i,_owner:EI.current}}Ux.Fragment=xI;Ux.jsx=C5;Ux.jsxs=C5;p5.exports=Ux;var k=p5.exports,A5={exports:{}},lo={},b5={exports:{}},P5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ae){var se=Y.length;Y.push(ae);e:for(;0<se;){var he=se-1>>>1,Me=Y[he];if(0<i(Me,ae))Y[he]=ae,Y[se]=Me,se=he;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ae=Y[0],se=Y.pop();if(se!==ae){Y[0]=se;e:for(var he=0,Me=Y.length,ze=Me>>>1;he<ze;){var ge=2*(he+1)-1,De=Y[ge],Xe=ge+1,Q=Y[Xe];if(0>i(De,se))Xe<Me&&0>i(Q,De)?(Y[he]=Q,Y[Xe]=se,he=Xe):(Y[he]=De,Y[ge]=se,he=ge);else if(Xe<Me&&0>i(Q,se))Y[he]=Q,Y[Xe]=se,he=Xe;else break e}}return ae}function i(Y,ae){var se=Y.sortIndex-ae.sortIndex;return se!==0?se:Y.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,m=null,g=3,v=!1,y=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=Y)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function A(Y){if(x=!1,E(Y),!y)if(n(l)!==null)y=!0,ne(L);else{var ae=n(u);ae!==null&&de(A,ae.startTime-Y)}}function L(Y,ae){y=!1,x&&(x=!1,_(O),O=-1),v=!0;var se=g;try{for(E(ae),m=n(l);m!==null&&(!(m.expirationTime>ae)||Y&&!z());){var he=m.callback;if(typeof he=="function"){m.callback=null,g=m.priorityLevel;var Me=he(m.expirationTime<=ae);ae=t.unstable_now(),typeof Me=="function"?m.callback=Me:m===n(l)&&r(l),E(ae)}else r(l);m=n(l)}if(m!==null)var ze=!0;else{var ge=n(u);ge!==null&&de(A,ge.startTime-ae),ze=!1}return ze}finally{m=null,g=se,v=!1}}var D=!1,U=null,O=-1,B=5,T=-1;function z(){return!(t.unstable_now()-T<B)}function W(){if(U!==null){var Y=t.unstable_now();T=Y;var ae=!0;try{ae=U(!0,Y)}finally{ae?K():(D=!1,U=null)}}else D=!1}var K;if(typeof M=="function")K=function(){M(W)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,te=Z.port2;Z.port1.onmessage=W,K=function(){te.postMessage(null)}}else K=function(){S(W,0)};function ne(Y){U=Y,D||(D=!0,K())}function de(Y,ae){O=S(function(){Y(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,ne(L))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var se=g;g=ae;try{return Y()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=g;g=Y;try{return ae()}finally{g=se}},t.unstable_scheduleCallback=function(Y,ae,se){var he=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?he+se:he):se=he,Y){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=se+Me,Y={id:d++,callback:ae,priorityLevel:Y,startTime:se,expirationTime:Me,sortIndex:-1},se>he?(Y.sortIndex=se,e(u,Y),n(l)===null&&Y===n(u)&&(x?(_(O),O=-1):x=!0,de(A,se-he))):(Y.sortIndex=Me,e(l,Y),y||v||(y=!0,ne(L))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var ae=g;return function(){var se=g;g=ae;try{return Y.apply(this,arguments)}finally{g=se}}}})(P5);b5.exports=P5;var s0=b5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI=V,io=s0;function Qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R5=new Set,b0={};function yf(t,e){Pp(t,e),Pp(t+"Capture",e)}function Pp(t,e){for(b0[t]=e,t=0;t<e.length;t++)R5.add(e[t])}var $l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ZM=Object.prototype.hasOwnProperty,CI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Ab={};function AI(t){return ZM.call(Ab,t)?!0:ZM.call(Cb,t)?!1:CI.test(t)?Ab[t]=!0:(Cb[t]=!0,!1)}function bI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PI(t,e,n,r){if(e===null||typeof e>"u"||bI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ds(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xi[t]=new ds(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xi[e]=new ds(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xi[t]=new ds(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xi[t]=new ds(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xi[t]=new ds(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xi[t]=new ds(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xi[t]=new ds(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xi[t]=new ds(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xi[t]=new ds(t,5,!1,t.toLowerCase(),null,!1,!1)});var tC=/[\-:]([a-z])/g;function nC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tC,nC);xi[e]=new ds(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tC,nC);xi[e]=new ds(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tC,nC);xi[e]=new ds(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xi[t]=new ds(t,1,!1,t.toLowerCase(),null,!1,!1)});xi.xlinkHref=new ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xi[t]=new ds(t,1,!1,t.toLowerCase(),null,!0,!0)});function rC(t,e,n,r){var i=xi.hasOwnProperty(e)?xi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PI(e,n,i,r)&&(n=null),r||i===null?AI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var au=MI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hv=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Jh=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),QM=Symbol.for("react.profiler"),T5=Symbol.for("react.provider"),L5=Symbol.for("react.context"),sC=Symbol.for("react.forward_ref"),JM=Symbol.for("react.suspense"),e3=Symbol.for("react.suspense_list"),oC=Symbol.for("react.memo"),ec=Symbol.for("react.lazy"),N5=Symbol.for("react.offscreen"),bb=Symbol.iterator;function vg(t){return t===null||typeof t!="object"?null:(t=bb&&t[bb]||t["@@iterator"],typeof t=="function"?t:null)}var ur=Object.assign,JE;function Kg(t){if(JE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);JE=e&&e[1]||""}return`
`+JE+t}var ew=!1;function tw(t,e){if(!t||ew)return"";ew=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ew=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kg(t):""}function RI(t){switch(t.tag){case 5:return Kg(t.type);case 16:return Kg("Lazy");case 13:return Kg("Suspense");case 19:return Kg("SuspenseList");case 0:case 2:case 15:return t=tw(t.type,!1),t;case 11:return t=tw(t.type.render,!1),t;case 1:return t=tw(t.type,!0),t;default:return""}}function t3(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jh:return"Fragment";case Qh:return"Portal";case QM:return"Profiler";case iC:return"StrictMode";case JM:return"Suspense";case e3:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L5:return(t.displayName||"Context")+".Consumer";case T5:return(t._context.displayName||"Context")+".Provider";case sC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oC:return e=t.displayName||null,e!==null?e:t3(t.type)||"Memo";case ec:e=t._payload,t=t._init;try{return t3(t(e))}catch{}}return null}function TI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t3(e);case 8:return e===iC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LI(t){var e=D5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pv(t){t._valueTracker||(t._valueTracker=LI(t))}function k5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function n3(t,e){var n=e.checked;return ur({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function F5(t,e){e=e.checked,e!=null&&rC(t,"checked",e,!1)}function r3(t,e){F5(t,e);var n=xc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?i3(t,e.type,n):e.hasOwnProperty("defaultValue")&&i3(t,e.type,xc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function i3(t,e,n){(e!=="number"||dy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $g=Array.isArray;function vp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function s3(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return ur({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Qe(92));if($g(n)){if(1<n.length)throw Error(Qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xc(n)}}function O5(t,e){var n=xc(e.value),r=xc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function o3(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mv,U5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mv=mv||document.createElement("div"),mv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function P0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var o0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NI=["Webkit","ms","Moz","O"];Object.keys(o0).forEach(function(t){NI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),o0[e]=o0[t]})});function B5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||o0.hasOwnProperty(t)&&o0[t]?(""+e).trim():e+"px"}function z5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=B5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var DI=ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a3(t,e){if(e){if(DI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Qe(62))}}function l3(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u3=null;function aC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c3=null,_p=null,yp=null;function Nb(t){if(t=w1(t)){if(typeof c3!="function")throw Error(Qe(280));var e=t.stateNode;e&&(e=Vx(e),c3(t.stateNode,t.type,e))}}function H5(t){_p?yp?yp.push(t):yp=[t]:_p=t}function G5(){if(_p){var t=_p,e=yp;if(yp=_p=null,Nb(t),e)for(t=0;t<e.length;t++)Nb(e[t])}}function V5(t,e){return t(e)}function W5(){}var nw=!1;function j5(t,e,n){if(nw)return t(e,n);nw=!0;try{return V5(t,e,n)}finally{nw=!1,(_p!==null||yp!==null)&&(W5(),G5())}}function R0(t,e){var n=t.stateNode;if(n===null)return null;var r=Vx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Qe(231,e,typeof n));return n}var d3=!1;if($l)try{var _g={};Object.defineProperty(_g,"passive",{get:function(){d3=!0}}),window.addEventListener("test",_g,_g),window.removeEventListener("test",_g,_g)}catch{d3=!1}function kI(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var a0=!1,fy=null,hy=!1,f3=null,FI={onError:function(t){a0=!0,fy=t}};function OI(t,e,n,r,i,s,o,a,l){a0=!1,fy=null,kI.apply(FI,arguments)}function II(t,e,n,r,i,s,o,a,l){if(OI.apply(this,arguments),a0){if(a0){var u=fy;a0=!1,fy=null}else throw Error(Qe(198));hy||(hy=!0,f3=u)}}function xf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function X5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Db(t){if(xf(t)!==t)throw Error(Qe(188))}function UI(t){var e=t.alternate;if(!e){if(e=xf(t),e===null)throw Error(Qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Db(i),t;if(s===r)return Db(i),e;s=s.sibling}throw Error(Qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Qe(189))}}if(n.alternate!==r)throw Error(Qe(190))}if(n.tag!==3)throw Error(Qe(188));return n.stateNode.current===n?t:e}function Y5(t){return t=UI(t),t!==null?q5(t):null}function q5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q5(t);if(e!==null)return e;t=t.sibling}return null}var K5=io.unstable_scheduleCallback,kb=io.unstable_cancelCallback,BI=io.unstable_shouldYield,zI=io.unstable_requestPaint,Mr=io.unstable_now,HI=io.unstable_getCurrentPriorityLevel,lC=io.unstable_ImmediatePriority,$5=io.unstable_UserBlockingPriority,py=io.unstable_NormalPriority,GI=io.unstable_LowPriority,Z5=io.unstable_IdlePriority,Bx=null,qa=null;function VI(t){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(Bx,t,void 0,(t.current.flags&128)===128)}catch{}}var da=Math.clz32?Math.clz32:XI,WI=Math.log,jI=Math.LN2;function XI(t){return t>>>=0,t===0?32:31-(WI(t)/jI|0)|0}var gv=64,vv=4194304;function Zg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function my(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Zg(a):(s&=o,s!==0&&(r=Zg(s)))}else o=n&~i,o!==0?r=Zg(o):s!==0&&(r=Zg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-da(e),i=1<<n,r|=t[n],e&=~i;return r}function YI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-da(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=YI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function h3(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q5(){var t=gv;return gv<<=1,!(gv&4194240)&&(gv=64),t}function rw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function S1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-da(e),t[e]=n}function KI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-da(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-da(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var An=0;function J5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eL,cC,tL,nL,rL,p3=!1,_v=[],cc=null,dc=null,fc=null,T0=new Map,L0=new Map,rc=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fb(t,e){switch(t){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":dc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":T0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":L0.delete(e.pointerId)}}function yg(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=w1(e),e!==null&&cC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ZI(t,e,n,r,i){switch(e){case"focusin":return cc=yg(cc,t,e,n,r,i),!0;case"dragenter":return dc=yg(dc,t,e,n,r,i),!0;case"mouseover":return fc=yg(fc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return T0.set(s,yg(T0.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,L0.set(s,yg(L0.get(s)||null,t,e,n,r,i)),!0}return!1}function iL(t){var e=qd(t.target);if(e!==null){var n=xf(e);if(n!==null){if(e=n.tag,e===13){if(e=X5(n),e!==null){t.blockedOn=e,rL(t.priority,function(){tL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function H_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=m3(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);u3=r,n.target.dispatchEvent(r),u3=null}else return e=w1(n),e!==null&&cC(e),t.blockedOn=n,!1;e.shift()}return!0}function Ob(t,e,n){H_(t)&&n.delete(e)}function QI(){p3=!1,cc!==null&&H_(cc)&&(cc=null),dc!==null&&H_(dc)&&(dc=null),fc!==null&&H_(fc)&&(fc=null),T0.forEach(Ob),L0.forEach(Ob)}function xg(t,e){t.blockedOn===e&&(t.blockedOn=null,p3||(p3=!0,io.unstable_scheduleCallback(io.unstable_NormalPriority,QI)))}function N0(t){function e(i){return xg(i,t)}if(0<_v.length){xg(_v[0],t);for(var n=1;n<_v.length;n++){var r=_v[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cc!==null&&xg(cc,t),dc!==null&&xg(dc,t),fc!==null&&xg(fc,t),T0.forEach(e),L0.forEach(e),n=0;n<rc.length;n++)r=rc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rc.length&&(n=rc[0],n.blockedOn===null);)iL(n),n.blockedOn===null&&rc.shift()}var xp=au.ReactCurrentBatchConfig,gy=!0;function JI(t,e,n,r){var i=An,s=xp.transition;xp.transition=null;try{An=1,dC(t,e,n,r)}finally{An=i,xp.transition=s}}function e9(t,e,n,r){var i=An,s=xp.transition;xp.transition=null;try{An=4,dC(t,e,n,r)}finally{An=i,xp.transition=s}}function dC(t,e,n,r){if(gy){var i=m3(t,e,n,r);if(i===null)hw(t,e,r,vy,n),Fb(t,r);else if(ZI(i,t,e,n,r))r.stopPropagation();else if(Fb(t,r),e&4&&-1<$I.indexOf(t)){for(;i!==null;){var s=w1(i);if(s!==null&&eL(s),s=m3(t,e,n,r),s===null&&hw(t,e,r,vy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hw(t,e,r,null,n)}}var vy=null;function m3(t,e,n,r){if(vy=null,t=aC(r),t=qd(t),t!==null)if(e=xf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=X5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vy=t,null}function sL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HI()){case lC:return 1;case $5:return 4;case py:case GI:return 16;case Z5:return 536870912;default:return 16}default:return 16}}var oc=null,fC=null,G_=null;function oL(){if(G_)return G_;var t,e=fC,n=e.length,r,i="value"in oc?oc.value:oc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return G_=i.slice(t,1<r?1-r:void 0)}function V_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yv(){return!0}function Ib(){return!1}function uo(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yv:Ib,this.isPropagationStopped=Ib,this}return ur(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yv)},persist:function(){},isPersistent:yv}),e}var Zp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hC=uo(Zp),E1=ur({},Zp,{view:0,detail:0}),t9=uo(E1),iw,sw,Sg,zx=ur({},E1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sg&&(Sg&&t.type==="mousemove"?(iw=t.screenX-Sg.screenX,sw=t.screenY-Sg.screenY):sw=iw=0,Sg=t),iw)},movementY:function(t){return"movementY"in t?t.movementY:sw}}),Ub=uo(zx),n9=ur({},zx,{dataTransfer:0}),r9=uo(n9),i9=ur({},E1,{relatedTarget:0}),ow=uo(i9),s9=ur({},Zp,{animationName:0,elapsedTime:0,pseudoElement:0}),o9=uo(s9),a9=ur({},Zp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l9=uo(a9),u9=ur({},Zp,{data:0}),Bb=uo(u9),c9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=f9[t])?!!e[t]:!1}function pC(){return h9}var p9=ur({},E1,{key:function(t){if(t.key){var e=c9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=V_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pC,charCode:function(t){return t.type==="keypress"?V_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?V_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m9=uo(p9),g9=ur({},zx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zb=uo(g9),v9=ur({},E1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pC}),_9=uo(v9),y9=ur({},Zp,{propertyName:0,elapsedTime:0,pseudoElement:0}),x9=uo(y9),S9=ur({},zx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E9=uo(S9),w9=[9,13,27,32],mC=$l&&"CompositionEvent"in window,l0=null;$l&&"documentMode"in document&&(l0=document.documentMode);var M9=$l&&"TextEvent"in window&&!l0,aL=$l&&(!mC||l0&&8<l0&&11>=l0),Hb=" ",Gb=!1;function lL(t,e){switch(t){case"keyup":return w9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ep=!1;function C9(t,e){switch(t){case"compositionend":return uL(e);case"keypress":return e.which!==32?null:(Gb=!0,Hb);case"textInput":return t=e.data,t===Hb&&Gb?null:t;default:return null}}function A9(t,e){if(ep)return t==="compositionend"||!mC&&lL(t,e)?(t=oL(),G_=fC=oc=null,ep=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aL&&e.locale!=="ko"?null:e.data;default:return null}}var b9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b9[t.type]:e==="textarea"}function cL(t,e,n,r){H5(r),e=_y(e,"onChange"),0<e.length&&(n=new hC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var u0=null,D0=null;function P9(t){SL(t,0)}function Hx(t){var e=rp(t);if(k5(e))return t}function R9(t,e){if(t==="change")return e}var dL=!1;if($l){var aw;if($l){var lw="oninput"in document;if(!lw){var Wb=document.createElement("div");Wb.setAttribute("oninput","return;"),lw=typeof Wb.oninput=="function"}aw=lw}else aw=!1;dL=aw&&(!document.documentMode||9<document.documentMode)}function jb(){u0&&(u0.detachEvent("onpropertychange",fL),D0=u0=null)}function fL(t){if(t.propertyName==="value"&&Hx(D0)){var e=[];cL(e,D0,t,aC(t)),j5(P9,e)}}function T9(t,e,n){t==="focusin"?(jb(),u0=e,D0=n,u0.attachEvent("onpropertychange",fL)):t==="focusout"&&jb()}function L9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hx(D0)}function N9(t,e){if(t==="click")return Hx(e)}function D9(t,e){if(t==="input"||t==="change")return Hx(e)}function k9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pa=typeof Object.is=="function"?Object.is:k9;function k0(t,e){if(pa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ZM.call(e,i)||!pa(t[i],e[i]))return!1}return!0}function Xb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yb(t,e){var n=Xb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xb(n)}}function hL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pL(){for(var t=window,e=dy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dy(t.document)}return e}function gC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F9(t){var e=pL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hL(n.ownerDocument.documentElement,n)){if(r!==null&&gC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yb(n,s);var o=Yb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O9=$l&&"documentMode"in document&&11>=document.documentMode,tp=null,g3=null,c0=null,v3=!1;function qb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;v3||tp==null||tp!==dy(r)||(r=tp,"selectionStart"in r&&gC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),c0&&k0(c0,r)||(c0=r,r=_y(g3,"onSelect"),0<r.length&&(e=new hC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tp)))}function xv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var np={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},uw={},mL={};$l&&(mL=document.createElement("div").style,"AnimationEvent"in window||(delete np.animationend.animation,delete np.animationiteration.animation,delete np.animationstart.animation),"TransitionEvent"in window||delete np.transitionend.transition);function Gx(t){if(uw[t])return uw[t];if(!np[t])return t;var e=np[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mL)return uw[t]=e[n];return t}var gL=Gx("animationend"),vL=Gx("animationiteration"),_L=Gx("animationstart"),yL=Gx("transitionend"),xL=new Map,Kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pc(t,e){xL.set(t,e),yf(e,[t])}for(var cw=0;cw<Kb.length;cw++){var dw=Kb[cw],I9=dw.toLowerCase(),U9=dw[0].toUpperCase()+dw.slice(1);Pc(I9,"on"+U9)}Pc(gL,"onAnimationEnd");Pc(vL,"onAnimationIteration");Pc(_L,"onAnimationStart");Pc("dblclick","onDoubleClick");Pc("focusin","onFocus");Pc("focusout","onBlur");Pc(yL,"onTransitionEnd");Pp("onMouseEnter",["mouseout","mouseover"]);Pp("onMouseLeave",["mouseout","mouseover"]);Pp("onPointerEnter",["pointerout","pointerover"]);Pp("onPointerLeave",["pointerout","pointerover"]);yf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yf("onBeforeInput",["compositionend","keypress","textInput","paste"]);yf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qg));function $b(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,II(r,e,void 0,t),t.currentTarget=null}function SL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$b(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$b(i,a,u),s=l}}}if(hy)throw t=f3,hy=!1,f3=null,t}function Gn(t,e){var n=e[E3];n===void 0&&(n=e[E3]=new Set);var r=t+"__bubble";n.has(r)||(EL(e,t,2,!1),n.add(r))}function fw(t,e,n){var r=0;e&&(r|=4),EL(n,t,r,e)}var Sv="_reactListening"+Math.random().toString(36).slice(2);function F0(t){if(!t[Sv]){t[Sv]=!0,R5.forEach(function(n){n!=="selectionchange"&&(B9.has(n)||fw(n,!1,t),fw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sv]||(e[Sv]=!0,fw("selectionchange",!1,e))}}function EL(t,e,n,r){switch(sL(e)){case 1:var i=JI;break;case 4:i=e9;break;default:i=dC}n=i.bind(null,e,n,t),i=void 0,!d3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hw(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=qd(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}j5(function(){var u=s,d=aC(n),m=[];e:{var g=xL.get(t);if(g!==void 0){var v=hC,y=t;switch(t){case"keypress":if(V_(n)===0)break e;case"keydown":case"keyup":v=m9;break;case"focusin":y="focus",v=ow;break;case"focusout":y="blur",v=ow;break;case"beforeblur":case"afterblur":v=ow;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ub;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=r9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=_9;break;case gL:case vL:case _L:v=o9;break;case yL:v=x9;break;case"scroll":v=t9;break;case"wheel":v=E9;break;case"copy":case"cut":case"paste":v=l9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zb}var x=(e&4)!==0,S=!x&&t==="scroll",_=x?g!==null?g+"Capture":null:g;x=[];for(var M=u,E;M!==null;){E=M;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,_!==null&&(A=R0(M,_),A!=null&&x.push(O0(M,A,E)))),S)break;M=M.return}0<x.length&&(g=new v(g,y,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==u3&&(y=n.relatedTarget||n.fromElement)&&(qd(y)||y[Zl]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?qd(y):null,y!==null&&(S=xf(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(x=Ub,A="onMouseLeave",_="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(x=zb,A="onPointerLeave",_="onPointerEnter",M="pointer"),S=v==null?g:rp(v),E=y==null?g:rp(y),g=new x(A,M+"leave",v,n,d),g.target=S,g.relatedTarget=E,A=null,qd(d)===u&&(x=new x(_,M+"enter",y,n,d),x.target=E,x.relatedTarget=S,A=x),S=A,v&&y)t:{for(x=v,_=y,M=0,E=x;E;E=Eh(E))M++;for(E=0,A=_;A;A=Eh(A))E++;for(;0<M-E;)x=Eh(x),M--;for(;0<E-M;)_=Eh(_),E--;for(;M--;){if(x===_||_!==null&&x===_.alternate)break t;x=Eh(x),_=Eh(_)}x=null}else x=null;v!==null&&Zb(m,g,v,x,!1),y!==null&&S!==null&&Zb(m,S,y,x,!0)}}e:{if(g=u?rp(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var L=R9;else if(Vb(g))if(dL)L=D9;else{L=L9;var D=T9}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=N9);if(L&&(L=L(t,u))){cL(m,L,n,d);break e}D&&D(t,g,u),t==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&i3(g,"number",g.value)}switch(D=u?rp(u):window,t){case"focusin":(Vb(D)||D.contentEditable==="true")&&(tp=D,g3=u,c0=null);break;case"focusout":c0=g3=tp=null;break;case"mousedown":v3=!0;break;case"contextmenu":case"mouseup":case"dragend":v3=!1,qb(m,n,d);break;case"selectionchange":if(O9)break;case"keydown":case"keyup":qb(m,n,d)}var U;if(mC)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else ep?lL(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(aL&&n.locale!=="ko"&&(ep||O!=="onCompositionStart"?O==="onCompositionEnd"&&ep&&(U=oL()):(oc=d,fC="value"in oc?oc.value:oc.textContent,ep=!0)),D=_y(u,O),0<D.length&&(O=new Bb(O,t,null,n,d),m.push({event:O,listeners:D}),U?O.data=U:(U=uL(n),U!==null&&(O.data=U)))),(U=M9?C9(t,n):A9(t,n))&&(u=_y(u,"onBeforeInput"),0<u.length&&(d=new Bb("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=U))}SL(m,e)})}function O0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _y(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=R0(t,n),s!=null&&r.unshift(O0(t,s,i)),s=R0(t,e),s!=null&&r.push(O0(t,s,i))),t=t.return}return r}function Eh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=R0(n,s),l!=null&&o.unshift(O0(n,l,a))):i||(l=R0(n,s),l!=null&&o.push(O0(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var z9=/\r\n?/g,H9=/\u0000|\uFFFD/g;function Qb(t){return(typeof t=="string"?t:""+t).replace(z9,`
`).replace(H9,"")}function Ev(t,e,n){if(e=Qb(e),Qb(t)!==e&&n)throw Error(Qe(425))}function yy(){}var _3=null,y3=null;function x3(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S3=typeof setTimeout=="function"?setTimeout:void 0,G9=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,V9=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(t){return Jb.resolve(null).then(t).catch(W9)}:S3;function W9(t){setTimeout(function(){throw t})}function pw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),N0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);N0(e)}function hc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qp=Math.random().toString(36).slice(2),Ga="__reactFiber$"+Qp,I0="__reactProps$"+Qp,Zl="__reactContainer$"+Qp,E3="__reactEvents$"+Qp,j9="__reactListeners$"+Qp,X9="__reactHandles$"+Qp;function qd(t){var e=t[Ga];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zl]||n[Ga]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eP(t);t!==null;){if(n=t[Ga])return n;t=eP(t)}return e}t=n,n=t.parentNode}return null}function w1(t){return t=t[Ga]||t[Zl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Qe(33))}function Vx(t){return t[I0]||null}var w3=[],ip=-1;function Rc(t){return{current:t}}function Wn(t){0>ip||(t.current=w3[ip],w3[ip]=null,ip--)}function Un(t,e){ip++,w3[ip]=t.current,t.current=e}var Sc={},Wi=Rc(Sc),Ls=Rc(!1),of=Sc;function Rp(t,e){var n=t.type.contextTypes;if(!n)return Sc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ns(t){return t=t.childContextTypes,t!=null}function xy(){Wn(Ls),Wn(Wi)}function tP(t,e,n){if(Wi.current!==Sc)throw Error(Qe(168));Un(Wi,e),Un(Ls,n)}function wL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Qe(108,TI(t)||"Unknown",i));return ur({},n,r)}function Sy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sc,of=Wi.current,Un(Wi,t),Un(Ls,Ls.current),!0}function nP(t,e,n){var r=t.stateNode;if(!r)throw Error(Qe(169));n?(t=wL(t,e,of),r.__reactInternalMemoizedMergedChildContext=t,Wn(Ls),Wn(Wi),Un(Wi,t)):Wn(Ls),Un(Ls,n)}var zl=null,Wx=!1,mw=!1;function ML(t){zl===null?zl=[t]:zl.push(t)}function Y9(t){Wx=!0,ML(t)}function Tc(){if(!mw&&zl!==null){mw=!0;var t=0,e=An;try{var n=zl;for(An=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zl=null,Wx=!1}catch(i){throw zl!==null&&(zl=zl.slice(t+1)),K5(lC,Tc),i}finally{An=e,mw=!1}}return null}var sp=[],op=0,Ey=null,wy=0,To=[],Lo=0,af=null,Vl=1,Wl="";function Hd(t,e){sp[op++]=wy,sp[op++]=Ey,Ey=t,wy=e}function CL(t,e,n){To[Lo++]=Vl,To[Lo++]=Wl,To[Lo++]=af,af=t;var r=Vl;t=Wl;var i=32-da(r)-1;r&=~(1<<i),n+=1;var s=32-da(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vl=1<<32-da(e)+i|n<<i|r,Wl=s+t}else Vl=1<<s|n<<i|r,Wl=t}function vC(t){t.return!==null&&(Hd(t,1),CL(t,1,0))}function _C(t){for(;t===Ey;)Ey=sp[--op],sp[op]=null,wy=sp[--op],sp[op]=null;for(;t===af;)af=To[--Lo],To[Lo]=null,Wl=To[--Lo],To[Lo]=null,Vl=To[--Lo],To[Lo]=null}var to=null,eo=null,Kn=!1,aa=null;function AL(t,e){var n=Do(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,to=t,eo=hc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,to=t,eo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=af!==null?{id:Vl,overflow:Wl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Do(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,to=t,eo=null,!0):!1;default:return!1}}function M3(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C3(t){if(Kn){var e=eo;if(e){var n=e;if(!rP(t,e)){if(M3(t))throw Error(Qe(418));e=hc(n.nextSibling);var r=to;e&&rP(t,e)?AL(r,n):(t.flags=t.flags&-4097|2,Kn=!1,to=t)}}else{if(M3(t))throw Error(Qe(418));t.flags=t.flags&-4097|2,Kn=!1,to=t}}}function iP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;to=t}function wv(t){if(t!==to)return!1;if(!Kn)return iP(t),Kn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!x3(t.type,t.memoizedProps)),e&&(e=eo)){if(M3(t))throw bL(),Error(Qe(418));for(;e;)AL(t,e),e=hc(e.nextSibling)}if(iP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){eo=hc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}eo=null}}else eo=to?hc(t.stateNode.nextSibling):null;return!0}function bL(){for(var t=eo;t;)t=hc(t.nextSibling)}function Tp(){eo=to=null,Kn=!1}function yC(t){aa===null?aa=[t]:aa.push(t)}var q9=au.ReactCurrentBatchConfig;function Eg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Qe(309));var r=n.stateNode}if(!r)throw Error(Qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Qe(284));if(!n._owner)throw Error(Qe(290,t))}return t}function Mv(t,e){throw t=Object.prototype.toString.call(e),Error(Qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sP(t){var e=t._init;return e(t._payload)}function PL(t){function e(_,M){if(t){var E=_.deletions;E===null?(_.deletions=[M],_.flags|=16):E.push(M)}}function n(_,M){if(!t)return null;for(;M!==null;)e(_,M),M=M.sibling;return null}function r(_,M){for(_=new Map;M!==null;)M.key!==null?_.set(M.key,M):_.set(M.index,M),M=M.sibling;return _}function i(_,M){return _=vc(_,M),_.index=0,_.sibling=null,_}function s(_,M,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<M?(_.flags|=2,M):E):(_.flags|=2,M)):(_.flags|=1048576,M)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,M,E,A){return M===null||M.tag!==6?(M=Ew(E,_.mode,A),M.return=_,M):(M=i(M,E),M.return=_,M)}function l(_,M,E,A){var L=E.type;return L===Jh?d(_,M,E.props.children,A,E.key):M!==null&&(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ec&&sP(L)===M.type)?(A=i(M,E.props),A.ref=Eg(_,M,E),A.return=_,A):(A=$_(E.type,E.key,E.props,null,_.mode,A),A.ref=Eg(_,M,E),A.return=_,A)}function u(_,M,E,A){return M===null||M.tag!==4||M.stateNode.containerInfo!==E.containerInfo||M.stateNode.implementation!==E.implementation?(M=ww(E,_.mode,A),M.return=_,M):(M=i(M,E.children||[]),M.return=_,M)}function d(_,M,E,A,L){return M===null||M.tag!==7?(M=tf(E,_.mode,A,L),M.return=_,M):(M=i(M,E),M.return=_,M)}function m(_,M,E){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Ew(""+M,_.mode,E),M.return=_,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case hv:return E=$_(M.type,M.key,M.props,null,_.mode,E),E.ref=Eg(_,null,M),E.return=_,E;case Qh:return M=ww(M,_.mode,E),M.return=_,M;case ec:var A=M._init;return m(_,A(M._payload),E)}if($g(M)||vg(M))return M=tf(M,_.mode,E,null),M.return=_,M;Mv(_,M)}return null}function g(_,M,E,A){var L=M!==null?M.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(_,M,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hv:return E.key===L?l(_,M,E,A):null;case Qh:return E.key===L?u(_,M,E,A):null;case ec:return L=E._init,g(_,M,L(E._payload),A)}if($g(E)||vg(E))return L!==null?null:d(_,M,E,A,null);Mv(_,E)}return null}function v(_,M,E,A,L){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(E)||null,a(M,_,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case hv:return _=_.get(A.key===null?E:A.key)||null,l(M,_,A,L);case Qh:return _=_.get(A.key===null?E:A.key)||null,u(M,_,A,L);case ec:var D=A._init;return v(_,M,E,D(A._payload),L)}if($g(A)||vg(A))return _=_.get(E)||null,d(M,_,A,L,null);Mv(M,A)}return null}function y(_,M,E,A){for(var L=null,D=null,U=M,O=M=0,B=null;U!==null&&O<E.length;O++){U.index>O?(B=U,U=null):B=U.sibling;var T=g(_,U,E[O],A);if(T===null){U===null&&(U=B);break}t&&U&&T.alternate===null&&e(_,U),M=s(T,M,O),D===null?L=T:D.sibling=T,D=T,U=B}if(O===E.length)return n(_,U),Kn&&Hd(_,O),L;if(U===null){for(;O<E.length;O++)U=m(_,E[O],A),U!==null&&(M=s(U,M,O),D===null?L=U:D.sibling=U,D=U);return Kn&&Hd(_,O),L}for(U=r(_,U);O<E.length;O++)B=v(U,_,O,E[O],A),B!==null&&(t&&B.alternate!==null&&U.delete(B.key===null?O:B.key),M=s(B,M,O),D===null?L=B:D.sibling=B,D=B);return t&&U.forEach(function(z){return e(_,z)}),Kn&&Hd(_,O),L}function x(_,M,E,A){var L=vg(E);if(typeof L!="function")throw Error(Qe(150));if(E=L.call(E),E==null)throw Error(Qe(151));for(var D=L=null,U=M,O=M=0,B=null,T=E.next();U!==null&&!T.done;O++,T=E.next()){U.index>O?(B=U,U=null):B=U.sibling;var z=g(_,U,T.value,A);if(z===null){U===null&&(U=B);break}t&&U&&z.alternate===null&&e(_,U),M=s(z,M,O),D===null?L=z:D.sibling=z,D=z,U=B}if(T.done)return n(_,U),Kn&&Hd(_,O),L;if(U===null){for(;!T.done;O++,T=E.next())T=m(_,T.value,A),T!==null&&(M=s(T,M,O),D===null?L=T:D.sibling=T,D=T);return Kn&&Hd(_,O),L}for(U=r(_,U);!T.done;O++,T=E.next())T=v(U,_,O,T.value,A),T!==null&&(t&&T.alternate!==null&&U.delete(T.key===null?O:T.key),M=s(T,M,O),D===null?L=T:D.sibling=T,D=T);return t&&U.forEach(function(W){return e(_,W)}),Kn&&Hd(_,O),L}function S(_,M,E,A){if(typeof E=="object"&&E!==null&&E.type===Jh&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case hv:e:{for(var L=E.key,D=M;D!==null;){if(D.key===L){if(L=E.type,L===Jh){if(D.tag===7){n(_,D.sibling),M=i(D,E.props.children),M.return=_,_=M;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ec&&sP(L)===D.type){n(_,D.sibling),M=i(D,E.props),M.ref=Eg(_,D,E),M.return=_,_=M;break e}n(_,D);break}else e(_,D);D=D.sibling}E.type===Jh?(M=tf(E.props.children,_.mode,A,E.key),M.return=_,_=M):(A=$_(E.type,E.key,E.props,null,_.mode,A),A.ref=Eg(_,M,E),A.return=_,_=A)}return o(_);case Qh:e:{for(D=E.key;M!==null;){if(M.key===D)if(M.tag===4&&M.stateNode.containerInfo===E.containerInfo&&M.stateNode.implementation===E.implementation){n(_,M.sibling),M=i(M,E.children||[]),M.return=_,_=M;break e}else{n(_,M);break}else e(_,M);M=M.sibling}M=ww(E,_.mode,A),M.return=_,_=M}return o(_);case ec:return D=E._init,S(_,M,D(E._payload),A)}if($g(E))return y(_,M,E,A);if(vg(E))return x(_,M,E,A);Mv(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,M!==null&&M.tag===6?(n(_,M.sibling),M=i(M,E),M.return=_,_=M):(n(_,M),M=Ew(E,_.mode,A),M.return=_,_=M),o(_)):n(_,M)}return S}var Lp=PL(!0),RL=PL(!1),My=Rc(null),Cy=null,ap=null,xC=null;function SC(){xC=ap=Cy=null}function EC(t){var e=My.current;Wn(My),t._currentValue=e}function A3(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sp(t,e){Cy=t,xC=ap=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rs=!0),t.firstContext=null)}function Oo(t){var e=t._currentValue;if(xC!==t)if(t={context:t,memoizedValue:e,next:null},ap===null){if(Cy===null)throw Error(Qe(308));ap=t,Cy.dependencies={lanes:0,firstContext:t}}else ap=ap.next=t;return e}var Kd=null;function wC(t){Kd===null?Kd=[t]:Kd.push(t)}function TL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wC(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ql(t,r)}function Ql(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tc=!1;function MC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ql(t,n)}return i=r.interleaved,i===null?(e.next=e,wC(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ql(t,n)}function W_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uC(t,n)}}function oP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ay(t,e,n,r){var i=t.updateQueue;tc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var m=i.baseState;o=0,d=u=l=null,a=s;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(g=e,v=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){m=y.call(v,m,g);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,g=typeof y=="function"?y.call(v,m,g):y,g==null)break e;m=ur({},m,g);break e;case 2:tc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=v,l=m):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=m),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);uf|=o,t.lanes=o,t.memoizedState=m}}function aP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Qe(191,i));i.call(r)}}}var M1={},Ka=Rc(M1),U0=Rc(M1),B0=Rc(M1);function $d(t){if(t===M1)throw Error(Qe(174));return t}function CC(t,e){switch(Un(B0,e),Un(U0,t),Un(Ka,M1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:o3(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=o3(e,t)}Wn(Ka),Un(Ka,e)}function Np(){Wn(Ka),Wn(U0),Wn(B0)}function NL(t){$d(B0.current);var e=$d(Ka.current),n=o3(e,t.type);e!==n&&(Un(U0,t),Un(Ka,n))}function AC(t){U0.current===t&&(Wn(Ka),Wn(U0))}var sr=Rc(0);function by(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gw=[];function bC(){for(var t=0;t<gw.length;t++)gw[t]._workInProgressVersionPrimary=null;gw.length=0}var j_=au.ReactCurrentDispatcher,vw=au.ReactCurrentBatchConfig,lf=0,lr=null,Wr=null,oi=null,Py=!1,d0=!1,z0=0,K9=0;function Oi(){throw Error(Qe(321))}function PC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pa(t[n],e[n]))return!1;return!0}function RC(t,e,n,r,i,s){if(lf=s,lr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,j_.current=t===null||t.memoizedState===null?J9:eU,t=n(r,i),d0){s=0;do{if(d0=!1,z0=0,25<=s)throw Error(Qe(301));s+=1,oi=Wr=null,e.updateQueue=null,j_.current=tU,t=n(r,i)}while(d0)}if(j_.current=Ry,e=Wr!==null&&Wr.next!==null,lf=0,oi=Wr=lr=null,Py=!1,e)throw Error(Qe(300));return t}function TC(){var t=z0!==0;return z0=0,t}function Ba(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?lr.memoizedState=oi=t:oi=oi.next=t,oi}function Io(){if(Wr===null){var t=lr.alternate;t=t!==null?t.memoizedState:null}else t=Wr.next;var e=oi===null?lr.memoizedState:oi.next;if(e!==null)oi=e,Wr=t;else{if(t===null)throw Error(Qe(310));Wr=t,t={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},oi===null?lr.memoizedState=oi=t:oi=oi.next=t}return oi}function H0(t,e){return typeof e=="function"?e(t):e}function _w(t){var e=Io(),n=e.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=t;var r=Wr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((lf&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,lr.lanes|=d,uf|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,pa(r,e.memoizedState)||(Rs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,lr.lanes|=s,uf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yw(t){var e=Io(),n=e.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);pa(s,e.memoizedState)||(Rs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function DL(){}function kL(t,e){var n=lr,r=Io(),i=e(),s=!pa(r.memoizedState,i);if(s&&(r.memoizedState=i,Rs=!0),r=r.queue,LC(IL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||oi!==null&&oi.memoizedState.tag&1){if(n.flags|=2048,G0(9,OL.bind(null,n,r,i,e),void 0,null),ui===null)throw Error(Qe(349));lf&30||FL(n,e,i)}return i}function FL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OL(t,e,n,r){e.value=n,e.getSnapshot=r,UL(e)&&BL(t)}function IL(t,e,n){return n(function(){UL(e)&&BL(t)})}function UL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pa(t,n)}catch{return!0}}function BL(t){var e=Ql(t,1);e!==null&&fa(e,t,1,-1)}function lP(t){var e=Ba();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:t},e.queue=t,t=t.dispatch=Q9.bind(null,lr,t),[e.memoizedState,t]}function G0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zL(){return Io().memoizedState}function X_(t,e,n,r){var i=Ba();lr.flags|=t,i.memoizedState=G0(1|e,n,void 0,r===void 0?null:r)}function jx(t,e,n,r){var i=Io();r=r===void 0?null:r;var s=void 0;if(Wr!==null){var o=Wr.memoizedState;if(s=o.destroy,r!==null&&PC(r,o.deps)){i.memoizedState=G0(e,n,s,r);return}}lr.flags|=t,i.memoizedState=G0(1|e,n,s,r)}function uP(t,e){return X_(8390656,8,t,e)}function LC(t,e){return jx(2048,8,t,e)}function HL(t,e){return jx(4,2,t,e)}function GL(t,e){return jx(4,4,t,e)}function VL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WL(t,e,n){return n=n!=null?n.concat([t]):null,jx(4,4,VL.bind(null,e,t),n)}function NC(){}function jL(t,e){var n=Io();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function XL(t,e){var n=Io();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YL(t,e,n){return lf&21?(pa(n,e)||(n=Q5(),lr.lanes|=n,uf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rs=!0),t.memoizedState=n)}function $9(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var r=vw.transition;vw.transition={};try{t(!1),e()}finally{An=n,vw.transition=r}}function qL(){return Io().memoizedState}function Z9(t,e,n){var r=gc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KL(t))$L(e,n);else if(n=TL(t,e,n,r),n!==null){var i=ss();fa(n,t,r,i),ZL(n,e,r)}}function Q9(t,e,n){var r=gc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KL(t))$L(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pa(a,o)){var l=e.interleaved;l===null?(i.next=i,wC(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=TL(t,e,i,r),n!==null&&(i=ss(),fa(n,t,r,i),ZL(n,e,r))}}function KL(t){var e=t.alternate;return t===lr||e!==null&&e===lr}function $L(t,e){d0=Py=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uC(t,n)}}var Ry={readContext:Oo,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},J9={readContext:Oo,useCallback:function(t,e){return Ba().memoizedState=[t,e===void 0?null:e],t},useContext:Oo,useEffect:uP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,X_(4194308,4,VL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return X_(4194308,4,t,e)},useInsertionEffect:function(t,e){return X_(4,2,t,e)},useMemo:function(t,e){var n=Ba();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ba();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Z9.bind(null,lr,t),[r.memoizedState,t]},useRef:function(t){var e=Ba();return t={current:t},e.memoizedState=t},useState:lP,useDebugValue:NC,useDeferredValue:function(t){return Ba().memoizedState=t},useTransition:function(){var t=lP(!1),e=t[0];return t=$9.bind(null,t[1]),Ba().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lr,i=Ba();if(Kn){if(n===void 0)throw Error(Qe(407));n=n()}else{if(n=e(),ui===null)throw Error(Qe(349));lf&30||FL(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,uP(IL.bind(null,r,s,t),[t]),r.flags|=2048,G0(9,OL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ba(),e=ui.identifierPrefix;if(Kn){var n=Wl,r=Vl;n=(r&~(1<<32-da(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=z0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eU={readContext:Oo,useCallback:jL,useContext:Oo,useEffect:LC,useImperativeHandle:WL,useInsertionEffect:HL,useLayoutEffect:GL,useMemo:XL,useReducer:_w,useRef:zL,useState:function(){return _w(H0)},useDebugValue:NC,useDeferredValue:function(t){var e=Io();return YL(e,Wr.memoizedState,t)},useTransition:function(){var t=_w(H0)[0],e=Io().memoizedState;return[t,e]},useMutableSource:DL,useSyncExternalStore:kL,useId:qL,unstable_isNewReconciler:!1},tU={readContext:Oo,useCallback:jL,useContext:Oo,useEffect:LC,useImperativeHandle:WL,useInsertionEffect:HL,useLayoutEffect:GL,useMemo:XL,useReducer:yw,useRef:zL,useState:function(){return yw(H0)},useDebugValue:NC,useDeferredValue:function(t){var e=Io();return Wr===null?e.memoizedState=t:YL(e,Wr.memoizedState,t)},useTransition:function(){var t=yw(H0)[0],e=Io().memoizedState;return[t,e]},useMutableSource:DL,useSyncExternalStore:kL,useId:qL,unstable_isNewReconciler:!1};function ia(t,e){if(t&&t.defaultProps){e=ur({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function b3(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ur({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xx={isMounted:function(t){return(t=t._reactInternals)?xf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ss(),i=gc(t),s=Xl(r,i);s.payload=e,n!=null&&(s.callback=n),e=pc(t,s,i),e!==null&&(fa(e,t,i,r),W_(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ss(),i=gc(t),s=Xl(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=pc(t,s,i),e!==null&&(fa(e,t,i,r),W_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ss(),r=gc(t),i=Xl(n,r);i.tag=2,e!=null&&(i.callback=e),e=pc(t,i,r),e!==null&&(fa(e,t,r,n),W_(e,t,r))}};function cP(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!k0(n,r)||!k0(i,s):!0}function QL(t,e,n){var r=!1,i=Sc,s=e.contextType;return typeof s=="object"&&s!==null?s=Oo(s):(i=Ns(e)?of:Wi.current,r=e.contextTypes,s=(r=r!=null)?Rp(t,i):Sc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xx.enqueueReplaceState(e,e.state,null)}function P3(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},MC(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Oo(s):(s=Ns(e)?of:Wi.current,i.context=Rp(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(b3(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xx.enqueueReplaceState(i,i.state,null),Ay(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dp(t,e){try{var n="",r=e;do n+=RI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function xw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function R3(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nU=typeof WeakMap=="function"?WeakMap:Map;function JL(t,e,n){n=Xl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ly||(Ly=!0,B3=r),R3(t,e)},n}function eN(t,e,n){n=Xl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){R3(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){R3(t,e),typeof r!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gU.bind(null,t,e,n),e.then(t,t))}function hP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xl(-1,1),e.tag=2,pc(n,e,1))),n.lanes|=1),t)}var rU=au.ReactCurrentOwner,Rs=!1;function rs(t,e,n,r){e.child=t===null?RL(e,null,n,r):Lp(e,t.child,n,r)}function mP(t,e,n,r,i){n=n.render;var s=e.ref;return Sp(e,i),r=RC(t,e,n,r,s,i),n=TC(),t!==null&&!Rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jl(t,e,i)):(Kn&&n&&vC(e),e.flags|=1,rs(t,e,r,i),e.child)}function gP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tN(t,e,s,r,i)):(t=$_(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:k0,n(o,r)&&t.ref===e.ref)return Jl(t,e,i)}return e.flags|=1,t=vc(s,r),t.ref=e.ref,t.return=e,e.child=t}function tN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(k0(s,r)&&t.ref===e.ref)if(Rs=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rs=!0);else return e.lanes=t.lanes,Jl(t,e,i)}return T3(t,e,n,r,i)}function nN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Un(up,Qs),Qs|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Un(up,Qs),Qs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Un(up,Qs),Qs|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Un(up,Qs),Qs|=r;return rs(t,e,i,n),e.child}function rN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function T3(t,e,n,r,i){var s=Ns(n)?of:Wi.current;return s=Rp(e,s),Sp(e,i),n=RC(t,e,n,r,s,i),r=TC(),t!==null&&!Rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jl(t,e,i)):(Kn&&r&&vC(e),e.flags|=1,rs(t,e,n,i),e.child)}function vP(t,e,n,r,i){if(Ns(n)){var s=!0;Sy(e)}else s=!1;if(Sp(e,i),e.stateNode===null)Y_(t,e),QL(e,n,r),P3(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Oo(u):(u=Ns(n)?of:Wi.current,u=Rp(e,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&dP(e,o,r,u),tc=!1;var g=e.memoizedState;o.state=g,Ay(e,r,o,i),l=e.memoizedState,a!==r||g!==l||Ls.current||tc?(typeof d=="function"&&(b3(e,n,d,r),l=e.memoizedState),(a=tc||cP(e,n,a,r,g,l,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ia(e.type,a),o.props=u,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Oo(l):(l=Ns(n)?of:Wi.current,l=Rp(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&dP(e,o,r,l),tc=!1,g=e.memoizedState,o.state=g,Ay(e,r,o,i);var y=e.memoizedState;a!==m||g!==y||Ls.current||tc?(typeof v=="function"&&(b3(e,n,v,r),y=e.memoizedState),(u=tc||cP(e,n,u,r,g,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return L3(t,e,n,r,s,i)}function L3(t,e,n,r,i,s){rN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&nP(e,n,!1),Jl(t,e,s);r=e.stateNode,rU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Lp(e,t.child,null,s),e.child=Lp(e,null,a,s)):rs(t,e,a,s),e.memoizedState=r.state,i&&nP(e,n,!0),e.child}function iN(t){var e=t.stateNode;e.pendingContext?tP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tP(t,e.context,!1),CC(t,e.containerInfo)}function _P(t,e,n,r,i){return Tp(),yC(i),e.flags|=256,rs(t,e,n,r),e.child}var N3={dehydrated:null,treeContext:null,retryLane:0};function D3(t){return{baseLanes:t,cachePool:null,transitions:null}}function sN(t,e,n){var r=e.pendingProps,i=sr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Un(sr,i&1),t===null)return C3(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Kx(o,r,0,null),t=tf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=D3(n),e.memoizedState=N3,t):DC(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iU(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=vc(a,s):(s=tf(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?D3(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=N3,r}return s=t.child,t=s.sibling,r=vc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function DC(t,e){return e=Kx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cv(t,e,n,r){return r!==null&&yC(r),Lp(e,t.child,null,n),t=DC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iU(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=xw(Error(Qe(422))),Cv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Kx({mode:"visible",children:r.children},i,0,null),s=tf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Lp(e,t.child,null,o),e.child.memoizedState=D3(o),e.memoizedState=N3,s);if(!(e.mode&1))return Cv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Qe(419)),r=xw(s,r,void 0),Cv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rs||a){if(r=ui,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ql(t,i),fa(r,t,i,-1))}return BC(),r=xw(Error(Qe(421))),Cv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,eo=hc(i.nextSibling),to=e,Kn=!0,aa=null,t!==null&&(To[Lo++]=Vl,To[Lo++]=Wl,To[Lo++]=af,Vl=t.id,Wl=t.overflow,af=e),e=DC(e,r.children),e.flags|=4096,e)}function yP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),A3(t.return,e,n)}function Sw(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function oN(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rs(t,e,r.children,n),r=sr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yP(t,n,e);else if(t.tag===19)yP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Un(sr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&by(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sw(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&by(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sw(e,!0,n,null,s);break;case"together":Sw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Y_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Qe(153));if(e.child!==null){for(t=e.child,n=vc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sU(t,e,n){switch(e.tag){case 3:iN(e),Tp();break;case 5:NL(e);break;case 1:Ns(e.type)&&Sy(e);break;case 4:CC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Un(My,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Un(sr,sr.current&1),e.flags|=128,null):n&e.child.childLanes?sN(t,e,n):(Un(sr,sr.current&1),t=Jl(t,e,n),t!==null?t.sibling:null);Un(sr,sr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return oN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Un(sr,sr.current),r)break;return null;case 22:case 23:return e.lanes=0,nN(t,e,n)}return Jl(t,e,n)}var aN,k3,lN,uN;aN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};k3=function(){};lN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$d(Ka.current);var s=null;switch(n){case"input":i=n3(t,i),r=n3(t,r),s=[];break;case"select":i=ur({},i,{value:void 0}),r=ur({},r,{value:void 0}),s=[];break;case"textarea":i=s3(t,i),r=s3(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yy)}a3(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(b0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(b0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Gn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};uN=function(t,e,n,r){n!==r&&(e.flags|=4)};function wg(t,e){if(!Kn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ii(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oU(t,e,n){var r=e.pendingProps;switch(_C(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(e),null;case 1:return Ns(e.type)&&xy(),Ii(e),null;case 3:return r=e.stateNode,Np(),Wn(Ls),Wn(Wi),bC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,aa!==null&&(G3(aa),aa=null))),k3(t,e),Ii(e),null;case 5:AC(e);var i=$d(B0.current);if(n=e.type,t!==null&&e.stateNode!=null)lN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Qe(166));return Ii(e),null}if(t=$d(Ka.current),wv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ga]=e,r[I0]=s,t=(e.mode&1)!==0,n){case"dialog":Gn("cancel",r),Gn("close",r);break;case"iframe":case"object":case"embed":Gn("load",r);break;case"video":case"audio":for(i=0;i<Qg.length;i++)Gn(Qg[i],r);break;case"source":Gn("error",r);break;case"img":case"image":case"link":Gn("error",r),Gn("load",r);break;case"details":Gn("toggle",r);break;case"input":Pb(r,s),Gn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Gn("invalid",r);break;case"textarea":Tb(r,s),Gn("invalid",r)}a3(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ev(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ev(r.textContent,a,t),i=["children",""+a]):b0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Gn("scroll",r)}switch(n){case"input":pv(r),Rb(r,s,!0);break;case"textarea":pv(r),Lb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ga]=e,t[I0]=r,aN(t,e,!1,!1),e.stateNode=t;e:{switch(o=l3(n,r),n){case"dialog":Gn("cancel",t),Gn("close",t),i=r;break;case"iframe":case"object":case"embed":Gn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qg.length;i++)Gn(Qg[i],t);i=r;break;case"source":Gn("error",t),i=r;break;case"img":case"image":case"link":Gn("error",t),Gn("load",t),i=r;break;case"details":Gn("toggle",t),i=r;break;case"input":Pb(t,r),i=n3(t,r),Gn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ur({},r,{value:void 0}),Gn("invalid",t);break;case"textarea":Tb(t,r),i=s3(t,r),Gn("invalid",t);break;default:i=r}a3(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?z5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&U5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&P0(t,l):typeof l=="number"&&P0(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(b0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Gn("scroll",t):l!=null&&rC(t,s,l,o))}switch(n){case"input":pv(t),Rb(t,r,!1);break;case"textarea":pv(t),Lb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?vp(t,!!r.multiple,s,!1):r.defaultValue!=null&&vp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ii(e),null;case 6:if(t&&e.stateNode!=null)uN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Qe(166));if(n=$d(B0.current),$d(Ka.current),wv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ga]=e,(s=r.nodeValue!==n)&&(t=to,t!==null))switch(t.tag){case 3:Ev(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ev(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ga]=e,e.stateNode=r}return Ii(e),null;case 13:if(Wn(sr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kn&&eo!==null&&e.mode&1&&!(e.flags&128))bL(),Tp(),e.flags|=98560,s=!1;else if(s=wv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Qe(317));s[Ga]=e}else Tp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ii(e),s=!1}else aa!==null&&(G3(aa),aa=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||sr.current&1?Xr===0&&(Xr=3):BC())),e.updateQueue!==null&&(e.flags|=4),Ii(e),null);case 4:return Np(),k3(t,e),t===null&&F0(e.stateNode.containerInfo),Ii(e),null;case 10:return EC(e.type._context),Ii(e),null;case 17:return Ns(e.type)&&xy(),Ii(e),null;case 19:if(Wn(sr),s=e.memoizedState,s===null)return Ii(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)wg(s,!1);else{if(Xr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=by(t),o!==null){for(e.flags|=128,wg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Un(sr,sr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Mr()>kp&&(e.flags|=128,r=!0,wg(s,!1),e.lanes=4194304)}else{if(!r)if(t=by(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Kn)return Ii(e),null}else 2*Mr()-s.renderingStartTime>kp&&n!==1073741824&&(e.flags|=128,r=!0,wg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mr(),e.sibling=null,n=sr.current,Un(sr,r?n&1|2:n&1),e):(Ii(e),null);case 22:case 23:return UC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qs&1073741824&&(Ii(e),e.subtreeFlags&6&&(e.flags|=8192)):Ii(e),null;case 24:return null;case 25:return null}throw Error(Qe(156,e.tag))}function aU(t,e){switch(_C(e),e.tag){case 1:return Ns(e.type)&&xy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Np(),Wn(Ls),Wn(Wi),bC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return AC(e),null;case 13:if(Wn(sr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Qe(340));Tp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wn(sr),null;case 4:return Np(),null;case 10:return EC(e.type._context),null;case 22:case 23:return UC(),null;case 24:return null;default:return null}}var Av=!1,Hi=!1,lU=typeof WeakSet=="function"?WeakSet:Set,Et=null;function lp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pr(t,e,r)}else n.current=null}function F3(t,e,n){try{n()}catch(r){pr(t,e,r)}}var xP=!1;function uU(t,e){if(_3=gy,t=pL(),gC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,m=t,g=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(a=o+i),m!==s||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++u===i&&(a=o),g===s&&++d===r&&(l=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(y3={focusedElem:t,selectionRange:n},gy=!1,Et=e;Et!==null;)if(e=Et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Et=t;else for(;Et!==null;){e=Et;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,S=y.memoizedState,_=e.stateNode,M=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:ia(e.type,x),S);_.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(A){pr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}return y=xP,xP=!1,y}function f0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&F3(e,n,s)}i=i.next}while(i!==r)}}function Yx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function O3(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cN(t){var e=t.alternate;e!==null&&(t.alternate=null,cN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ga],delete e[I0],delete e[E3],delete e[j9],delete e[X9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dN(t){return t.tag===5||t.tag===3||t.tag===4}function SP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function I3(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yy));else if(r!==4&&(t=t.child,t!==null))for(I3(t,e,n),t=t.sibling;t!==null;)I3(t,e,n),t=t.sibling}function U3(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(U3(t,e,n),t=t.sibling;t!==null;)U3(t,e,n),t=t.sibling}var vi=null,oa=!1;function Hu(t,e,n){for(n=n.child;n!==null;)fN(t,e,n),n=n.sibling}function fN(t,e,n){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(Bx,n)}catch{}switch(n.tag){case 5:Hi||lp(n,e);case 6:var r=vi,i=oa;vi=null,Hu(t,e,n),vi=r,oa=i,vi!==null&&(oa?(t=vi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vi.removeChild(n.stateNode));break;case 18:vi!==null&&(oa?(t=vi,n=n.stateNode,t.nodeType===8?pw(t.parentNode,n):t.nodeType===1&&pw(t,n),N0(t)):pw(vi,n.stateNode));break;case 4:r=vi,i=oa,vi=n.stateNode.containerInfo,oa=!0,Hu(t,e,n),vi=r,oa=i;break;case 0:case 11:case 14:case 15:if(!Hi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&F3(n,e,o),i=i.next}while(i!==r)}Hu(t,e,n);break;case 1:if(!Hi&&(lp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pr(n,e,a)}Hu(t,e,n);break;case 21:Hu(t,e,n);break;case 22:n.mode&1?(Hi=(r=Hi)||n.memoizedState!==null,Hu(t,e,n),Hi=r):Hu(t,e,n);break;default:Hu(t,e,n)}}function EP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lU),e.forEach(function(r){var i=_U.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vi=a.stateNode,oa=!1;break e;case 3:vi=a.stateNode.containerInfo,oa=!0;break e;case 4:vi=a.stateNode.containerInfo,oa=!0;break e}a=a.return}if(vi===null)throw Error(Qe(160));fN(s,o,i),vi=null,oa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){pr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hN(e,t),e=e.sibling}function hN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zo(e,t),Ia(t),r&4){try{f0(3,t,t.return),Yx(3,t)}catch(x){pr(t,t.return,x)}try{f0(5,t,t.return)}catch(x){pr(t,t.return,x)}}break;case 1:Zo(e,t),Ia(t),r&512&&n!==null&&lp(n,n.return);break;case 5:if(Zo(e,t),Ia(t),r&512&&n!==null&&lp(n,n.return),t.flags&32){var i=t.stateNode;try{P0(i,"")}catch(x){pr(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&F5(i,s),l3(a,o);var u=l3(a,s);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?z5(i,m):d==="dangerouslySetInnerHTML"?U5(i,m):d==="children"?P0(i,m):rC(i,d,m,u)}switch(a){case"input":r3(i,s);break;case"textarea":O5(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?vp(i,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?vp(i,!!s.multiple,s.defaultValue,!0):vp(i,!!s.multiple,s.multiple?[]:"",!1))}i[I0]=s}catch(x){pr(t,t.return,x)}}break;case 6:if(Zo(e,t),Ia(t),r&4){if(t.stateNode===null)throw Error(Qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){pr(t,t.return,x)}}break;case 3:if(Zo(e,t),Ia(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{N0(e.containerInfo)}catch(x){pr(t,t.return,x)}break;case 4:Zo(e,t),Ia(t);break;case 13:Zo(e,t),Ia(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(OC=Mr())),r&4&&EP(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Hi=(u=Hi)||d,Zo(e,t),Hi=u):Zo(e,t),Ia(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Et=t,d=t.child;d!==null;){for(m=Et=d;Et!==null;){switch(g=Et,v=g.child,g.tag){case 0:case 11:case 14:case 15:f0(4,g,g.return);break;case 1:lp(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){pr(r,n,x)}}break;case 5:lp(g,g.return);break;case 22:if(g.memoizedState!==null){MP(m);continue}}v!==null?(v.return=g,Et=v):MP(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{i=m.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=B5("display",o))}catch(x){pr(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(x){pr(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zo(e,t),Ia(t),r&4&&EP(t);break;case 21:break;default:Zo(e,t),Ia(t)}}function Ia(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dN(n)){var r=n;break e}n=n.return}throw Error(Qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(P0(i,""),r.flags&=-33);var s=SP(t);U3(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=SP(t);I3(t,a,o);break;default:throw Error(Qe(161))}}catch(l){pr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cU(t,e,n){Et=t,pN(t)}function pN(t,e,n){for(var r=(t.mode&1)!==0;Et!==null;){var i=Et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Av;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Hi;a=Av;var u=Hi;if(Av=o,(Hi=l)&&!u)for(Et=i;Et!==null;)o=Et,l=o.child,o.tag===22&&o.memoizedState!==null?CP(i):l!==null?(l.return=o,Et=l):CP(i);for(;s!==null;)Et=s,pN(s),s=s.sibling;Et=i,Av=a,Hi=u}wP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Et=s):wP(t)}}function wP(t){for(;Et!==null;){var e=Et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hi||Yx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ia(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&aP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}aP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&N0(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}Hi||e.flags&512&&O3(e)}catch(g){pr(e,e.return,g)}}if(e===t){Et=null;break}if(n=e.sibling,n!==null){n.return=e.return,Et=n;break}Et=e.return}}function MP(t){for(;Et!==null;){var e=Et;if(e===t){Et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Et=n;break}Et=e.return}}function CP(t){for(;Et!==null;){var e=Et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yx(4,e)}catch(l){pr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){pr(e,i,l)}}var s=e.return;try{O3(e)}catch(l){pr(e,s,l)}break;case 5:var o=e.return;try{O3(e)}catch(l){pr(e,o,l)}}}catch(l){pr(e,e.return,l)}if(e===t){Et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Et=a;break}Et=e.return}}var dU=Math.ceil,Ty=au.ReactCurrentDispatcher,kC=au.ReactCurrentOwner,Fo=au.ReactCurrentBatchConfig,vn=0,ui=null,Lr=null,_i=0,Qs=0,up=Rc(0),Xr=0,V0=null,uf=0,qx=0,FC=0,h0=null,bs=null,OC=0,kp=1/0,Bl=null,Ly=!1,B3=null,mc=null,bv=!1,ac=null,Ny=0,p0=0,z3=null,q_=-1,K_=0;function ss(){return vn&6?Mr():q_!==-1?q_:q_=Mr()}function gc(t){return t.mode&1?vn&2&&_i!==0?_i&-_i:q9.transition!==null?(K_===0&&(K_=Q5()),K_):(t=An,t!==0||(t=window.event,t=t===void 0?16:sL(t.type)),t):1}function fa(t,e,n,r){if(50<p0)throw p0=0,z3=null,Error(Qe(185));S1(t,n,r),(!(vn&2)||t!==ui)&&(t===ui&&(!(vn&2)&&(qx|=n),Xr===4&&ic(t,_i)),Ds(t,r),n===1&&vn===0&&!(e.mode&1)&&(kp=Mr()+500,Wx&&Tc()))}function Ds(t,e){var n=t.callbackNode;qI(t,e);var r=my(t,t===ui?_i:0);if(r===0)n!==null&&kb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kb(n),e===1)t.tag===0?Y9(AP.bind(null,t)):ML(AP.bind(null,t)),V9(function(){!(vn&6)&&Tc()}),n=null;else{switch(J5(r)){case 1:n=lC;break;case 4:n=$5;break;case 16:n=py;break;case 536870912:n=Z5;break;default:n=py}n=EN(n,mN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mN(t,e){if(q_=-1,K_=0,vn&6)throw Error(Qe(327));var n=t.callbackNode;if(Ep()&&t.callbackNode!==n)return null;var r=my(t,t===ui?_i:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dy(t,r);else{e=r;var i=vn;vn|=2;var s=vN();(ui!==t||_i!==e)&&(Bl=null,kp=Mr()+500,ef(t,e));do try{pU();break}catch(a){gN(t,a)}while(!0);SC(),Ty.current=s,vn=i,Lr!==null?e=0:(ui=null,_i=0,e=Xr)}if(e!==0){if(e===2&&(i=h3(t),i!==0&&(r=i,e=H3(t,i))),e===1)throw n=V0,ef(t,0),ic(t,r),Ds(t,Mr()),n;if(e===6)ic(t,r);else{if(i=t.current.alternate,!(r&30)&&!fU(i)&&(e=Dy(t,r),e===2&&(s=h3(t),s!==0&&(r=s,e=H3(t,s))),e===1))throw n=V0,ef(t,0),ic(t,r),Ds(t,Mr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Qe(345));case 2:Gd(t,bs,Bl);break;case 3:if(ic(t,r),(r&130023424)===r&&(e=OC+500-Mr(),10<e)){if(my(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ss(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=S3(Gd.bind(null,t,bs,Bl),e);break}Gd(t,bs,Bl);break;case 4:if(ic(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-da(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dU(r/1960))-r,10<r){t.timeoutHandle=S3(Gd.bind(null,t,bs,Bl),r);break}Gd(t,bs,Bl);break;case 5:Gd(t,bs,Bl);break;default:throw Error(Qe(329))}}}return Ds(t,Mr()),t.callbackNode===n?mN.bind(null,t):null}function H3(t,e){var n=h0;return t.current.memoizedState.isDehydrated&&(ef(t,e).flags|=256),t=Dy(t,e),t!==2&&(e=bs,bs=n,e!==null&&G3(e)),t}function G3(t){bs===null?bs=t:bs.push.apply(bs,t)}function fU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pa(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ic(t,e){for(e&=~FC,e&=~qx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-da(e),r=1<<n;t[n]=-1,e&=~r}}function AP(t){if(vn&6)throw Error(Qe(327));Ep();var e=my(t,0);if(!(e&1))return Ds(t,Mr()),null;var n=Dy(t,e);if(t.tag!==0&&n===2){var r=h3(t);r!==0&&(e=r,n=H3(t,r))}if(n===1)throw n=V0,ef(t,0),ic(t,e),Ds(t,Mr()),n;if(n===6)throw Error(Qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gd(t,bs,Bl),Ds(t,Mr()),null}function IC(t,e){var n=vn;vn|=1;try{return t(e)}finally{vn=n,vn===0&&(kp=Mr()+500,Wx&&Tc())}}function cf(t){ac!==null&&ac.tag===0&&!(vn&6)&&Ep();var e=vn;vn|=1;var n=Fo.transition,r=An;try{if(Fo.transition=null,An=1,t)return t()}finally{An=r,Fo.transition=n,vn=e,!(vn&6)&&Tc()}}function UC(){Qs=up.current,Wn(up)}function ef(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,G9(n)),Lr!==null)for(n=Lr.return;n!==null;){var r=n;switch(_C(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xy();break;case 3:Np(),Wn(Ls),Wn(Wi),bC();break;case 5:AC(r);break;case 4:Np();break;case 13:Wn(sr);break;case 19:Wn(sr);break;case 10:EC(r.type._context);break;case 22:case 23:UC()}n=n.return}if(ui=t,Lr=t=vc(t.current,null),_i=Qs=e,Xr=0,V0=null,FC=qx=uf=0,bs=h0=null,Kd!==null){for(e=0;e<Kd.length;e++)if(n=Kd[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Kd=null}return t}function gN(t,e){do{var n=Lr;try{if(SC(),j_.current=Ry,Py){for(var r=lr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Py=!1}if(lf=0,oi=Wr=lr=null,d0=!1,z0=0,kC.current=null,n===null||n.return===null){Xr=1,V0=e,Lr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_i,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=hP(o);if(v!==null){v.flags&=-257,pP(v,o,a,s,e),v.mode&1&&fP(s,u,e),e=v,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){fP(s,u,e),BC();break e}l=Error(Qe(426))}}else if(Kn&&a.mode&1){var S=hP(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),pP(S,o,a,s,e),yC(Dp(l,a));break e}}s=l=Dp(l,a),Xr!==4&&(Xr=2),h0===null?h0=[s]:h0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=JL(s,l,e);oP(s,_);break e;case 1:a=l;var M=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mc===null||!mc.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=eN(s,a,e);oP(s,A);break e}}s=s.return}while(s!==null)}yN(n)}catch(L){e=L,Lr===n&&n!==null&&(Lr=n=n.return);continue}break}while(!0)}function vN(){var t=Ty.current;return Ty.current=Ry,t===null?Ry:t}function BC(){(Xr===0||Xr===3||Xr===2)&&(Xr=4),ui===null||!(uf&268435455)&&!(qx&268435455)||ic(ui,_i)}function Dy(t,e){var n=vn;vn|=2;var r=vN();(ui!==t||_i!==e)&&(Bl=null,ef(t,e));do try{hU();break}catch(i){gN(t,i)}while(!0);if(SC(),vn=n,Ty.current=r,Lr!==null)throw Error(Qe(261));return ui=null,_i=0,Xr}function hU(){for(;Lr!==null;)_N(Lr)}function pU(){for(;Lr!==null&&!BI();)_N(Lr)}function _N(t){var e=SN(t.alternate,t,Qs);t.memoizedProps=t.pendingProps,e===null?yN(t):Lr=e,kC.current=null}function yN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aU(n,e),n!==null){n.flags&=32767,Lr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xr=6,Lr=null;return}}else if(n=oU(n,e,Qs),n!==null){Lr=n;return}if(e=e.sibling,e!==null){Lr=e;return}Lr=e=t}while(e!==null);Xr===0&&(Xr=5)}function Gd(t,e,n){var r=An,i=Fo.transition;try{Fo.transition=null,An=1,mU(t,e,n,r)}finally{Fo.transition=i,An=r}return null}function mU(t,e,n,r){do Ep();while(ac!==null);if(vn&6)throw Error(Qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(KI(t,s),t===ui&&(Lr=ui=null,_i=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bv||(bv=!0,EN(py,function(){return Ep(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fo.transition,Fo.transition=null;var o=An;An=1;var a=vn;vn|=4,kC.current=null,uU(t,n),hN(n,t),F9(y3),gy=!!_3,y3=_3=null,t.current=n,cU(n),zI(),vn=a,An=o,Fo.transition=s}else t.current=n;if(bv&&(bv=!1,ac=t,Ny=i),s=t.pendingLanes,s===0&&(mc=null),VI(n.stateNode),Ds(t,Mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ly)throw Ly=!1,t=B3,B3=null,t;return Ny&1&&t.tag!==0&&Ep(),s=t.pendingLanes,s&1?t===z3?p0++:(p0=0,z3=t):p0=0,Tc(),null}function Ep(){if(ac!==null){var t=J5(Ny),e=Fo.transition,n=An;try{if(Fo.transition=null,An=16>t?16:t,ac===null)var r=!1;else{if(t=ac,ac=null,Ny=0,vn&6)throw Error(Qe(331));var i=vn;for(vn|=4,Et=t.current;Et!==null;){var s=Et,o=s.child;if(Et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Et=u;Et!==null;){var d=Et;switch(d.tag){case 0:case 11:case 15:f0(8,d,s)}var m=d.child;if(m!==null)m.return=d,Et=m;else for(;Et!==null;){d=Et;var g=d.sibling,v=d.return;if(cN(d),d===u){Et=null;break}if(g!==null){g.return=v,Et=g;break}Et=v}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}Et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Et=o;else e:for(;Et!==null;){if(s=Et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:f0(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Et=_;break e}Et=s.return}}var M=t.current;for(Et=M;Et!==null;){o=Et;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Et=E;else e:for(o=M;Et!==null;){if(a=Et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yx(9,a)}}catch(L){pr(a,a.return,L)}if(a===o){Et=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Et=A;break e}Et=a.return}}if(vn=i,Tc(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(Bx,t)}catch{}r=!0}return r}finally{An=n,Fo.transition=e}}return!1}function bP(t,e,n){e=Dp(n,e),e=JL(t,e,1),t=pc(t,e,1),e=ss(),t!==null&&(S1(t,1,e),Ds(t,e))}function pr(t,e,n){if(t.tag===3)bP(t,t,n);else for(;e!==null;){if(e.tag===3){bP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mc===null||!mc.has(r))){t=Dp(n,t),t=eN(e,t,1),e=pc(e,t,1),t=ss(),e!==null&&(S1(e,1,t),Ds(e,t));break}}e=e.return}}function gU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ss(),t.pingedLanes|=t.suspendedLanes&n,ui===t&&(_i&n)===n&&(Xr===4||Xr===3&&(_i&130023424)===_i&&500>Mr()-OC?ef(t,0):FC|=n),Ds(t,e)}function xN(t,e){e===0&&(t.mode&1?(e=vv,vv<<=1,!(vv&130023424)&&(vv=4194304)):e=1);var n=ss();t=Ql(t,e),t!==null&&(S1(t,e,n),Ds(t,n))}function vU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xN(t,n)}function _U(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Qe(314))}r!==null&&r.delete(e),xN(t,n)}var SN;SN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ls.current)Rs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rs=!1,sU(t,e,n);Rs=!!(t.flags&131072)}else Rs=!1,Kn&&e.flags&1048576&&CL(e,wy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Y_(t,e),t=e.pendingProps;var i=Rp(e,Wi.current);Sp(e,n),i=RC(null,e,r,t,i,n);var s=TC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ns(r)?(s=!0,Sy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MC(e),i.updater=Xx,e.stateNode=i,i._reactInternals=e,P3(e,r,t,n),e=L3(null,e,r,!0,s,n)):(e.tag=0,Kn&&s&&vC(e),rs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Y_(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xU(r),t=ia(r,t),i){case 0:e=T3(null,e,r,t,n);break e;case 1:e=vP(null,e,r,t,n);break e;case 11:e=mP(null,e,r,t,n);break e;case 14:e=gP(null,e,r,ia(r.type,t),n);break e}throw Error(Qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ia(r,i),T3(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ia(r,i),vP(t,e,r,i,n);case 3:e:{if(iN(e),t===null)throw Error(Qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,LL(t,e),Ay(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dp(Error(Qe(423)),e),e=_P(t,e,r,n,i);break e}else if(r!==i){i=Dp(Error(Qe(424)),e),e=_P(t,e,r,n,i);break e}else for(eo=hc(e.stateNode.containerInfo.firstChild),to=e,Kn=!0,aa=null,n=RL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tp(),r===i){e=Jl(t,e,n);break e}rs(t,e,r,n)}e=e.child}return e;case 5:return NL(e),t===null&&C3(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,x3(r,i)?o=null:s!==null&&x3(r,s)&&(e.flags|=32),rN(t,e),rs(t,e,o,n),e.child;case 6:return t===null&&C3(e),null;case 13:return sN(t,e,n);case 4:return CC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lp(e,null,r,n):rs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ia(r,i),mP(t,e,r,i,n);case 7:return rs(t,e,e.pendingProps,n),e.child;case 8:return rs(t,e,e.pendingProps.children,n),e.child;case 12:return rs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Un(My,r._currentValue),r._currentValue=o,s!==null)if(pa(s.value,o)){if(s.children===i.children&&!Ls.current){e=Jl(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xl(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),A3(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),A3(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sp(e,n),i=Oo(i),r=r(i),e.flags|=1,rs(t,e,r,n),e.child;case 14:return r=e.type,i=ia(r,e.pendingProps),i=ia(r.type,i),gP(t,e,r,i,n);case 15:return tN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ia(r,i),Y_(t,e),e.tag=1,Ns(r)?(t=!0,Sy(e)):t=!1,Sp(e,n),QL(e,r,i),P3(e,r,i,n),L3(null,e,r,!0,t,n);case 19:return oN(t,e,n);case 22:return nN(t,e,n)}throw Error(Qe(156,e.tag))};function EN(t,e){return K5(t,e)}function yU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(t,e,n,r){return new yU(t,e,n,r)}function zC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xU(t){if(typeof t=="function")return zC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sC)return 11;if(t===oC)return 14}return 2}function vc(t,e){var n=t.alternate;return n===null?(n=Do(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $_(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jh:return tf(n.children,i,s,e);case iC:o=8,i|=8;break;case QM:return t=Do(12,n,e,i|2),t.elementType=QM,t.lanes=s,t;case JM:return t=Do(13,n,e,i),t.elementType=JM,t.lanes=s,t;case e3:return t=Do(19,n,e,i),t.elementType=e3,t.lanes=s,t;case N5:return Kx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T5:o=10;break e;case L5:o=9;break e;case sC:o=11;break e;case oC:o=14;break e;case ec:o=16,r=null;break e}throw Error(Qe(130,t==null?t:typeof t,""))}return e=Do(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function tf(t,e,n,r){return t=Do(7,t,r,e),t.lanes=n,t}function Kx(t,e,n,r){return t=Do(22,t,r,e),t.elementType=N5,t.lanes=n,t.stateNode={isHidden:!1},t}function Ew(t,e,n){return t=Do(6,t,null,e),t.lanes=n,t}function ww(t,e,n){return e=Do(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rw(0),this.expirationTimes=rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function HC(t,e,n,r,i,s,o,a,l){return t=new SU(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Do(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MC(s),t}function EU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wN(t){if(!t)return Sc;t=t._reactInternals;e:{if(xf(t)!==t||t.tag!==1)throw Error(Qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ns(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Qe(171))}if(t.tag===1){var n=t.type;if(Ns(n))return wL(t,n,e)}return e}function MN(t,e,n,r,i,s,o,a,l){return t=HC(n,r,!0,t,i,s,o,a,l),t.context=wN(null),n=t.current,r=ss(),i=gc(n),s=Xl(r,i),s.callback=e??null,pc(n,s,i),t.current.lanes=i,S1(t,i,r),Ds(t,r),t}function $x(t,e,n,r){var i=e.current,s=ss(),o=gc(i);return n=wN(n),e.context===null?e.context=n:e.pendingContext=n,e=Xl(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pc(i,e,o),t!==null&&(fa(t,i,o,s),W_(t,i,o)),o}function ky(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function PP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function GC(t,e){PP(t,e),(t=t.alternate)&&PP(t,e)}var CN=typeof reportError=="function"?reportError:function(t){console.error(t)};function VC(t){this._internalRoot=t}Zx.prototype.render=VC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Qe(409));$x(t,e,null,null)};Zx.prototype.unmount=VC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cf(function(){$x(null,t,null,null)}),e[Zl]=null}};function Zx(t){this._internalRoot=t}Zx.prototype.unstable_scheduleHydration=function(t){if(t){var e=nL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rc.length&&e!==0&&e<rc[n].priority;n++);rc.splice(n,0,t),n===0&&iL(t)}};function WC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RP(){}function wU(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ky(o);s.call(u)}}var o=MN(e,r,t,0,null,!1,!1,"",RP);return t._reactRootContainer=o,t[Zl]=o.current,F0(t.nodeType===8?t.parentNode:t),cf(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ky(l);a.call(u)}}var l=HC(t,0,!1,null,null,!1,!1,"",RP);return t._reactRootContainer=l,t[Zl]=l.current,F0(t.nodeType===8?t.parentNode:t),cf(function(){$x(e,l,n,r)}),l}function Jx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ky(o);a.call(l)}}$x(e,o,t,i)}else o=wU(n,e,t,i,r);return ky(o)}eL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zg(e.pendingLanes);n!==0&&(uC(e,n|1),Ds(e,Mr()),!(vn&6)&&(kp=Mr()+500,Tc()))}break;case 13:cf(function(){var r=Ql(t,1);if(r!==null){var i=ss();fa(r,t,1,i)}}),GC(t,1)}};cC=function(t){if(t.tag===13){var e=Ql(t,134217728);if(e!==null){var n=ss();fa(e,t,134217728,n)}GC(t,134217728)}};tL=function(t){if(t.tag===13){var e=gc(t),n=Ql(t,e);if(n!==null){var r=ss();fa(n,t,e,r)}GC(t,e)}};nL=function(){return An};rL=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};c3=function(t,e,n){switch(e){case"input":if(r3(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vx(r);if(!i)throw Error(Qe(90));k5(r),r3(r,i)}}}break;case"textarea":O5(t,n);break;case"select":e=n.value,e!=null&&vp(t,!!n.multiple,e,!1)}};V5=IC;W5=cf;var MU={usingClientEntryPoint:!1,Events:[w1,rp,Vx,H5,G5,IC]},Mg={findFiberByHostInstance:qd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CU={bundleType:Mg.bundleType,version:Mg.version,rendererPackageName:Mg.rendererPackageName,rendererConfig:Mg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:au.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y5(t),t===null?null:t.stateNode},findFiberByHostInstance:Mg.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pv.isDisabled&&Pv.supportsFiber)try{Bx=Pv.inject(CU),qa=Pv}catch{}}lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MU;lo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WC(e))throw Error(Qe(200));return EU(t,e,null,n)};lo.createRoot=function(t,e){if(!WC(t))throw Error(Qe(299));var n=!1,r="",i=CN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=HC(t,1,!1,null,null,n,!1,r,i),t[Zl]=e.current,F0(t.nodeType===8?t.parentNode:t),new VC(e)};lo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Qe(188)):(t=Object.keys(t).join(","),Error(Qe(268,t)));return t=Y5(e),t=t===null?null:t.stateNode,t};lo.flushSync=function(t){return cf(t)};lo.hydrate=function(t,e,n){if(!Qx(e))throw Error(Qe(200));return Jx(null,t,e,!0,n)};lo.hydrateRoot=function(t,e,n){if(!WC(t))throw Error(Qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=CN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MN(e,null,t,1,n??null,i,!1,s,o),t[Zl]=e.current,F0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zx(e)};lo.render=function(t,e,n){if(!Qx(e))throw Error(Qe(200));return Jx(null,t,e,!1,n)};lo.unmountComponentAtNode=function(t){if(!Qx(t))throw Error(Qe(40));return t._reactRootContainer?(cf(function(){Jx(null,null,t,!1,function(){t._reactRootContainer=null,t[Zl]=null})}),!0):!1};lo.unstable_batchedUpdates=IC;lo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qx(n))throw Error(Qe(200));if(t==null||t._reactInternals===void 0)throw Error(Qe(38));return Jx(t,e,n,!1,r)};lo.version="18.3.1-next-f1338f8080-20240426";function AN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AN)}catch(t){console.error(t)}}AN(),A5.exports=lo;var Lc=A5.exports;const bN=y1(Lc);var PN,TP=Lc;PN=TP.createRoot,TP.hydrateRoot;function et({selected:t,children:e,onClick:n,disabled:r}){return k.jsx("button",{disabled:r,className:r?"font-semibold bg-blue-400 text-white rounded-xl p-2 text-lg":t?"font-semibold bg-blue-600 text-white rounded-xl p-2 text-lg":"font-semibold bg-blue-500 hover:bg-blue-600 text-white rounded-xl p-2 text-lg",onClick:n,children:e})}function _c({onClick:t,children:e,disabled:n}){return k.jsx("button",{className:n?"font-semibold bg-red-400 text-white rounded-xl p-2 text-lg":"font-semibold bg-red-500 hover:bg-red-600 text-white rounded-xl p-2 text-lg",disabled:n,onClick:t,children:e})}function Rv({children:t,onClick:e,disabled:n}){return k.jsx("button",{className:n?"font-semibold bg-green-400 text-white rounded-xl p-2 text-lg":"font-semibold bg-green-500 hover:bg-green-600 text-white rounded-xl p-2 text-lg",onClick:e,disabled:n,children:t})}function Fy({className:t,handleOnChange:e,acceptType:n,disabled:r}){return k.jsx("input",{className:"file:border-0 bg-black rounded-xl border-2 border-white  file:bg-blue-500 file:hover:bg-blue-600 file:disabled:bg-blue-300 file:enabled:hover:cursor-pointer  text-white file:text-white  "+t,type:"file",accept:n,onChange:e,disabled:r})}function RN(t){return new Worker("/PangeaRSEdit/assets/lzssWorker-C09Dd-0n.js",{type:"module",name:t==null?void 0:t.name})}let AU=0;function wi(t,e){const n=`atom${++AU}`,r={toString(){return n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=bU,r.write=PU),r}function bU(t){return t(this)}function PU(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const LP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,NP=t=>"init"in t,DP=t=>!!t.write,Oy=new WeakMap,V3=t=>{var e;return W3(t)&&!((e=Oy.get(t))!=null&&e[1])},RU=(t,e)=>{const n=Oy.get(t);n&&(n[1]=!0,n[0].forEach(r=>r(e)))},TU=t=>{if(Oy.has(t))return;const e=[new Set,!1];Oy.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=r=>{e[0].add(r)}},W3=t=>typeof(t==null?void 0:t.then)=="function",kP=t=>"v"in t||"e"in t,Tv=t=>{if("e"in t)throw t.e;return t.v},TN=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},LU=(t,e,n,r)=>{var i;e.d.set(n,r.n),V3(e.v)&&TN(t,e.v,r),(i=r.m)==null||i.t.add(t)},NU=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),LN=(...t)=>{const[e,n,r,i,s,o]=t,a=z=>{let W=e(z);return W||(W={d:new Map,p:new Set,n:0},n(z,W),s==null||s(z,T)),W},l=new WeakMap,u=new Map,d=new Set,m=new Set,g=()=>{var z;const W=[],K=Z=>{try{Z()}catch(te){W.push(te)}};do{(z=T[NU])==null||z.call(T);const Z=new Set,te=Z.add.bind(Z);u.forEach(ne=>{var de;return(de=ne.m)==null?void 0:de.l.forEach(te)}),u.clear(),d.forEach(te),d.clear(),m.forEach(te),m.clear(),Z.forEach(K),u.size&&M()}while(u.size||d.size||m.size);if(W.length)throw W[0]},v=(z,W,K)=>{const Z="v"in W,te=W.v,ne=V3(W.v)?W.v:null;if(W3(K)){TU(K);for(const de of W.d.keys())TN(z,K,a(de));W.v=K}else W.v=K;delete W.e,(!Z||!Object.is(te,W.v))&&(++W.n,ne&&RU(ne,K))},y=z=>{var W;const K=a(z);if(kP(K)&&(K.m&&l.get(z)!==K.n||Array.from(K.d).every(([se,he])=>y(se).n===he)))return K;K.d.clear();let Z=!0;const te=()=>{K.m&&(L(z,K),M(),g())},ne=se=>{if(LP(z,se)){const Me=a(se);if(!kP(Me))if(NP(se))v(se,Me,se.init);else throw new Error("no atom init");return Tv(Me)}const he=y(se);try{return Tv(he)}finally{LU(z,K,se,he),Z||te()}};let de,Y;const ae={get signal(){return de||(de=new AbortController),de.signal},get setSelf(){return!Y&&DP(z)&&(Y=(...se)=>{if(!Z)return A(z,...se)}),Y}};try{const se=r(z,ne,ae);return v(z,K,se),W3(se)&&((W=se.onCancel)==null||W.call(se,()=>de==null?void 0:de.abort()),se.then(te,te)),K}catch(se){return delete K.v,K.e=se,++K.n,K}finally{Z=!1}},x=z=>Tv(y(z)),S=z=>{var W;const K=new Map;for(const Z of((W=z.m)==null?void 0:W.t)||[]){const te=a(Z);te.m&&K.set(Z,te)}for(const Z of z.p)K.set(Z,a(Z));return K},_=z=>{const W=[z];for(;W.length;){const K=W.pop();for(const[Z,te]of S(K))l.has(Z)||(l.set(Z,te.n),W.push(te))}},M=()=>{var z;const W=[],K=new WeakSet,Z=new WeakSet,te=Array.from(u);for(;te.length;){const[ne,de]=te[te.length-1];if(Z.has(ne)){te.pop();continue}if(K.has(ne)){l.get(ne)===de.n?W.push([ne,de,de.n]):(l.delete(ne),u.set(ne,de)),Z.add(ne),te.pop();continue}K.add(ne);for(const[Y,ae]of S(de))K.has(Y)||te.push([Y,ae])}for(let ne=W.length-1;ne>=0;--ne){const[de,Y,ae]=W[ne];let se=!1;for(const he of Y.d.keys())if(he!==de&&u.has(he)){se=!0;break}se&&(y(de),L(de,Y),ae!==Y.n&&(u.set(de,Y),(z=Y.u)==null||z.call(Y))),l.delete(de)}},E=(z,...W)=>{let K=!0;const Z=ne=>Tv(y(ne)),te=(ne,...de)=>{var Y;const ae=a(ne);try{if(LP(z,ne)){if(!NP(ne))throw new Error("atom not writable");const se=ae.n,he=de[0];v(ne,ae,he),L(ne,ae),se!==ae.n&&(u.set(ne,ae),(Y=ae.u)==null||Y.call(ae),_(ae));return}else return E(ne,...de)}finally{K||(M(),g())}};try{return i(z,Z,te,...W)}finally{K=!1}},A=(z,...W)=>{try{return E(z,...W)}finally{M(),g()}},L=(z,W)=>{var K;if(W.m&&!V3(W.v)){for(const[Z,te]of W.d)if(!W.m.d.has(Z)){const ne=a(Z);D(Z,ne).t.add(z),W.m.d.add(Z),te!==ne.n&&(u.set(Z,ne),(K=ne.u)==null||K.call(ne),_(ne))}for(const Z of W.m.d||[])if(!W.d.has(Z)){W.m.d.delete(Z);const te=U(Z,a(Z));te==null||te.t.delete(z)}}},D=(z,W)=>{var K;if(!W.m){y(z);for(const Z of W.d.keys())D(Z,a(Z)).t.add(z);if(W.m={l:new Set,d:new Set(W.d.keys()),t:new Set},(K=W.h)==null||K.call(W),DP(z)){const Z=W.m,te=()=>{let ne=!0;const de=(...Y)=>{try{return E(z,...Y)}finally{ne||(M(),g())}};try{const Y=o(z,de);Y&&(Z.u=()=>{ne=!0;try{Y()}finally{ne=!1}})}finally{ne=!1}};m.add(te)}}return W.m},U=(z,W)=>{var K;if(W.m&&!W.m.l.size&&!Array.from(W.m.t).some(Z=>{var te;return(te=a(Z).m)==null?void 0:te.d.has(z)})){const Z=W.m.u;Z&&d.add(Z),delete W.m,(K=W.h)==null||K.call(W);for(const te of W.d.keys()){const ne=U(te,a(te));ne==null||ne.t.delete(z)}return}return W.m},T={get:x,set:A,sub:(z,W)=>{const K=a(z),te=D(z,K).l;return te.add(W),g(),()=>{te.delete(W),U(z,K),g()}},unstable_derive:z=>LN(...z(...t))};return T},DU=()=>{const t=new WeakMap;return LN(n=>t.get(n),(n,r)=>t.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var i;return(i=n.unstable_onInit)==null?void 0:i.call(n,...r)},(n,...r)=>{var i;return(i=n.onMount)==null?void 0:i.call(n,...r)})};let Mw;const kU=()=>(Mw||(Mw=DU()),Mw),FU=V.createContext(void 0),NN=t=>V.useContext(FU)||kU(),DN=t=>typeof(t==null?void 0:t.then)=="function",OU=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},IU=Sn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(OU(t),t)}),Cw=new WeakMap,UU=t=>{let e=Cw.get(t);return e||(e=new Promise((n,r)=>{let i=t;const s=l=>u=>{i===l&&n(u)},o=l=>u=>{i===l&&r(u)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{DN(u)?(Cw.set(u,e),i=u,u.then(s(u),o(u)),a(u)):n(u)})};t.then(s(t),o(t)),a(t)}),Cw.set(t,e)),e};function hn(t,e){const n=NN(),[[r,i,s],o]=V.useReducer(u=>{const d=n.get(t);return Object.is(u[0],d)&&u[1]===n&&u[2]===t?u:[d,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;if((i!==n||s!==t)&&(o(),a=n.get(t)),V.useEffect(()=>{const u=n.sub(t,()=>{o()});return o(),u},[n,t,void 0]),V.useDebugValue(a),DN(a)){const u=UU(a);return IU(u)}return a}function cp(t,e){const n=NN();return V.useCallback((...i)=>n.set(t,...i),[n,t])}function or(t,e){return[hn(t),cp(t)]}const jC=["Hedr:L5i3f5i40x:version,numItems,mapWidth,mapHeight,numTilePages,numTiles,tileSize,minY,maxY,numSplines,numFences,numUniqueSupertiles,numWaterPatches,numCheckpoints","Atrb:HBB+:flags,p0,p1","STgd:x?H+:isEmpty,superTileId","Layr:H+","YCrd:f+","Itms:LLHBBBBH+:x,z,type,p0,p1,p2,p3,flags","Spln:h 2x 4x i 4x h 2x 4x hhhh+:numNubs,numPoints,numItems,bbTop,bbLeft,bbBottom,bbRight","SpNb:ff+:x,z","SpPt:ff+:x,z","SpIt:fHBBBBH+:placement,type,p0,p1,p2,p3,flags","Fenc:HhLhhhh+:fenceType,numNubs,junkNubListPtr,bbTop,bbLeft,bbBottom,bbRight","FnNb:ii+","Liqd:H x x I i h x x i 200f f f h h h h+:type,flags,height,numNubs,reserved,x`y[100],hotSpotX,hotSpotZ,bBoxTop,bBoxLeft,bBoxBottom,bBoxRight"],kN=["Hedr:4L3f5L40x:version,numItems,mapWidth,mapHeight,tileSize,minY,maxY,numSplines,numFences,numUniqueSupertiles,numWaterPatches,numCheckpoints","Atrb:HBB+:flags,p0,p1","STgd:h+:superTileId","Layr:H+","YCrd:f+","CkPt:hhffff+:unused,infoBits,x1,x2,z1,z2","Itms:LLHBBBBH+:x,z,type,p0,p1,p2,p3,flags","Spln:h 2x 4x i 4x h 2x 4x hhhh+:numNubs,numPoints,numItems,bbTop,bbLeft,bbBottom,bbRight","SpNb:ff+:x,z","SpPt:ff+:x,z","SpIt:fHBBBBH+:placement,type,p0,p1,p2,p3,flags","Fenc:HhLhhhh+:fenceType,numNubs,junkNubListPtr,bbTop,bbLeft,bbBottom,bbRight","FnNb:ii+","Liqd:H x x I i h x x i 200f f f h h h h+:type,flags,height,numNubs,reserved,x`y[100],hotSpotX,hotSpotZ,bBoxTop,bBoxLeft,bBoxBottom,bBoxRight"],BU=["Hedr:iiiiiifffii:version,numItems,mapWidth,mapHeight,numTilePages,numTiles,tileSize,minY,maxY,numSplines,numFences","Atrb:HBB+:flags,p0,p1","Xlat:h+:idx","STgd:x?H+:isEmpty,superTileId","Layr:H+","YCrd:f+","Itms:HHHBBBBH+:x,z,type,p0,p1,p2,p3,flags","Spln:h 2x 4x i 4x h 2x 4x hhhh+:numNubs,numPoints,numItems,bbTop,bbLeft,bbBottom,bbRight","SpNb:ff+:x,z","SpPt:ff+:x,z","SpIt:fHBBBBH+:placement,type,p0,p1,p2,p3,flags","Fenc:HhLhhhh+:fenceType,numNubs,junkNubListPtr,bbTop,bbLeft,bbBottom,bbRight","FnNb:ii+","Liqd:H x x I i h x x i 200f f f h h h h+:type,flags,height,numNubs,reserved,x`y[100],hotSpotX,hotSpotZ,bBoxTop,bBoxLeft,bBoxBottom,bBoxRight"],zU=["Hedr:4L3f5L40x:version,numItems,mapWidth,mapHeight,tileSize,minY,maxY,numSplines,numFences,numUniqueSupertiles,numWaterPatches,numCheckpoints","Atrb:HBB+:flags,p0,p1","STgd:h+:superTileId","Layr:H+","YCrd:f+","CkPt:hhffff+:unused,infoBits,x1,x2,z1,z2","Itms:LLHBBBBH+:x,z,type,p0,p1,p2,p3,flags","Spln:h 2x 4x i 4x h 2x 4x hhhh+:numNubs,numPoints,numItems,bbTop,bbLeft,bbBottom,bbRight","SpNb:ff+:x,z","SpPt:ff+:x,z","SpIt:fHBBBBH+:placement,type,p0,p1,p2,p3,flags","Fenc:HhLhhhh+:fenceType,numNubs,junkNubListPtr,bbTop,bbLeft,bbBottom,bbRight","FnNb:ii+","Liqd:H x x I i h x x i 200f f f h h h h+:type,flags,height,numNubs,reserved,x`y[100],hotSpotX,hotSpotZ,bBoxTop,bBoxLeft,bBoxBottom,bBoxRight"];var It=(t=>(t[t.OTTO_MATIC=0]="OTTO_MATIC",t[t.BUGDOM=1]="BUGDOM",t[t.BUGDOM_2=2]="BUGDOM_2",t[t.NANOSAUR=3]="NANOSAUR",t[t.NANOSAUR_2=4]="NANOSAUR_2",t[t.CRO_MAG=5]="CRO_MAG",t[t.BILLY_FRONTIER=6]="BILLY_FRONTIER",t))(It||{}),Z_=(t=>(t[t.STANDARD=0]="STANDARD",t[t.TRT_FILE=1]="TRT_FILE",t[t.RSRC_FORK=2]="RSRC_FORK",t))(Z_||{});const Zs={GAME_NAME:"Otto Matic",GAME_TYPE:0,DATA_TYPE:0,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:jC,SUPERTILE_TEXMAP_SIZE:128,TILES_PER_SUPERTILE:8,EMPTY_TILE_IDX:0,TILE_INGAME_SIZE:225,TILE_SIZE:16,LIQD_NUBS:100},Ua={GAME_NAME:"Bugdom",GAME_TYPE:1,DATA_TYPE:2,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:BU,SUPERTILE_TEXMAP_SIZE:32,TILES_PER_SUPERTILE:5,EMPTY_TILE_IDX:0,TILE_INGAME_SIZE:225,TILE_SIZE:32,LIQD_NUBS:100},Rl={GAME_NAME:"Bugdom 2",GAME_TYPE:2,DATA_TYPE:0,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:kN,SUPERTILE_TEXMAP_SIZE:128,TILES_PER_SUPERTILE:8,EMPTY_TILE_IDX:-1,TILE_INGAME_SIZE:225,TILE_SIZE:16,LIQD_NUBS:100},FP={GAME_NAME:"Nanosaur",GAME_TYPE:3,DATA_TYPE:1,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:jC,SUPERTILE_TEXMAP_SIZE:32,TILES_PER_SUPERTILE:5,EMPTY_TILE_IDX:0,TILE_INGAME_SIZE:225,TILE_SIZE:32,LIQD_NUBS:100},Qo={GAME_NAME:"Nanosaur 2",GAME_TYPE:4,DATA_TYPE:0,TILE_IMAGE_FORMAT:1,STRUCT_SPECS:kN,SUPERTILE_TEXMAP_SIZE:256,TILES_PER_SUPERTILE:8,EMPTY_TILE_IDX:-1,TILE_INGAME_SIZE:225,TILE_SIZE:16,LIQD_NUBS:100},ii={GAME_NAME:"Cro Mag",GAME_TYPE:5,DATA_TYPE:0,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:jC,SUPERTILE_TEXMAP_SIZE:128,TILES_PER_SUPERTILE:8,EMPTY_TILE_IDX:0,TILE_INGAME_SIZE:225,TILE_SIZE:16,LIQD_NUBS:100},Ad={GAME_NAME:"Billy Frontier",GAME_TYPE:6,DATA_TYPE:0,TILE_IMAGE_FORMAT:0,STRUCT_SPECS:zU,SUPERTILE_TEXMAP_SIZE:256,TILES_PER_SUPERTILE:8,EMPTY_TILE_IDX:-1,TILE_INGAME_SIZE:225,TILE_SIZE:32,LIQD_NUBS:100},Dr=wi(Zs);function HU(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function OP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function GU(...t){return e=>{let n=!1;const r=t.map(i=>{const s=OP(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():OP(t[i],null)}}}}function XC(...t){return V.useCallback(GU(...t),t)}function VU(t,e=[]){let n=[];function r(s,o){const a=V.createContext(o),l=n.length;n=[...n,o];const u=m=>{var _;const{scope:g,children:v,...y}=m,x=((_=g==null?void 0:g[t])==null?void 0:_[l])||a,S=V.useMemo(()=>y,Object.values(y));return k.jsx(x.Provider,{value:S,children:v})};u.displayName=s+"Provider";function d(m,g){var x;const v=((x=g==null?void 0:g[t])==null?void 0:x[l])||a,y=V.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>V.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return V.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,WU(i,...e)]}function WU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const m=l(s)[`__scope${u}`];return{...a,...m}},{});return V.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var FN=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},jU=M5[" useInsertionEffect ".trim().toString()]||FN;function XU({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=YU({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=V.useRef(t!==void 0);V.useEffect(()=>{const m=d.current;m!==a&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=V.useCallback(d=>{var m;if(a){const g=qU(d)?d(t):d;g!==t&&((m=o.current)==null||m.call(o,g))}else s(d)},[a,t,s,o]);return[l,u]}function YU({defaultProp:t,onChange:e}){const[n,r]=V.useState(t),i=V.useRef(n),s=V.useRef(e);return jU(()=>{s.current=e},[e]),V.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function qU(t){return typeof t=="function"}function KU(t){const e=V.useRef({value:t,previous:t});return V.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function $U(t){const[e,n]=V.useState(void 0);return FN(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function ZU(t){const e=QU(t),n=V.forwardRef((r,i)=>{const{children:s,...o}=r,a=V.Children.toArray(s),l=a.find(eB);if(l){const u=l.props.children,d=a.map(m=>m===l?V.Children.count(u)>1?V.Children.only(null):V.isValidElement(u)?u.props.children:null:m);return k.jsx(e,{...o,ref:i,children:V.isValidElement(u)?V.cloneElement(u,void 0,d):null})}return k.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function QU(t){const e=V.forwardRef((n,r)=>{const{children:i,...s}=n,o=V.isValidElement(i)?nB(i):void 0,a=XC(o,r);if(V.isValidElement(i)){const l=tB(s,i.props);return i.type!==V.Fragment&&(l.ref=a),V.cloneElement(i,l)}return V.Children.count(i)>1?V.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var JU=Symbol("radix.slottable");function eB(t){return V.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JU}function tB(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nB(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ON=rB.reduce((t,e)=>{const n=ZU(`Primitive.${e}`),r=V.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),eS="Switch",[iB,wie]=VU(eS),[sB,oB]=iB(eS),IN=V.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:d,...m}=t,[g,v]=V.useState(null),y=XC(e,E=>v(E)),x=V.useRef(!1),S=g?d||!!g.closest("form"):!0,[_,M]=XU({prop:i,defaultProp:s??!1,onChange:u,caller:eS});return k.jsxs(sB,{scope:n,checked:_,disabled:a,children:[k.jsx(ON.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":HN(_),"data-disabled":a?"":void 0,disabled:a,value:l,...m,ref:y,onClick:HU(t.onClick,E=>{M(A=>!A),S&&(x.current=E.isPropagationStopped(),x.current||E.stopPropagation())})}),S&&k.jsx(zN,{control:g,bubbles:!x.current,name:r,value:l,checked:_,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});IN.displayName=eS;var UN="SwitchThumb",BN=V.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=oB(UN,n);return k.jsx(ON.span,{"data-state":HN(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});BN.displayName=UN;var aB="SwitchBubbleInput",zN=V.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=V.useRef(null),a=XC(o,s),l=KU(n),u=$U(e);return V.useEffect(()=>{const d=o.current;if(!d)return;const m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&v){const y=new Event("click",{bubbles:r});v.call(d,n),d.dispatchEvent(y)}},[l,n,r]),k.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zN.displayName=aB;function HN(t){return t?"checked":"unchecked"}var GN=IN,lB=BN;function VN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=VN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function WN(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=VN(t))&&(r&&(r+=" "),r+=e);return r}const YC="-",uB=t=>{const e=dB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(YC);return a[0]===""&&a.length!==1&&a.shift(),jN(a,e)||cB(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},jN=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?jN(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(YC);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},IP=/^\[(.+)\]$/,cB=t=>{if(IP.test(t)){const e=IP.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},dB=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hB(Object.entries(t.classGroups),n).forEach(([s,o])=>{j3(o,r,s,e)}),r},j3=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:UP(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(fB(i)){j3(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{j3(o,UP(e,s),n,r)})})},UP=(t,e)=>{let n=t;return e.split(YC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},fB=t=>t.isThemeGetter,hB=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,pB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},XN="!",mB=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,d=0,m;for(let S=0;S<a.length;S++){let _=a[S];if(u===0){if(_===i&&(r||a.slice(S,S+s)===e)){l.push(a.slice(d,S)),d=S+s;continue}if(_==="/"){m=S;continue}}_==="["?u++:_==="]"&&u--}const g=l.length===0?a:a.substring(d),v=g.startsWith(XN),y=v?g.substring(1):g,x=m&&m>d?m-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},gB=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},vB=t=>({cache:pB(t.cacheSize),parseClassName:mB(t),...uB(t)}),_B=/\s+/,yB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(_B);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}=n(u);let y=!!v,x=r(y?g.substring(0,v):g);if(!x){if(!y){a=u+(a.length>0?" "+a:a);continue}if(x=r(g),!x){a=u+(a.length>0?" "+a:a);continue}y=!1}const S=gB(d).join(":"),_=m?S+XN:S,M=_+x;if(s.includes(M))continue;s.push(M);const E=i(x,y);for(let A=0;A<E.length;++A){const L=E[A];s.push(_+L)}a=u+(a.length>0?" "+a:a)}return a};function xB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=YN(e))&&(r&&(r+=" "),r+=n);return r}const YN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=YN(t[r]))&&(n&&(n+=" "),n+=e);return n};function SB(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((d,m)=>m(d),t());return n=vB(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=yB(l,n);return i(l,d),d}return function(){return s(xB.apply(null,arguments))}}const Hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},qN=/^\[(?:([a-z-]+):)?(.+)\]$/i,EB=/^\d+\/\d+$/,wB=new Set(["px","full","screen"]),MB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tl=t=>wp(t)||wB.has(t)||EB.test(t),Gu=t=>Jp(t,"length",OB),wp=t=>!!t&&!Number.isNaN(Number(t)),Aw=t=>Jp(t,"number",wp),Cg=t=>!!t&&Number.isInteger(Number(t)),RB=t=>t.endsWith("%")&&wp(t.slice(0,-1)),Kt=t=>qN.test(t),Vu=t=>MB.test(t),TB=new Set(["length","size","percentage"]),LB=t=>Jp(t,TB,KN),NB=t=>Jp(t,"position",KN),DB=new Set(["image","url"]),kB=t=>Jp(t,DB,UB),FB=t=>Jp(t,"",IB),Ag=()=>!0,Jp=(t,e,n)=>{const r=qN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},OB=t=>CB.test(t)&&!AB.test(t),KN=()=>!1,IB=t=>bB.test(t),UB=t=>PB.test(t),BB=()=>{const t=Hn("colors"),e=Hn("spacing"),n=Hn("blur"),r=Hn("brightness"),i=Hn("borderColor"),s=Hn("borderRadius"),o=Hn("borderSpacing"),a=Hn("borderWidth"),l=Hn("contrast"),u=Hn("grayscale"),d=Hn("hueRotate"),m=Hn("invert"),g=Hn("gap"),v=Hn("gradientColorStops"),y=Hn("gradientColorStopPositions"),x=Hn("inset"),S=Hn("margin"),_=Hn("opacity"),M=Hn("padding"),E=Hn("saturate"),A=Hn("scale"),L=Hn("sepia"),D=Hn("skew"),U=Hn("space"),O=Hn("translate"),B=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",Kt,e],W=()=>[Kt,e],K=()=>["",Tl,Gu],Z=()=>["auto",wp,Kt],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],ae=()=>["","0",Kt],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[wp,Kt];return{cacheSize:500,separator:":",theme:{colors:[Ag],spacing:[Tl,Gu],blur:["none","",Vu,Kt],brightness:he(),borderColor:[t],borderRadius:["none","","full",Vu,Kt],borderSpacing:W(),borderWidth:K(),contrast:he(),grayscale:ae(),hueRotate:he(),invert:ae(),gap:W(),gradientColorStops:[t],gradientColorStopPositions:[RB,Gu],inset:z(),margin:z(),opacity:he(),padding:W(),saturate:he(),scale:he(),sepia:ae(),skew:he(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",Kt]}],container:["container"],columns:[{columns:[Vu]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),Kt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cg,Kt]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kt]}],grow:[{grow:ae()}],shrink:[{shrink:ae()}],order:[{order:["first","last","none",Cg,Kt]}],"grid-cols":[{"grid-cols":[Ag]}],"col-start-end":[{col:["auto",{span:["full",Cg,Kt]},Kt]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[Ag]}],"row-start-end":[{row:["auto",{span:[Cg,Kt]},Kt]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Kt,e]}],"min-w":[{"min-w":[Kt,e,"min","max","fit"]}],"max-w":[{"max-w":[Kt,e,"none","full","min","max","fit","prose",{screen:[Vu]},Vu]}],h:[{h:[Kt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Kt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Kt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Kt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vu,Gu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Aw]}],"font-family":[{font:[Ag]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Kt]}],"line-clamp":[{"line-clamp":["none",wp,Aw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tl,Kt]}],"list-image":[{"list-image":["none",Kt]}],"list-style-type":[{list:["none","disc","decimal",Kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tl,Gu]}],"underline-offset":[{"underline-offset":["auto",Tl,Kt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),NB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ne()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[Tl,Kt]}],"outline-w":[{outline:[Tl,Gu]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Tl,Gu]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vu,FB]}],"shadow-color":[{shadow:[Ag]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Vu,Kt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[E]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kt]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",Kt]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",Kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Cg,Kt]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Tl,Gu,Aw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zB=SB(BB);function Si(...t){return zB(WN(t))}const qC=V.forwardRef(({className:t,...e},n)=>k.jsx(GN,{className:Si("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-input",t),...e,ref:n,children:k.jsx(lB,{className:Si("pointer-events-none block h-4 w-4 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));qC.displayName=GN.displayName;var $N={exports:{}},tS={},Iy={},Jt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Sb<"u"?Sb:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const r=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Jt);var cr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Jt;class n{constructor(A=[1,0,0,1,0,0]){this.dirty=!1,this.m=A&&A.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(A){A.m[0]=this.m[0],A.m[1]=this.m[1],A.m[2]=this.m[2],A.m[3]=this.m[3],A.m[4]=this.m[4],A.m[5]=this.m[5]}point(A){const L=this.m;return{x:L[0]*A.x+L[2]*A.y+L[4],y:L[1]*A.x+L[3]*A.y+L[5]}}translate(A,L){return this.m[4]+=this.m[0]*A+this.m[2]*L,this.m[5]+=this.m[1]*A+this.m[3]*L,this}scale(A,L){return this.m[0]*=A,this.m[1]*=A,this.m[2]*=L,this.m[3]*=L,this}rotate(A){const L=Math.cos(A),D=Math.sin(A),U=this.m[0]*L+this.m[2]*D,O=this.m[1]*L+this.m[3]*D,B=this.m[0]*-D+this.m[2]*L,T=this.m[1]*-D+this.m[3]*L;return this.m[0]=U,this.m[1]=O,this.m[2]=B,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(A,L){const D=this.m[0]+this.m[2]*L,U=this.m[1]+this.m[3]*L,O=this.m[2]+this.m[0]*A,B=this.m[3]+this.m[1]*A;return this.m[0]=D,this.m[1]=U,this.m[2]=O,this.m[3]=B,this}multiply(A){const L=this.m[0]*A.m[0]+this.m[2]*A.m[1],D=this.m[1]*A.m[0]+this.m[3]*A.m[1],U=this.m[0]*A.m[2]+this.m[2]*A.m[3],O=this.m[1]*A.m[2]+this.m[3]*A.m[3],B=this.m[0]*A.m[4]+this.m[2]*A.m[5]+this.m[4],T=this.m[1]*A.m[4]+this.m[3]*A.m[5]+this.m[5];return this.m[0]=L,this.m[1]=D,this.m[2]=U,this.m[3]=O,this.m[4]=B,this.m[5]=T,this}invert(){const A=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),L=this.m[3]*A,D=-this.m[1]*A,U=-this.m[2]*A,O=this.m[0]*A,B=A*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=A*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=L,this.m[1]=D,this.m[2]=U,this.m[3]=O,this.m[4]=B,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const A=this.m[0],L=this.m[1],D=this.m[2],U=this.m[3],O=this.m[4],B=this.m[5],T=A*U-L*D,z={x:O,y:B,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(A!=0||L!=0){const W=Math.sqrt(A*A+L*L);z.rotation=L>0?Math.acos(A/W):-Math.acos(A/W),z.scaleX=W,z.scaleY=T/W,z.skewX=(A*D+L*U)/T,z.skewY=0}else if(D!=0||U!=0){const W=Math.sqrt(D*D+U*U);z.rotation=Math.PI/2-(U>0?Math.acos(-D/W):-Math.acos(D/W)),z.scaleX=T/W,z.scaleY=W,z.skewX=0,z.skewY=(A*D+L*U)/T}return z.rotation=t.Util._getRotation(z.rotation),z}}t.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,u="#",d="",m="0",g="Konva warning: ",v="Konva error: ",y="rgb(",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let _=[];const M=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(E){setTimeout(E,60)};t.Util={_isElement(E){return!!(E&&E.nodeType==1)},_isFunction(E){return!!(E&&E.constructor&&E.call&&E.apply)},_isPlainObject(E){return!!E&&E.constructor===Object},_isArray(E){return Object.prototype.toString.call(E)===r},_isNumber(E){return Object.prototype.toString.call(E)===i&&!isNaN(E)&&isFinite(E)},_isString(E){return Object.prototype.toString.call(E)===s},_isBoolean(E){return Object.prototype.toString.call(E)===o},isObject(E){return E instanceof Object},isValidSelector(E){if(typeof E!="string")return!1;const A=E[0];return A==="#"||A==="."||A===A.toUpperCase()},_sign(E){return E===0||E>0?1:-1},requestAnimFrame(E){_.push(E),_.length===1&&M(function(){const A=_;_=[],A.forEach(function(L){L()})})},createCanvasElement(){const E=document.createElement("canvas");try{E.style=E.style||{}}catch{}return E},createImageElement(){return document.createElement("img")},_isInDocument(E){for(;E=E.parentNode;)if(E==document)return!0;return!1},_urlToImage(E,A){const L=t.Util.createImageElement();L.onload=function(){A(L)},L.src=E},_rgbToHex(E,A,L){return((1<<24)+(E<<16)+(A<<8)+L).toString(16).slice(1)},_hexToRgb(E){E=E.replace(u,d);const A=parseInt(E,16);return{r:A>>16&255,g:A>>8&255,b:A&255}},getRandomColor(){let E=(Math.random()*16777215<<0).toString(16);for(;E.length<6;)E=m+E;return u+E},getRGB(E){let A;return E in x?(A=x[E],{r:A[0],g:A[1],b:A[2]}):E[0]===u?this._hexToRgb(E.substring(1)):E.substr(0,4)===y?(A=S.exec(E.replace(/ /g,"")),{r:parseInt(A[1],10),g:parseInt(A[2],10),b:parseInt(A[3],10)}):{r:0,g:0,b:0}},colorToRGBA(E){return E=E||"black",t.Util._namedColorToRBA(E)||t.Util._hex3ColorToRGBA(E)||t.Util._hex4ColorToRGBA(E)||t.Util._hex6ColorToRGBA(E)||t.Util._hex8ColorToRGBA(E)||t.Util._rgbColorToRGBA(E)||t.Util._rgbaColorToRGBA(E)||t.Util._hslColorToRGBA(E)},_namedColorToRBA(E){const A=x[E.toLowerCase()];return A?{r:A[0],g:A[1],b:A[2],a:1}:null},_rgbColorToRGBA(E){if(E.indexOf("rgb(")===0){E=E.match(/rgb\(([^)]+)\)/)[1];const A=E.split(/ *, */).map(Number);return{r:A[0],g:A[1],b:A[2],a:1}}},_rgbaColorToRGBA(E){if(E.indexOf("rgba(")===0){E=E.match(/rgba\(([^)]+)\)/)[1];const A=E.split(/ *, */).map((L,D)=>L.slice(-1)==="%"?D===3?parseInt(L)/100:parseInt(L)/100*255:Number(L));return{r:A[0],g:A[1],b:A[2],a:A[3]}}},_hex8ColorToRGBA(E){if(E[0]==="#"&&E.length===9)return{r:parseInt(E.slice(1,3),16),g:parseInt(E.slice(3,5),16),b:parseInt(E.slice(5,7),16),a:parseInt(E.slice(7,9),16)/255}},_hex6ColorToRGBA(E){if(E[0]==="#"&&E.length===7)return{r:parseInt(E.slice(1,3),16),g:parseInt(E.slice(3,5),16),b:parseInt(E.slice(5,7),16),a:1}},_hex4ColorToRGBA(E){if(E[0]==="#"&&E.length===5)return{r:parseInt(E[1]+E[1],16),g:parseInt(E[2]+E[2],16),b:parseInt(E[3]+E[3],16),a:parseInt(E[4]+E[4],16)/255}},_hex3ColorToRGBA(E){if(E[0]==="#"&&E.length===4)return{r:parseInt(E[1]+E[1],16),g:parseInt(E[2]+E[2],16),b:parseInt(E[3]+E[3],16),a:1}},_hslColorToRGBA(E){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(E)){const[A,...L]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(E),D=Number(L[0])/360,U=Number(L[1])/100,O=Number(L[2])/100;let B,T,z;if(U===0)return z=O*255,{r:Math.round(z),g:Math.round(z),b:Math.round(z),a:1};O<.5?B=O*(1+U):B=O+U-O*U;const W=2*O-B,K=[0,0,0];for(let Z=0;Z<3;Z++)T=D+1/3*-(Z-1),T<0&&T++,T>1&&T--,6*T<1?z=W+(B-W)*6*T:2*T<1?z=B:3*T<2?z=W+(B-W)*(2/3-T)*6:z=W,K[Z]=z*255;return{r:Math.round(K[0]),g:Math.round(K[1]),b:Math.round(K[2]),a:1}}},haveIntersection(E,A){return!(A.x>E.x+E.width||A.x+A.width<E.x||A.y>E.y+E.height||A.y+A.height<E.y)},cloneObject(E){const A={};for(const L in E)this._isPlainObject(E[L])?A[L]=this.cloneObject(E[L]):this._isArray(E[L])?A[L]=this.cloneArray(E[L]):A[L]=E[L];return A},cloneArray(E){return E.slice(0)},degToRad(E){return E*a},radToDeg(E){return E*l},_degToRad(E){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(E)},_radToDeg(E){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(E)},_getRotation(E){return e.Konva.angleDeg?t.Util.radToDeg(E):E},_capitalize(E){return E.charAt(0).toUpperCase()+E.slice(1)},throw(E){throw new Error(v+E)},error(E){console.error(v+E)},warn(E){e.Konva.showWarnings&&console.warn(g+E)},each(E,A){for(const L in E)A(L,E[L])},_inRange(E,A,L){return A<=E&&E<L},_getProjectionToSegment(E,A,L,D,U,O){let B,T,z;const W=(E-L)*(E-L)+(A-D)*(A-D);if(W==0)B=E,T=A,z=(U-L)*(U-L)+(O-D)*(O-D);else{const K=((U-E)*(L-E)+(O-A)*(D-A))/W;K<0?(B=E,T=A,z=(E-U)*(E-U)+(A-O)*(A-O)):K>1?(B=L,T=D,z=(L-U)*(L-U)+(D-O)*(D-O)):(B=E+K*(L-E),T=A+K*(D-A),z=(B-U)*(B-U)+(T-O)*(T-O))}return[B,T,z]},_getProjectionToLine(E,A,L){const D=t.Util.cloneObject(E);let U=Number.MAX_VALUE;return A.forEach(function(O,B){if(!L&&B===A.length-1)return;const T=A[(B+1)%A.length],z=t.Util._getProjectionToSegment(O.x,O.y,T.x,T.y,E.x,E.y),W=z[0],K=z[1],Z=z[2];Z<U&&(D.x=W,D.y=K,U=Z)}),D},_prepareArrayForTween(E,A,L){const D=[],U=[];if(E.length>A.length){const B=A;A=E,E=B}for(let B=0;B<E.length;B+=2)D.push({x:E[B],y:E[B+1]});for(let B=0;B<A.length;B+=2)U.push({x:A[B],y:A[B+1]});const O=[];return U.forEach(function(B){const T=t.Util._getProjectionToLine(B,D,L);O.push(T.x),O.push(T.y)}),O},_prepareToStringify(E){let A;E.visitedByCircularReferenceRemoval=!0;for(const L in E)if(E.hasOwnProperty(L)&&E[L]&&typeof E[L]=="object"){if(A=Object.getOwnPropertyDescriptor(E,L),E[L].visitedByCircularReferenceRemoval||t.Util._isElement(E[L]))if(A.configurable)delete E[L];else return null;else if(t.Util._prepareToStringify(E[L])===null)if(A.configurable)delete E[L];else return null}return delete E.visitedByCircularReferenceRemoval,E},_assign(E,A){for(const L in A)E[L]=A[L];return E},_getFirstPointerId(E){return E.touches?E.changedTouches[0].identifier:E.pointerId||999},releaseCanvas(...E){e.Konva.releaseCanvasOnDestroy&&E.forEach(A=>{A.width=0,A.height=0})},drawRoundedRectPath(E,A,L,D){let U=0,O=0,B=0,T=0;typeof D=="number"?U=O=B=T=Math.min(D,A/2,L/2):(U=Math.min(D[0]||0,A/2,L/2),O=Math.min(D[1]||0,A/2,L/2),T=Math.min(D[2]||0,A/2,L/2),B=Math.min(D[3]||0,A/2,L/2)),E.moveTo(U,0),E.lineTo(A-O,0),E.arc(A-O,O,O,Math.PI*3/2,0,!1),E.lineTo(A,L-T),E.arc(A-T,L-T,T,0,Math.PI/2,!1),E.lineTo(B,L),E.arc(B,L-B,B,Math.PI/2,Math.PI,!1),E.lineTo(0,U),E.arc(U,U,U,Math.PI,Math.PI*3/2,!1)}}})(cr);var Zn={},nn={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.RGBComponent=HB;kt.alphaComponent=GB;kt.getNumberValidator=VB;kt.getNumberOrArrayOfNumbersValidator=WB;kt.getNumberOrAutoValidator=jB;kt.getStringValidator=XB;kt.getStringOrGradientValidator=YB;kt.getFunctionValidator=qB;kt.getNumberArrayValidator=KB;kt.getBooleanValidator=$B;kt.getComponentValidator=ZB;const lu=Jt,mr=cr;function uu(t){return mr.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||mr.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function HB(t){return t>255?255:t<0?0:Math.round(t)}function GB(t){return t>1?1:t<1e-4?1e-4:t}function VB(){if(lu.Konva.isUnminified)return function(t,e){return mr.Util._isNumber(t)||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function WB(t){if(lu.Konva.isUnminified)return function(e,n){let r=mr.Util._isNumber(e),i=mr.Util._isArray(e)&&e.length==t;return!r&&!i&&mr.Util.warn(uu(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function jB(){if(lu.Konva.isUnminified)return function(t,e){var n=mr.Util._isNumber(t),r=t==="auto";return n||r||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function XB(){if(lu.Konva.isUnminified)return function(t,e){return mr.Util._isString(t)||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function YB(){if(lu.Konva.isUnminified)return function(t,e){const n=mr.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function qB(){if(lu.Konva.isUnminified)return function(t,e){return mr.Util._isFunction(t)||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function KB(){if(lu.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(mr.Util._isArray(t)?t.forEach(function(r){mr.Util._isNumber(r)||mr.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function $B(){if(lu.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||mr.Util.warn(uu(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function ZB(t){if(lu.Konva.isUnminified)return function(e,n){return e==null||mr.Util.isObject(e)||mr.Util.warn(uu(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=cr,n=kt,r="get",i="set";t.Factory={addGetterSetter(s,o,a,l,u){t.Factory.addGetter(s,o,a),t.Factory.addSetter(s,o,l,u),t.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var l=r+e.Util._capitalize(o);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[o];return u===void 0?a:u}},addSetter(s,o,a,l){var u=i+e.Util._capitalize(o);s.prototype[u]||t.Factory.overWriteSetter(s,o,a,l)},overWriteSetter(s,o,a,l){var u=i+e.Util._capitalize(o);s.prototype[u]=function(d){return a&&d!==void 0&&d!==null&&(d=a.call(this,d,o)),this._setAttr(o,d),l&&l.call(this),this}},addComponentsGetterSetter(s,o,a,l,u){const d=a.length,m=e.Util._capitalize,g=r+m(o),v=i+m(o);s.prototype[g]=function(){const x={};for(let S=0;S<d;S++){const _=a[S];x[_]=this.getAttr(o+m(_))}return x};const y=(0,n.getComponentValidator)(a);s.prototype[v]=function(x){const S=this.attrs[o];l&&(x=l.call(this,x,o)),y&&y.call(this,x,o);for(const _ in x)x.hasOwnProperty(_)&&this._setAttr(o+m(_),x[_]);return x||a.forEach(_=>{this._setAttr(o+m(_),void 0)}),this._fireChangeEvent(o,S,x),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=e.Util._capitalize(o),l=i+a,u=r+a;s.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,o,a,l){e.Util.error("Adding deprecated "+o);const u=r+e.Util._capitalize(o),d=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(d);const m=this.attrs[o];return m===void 0?a:m},t.Factory.addSetter(s,o,l,function(){e.Util.error(d)}),t.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,l){const u=s.prototype[l],d=r+e.Util._capitalize(a),m=i+e.Util._capitalize(a);function g(){u.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[a]=g,s.prototype[d]=g,s.prototype[m]=g})},afterSetFilter(){this._filterUpToDate=!1}}})(nn);var ha={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.HitContext=Yl.SceneContext=Yl.Context=void 0;const ZN=cr,QB=Jt;function JB(t){const e=[],n=t.length,r=ZN.Util;for(let i=0;i<n;i++){let s=t[i];r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s)}return e}const BP=",",e7="(",t7=")",n7="([",r7="])",i7=";",s7="()",o7="=",zP=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],a7=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],l7=100;class nS{constructor(e){this.canvas=e,QB.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let r=this.traceArr,i=r.length,s="",o,a,l,u;for(o=0;o<i;o++)a=r[o],l=a.method,l?(u=a.args,s+=l,e?s+=s7:ZN.Util._isArray(u[0])?s+=n7+u.join(BP)+r7:(n&&(u=u.map(d=>typeof d=="number"?Math.floor(d):d)),s+=e7+u.join(BP)+t7)):(s+=a.property,e||(s+=o7+a.val)),s+=i7;return s}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,r;n.push(e),r=n.length,r>=l7&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,o){this._context.arc(e,n,r,i,s,o)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,o){this._context.bezierCurveTo(e,n,r,i,s,o)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,o){return this._context.createRadialGradient(e,n,r,i,s,o)}drawImage(e,n,r,i,s,o,a,l,u){const d=arguments,m=this._context;d.length===3?m.drawImage(e,n,r):d.length===5?m.drawImage(e,n,r,i,s):d.length===9&&m.drawImage(e,n,r,i,s,o,a,l,u)}ellipse(e,n,r,i,s,o,a,l){this._context.ellipse(e,n,r,i,s,o,a,l)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}roundRect(e,n,r,i,s){this._context.roundRect(e,n,r,i,s)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,o){this._context.setTransform(e,n,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,o){this._context.transform(e,n,r,i,s,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=zP.length,r=this.setAttr,i,s;const o=function(a){let l=e[a],u;e[a]=function(){return s=JB(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:a,args:s}),u}};for(i=0;i<n;i++)o(zP[i]);e.setAttr=function(){r.apply(e,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Yl.Context=nS;a7.forEach(function(t){Object.defineProperty(nS.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class u7 extends nS{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(let o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i;const s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),d=l.x*u,m=l.y*u;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(d),Math.abs(m))),this.setAttr("shadowOffsetX",a.x*d),this.setAttr("shadowOffsetY",a.y*m)}}Yl.SceneContext=u7;class c7 extends nS{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}Yl.HitContext=c7;Object.defineProperty(ha,"__esModule",{value:!0});ha.HitCanvas=ha.SceneCanvas=ha.Canvas=void 0;const Uy=cr,QN=Yl,JN=Jt,d7=nn,f7=kt;let Lv;function h7(){if(Lv)return Lv;const t=Uy.Util.createCanvasElement(),e=t.getContext("2d");return Lv=function(){const n=JN.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),Uy.Util.releaseCanvas(t),Lv}let rS=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(e||{}).pixelRatio||JN.Konva.pixelRatio||h7();this.pixelRatio=r,this._canvas=Uy.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return Uy.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ha.Canvas=rS;d7.Factory.addGetterSetter(rS,"pixelRatio",void 0,(0,f7.getNumberValidator)());class p7 extends rS{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new QN.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}ha.SceneCanvas=p7;class m7 extends rS{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new QN.HitContext(this),this.setSize(e.width,e.height)}}ha.HitCanvas=m7;var iS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Jt,n=cr;t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];t.DD._dragElements.forEach((s,o)=>{const{node:a}=s,l=a.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(d=>d.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<d||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];t.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(d=>d.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&i.indexOf(u)===-1&&i.push(u)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(iS);Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Node=void 0;const ln=cr,C1=nn,bg=ha,Wu=Jt,bo=iS,Cr=kt,Q_="absoluteOpacity",Nv="allEventListeners",Ul="absoluteTransform",HP="absoluteScale",bd="canvas",g7="Change",v7="children",_7="konva",X3="listening",GP="mouseenter",VP="mouseleave",WP="set",jP="Shape",J_=" ",XP="stage",Qu="transform",y7="Stage",Y3="visible",x7=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(J_);let S7=1,jt=class q3{constructor(e){this._id=S7++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Qu||e===Ul)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let r=this._cache.get(e);return(r===void 0||(e===Qu||e===Ul)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(J_);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(bd)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ul&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(bd)){const{scene:e,filter:n,hit:r}=this._cache.get(bd);ln.Util.releaseCanvas(e,n,r),this._cache.delete(bd)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,d=n.drawBorder||!1,m=n.hitCanvasPixelRatio||1;if(!i||!s){ln.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const g=Math.abs(Math.round(r.x)-a)>.5?1:0,v=Math.abs(Math.round(r.y)-l)>.5?1:0;i+=u*2+g,s+=u*2+v,a-=u,l-=u;const y=new bg.SceneCanvas({pixelRatio:o,width:i,height:s}),x=new bg.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),S=new bg.HitCanvas({pixelRatio:m,width:i,height:s}),_=y.getContext(),M=S.getContext();return S.isCache=!0,y.isCache=!0,this._cache.delete(bd),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),_.save(),M.save(),_.translate(-a,-l),M.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Q_),this._clearSelfAndDescendantCache(HP),this.drawScene(y,this),this.drawHit(S,this),this._isUnderCache=!1,_.restore(),M.restore(),d&&(_.save(),_.beginPath(),_.rect(0,0,i,s),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(bd,{scene:y,filter:x,hit:S,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(bd)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let i=1/0,s=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(n);return r.forEach(function(u){const d=l.point(u);i===void 0&&(i=o=d.x,s=a=d.y),i=Math.min(i,d.x),s=Math.min(s,d.y),o=Math.max(o,d.x),a=Math.max(a,d.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),o,a,l,u;if(e){if(!this._filterUpToDate){const d=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/d,r.getHeight()/d),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){ln.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,a),s.putImageData(a,0,0)}}catch(m){ln.Util.error("Unable to apply filter. "+m.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(Nv),arguments.length===3)return this._delegate.apply(this,arguments);let r=e.split(J_),i=r.length,s,o,a,l,u;for(s=0;s<i;s++)o=r[s],a=o.split("."),l=a[0],u=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){let r=(e||"").split(J_),i=r.length,s,o,a,l,u,d;if(this._cache&&this._cache.delete(Nv),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<i;s++)if(a=r[s],l=a.split("."),u=l[0],d=l[1],u)this.eventListeners[u]&&this._off(u,d,n);else for(o in this.eventListeners)this._off(o,d,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){const i=this;this.on(e,function(s){const o=s.target.findAncestors(n,!0,i);for(let a=0;a<o.length;a++)s=ln.Util.cloneObject(s),s.currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),bo.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ul),this._clearSelfAndDescendantCache(Q_),this._clearSelfAndDescendantCache(HP),this._clearSelfAndDescendantCache(XP),this._clearSelfAndDescendantCache(Y3),this._clearSelfAndDescendantCache(X3)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+ln.Util._capitalize(e);return ln.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,r;if(!e)return this;for(n in e)n!==v7&&(r=WP+ln.Util._capitalize(n),ln.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(X3,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(Y3,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const r=this.getLayer();let i=!1;bo.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});const s=!n&&!Wu.Konva.hitOnDragEnabled&&(i||Wu.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,r=0,i,s,o,a;function l(d){for(i=[],s=d.length,o=0;o<s;o++)a=d[o],r++,a.nodeType!==jP&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(o=s);i.length>0&&i[0].getDepth()<=e&&l(i)}const u=this.getStage();return n.nodeType!==y7&&u&&l(u.getChildren()),r}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Qu),this._clearSelfAndDescendantCache(Ul)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);const i=this.getAbsoluteTransform(e).getMatrix(),s=new ln.Transform,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(Qu);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Qu),this._clearSelfAndDescendantCache(Ul),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){let r=[],i=this.getParent(),s,o;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,o=0;o<s;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ln.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ln.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ln.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ln.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ln.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ln.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Q_,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,r,i,s,o;const a={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=ln.Util.isObject(r)&&!ln.Util._isPlainObject(r)&&!ln.Util._isArray(r),!o&&(i=typeof this[n]=="function"&&this[n],delete e[n],s=i?i.call(this):null,e[n]=r,s!==r&&(a.attrs[n]=r));return ln.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){const i=[];n&&this._isMatch(e)&&i.push(this);let s=this.parent;for(;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],ln.Util.isValidSelector(s)||(ln.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ln.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ln.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(XP,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ul,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new ln.Transform,this._eachAncestorReverse(function(r){const i=r.transformsEnabled();i==="all"?n.multiply(r.getTransform()):i==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),n;{n=this._cache.get(Ul)||new ln.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-o,s-a)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Qu,this._getTransform)}_getTransform(){var e,n;const r=this._cache.get(Qu)||new ln.Transform;r.reset();const i=this.x(),s=this.y(),o=Wu.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,d=this.attrs.skewY||0,m=this.attrs.offsetX||0,g=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),o!==0&&r.rotate(o),(u!==0||d!==0)&&r.skew(u,d),(a!==1||l!==1)&&r.scale(a,l),(m!==0||g!==0)&&r.translate(-1*m,-1*g),r.dirty=!1,r}clone(e){let n=ln.Util.cloneObject(this.attrs),r,i,s,o,a;for(r in e)n[r]=e[r];const l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,o=0;o<s;o++)a=i[o],a.name.indexOf(_7)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,a=new bg.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=a.getContext(),u=new bg.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(i),height:a.height/a.pixelRatio+Math.abs(s),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(a,void 0,u),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,ln.Util._urlToImage(this.toDataURL(e),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),i==null||i(s)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Wu.Konva.dragDistance}_off(e,n,r){let i=this.eventListeners[e],s,o,a;for(s=0;s<i.length;s++)if(o=i[s].name,a=i[s].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+g7,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){const n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){const r=this[WP+ln.Util._capitalize(e)];return ln.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Wu.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){const r=this.attrs[e];r===n&&!ln.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){let i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){if(n&&this.nodeType===jP&&(n.target=this),!((e===GP||e===VP)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,n);const s=(e===GP||e===VP)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,i;const s=(n=this._cache.get(Nv))!==null&&n!==void 0?n:{};let o=s==null?void 0:s[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(i=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];o.push(...l),a=Object.getPrototypeOf(a)}s[e]=o,this._cache.set(Nv,s)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(!r)return;const s=r._getPointerById(n)||r._changedPointerPositions[0]||i;bo.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){bo.DD._dragElements.has(this._id)||this._createDragElement(e);const r=bo.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let i={x:r.x-n.offset.x,y:r.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:ln.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(e){const n=bo.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),bo.DD._endDragBefore(e),bo.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=bo.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Wu.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let i=!1;bo.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=bo.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&bo.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return ln.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return ln.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let r=q3.prototype.getClassName.call(e),i=e.children,s,o,a;n&&(e.attrs.container=n),Wu.Konva[r]||(ln.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Wu.Konva[r];if(s=new l(e.attrs),i)for(o=i.length,a=0;a<o;a++)s.add(q3._createNode(i[a]));return s}};Zn.Node=jt;jt.prototype.nodeType="Node";jt.prototype._attrsAffectingSize=[];jt.prototype.eventListeners={};jt.prototype.on.call(jt.prototype,x7,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Qu),this._clearSelfAndDescendantCache(Ul)});jt.prototype.on.call(jt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Y3)});jt.prototype.on.call(jt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(X3)});jt.prototype.on.call(jt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Q_)});const Dn=C1.Factory.addGetterSetter;Dn(jt,"zIndex");Dn(jt,"absolutePosition");Dn(jt,"position");Dn(jt,"x",0,(0,Cr.getNumberValidator)());Dn(jt,"y",0,(0,Cr.getNumberValidator)());Dn(jt,"globalCompositeOperation","source-over",(0,Cr.getStringValidator)());Dn(jt,"opacity",1,(0,Cr.getNumberValidator)());Dn(jt,"name","",(0,Cr.getStringValidator)());Dn(jt,"id","",(0,Cr.getStringValidator)());Dn(jt,"rotation",0,(0,Cr.getNumberValidator)());C1.Factory.addComponentsGetterSetter(jt,"scale",["x","y"]);Dn(jt,"scaleX",1,(0,Cr.getNumberValidator)());Dn(jt,"scaleY",1,(0,Cr.getNumberValidator)());C1.Factory.addComponentsGetterSetter(jt,"skew",["x","y"]);Dn(jt,"skewX",0,(0,Cr.getNumberValidator)());Dn(jt,"skewY",0,(0,Cr.getNumberValidator)());C1.Factory.addComponentsGetterSetter(jt,"offset",["x","y"]);Dn(jt,"offsetX",0,(0,Cr.getNumberValidator)());Dn(jt,"offsetY",0,(0,Cr.getNumberValidator)());Dn(jt,"dragDistance",void 0,(0,Cr.getNumberValidator)());Dn(jt,"width",0,(0,Cr.getNumberValidator)());Dn(jt,"height",0,(0,Cr.getNumberValidator)());Dn(jt,"listening",!0,(0,Cr.getBooleanValidator)());Dn(jt,"preventDefault",!0,(0,Cr.getBooleanValidator)());Dn(jt,"filters",void 0,function(t){return this._filterUpToDate=!1,t});Dn(jt,"visible",!0,(0,Cr.getBooleanValidator)());Dn(jt,"transformsEnabled","all",(0,Cr.getStringValidator)());Dn(jt,"size");Dn(jt,"dragBoundFunc");Dn(jt,"draggable",!1,(0,Cr.getBooleanValidator)());C1.Factory.backCompat(jt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.Container=void 0;const em=nn,bw=Zn,sS=kt;class Ef extends bw.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[],r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let r=0;r<e.length;r++)this.add(e[r]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){const e=bw.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=bw.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){const i=this.getLayer(),s=e||i&&i.getCanvas(),o=s&&s.getContext(),a=this._getCanvasCache(),l=a&&a.scene,u=s&&s.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();const d=this.getAbsoluteTransform(n).getMatrix();o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",s,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache();if(o&&o.hit){s.save();const l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r,i){var s;const o=n&&n.getContext(),a=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),d=typeof a=="number"&&typeof l=="number"||u,m=r===this;if(d){o.save();const v=this.getAbsoluteTransform(r);let y=v.getMatrix();o.transform(y[0],y[1],y[2],y[3],y[4],y[5]),o.beginPath();let x;if(u)x=u.call(this,o,this);else{const S=this.clipX(),_=this.clipY();o.rect(S||0,_||0,a,l)}o.clip.apply(o,x),y=v.copy().invert().getMatrix(),o.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(o.save(),o._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[e](n,r,i)}),g&&o.restore(),d&&o.restore()}getClientRect(e={}){var n;const r=e.skipTransform,i=e.relativeTo;let s,o,a,l,u={x:1/0,y:1/0,width:0,height:0};const d=this;(n=this.children)===null||n===void 0||n.forEach(function(v){if(!v.visible())return;const y=v.getClientRect({relativeTo:d,skipShadow:e.skipShadow,skipStroke:e.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,o=y.y,a=y.x+y.width,l=y.y+y.height):(s=Math.min(s,y.x),o=Math.min(o,y.y),a=Math.max(a,y.x+y.width),l=Math.max(l,y.y+y.height)))});const m=this.find("Shape");let g=!1;for(let v=0;v<m.length;v++)if(m[v]._isVisible(this)){g=!0;break}return g&&s!==void 0?u={x:s,y:o,width:a-s,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,i)}}Sf.Container=Ef;em.Factory.addComponentsGetterSetter(Ef,"clip",["x","y","width","height"]);em.Factory.addGetterSetter(Ef,"clipX",void 0,(0,sS.getNumberValidator)());em.Factory.addGetterSetter(Ef,"clipY",void 0,(0,sS.getNumberValidator)());em.Factory.addGetterSetter(Ef,"clipWidth",void 0,(0,sS.getNumberValidator)());em.Factory.addGetterSetter(Ef,"clipHeight",void 0,(0,sS.getNumberValidator)());em.Factory.addGetterSetter(Ef,"clipFunc");var e6={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.getCapturedShape=w7;Nc.createEvent=KC;Nc.hasPointerCapture=M7;Nc.setPointerCapture=C7;Nc.releaseCapture=n6;const E7=Jt,W0=new Map,t6=E7.Konva._global.PointerEvent!==void 0;function w7(t){return W0.get(t)}function KC(t){return{evt:t,pointerId:t.pointerId}}function M7(t,e){return W0.get(t)===e}function C7(t,e){n6(t),e.getStage()&&(W0.set(t,e),t6&&e._fire("gotpointercapture",KC(new PointerEvent("gotpointercapture"))))}function n6(t,e){const n=W0.get(t);if(!n)return;const r=n.getStage();r&&r.content,W0.delete(t),t6&&n._fire("lostpointercapture",KC(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=cr,n=nn,r=Sf,i=Jt,s=ha,o=iS,a=Jt,l=Nc,u="Stage",d="string",m="px",g="mouseout",v="mouseleave",y="mouseover",x="mouseenter",S="mousemove",_="mousedown",M="mouseup",E="pointermove",A="pointerdown",L="pointerup",D="pointercancel",U="lostpointercapture",O="pointerout",B="pointerleave",T="pointerover",z="pointerenter",W="contextmenu",K="touchstart",Z="touchend",te="touchmove",ne="touchcancel",de="wheel",Y=5,ae=[[x,"_pointerenter"],[_,"_pointerdown"],[S,"_pointermove"],[M,"_pointerup"],[v,"_pointerleave"],[K,"_pointerdown"],[te,"_pointermove"],[Z,"_pointerup"],[ne,"_pointercancel"],[y,"_pointerover"],[de,"_wheel"],[W,"_contextmenu"],[A,"_pointerdown"],[E,"_pointermove"],[L,"_pointerup"],[D,"_pointercancel"],[U,"_lostpointercapture"]],se={mouse:{[O]:g,[B]:v,[T]:y,[z]:x,[E]:S,[A]:_,[L]:M,[D]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[B]:"touchleave",[T]:"touchover",[z]:"touchenter",[E]:te,[A]:K,[L]:Z,[D]:ne,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[B]:B,[T]:T,[z]:z,[E]:E,[A]:A,[L]:L,[D]:D,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},he=Xe=>Xe.indexOf("pointer")>=0?"pointer":Xe.indexOf("touch")>=0?"touch":"mouse",Me=Xe=>{const Q=he(Xe);if(Q==="pointer")return i.Konva.pointerEventsEnabled&&se.pointer;if(Q==="touch")return se.touch;if(Q==="mouse")return se.mouse};function ze(Xe={}){return(Xe.clipFunc||Xe.clipWidth||Xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Xe}const ge="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class De extends r.Container{constructor(Q){super(ze(Q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ze(this.attrs)}),this._checkVisibility()}_validateAdd(Q){const ye=Q.getType()==="Layer",We=Q.getType()==="FastLayer";ye||We||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Q=this.visible()?"":"none";this.content.style.display=Q}setContainer(Q){if(typeof Q===d){if(Q.charAt(0)==="."){const We=Q.slice(1);Q=document.getElementsByClassName(We)[0]}else{var ye;Q.charAt(0)!=="#"?ye=Q:ye=Q.slice(1),Q=document.getElementById(ye)}if(!Q)throw"Can not find container in document with id "+ye}return this._setAttr("container",Q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const Q=this.children,ye=Q.length;for(let We=0;We<ye;We++)Q[We].clear();return this}clone(Q){return Q||(Q={}),Q.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,Q)}destroy(){super.destroy();const Q=this.content;Q&&e.Util._isInDocument(Q)&&this.container().removeChild(Q);const ye=t.stages.indexOf(this);return ye>-1&&t.stages.splice(ye,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Q=this._pointerPositions[0]||this._changedPointerPositions[0];return Q?{x:Q.x,y:Q.y}:(e.Util.warn(ge),null)}_getPointerById(Q){return this._pointerPositions.find(ye=>ye.id===Q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Q){Q=Q||{},Q.x=Q.x||0,Q.y=Q.y||0,Q.width=Q.width||this.width(),Q.height=Q.height||this.height();const ye=new s.SceneCanvas({width:Q.width,height:Q.height,pixelRatio:Q.pixelRatio||1}),We=ye.getContext()._context,je=this.children;return(Q.x||Q.y)&&We.translate(-1*Q.x,-1*Q.y),je.forEach(function(Ve){if(!Ve.isVisible())return;const Je=Ve._toKonvaCanvas(Q);We.drawImage(Je._canvas,Q.x,Q.y,Je.getWidth()/Je.getPixelRatio(),Je.getHeight()/Je.getPixelRatio())}),ye}getIntersection(Q){if(!Q)return null;const ye=this.children,We=ye.length,je=We-1;for(let Ve=je;Ve>=0;Ve--){const Je=ye[Ve].getIntersection(Q);if(Je)return Je}return null}_resizeDOM(){const Q=this.width(),ye=this.height();this.content&&(this.content.style.width=Q+m,this.content.style.height=ye+m),this.bufferCanvas.setSize(Q,ye),this.bufferHitCanvas.setSize(Q,ye),this.children.forEach(We=>{We.setSize({width:Q,height:ye}),We.draw()})}add(Q,...ye){if(arguments.length>1){for(let je=0;je<arguments.length;je++)this.add(arguments[je]);return this}super.add(Q);const We=this.children.length;return We>Y&&e.Util.warn("The stage has "+We+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Q.setSize({width:this.width(),height:this.height()}),Q.draw(),i.Konva.isBrowser&&this.content.appendChild(Q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Q){return l.hasPointerCapture(Q,this)}setPointerCapture(Q){l.setPointerCapture(Q,this)}releaseCapture(Q){l.releaseCapture(Q,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&ae.forEach(([Q,ye])=>{this.content.addEventListener(Q,We=>{this[ye](We)},{passive:!1})})}_pointerenter(Q){this.setPointersPositions(Q);const ye=Me(Q.type);ye&&this._fire(ye.pointerenter,{evt:Q,target:this,currentTarget:this})}_pointerover(Q){this.setPointersPositions(Q);const ye=Me(Q.type);ye&&this._fire(ye.pointerover,{evt:Q,target:this,currentTarget:this})}_getTargetShape(Q){let ye=this[Q+"targetShape"];return ye&&!ye.getStage()&&(ye=null),ye}_pointerleave(Q){const ye=Me(Q.type),We=he(Q.type);if(!ye)return;this.setPointersPositions(Q);const je=this._getTargetShape(We),Ve=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;je&&Ve?(je._fireAndBubble(ye.pointerout,{evt:Q}),je._fireAndBubble(ye.pointerleave,{evt:Q}),this._fire(ye.pointerleave,{evt:Q,target:this,currentTarget:this}),this[We+"targetShape"]=null):Ve&&(this._fire(ye.pointerleave,{evt:Q,target:this,currentTarget:this}),this._fire(ye.pointerout,{evt:Q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Q){const ye=Me(Q.type),We=he(Q.type);if(!ye)return;this.setPointersPositions(Q);let je=!1;this._changedPointerPositions.forEach(Ve=>{const Je=this.getIntersection(Ve);if(o.DD.justDragged=!1,i.Konva["_"+We+"ListenClick"]=!0,!Je||!Je.isListening()){this[We+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&Je.setPointerCapture(Ve.id),this[We+"ClickStartShape"]=Je,Je._fireAndBubble(ye.pointerdown,{evt:Q,pointerId:Ve.id}),je=!0;const $e=Q.type.indexOf("touch")>=0;Je.preventDefault()&&Q.cancelable&&$e&&Q.preventDefault()}),je||this._fire(ye.pointerdown,{evt:Q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Q){const ye=Me(Q.type),We=he(Q.type);if(!ye||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&Q.cancelable&&Q.preventDefault(),this.setPointersPositions(Q),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const Ve={};let Je=!1;const $e=this._getTargetShape(We);this._changedPointerPositions.forEach(le=>{const At=l.getCapturedShape(le.id)||this.getIntersection(le),Be=le.id,He={evt:Q,pointerId:Be},ke=$e!==At;if(ke&&$e&&($e._fireAndBubble(ye.pointerout,{...He},At),$e._fireAndBubble(ye.pointerleave,{...He},At)),At){if(Ve[At._id])return;Ve[At._id]=!0}At&&At.isListening()?(Je=!0,ke&&(At._fireAndBubble(ye.pointerover,{...He},$e),At._fireAndBubble(ye.pointerenter,{...He},$e),this[We+"targetShape"]=At),At._fireAndBubble(ye.pointermove,{...He})):$e&&(this._fire(ye.pointerover,{evt:Q,target:this,currentTarget:this,pointerId:Be}),this[We+"targetShape"]=null)}),Je||this._fire(ye.pointermove,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Q){const ye=Me(Q.type),We=he(Q.type);if(!ye)return;this.setPointersPositions(Q);const je=this[We+"ClickStartShape"],Ve=this[We+"ClickEndShape"],Je={};let $e=!1;this._changedPointerPositions.forEach(le=>{const At=l.getCapturedShape(le.id)||this.getIntersection(le);if(At){if(At.releaseCapture(le.id),Je[At._id])return;Je[At._id]=!0}const Be=le.id,He={evt:Q,pointerId:Be};let ke=!1;i.Konva["_"+We+"InDblClickWindow"]?(ke=!0,clearTimeout(this[We+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+We+"InDblClickWindow"]=!0,clearTimeout(this[We+"DblTimeout"])),this[We+"DblTimeout"]=setTimeout(function(){i.Konva["_"+We+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),At&&At.isListening()?($e=!0,this[We+"ClickEndShape"]=At,At._fireAndBubble(ye.pointerup,{...He}),i.Konva["_"+We+"ListenClick"]&&je&&je===At&&(At._fireAndBubble(ye.pointerclick,{...He}),ke&&Ve&&Ve===At&&At._fireAndBubble(ye.pointerdblclick,{...He}))):(this[We+"ClickEndShape"]=null,i.Konva["_"+We+"ListenClick"]&&this._fire(ye.pointerclick,{evt:Q,target:this,currentTarget:this,pointerId:Be}),ke&&this._fire(ye.pointerdblclick,{evt:Q,target:this,currentTarget:this,pointerId:Be}))}),$e||this._fire(ye.pointerup,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+We+"ListenClick"]=!1,Q.cancelable&&We!=="touch"&&We!=="pointer"&&Q.preventDefault()}_contextmenu(Q){this.setPointersPositions(Q);const ye=this.getIntersection(this.getPointerPosition());ye&&ye.isListening()?ye._fireAndBubble(W,{evt:Q}):this._fire(W,{evt:Q,target:this,currentTarget:this})}_wheel(Q){this.setPointersPositions(Q);const ye=this.getIntersection(this.getPointerPosition());ye&&ye.isListening()?ye._fireAndBubble(de,{evt:Q}):this._fire(de,{evt:Q,target:this,currentTarget:this})}_pointercancel(Q){this.setPointersPositions(Q);const ye=l.getCapturedShape(Q.pointerId)||this.getIntersection(this.getPointerPosition());ye&&ye._fireAndBubble(L,l.createEvent(Q)),l.releaseCapture(Q.pointerId)}_lostpointercapture(Q){l.releaseCapture(Q.pointerId)}setPointersPositions(Q){const ye=this._getContentPosition();let We=null,je=null;Q=Q||window.event,Q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Q.touches,Ve=>{this._pointerPositions.push({id:Ve.identifier,x:(Ve.clientX-ye.left)/ye.scaleX,y:(Ve.clientY-ye.top)/ye.scaleY})}),Array.prototype.forEach.call(Q.changedTouches||Q.touches,Ve=>{this._changedPointerPositions.push({id:Ve.identifier,x:(Ve.clientX-ye.left)/ye.scaleX,y:(Ve.clientY-ye.top)/ye.scaleY})})):(We=(Q.clientX-ye.left)/ye.scaleX,je=(Q.clientY-ye.top)/ye.scaleY,this.pointerPos={x:We,y:je},this._pointerPositions=[{x:We,y:je,id:e.Util._getFirstPointerId(Q)}],this._changedPointerPositions=[{x:We,y:je,id:e.Util._getFirstPointerId(Q)}])}_setPointerPosition(Q){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Q=this.content.getBoundingClientRect();return{top:Q.top,left:Q.left,scaleX:Q.width/this.content.clientWidth||1,scaleY:Q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const Q=this.container();if(!Q)throw"Stage has no container. A container is required.";Q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Q.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Q){Q.batchDraw()}),this}}t.Stage=De,De.prototype.nodeType=u,(0,a._registerNode)(De),n.Factory.addGetterSetter(De,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(Xe=>{Xe.batchDraw()})})})(e6);var A1={},$r={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Jt,n=cr,r=nn,i=Zn,s=kt,o=Jt,a=Nc,l="hasShadow",u="shadowRGBA",d="patternImage",m="linearGradient",g="radialGradient";let v;function y(){return v||(v=n.Util.createCanvasElement().getContext("2d"),v)}t.shapes={};function x(B){const T=this.attrs.fillRule;T?B.fill(T):B.fill()}function S(B){B.stroke()}function _(B){const T=this.attrs.fillRule;T?B.fill(T):B.fill()}function M(B){B.stroke()}function E(){this._clearCache(l)}function A(){this._clearCache(u)}function L(){this._clearCache(d)}function D(){this._clearCache(m)}function U(){this._clearCache(g)}class O extends i.Node{constructor(T){super(T);let z;for(;z=n.Util.getRandomColor(),!(z&&!(z in t.shapes)););this.colorKey=z,t.shapes[z]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const z=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(z&&z.setTransform){const W=new n.Transform;W.translate(this.fillPatternX(),this.fillPatternY()),W.rotate(e.Konva.getAngle(this.fillPatternRotation())),W.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),W.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const K=W.getMatrix(),Z=typeof DOMMatrix>"u"?{a:K[0],b:K[1],c:K[2],d:K[3],e:K[4],f:K[5]}:new DOMMatrix(K);z.setTransform(Z)}return z}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const z=y(),W=this.fillLinearGradientStartPoint(),K=this.fillLinearGradientEndPoint(),Z=z.createLinearGradient(W.x,W.y,K.x,K.y);for(let te=0;te<T.length;te+=2)Z.addColorStop(T[te],T[te+1]);return Z}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const z=y(),W=this.fillRadialGradientStartPoint(),K=this.fillRadialGradientEndPoint(),Z=z.createRadialGradient(W.x,W.y,this.fillRadialGradientStartRadius(),K.x,K.y,this.fillRadialGradientEndRadius());for(let te=0;te<T.length;te+=2)Z.addColorStop(T[te],T[te+1]);return Z}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=n.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const z=this.getStage();if(!z)return!1;const W=z.bufferHitCanvas;return W.getContext().clear(),this.drawHit(W,void 0,!0),W.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var z;if(!((z=this.attrs.perfectDrawEnabled)!==null&&z!==void 0?z:!0))return!1;const K=T||this.hasFill(),Z=this.hasStroke(),te=this.getAbsoluteOpacity()!==1;if(K&&Z&&te)return!0;const ne=this.hasShadow(),de=this.shadowForStrokeEnabled();return!!(K&&Z&&ne&&de)}setStrokeHitEnabled(T){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let z=!1,W=this.getParent();for(;W;){if(W.isCached()){z=!0;break}W=W.getParent()}const K=T.skipTransform,Z=T.relativeTo||z&&this.getStage()||void 0,te=this.getSelfRect(),de=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=te.width+de,ae=te.height+de,se=!T.skipShadow&&this.hasShadow(),he=se?this.shadowOffsetX():0,Me=se?this.shadowOffsetY():0,ze=Y+Math.abs(he),ge=ae+Math.abs(Me),De=se&&this.shadowBlur()||0,Xe=ze+De*2,Q=ge+De*2,ye={width:Xe,height:Q,x:-(de/2+De)+Math.min(he,0)+te.x,y:-(de/2+De)+Math.min(Me,0)+te.y};return K?ye:this._transformedRect(ye,Z)}drawScene(T,z,W){const K=this.getLayer();let Z=T||K.getCanvas(),te=Z.getContext(),ne=this._getCanvasCache(),de=this.getSceneFunc(),Y=this.hasShadow(),ae,se;const he=Z.isCache,Me=z===this;if(!this.isVisible()&&!Me)return this;if(ne){te.save();const ge=this.getAbsoluteTransform(z).getMatrix();return te.transform(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]),this._drawCachedSceneCanvas(te),te.restore(),this}if(!de)return this;if(te.save(),this._useBufferCanvas()&&!he){ae=this.getStage();const ge=W||ae.bufferCanvas;se=ge.getContext(),se.clear(),se.save(),se._applyLineJoin(this);var ze=this.getAbsoluteTransform(z).getMatrix();se.transform(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5]),de.call(this,se,this),se.restore();const De=ge.pixelRatio;Y&&te._applyShadow(this),te._applyOpacity(this),te._applyGlobalCompositeOperation(this),te.drawImage(ge._canvas,0,0,ge.width/De,ge.height/De)}else{if(te._applyLineJoin(this),!Me){var ze=this.getAbsoluteTransform(z).getMatrix();te.transform(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5]),te._applyOpacity(this),te._applyGlobalCompositeOperation(this)}Y&&te._applyShadow(this),de.call(this,te,this)}return te.restore(),this}drawHit(T,z,W=!1){if(!this.shouldDrawHit(z,W))return this;const K=this.getLayer(),Z=T||K.hitCanvas,te=Z&&Z.getContext(),ne=this.hitFunc()||this.sceneFunc(),de=this._getCanvasCache(),Y=de&&de.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Y){te.save();const se=this.getAbsoluteTransform(z).getMatrix();return te.transform(se[0],se[1],se[2],se[3],se[4],se[5]),this._drawCachedHitCanvas(te),te.restore(),this}if(!ne)return this;if(te.save(),te._applyLineJoin(this),!(this===z)){const se=this.getAbsoluteTransform(z).getMatrix();te.transform(se[0],se[1],se[2],se[3],se[4],se[5])}return ne.call(this,te,this),te.restore(),this}drawHitFromCache(T=0){const z=this._getCanvasCache(),W=this._getCachedSceneCanvas(),K=z.hit,Z=K.getContext(),te=K.getWidth(),ne=K.getHeight();Z.clear(),Z.drawImage(W._canvas,0,0,te,ne);try{const de=Z.getImageData(0,0,te,ne),Y=de.data,ae=Y.length,se=n.Util._hexToRgb(this.colorKey);for(let he=0;he<ae;he+=4)Y[he+3]>T?(Y[he]=se.r,Y[he+1]=se.g,Y[he+2]=se.b,Y[he+3]=255):Y[he+3]=0;Z.putImageData(de,0,0)}catch(de){n.Util.error("Unable to draw hit graph from cached scene canvas. "+de.message)}return this}hasPointerCapture(T){return a.hasPointerCapture(T,this)}setPointerCapture(T){a.setPointerCapture(T,this)}releaseCapture(T){a.releaseCapture(T,this)}}t.Shape=O,O.prototype._fillFunc=x,O.prototype._strokeFunc=S,O.prototype._fillFuncHit=_,O.prototype._strokeFuncHit=M,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,o._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",E),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",A),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",L),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",D),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",U),r.Factory.addGetterSetter(O,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(O,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(O,"lineJoin"),r.Factory.addGetterSetter(O,"lineCap"),r.Factory.addGetterSetter(O,"sceneFunc"),r.Factory.addGetterSetter(O,"hitFunc"),r.Factory.addGetterSetter(O,"dash"),r.Factory.addGetterSetter(O,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(O,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillPatternImage"),r.Factory.addGetterSetter(O,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(O,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(O,"fillEnabled",!0),r.Factory.addGetterSetter(O,"strokeEnabled",!0),r.Factory.addGetterSetter(O,"shadowEnabled",!0),r.Factory.addGetterSetter(O,"dashEnabled",!0),r.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(O,"fillPriority","color"),r.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(O,"fillPatternRotation",0),r.Factory.addGetterSetter(O,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})($r);Object.defineProperty(A1,"__esModule",{value:!0});A1.Layer=void 0;const Ll=cr,Pw=Sf,wh=Zn,$C=nn,YP=ha,A7=kt,b7=$r,P7=Jt,R7="#",T7="beforeDraw",L7="draw",r6=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],N7=r6.length;let tm=class extends Pw.Container{constructor(e){super(e),this.canvas=new YP.SceneCanvas,this.hitCanvas=new YP.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){wh.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!wh.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(wh.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(wh.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return wh.Node.prototype.remove.call(this),e&&e.parentNode&&Ll.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&Ll.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),wh.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Ll.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Ll.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Ll.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let i=0;i<N7;i++){const s=r6[i],o=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=Ll.Util._rgbToHex(r[0],r[1],r[2]),o=b7.shapes[R7+s];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){const r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(T7,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Pw.Container.prototype.drawScene.call(this,i,n),this._fire(L7,{node:this}),this}drawHit(e,n){const r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Pw.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Ll.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Ll.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Ll.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};A1.Layer=tm;tm.prototype.nodeType="Layer";(0,P7._registerNode)(tm);$C.Factory.addGetterSetter(tm,"imageSmoothingEnabled",!0);$C.Factory.addGetterSetter(tm,"clearBeforeDraw",!0);$C.Factory.addGetterSetter(tm,"hitGraphEnabled",!0,(0,A7.getBooleanValidator)());var oS={};Object.defineProperty(oS,"__esModule",{value:!0});oS.FastLayer=void 0;const D7=cr,k7=A1,F7=Jt;class ZC extends k7.Layer{constructor(e){super(e),this.listening(!1),D7.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}oS.FastLayer=ZC;ZC.prototype.nodeType="FastLayer";(0,F7._registerNode)(ZC);var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.Group=void 0;const O7=cr,I7=Sf,U7=Jt;let QC=class extends I7.Container{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&O7.Util.throw("You may only add groups and shapes to groups.")}};nm.Group=QC;QC.prototype.nodeType="Group";(0,U7._registerNode)(QC);var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.Animation=void 0;const Rw=Jt,qP=cr,Tw=function(){return Rw.glob.performance&&Rw.glob.performance.now?function(){return Rw.glob.performance.now()}:function(){return new Date().getTime()}}();class Va{constructor(e,n){this.id=Va.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Tw(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Va.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Tw(),Va._addAnimation(this),this}stop(){return Va._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],s=i.layers,o=i.func;i._updateFrameObject(Tw());const a=s.length;let l;if(o?l=o.call(i,i.frame)!==!1:l=!0,!!l)for(let u=0;u<a;u++){const d=s[u];d._id!==void 0&&(e[d._id]=d)}}for(const r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Va;e.animations.length?(e._runFrames(),qP.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,qP.Util.requestAnimFrame(this._animationLoop))}}rm.Animation=Va;Va.animations=[];Va.animIdCounter=0;Va.animRunning=!1;var i6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=cr,n=rm,r=Zn,i=Jt,s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,u=["fill","stroke","shadowColor"];let d=0;class m{constructor(y,x,S,_,M,E,A){this.prop=y,this.propFunc=x,this.begin=_,this._pos=_,this.duration=E,this._change=0,this.prevPos=0,this.yoyo=A,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=M-this.begin,this.pause()}fire(y){const x=this[y];x&&x()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const y=this.getTimer()-this._startTime;this.state===a?this.setTime(y):this.state===l&&this.setTime(this.duration-y)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(y){const x=this,S=y.node,_=S._id,M=y.easing||t.Easings.Linear,E=!!y.yoyo;let A,L;typeof y.duration>"u"?A=.3:y.duration===0?A=.001:A=y.duration,this.node=S,this._id=d++;const D=S.getLayer()||(S instanceof i.Konva.Stage?S.getLayers():null);D||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){x.tween.onEnterFrame()},D),this.tween=new m(L,function(U){x._tweenFunc(U)},M,0,1,A*1e3,E),this._addListeners(),g.attrs[_]||(g.attrs[_]={}),g.attrs[_][this._id]||(g.attrs[_][this._id]={}),g.tweens[_]||(g.tweens[_]={});for(L in y)s[L]===void 0&&this._addAttr(L,y[L]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,x){const S=this.node,_=S._id;let M,E,A,L,D;const U=g.tweens[_][y];U&&delete g.attrs[_][U][y];let O=S.getAttr(y);if(e.Util._isArray(x))if(M=[],E=Math.max(x.length,O.length),y==="points"&&x.length!==O.length&&(x.length>O.length?(L=O,O=e.Util._prepareArrayForTween(O,x,S.closed())):(A=x,x=e.Util._prepareArrayForTween(x,O,S.closed()))),y.indexOf("fill")===0)for(let B=0;B<E;B++)if(B%2===0)M.push(x[B]-O[B]);else{const T=e.Util.colorToRGBA(O[B]);D=e.Util.colorToRGBA(x[B]),O[B]=T,M.push({r:D.r-T.r,g:D.g-T.g,b:D.b-T.b,a:D.a-T.a})}else for(let B=0;B<E;B++)M.push(x[B]-O[B]);else u.indexOf(y)!==-1?(O=e.Util.colorToRGBA(O),D=e.Util.colorToRGBA(x),M={r:D.r-O.r,g:D.g-O.g,b:D.b-O.b,a:D.a-O.a}):M=x-O;g.attrs[_][this._id][y]={start:O,diff:M,end:x,trueEnd:A,trueStart:L},g.tweens[_][y]=this._id}_tweenFunc(y){const x=this.node,S=g.attrs[x._id][this._id];let _,M,E,A,L,D,U,O;for(_ in S){if(M=S[_],E=M.start,A=M.diff,O=M.end,e.Util._isArray(E))if(L=[],U=Math.max(E.length,O.length),_.indexOf("fill")===0)for(D=0;D<U;D++)D%2===0?L.push((E[D]||0)+A[D]*y):L.push("rgba("+Math.round(E[D].r+A[D].r*y)+","+Math.round(E[D].g+A[D].g*y)+","+Math.round(E[D].b+A[D].b*y)+","+(E[D].a+A[D].a*y)+")");else for(D=0;D<U;D++)L.push((E[D]||0)+A[D]*y);else u.indexOf(_)!==-1?L="rgba("+Math.round(E.r+A.r*y)+","+Math.round(E.g+A.g*y)+","+Math.round(E.b+A.b*y)+","+(E.a+A.a*y)+")":L=E+A*y;x.setAttr(_,L)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const y=this.node,x=g.attrs[y._id][this._id];x.points&&x.points.trueEnd&&y.setAttr("points",x.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const y=this.node,x=g.attrs[y._id][this._id];x.points&&x.points.trueStart&&y.points(x.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const y=this.node._id,x=this._id,S=g.tweens[y];this.pause();for(const _ in S)delete g.tweens[y][_];delete g.attrs[y][x]}}t.Tween=g,g.attrs={},g.tweens={},r.Node.prototype.to=function(v){const y=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),y&&y()},new g(v).play()},t.Easings={BackEaseIn(v,y,x,S){return x*(v/=S)*v*((1.70158+1)*v-1.70158)+y},BackEaseOut(v,y,x,S){return x*((v=v/S-1)*v*((1.70158+1)*v+1.70158)+1)+y},BackEaseInOut(v,y,x,S){let _=1.70158;return(v/=S/2)<1?x/2*(v*v*(((_*=1.525)+1)*v-_))+y:x/2*((v-=2)*v*(((_*=1.525)+1)*v+_)+2)+y},ElasticEaseIn(v,y,x,S,_,M){let E=0;return v===0?y:(v/=S)===1?y+x:(M||(M=S*.3),!_||_<Math.abs(x)?(_=x,E=M/4):E=M/(2*Math.PI)*Math.asin(x/_),-(_*Math.pow(2,10*(v-=1))*Math.sin((v*S-E)*(2*Math.PI)/M))+y)},ElasticEaseOut(v,y,x,S,_,M){let E=0;return v===0?y:(v/=S)===1?y+x:(M||(M=S*.3),!_||_<Math.abs(x)?(_=x,E=M/4):E=M/(2*Math.PI)*Math.asin(x/_),_*Math.pow(2,-10*v)*Math.sin((v*S-E)*(2*Math.PI)/M)+x+y)},ElasticEaseInOut(v,y,x,S,_,M){let E=0;return v===0?y:(v/=S/2)===2?y+x:(M||(M=S*(.3*1.5)),!_||_<Math.abs(x)?(_=x,E=M/4):E=M/(2*Math.PI)*Math.asin(x/_),v<1?-.5*(_*Math.pow(2,10*(v-=1))*Math.sin((v*S-E)*(2*Math.PI)/M))+y:_*Math.pow(2,-10*(v-=1))*Math.sin((v*S-E)*(2*Math.PI)/M)*.5+x+y)},BounceEaseOut(v,y,x,S){return(v/=S)<1/2.75?x*(7.5625*v*v)+y:v<2/2.75?x*(7.5625*(v-=1.5/2.75)*v+.75)+y:v<2.5/2.75?x*(7.5625*(v-=2.25/2.75)*v+.9375)+y:x*(7.5625*(v-=2.625/2.75)*v+.984375)+y},BounceEaseIn(v,y,x,S){return x-t.Easings.BounceEaseOut(S-v,0,x,S)+y},BounceEaseInOut(v,y,x,S){return v<S/2?t.Easings.BounceEaseIn(v*2,0,x,S)*.5+y:t.Easings.BounceEaseOut(v*2-S,0,x,S)*.5+x*.5+y},EaseIn(v,y,x,S){return x*(v/=S)*v+y},EaseOut(v,y,x,S){return-x*(v/=S)*(v-2)+y},EaseInOut(v,y,x,S){return(v/=S/2)<1?x/2*v*v+y:-x/2*(--v*(v-2)-1)+y},StrongEaseIn(v,y,x,S){return x*(v/=S)*v*v*v*v+y},StrongEaseOut(v,y,x,S){return x*((v=v/S-1)*v*v*v*v+1)+y},StrongEaseInOut(v,y,x,S){return(v/=S/2)<1?x/2*v*v*v*v*v+y:x/2*((v-=2)*v*v*v*v+2)+y},Linear(v,y,x,S){return x*v/S+y}}})(i6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Jt,n=cr,r=Zn,i=Sf,s=e6,o=A1,a=oS,l=nm,u=iS,d=$r,m=rm,g=i6,v=Yl,y=ha;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:m.Animation,Tween:g.Tween,Easings:g.Easings,Context:v.Context,Canvas:y.Canvas}),t.default=t.Konva})(Iy);var aS={};Object.defineProperty(aS,"__esModule",{value:!0});aS.Arc=void 0;const lS=nn,B7=$r,KP=Jt,uS=kt,z7=Jt;class cu extends B7.Shape{_sceneFunc(e){const n=KP.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=KP.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),u=s*(s>0?e:n),d=o*n,m=a*(a>0?e:n),g=l*(l>0?n:e);return{x:u,y:r?-1*g:m,width:d-u,height:g-m}}}aS.Arc=cu;cu.prototype._centroid=!0;cu.prototype.className="Arc";cu.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,z7._registerNode)(cu);lS.Factory.addGetterSetter(cu,"innerRadius",0,(0,uS.getNumberValidator)());lS.Factory.addGetterSetter(cu,"outerRadius",0,(0,uS.getNumberValidator)());lS.Factory.addGetterSetter(cu,"angle",0,(0,uS.getNumberValidator)());lS.Factory.addGetterSetter(cu,"clockwise",!1,(0,uS.getBooleanValidator)());var cS={},b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.Line=void 0;const dS=nn,H7=Jt,G7=$r,s6=kt;function K3(t,e,n,r,i,s,o){const a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),u=o*a/(a+l),d=o*l/(a+l),m=n-u*(i-t),g=r-u*(s-e),v=n+d*(i-t),y=r+d*(s-e);return[m,g,v,y]}function $P(t,e){const n=t.length,r=[];for(let i=2;i<n-2;i+=2){const s=K3(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e);isNaN(s[0])||(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]))}return r}let Dc=class extends G7.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let n=this.points(),r=n.length,i=this.tension(),s=this.closed(),o=this.bezier(),a,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,u=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);u<l-2;)e.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);s||e.quadraticCurveTo(a[l-2],a[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():$P(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,r=this.tension(),i=K3(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=K3(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=$P(e,r);return[i[2],i[3]].concat(o).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],r=e[0],i=e[1],s=e[1],o,a;for(let l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);return{x:n,y:i,width:r-n,height:s-i}}};b1.Line=Dc;Dc.prototype.className="Line";Dc.prototype._attrsAffectingSize=["points","bezier","tension"];(0,H7._registerNode)(Dc);dS.Factory.addGetterSetter(Dc,"closed",!1);dS.Factory.addGetterSetter(Dc,"bezier",!1);dS.Factory.addGetterSetter(Dc,"tension",0,(0,s6.getNumberValidator)());dS.Factory.addGetterSetter(Dc,"points",[],(0,s6.getNumberArrayValidator)());var im={},o6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,l)=>{let u,d;const g=l/2;u=0;for(let v=0;v<20;v++)d=g*t.tValues[20][v]+g,u+=t.cValues[20][v]*r(o,a,d);return g*u};t.getCubicArcLength=e;const n=(o,a,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],d=a[0]-2*a[1]+a[2],m=2*o[1]-2*o[0],g=2*a[1]-2*a[0],v=4*(u*u+d*d),y=4*(u*m+d*g),x=m*m+g*g;if(v===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const S=y/(2*v),_=x/v,M=l+S,E=_-S*S,A=M*M+E>0?Math.sqrt(M*M+E):0,L=S*S+E>0?Math.sqrt(S*S+E):0,D=S+Math.sqrt(S*S+E)!==0?E*Math.log(Math.abs((M+A)/(S+L))):0;return Math.sqrt(v)/2*(M*A-S*L+D)};t.getQuadraticArcLength=n;function r(o,a,l){const u=i(1,l,o),d=i(1,l,a),m=u*u+d*d;return Math.sqrt(m)}const i=(o,a,l)=>{const u=l.length-1;let d,m;if(u===0)return 0;if(o===0){m=0;for(let g=0;g<=u;g++)m+=t.binomialCoefficients[u][g]*Math.pow(1-a,u-g)*Math.pow(a,g)*l[g];return m}else{d=new Array(u);for(let g=0;g<u;g++)d[g]=u*(l[g+1]-l[g]);return i(o-1,a,d)}},s=(o,a,l)=>{let u=1,d=o/a,m=(o-l(d))/a,g=0;for(;u>.001;){const v=l(d+m),y=Math.abs(o-v)/a;if(y<u)u=y,d+=m;else{const x=l(d-m),S=Math.abs(o-x)/a;S<u?(u=S,d-=m):m/=2}if(g++,g>500)break}return d};t.t2length=s})(o6);Object.defineProperty(im,"__esModule",{value:!0});im.Path=void 0;const V7=nn,W7=$r,j7=Jt,Mh=o6;let P1=class ws extends W7.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ws.parsePathData(this.data()),this.pathLength=ws.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let r=!1;for(let x=0;x<n.length;x++){const S=n[x].command,_=n[x].points;switch(S){case"L":e.lineTo(_[0],_[1]);break;case"M":e.moveTo(_[0],_[1]);break;case"C":e.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":e.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":var i=_[0],s=_[1],o=_[2],a=_[3],l=_[4],u=_[5],d=_[6],m=_[7],g=o>a?o:a,v=o>a?1:o/a,y=o>a?a/o:1;e.translate(i,s),e.rotate(d),e.scale(v,y),e.arc(0,0,g,l,l+u,1-m),e.scale(1/v,1/y),e.rotate(-d),e.translate(-i,-s);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(l){if(l.command==="A"){const u=l.points[4],d=l.points[5],m=l.points[4]+d;let g=Math.PI/180;if(Math.abs(u-m)<g&&(g=Math.abs(u-m)),d<0)for(let v=u-g;v>m;v-=g){const y=ws.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],v,0);e.push(y.x,y.y)}else for(let v=u+g;v<m;v+=g){const y=ws.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],v,0);e.push(y.x,y.y)}}else if(l.command==="C")for(let u=0;u<=1;u+=.01){const d=ws.getPointOnCubicBezier(u,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(d.x,d.y)}else e=e.concat(l.points)});let n=e[0],r=e[0],i=e[1],s=e[1],o,a;for(let l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){return ws.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPathLength(e){let n=0;for(let r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let r,i=0,s=n.length;if(!s)return null;for(;i<s&&e>n[i].pathLength;)e-=n[i].pathLength,++i;if(i===s)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};const o=n[i],a=o.points;switch(o.command){case"L":return ws.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return ws.getPointOnCubicBezier((0,Mh.t2length)(e,ws.getPathLength(n),x=>(0,Mh.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],x)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return ws.getPointOnQuadraticBezier((0,Mh.t2length)(e,ws.getPathLength(n),x=>(0,Mh.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],x)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var l=a[0],u=a[1],d=a[2],m=a[3],g=a[4],v=a[5],y=a[6];return g+=v*e/o.pathLength,ws.getPointOnEllipticalArc(l,u,d,m,g,y)}return null}static getPointOnLine(e,n,r,i,s,o,a){o=o??n,a=a??r;const l=this.getLineLength(n,r,i,s);if(l<1e-10)return{x:n,y:r};if(i===n)return{x:o,y:a+(s>r?e:-e)};const u=(s-r)/(i-n),d=Math.sqrt(e*e/(1+u*u))*(i<n?-1:1),m=u*d;if(Math.abs(a-r-u*(o-n))<1e-10)return{x:o+d,y:a+m};const g=((o-n)*(i-n)+(a-r)*(s-r))/(l*l),v=n+g*(i-n),y=r+g*(s-r),x=this.getLineLength(o,a,v,y),S=Math.sqrt(e*e-x*x),_=Math.sqrt(S*S/(1+u*u))*(i<n?-1:1),M=u*_;return{x:v+_,y:y+M}}static getPointOnCubicBezier(e,n,r,i,s,o,a,l,u){function d(S){return S*S*S}function m(S){return 3*S*S*(1-S)}function g(S){return 3*S*(1-S)*(1-S)}function v(S){return(1-S)*(1-S)*(1-S)}const y=l*d(e)+o*m(e)+i*g(e)+n*v(e),x=u*d(e)+a*m(e)+s*g(e)+r*v(e);return{x:y,y:x}}static getPointOnQuadraticBezier(e,n,r,i,s,o,a){function l(v){return v*v}function u(v){return 2*v*(1-v)}function d(v){return(1-v)*(1-v)}const m=o*l(e)+i*u(e)+n*d(e),g=a*l(e)+s*u(e)+r*d(e);return{x:m,y:g}}static getPointOnEllipticalArc(e,n,r,i,s,o){const a=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(u.x*a-u.y*l),y:n+(u.x*l+u.y*a)}}static parsePathData(e){if(!e)return[];let n=e;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);const s=n.split("|"),o=[],a=[];let l=0,u=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(i=1;i<s.length;i++){let O=s[i],B=O.charAt(0);for(O=O.slice(1),a.length=0;m=d.exec(O);)a.push(m[0]);const T=[];for(let z=0,W=a.length;z<W;z++){if(a[z]==="00"){T.push(0,0);continue}const K=parseFloat(a[z]);isNaN(K)?T.push(0):T.push(K)}for(;T.length>0&&!isNaN(T[0]);){let z="",W=[];const K=l,Z=u;var g,v,y,x,S,_,M,E,A,L;switch(B){case"l":l+=T.shift(),u+=T.shift(),z="L",W.push(l,u);break;case"L":l=T.shift(),u=T.shift(),W.push(l,u);break;case"m":var D=T.shift(),U=T.shift();if(l+=D,u+=U,z="M",o.length>2&&o[o.length-1].command==="z"){for(let te=o.length-2;te>=0;te--)if(o[te].command==="M"){l=o[te].points[0]+D,u=o[te].points[1]+U;break}}W.push(l,u),B="l";break;case"M":l=T.shift(),u=T.shift(),z="M",W.push(l,u),B="L";break;case"h":l+=T.shift(),z="L",W.push(l,u);break;case"H":l=T.shift(),z="L",W.push(l,u);break;case"v":u+=T.shift(),z="L",W.push(l,u);break;case"V":u=T.shift(),z="L",W.push(l,u);break;case"C":W.push(T.shift(),T.shift(),T.shift(),T.shift()),l=T.shift(),u=T.shift(),W.push(l,u);break;case"c":W.push(l+T.shift(),u+T.shift(),l+T.shift(),u+T.shift()),l+=T.shift(),u+=T.shift(),z="C",W.push(l,u);break;case"S":v=l,y=u,g=o[o.length-1],g.command==="C"&&(v=l+(l-g.points[2]),y=u+(u-g.points[3])),W.push(v,y,T.shift(),T.shift()),l=T.shift(),u=T.shift(),z="C",W.push(l,u);break;case"s":v=l,y=u,g=o[o.length-1],g.command==="C"&&(v=l+(l-g.points[2]),y=u+(u-g.points[3])),W.push(v,y,l+T.shift(),u+T.shift()),l+=T.shift(),u+=T.shift(),z="C",W.push(l,u);break;case"Q":W.push(T.shift(),T.shift()),l=T.shift(),u=T.shift(),W.push(l,u);break;case"q":W.push(l+T.shift(),u+T.shift()),l+=T.shift(),u+=T.shift(),z="Q",W.push(l,u);break;case"T":v=l,y=u,g=o[o.length-1],g.command==="Q"&&(v=l+(l-g.points[0]),y=u+(u-g.points[1])),l=T.shift(),u=T.shift(),z="Q",W.push(v,y,l,u);break;case"t":v=l,y=u,g=o[o.length-1],g.command==="Q"&&(v=l+(l-g.points[0]),y=u+(u-g.points[1])),l+=T.shift(),u+=T.shift(),z="Q",W.push(v,y,l,u);break;case"A":x=T.shift(),S=T.shift(),_=T.shift(),M=T.shift(),E=T.shift(),A=l,L=u,l=T.shift(),u=T.shift(),z="A",W=this.convertEndpointToCenterParameterization(A,L,l,u,M,E,x,S,_);break;case"a":x=T.shift(),S=T.shift(),_=T.shift(),M=T.shift(),E=T.shift(),A=l,L=u,l+=T.shift(),u+=T.shift(),z="A",W=this.convertEndpointToCenterParameterization(A,L,l,u,M,E,x,S,_);break}o.push({command:z||B,points:W,start:{x:K,y:Z},pathLength:this.calcLength(K,Z,z||B,W)})}(B==="z"||B==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,i){let s,o,a,l;const u=ws;switch(r){case"L":return u.getLineLength(e,n,i[0],i[1]);case"C":return(0,Mh.getCubicArcLength)([e,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,Mh.getQuadraticArcLength)([e,i[0],i[2]],[n,i[1],i[3]],1);case"A":s=0;var d=i[4],m=i[5],g=i[4]+m,v=Math.PI/180;if(Math.abs(d-g)<v&&(v=Math.abs(d-g)),o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),m<0)for(l=d-v;l>g;l-=v)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=d+v;l<g;l+=v)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],g,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,o,a,l,u){const d=u*(Math.PI/180),m=Math.cos(d)*(e-r)/2+Math.sin(d)*(n-i)/2,g=-1*Math.sin(d)*(e-r)/2+Math.cos(d)*(n-i)/2,v=m*m/(a*a)+g*g/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));let y=Math.sqrt((a*a*(l*l)-a*a*(g*g)-l*l*(m*m))/(a*a*(g*g)+l*l*(m*m)));s===o&&(y*=-1),isNaN(y)&&(y=0);const x=y*a*g/l,S=y*-l*m/a,_=(e+r)/2+Math.cos(d)*x-Math.sin(d)*S,M=(n+i)/2+Math.sin(d)*x+Math.cos(d)*S,E=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},A=function(T,z){return(T[0]*z[0]+T[1]*z[1])/(E(T)*E(z))},L=function(T,z){return(T[0]*z[1]<T[1]*z[0]?-1:1)*Math.acos(A(T,z))},D=L([1,0],[(m-x)/a,(g-S)/l]),U=[(m-x)/a,(g-S)/l],O=[(-1*m-x)/a,(-1*g-S)/l];let B=L(U,O);return A(U,O)<=-1&&(B=Math.PI),A(U,O)>=1&&(B=0),o===0&&B>0&&(B=B-2*Math.PI),o===1&&B<0&&(B=B+2*Math.PI),[_,M,a,l,D,B,d,o]}};im.Path=P1;P1.prototype.className="Path";P1.prototype._attrsAffectingSize=["data"];(0,j7._registerNode)(P1);V7.Factory.addGetterSetter(P1,"data");Object.defineProperty(cS,"__esModule",{value:!0});cS.Arrow=void 0;const fS=nn,X7=b1,a6=kt,Y7=Jt,ZP=im;let wf=class extends X7.Line{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,r=this.points();let i=r;const s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());const o=this.pointerLength(),a=r.length;let l,u;if(s){const g=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],v=ZP.Path.calcLength(i[i.length-4],i[i.length-3],"C",g),y=ZP.Path.getPointOnQuadraticBezier(Math.min(1,1-o/v),g[0],g[1],g[2],g[3],g[4],g[5]);l=r[a-2]-y.x,u=r[a-1]-y.y}else l=r[a-2]-r[a-4],u=r[a-1]-r[a-3];const d=(Math.atan2(u,l)+n)%n,m=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],u=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}};cS.Arrow=wf;wf.prototype.className="Arrow";(0,Y7._registerNode)(wf);fS.Factory.addGetterSetter(wf,"pointerLength",10,(0,a6.getNumberValidator)());fS.Factory.addGetterSetter(wf,"pointerWidth",10,(0,a6.getNumberValidator)());fS.Factory.addGetterSetter(wf,"pointerAtBeginning",!1);fS.Factory.addGetterSetter(wf,"pointerAtEnding",!0);var hS={};Object.defineProperty(hS,"__esModule",{value:!0});hS.Circle=void 0;const q7=nn,K7=$r,$7=kt,Z7=Jt;let sm=class extends K7.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};hS.Circle=sm;sm.prototype._centroid=!0;sm.prototype.className="Circle";sm.prototype._attrsAffectingSize=["radius"];(0,Z7._registerNode)(sm);q7.Factory.addGetterSetter(sm,"radius",0,(0,$7.getNumberValidator)());var pS={};Object.defineProperty(pS,"__esModule",{value:!0});pS.Ellipse=void 0;const JC=nn,Q7=$r,l6=kt,J7=Jt;class kc extends Q7.Shape{_sceneFunc(e){const n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}pS.Ellipse=kc;kc.prototype.className="Ellipse";kc.prototype._centroid=!0;kc.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,J7._registerNode)(kc);JC.Factory.addComponentsGetterSetter(kc,"radius",["x","y"]);JC.Factory.addGetterSetter(kc,"radiusX",0,(0,l6.getNumberValidator)());JC.Factory.addGetterSetter(kc,"radiusY",0,(0,l6.getNumberValidator)());var mS={};Object.defineProperty(mS,"__esModule",{value:!0});mS.Image=void 0;const Lw=cr,Mf=nn,ez=$r,tz=Jt,R1=kt;let il=class u6 extends ez.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let o;if(s){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[s,this.cropX(),this.cropY(),a,l,0,0,n,r]:o=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?Lw.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?Lw.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){const i=Lw.Util.createImageElement();i.onload=function(){const s=new u6({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};mS.Image=il;il.prototype.className="Image";(0,tz._registerNode)(il);Mf.Factory.addGetterSetter(il,"cornerRadius",0,(0,R1.getNumberOrArrayOfNumbersValidator)(4));Mf.Factory.addGetterSetter(il,"image");Mf.Factory.addComponentsGetterSetter(il,"crop",["x","y","width","height"]);Mf.Factory.addGetterSetter(il,"cropX",0,(0,R1.getNumberValidator)());Mf.Factory.addGetterSetter(il,"cropY",0,(0,R1.getNumberValidator)());Mf.Factory.addGetterSetter(il,"cropWidth",0,(0,R1.getNumberValidator)());Mf.Factory.addGetterSetter(il,"cropHeight",0,(0,R1.getNumberValidator)());var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.Tag=Fp.Label=void 0;const gS=nn,nz=$r,rz=nm,eA=kt,c6=Jt,d6=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],iz="Change.konva",sz="none",$3="up",Z3="right",Q3="down",J3="left",oz=d6.length;let tA=class extends rz.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,r;const i=function(){n._sync()};for(r=0;r<oz;r++)e.on(d6[r]+iz,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),r,i,s,o,a,l,u;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),a=0,l=0,s){case $3:a=r/2,l=-1*u;break;case Z3:a=r+o,l=i/2;break;case Q3:a=r/2,l=i+u;break;case J3:a=-1*o,l=i/2;break}n.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}};Fp.Label=tA;tA.prototype.className="Label";(0,c6._registerNode)(tA);let Cf=class extends nz.Shape{_sceneFunc(e){const n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,u=0,d=0,m=0;typeof a=="number"?l=u=d=m=Math.min(a,n/2,r/2):(l=Math.min(a[0]||0,n/2,r/2),u=Math.min(a[1]||0,n/2,r/2),m=Math.min(a[2]||0,n/2,r/2),d=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===$3&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+s)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),i===Z3&&(e.lineTo(n,(r-o)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-m),e.arc(n-m,r-m,m,0,Math.PI/2,!1),i===Q3&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-s)/2,r)),e.lineTo(d,r),e.arc(d,r-d,d,Math.PI/2,Math.PI,!1),i===J3&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===$3?(n-=i,a+=i):s===Q3?a+=i:s===J3?(e-=r*1.5,o+=r):s===Z3&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}};Fp.Tag=Cf;Cf.prototype.className="Tag";(0,c6._registerNode)(Cf);gS.Factory.addGetterSetter(Cf,"pointerDirection",sz);gS.Factory.addGetterSetter(Cf,"pointerWidth",0,(0,eA.getNumberValidator)());gS.Factory.addGetterSetter(Cf,"pointerHeight",0,(0,eA.getNumberValidator)());gS.Factory.addGetterSetter(Cf,"cornerRadius",0,(0,eA.getNumberOrArrayOfNumbersValidator)(4));var T1={};Object.defineProperty(T1,"__esModule",{value:!0});T1.Rect=void 0;const az=nn,lz=$r,uz=Jt,cz=cr,dz=kt;let vS=class extends lz.Shape{_sceneFunc(e){const n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?cz.Util.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};T1.Rect=vS;vS.prototype.className="Rect";(0,uz._registerNode)(vS);az.Factory.addGetterSetter(vS,"cornerRadius",0,(0,dz.getNumberOrArrayOfNumbersValidator)(4));var _S={};Object.defineProperty(_S,"__esModule",{value:!0});_S.RegularPolygon=void 0;const f6=nn,fz=$r,h6=kt,hz=Jt;class Af extends fz.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();let n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}_S.RegularPolygon=Af;Af.prototype.className="RegularPolygon";Af.prototype._centroid=!0;Af.prototype._attrsAffectingSize=["radius"];(0,hz._registerNode)(Af);f6.Factory.addGetterSetter(Af,"radius",0,(0,h6.getNumberValidator)());f6.Factory.addGetterSetter(Af,"sides",0,(0,h6.getNumberValidator)());var yS={};Object.defineProperty(yS,"__esModule",{value:!0});yS.Ring=void 0;const p6=nn,pz=$r,m6=kt,mz=Jt,QP=Math.PI*2;class bf extends pz.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,QP,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),QP,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}yS.Ring=bf;bf.prototype.className="Ring";bf.prototype._centroid=!0;bf.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,mz._registerNode)(bf);p6.Factory.addGetterSetter(bf,"innerRadius",0,(0,m6.getNumberValidator)());p6.Factory.addGetterSetter(bf,"outerRadius",0,(0,m6.getNumberValidator)());var xS={};Object.defineProperty(xS,"__esModule",{value:!0});xS.Sprite=void 0;const Pf=nn,gz=$r,vz=rm,g6=kt,_z=Jt;let sl=class extends gz.Shape{constructor(e){super(e),this._updated=!0,this.anim=new vz.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+0],l=s[i+1],u=s[i+2],d=s[i+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,d),e.closePath(),e.fillStrokeShape(this)),m)if(o){const g=o[n],v=r*2;e.drawImage(m,a,l,u,d,g[v+0],g[v+1],u,d)}else e.drawImage(m,a,l,u,d,0,0,u,d)}_hitFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+2],l=s[i+3];if(e.beginPath(),o){const u=o[n],d=r*2;e.rect(u[d+0],u[d+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}};xS.Sprite=sl;sl.prototype.className="Sprite";(0,_z._registerNode)(sl);Pf.Factory.addGetterSetter(sl,"animation");Pf.Factory.addGetterSetter(sl,"animations");Pf.Factory.addGetterSetter(sl,"frameOffsets");Pf.Factory.addGetterSetter(sl,"image");Pf.Factory.addGetterSetter(sl,"frameIndex",0,(0,g6.getNumberValidator)());Pf.Factory.addGetterSetter(sl,"frameRate",17,(0,g6.getNumberValidator)());Pf.Factory.backCompat(sl,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var SS={};Object.defineProperty(SS,"__esModule",{value:!0});SS.Star=void 0;const nA=nn,yz=$r,rA=kt,xz=Jt;class Fc extends yz.Shape{_sceneFunc(e){const n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(let s=1;s<i*2;s++){const o=s%2===0?r:n,a=o*Math.sin(s*Math.PI/i),l=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}SS.Star=Fc;Fc.prototype.className="Star";Fc.prototype._centroid=!0;Fc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,xz._registerNode)(Fc);nA.Factory.addGetterSetter(Fc,"numPoints",5,(0,rA.getNumberValidator)());nA.Factory.addGetterSetter(Fc,"innerRadius",0,(0,rA.getNumberValidator)());nA.Factory.addGetterSetter(Fc,"outerRadius",0,(0,rA.getNumberValidator)());var om={};Object.defineProperty(om,"__esModule",{value:!0});om.Text=void 0;om.stringToArray=Vd;const e2=cr,ji=nn,Sz=$r,Nw=Jt,Oc=kt,Ez=Jt;function Vd(t){return[...t].reduce((e,n,r,i)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const s=i[r+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(n+s),i[r+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(i[r+1]||""))?e.push(n+i[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Ch="auto",wz="center",v6="inherit",Pg="justify",Mz="Change.konva",Cz="2d",JP="-",_6="left",Az="text",bz="Text",Pz="top",Rz="bottom",eR="middle",y6="normal",Tz="px ",Dv=" ",Lz="right",tR="rtl",Nz="word",Dz="char",nR="none",Dw="…",x6=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],kz=x6.length;function Fz(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}let kv;function kw(){return kv||(kv=e2.Util.createCanvasElement().getContext(Cz),kv)}function Oz(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Iz(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Uz(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let vr=class extends Sz.Shape{constructor(e){super(Uz(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<kz;n++)this.on(x6[n]+Mz,this._setTextData);this._setTextData()}_sceneFunc(e){const n=this.textArr,r=n.length;if(!this.text())return;let i=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=this.direction(),u=0,d=this.align(),m=this.getWidth(),g=this.letterSpacing(),v=this.fill(),y=this.textDecoration(),x=y.indexOf("underline")!==-1,S=y.indexOf("line-through")!==-1,_;l=l===v6?e.direction:l;let M=o/2,E=eR;if(Nw.Konva._fixTextRendering){const W=this.measureSize("M");E="alphabetic",M=(W.fontBoundingBoxAscent-W.fontBoundingBoxDescent)/2+o/2}var A=0,L=0;for(l===tR&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",E),e.setAttr("textAlign",_6),a===eR?u=(this.getHeight()-r*o-i*2)/2:a===Rz&&(u=this.getHeight()-r*o-i*2),e.translate(i,u+i),_=0;_<r;_++){var A=0,L=0,D=n[_],U=D.text,O=D.width,B=D.lastInParagraph,T,z;if(e.save(),d===Lz?A+=m-O-i*2:d===wz&&(A+=(m-O-i*2)/2),x){e.save(),e.beginPath();const Z=Nw.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),te=A,ne=M+L+Z;e.moveTo(te,ne),T=U.split(" ").length-1,z=d===Pg&&!B?m-i*2:O,e.lineTo(te+Math.round(z),ne),e.lineWidth=s/15;const de=this._getLinearGradient();e.strokeStyle=de||v,e.stroke(),e.restore()}if(S){e.save(),e.beginPath();const Z=Nw.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(A,M+L+Z),T=U.split(" ").length-1,z=d===Pg&&!B?m-i*2:O,e.lineTo(A+Math.round(z),M+L+Z),e.lineWidth=s/15;const te=this._getLinearGradient();e.strokeStyle=te||v,e.stroke(),e.restore()}if(l!==tR&&(g!==0||d===Pg)){T=U.split(" ").length-1;const Z=Vd(U);for(let te=0;te<Z.length;te++){const ne=Z[te];ne===" "&&!B&&d===Pg&&(A+=(m-i*2-O)/T),this._partialTextX=A,this._partialTextY=M+L,this._partialText=ne,e.fillStrokeShape(this),A+=this.measureSize(ne).width+g}}else g!==0&&e.setAttr("letterSpacing",`${g}px`),this._partialTextX=A,this._partialTextY=M+L,this._partialText=U,e.fillStrokeShape(this);e.restore(),r>1&&(M+=o)}}_hitFunc(e){const n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=e2.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Az,n),this}getWidth(){return this.attrs.width===Ch||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Ch||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e2.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,i,s,o,a,l,u,d,m,g;let v=kw(),y=this.fontSize(),x;v.save(),v.font=this._getContextFont(),x=v.measureText(e),v.restore();const S=y/100;return{actualBoundingBoxAscent:(n=x.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*S,actualBoundingBoxDescent:(r=x.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=x.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*S,actualBoundingBoxRight:(s=x.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*S,alphabeticBaseline:(o=x.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=x.emHeightAscent)!==null&&a!==void 0?a:100*S,emHeightDescent:(l=x.emHeightDescent)!==null&&l!==void 0?l:-20*S,fontBoundingBoxAscent:(u=x.fontBoundingBoxAscent)!==null&&u!==void 0?u:91*S,fontBoundingBoxDescent:(d=x.fontBoundingBoxDescent)!==null&&d!==void 0?d:21*S,hangingBaseline:(m=x.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*S,ideographicBaseline:(g=x.ideographicBaseline)!==null&&g!==void 0?g:-21*S,width:x.width,height:y}}_getContextFont(){return this.fontStyle()+Dv+this.fontVariant()+Dv+(this.fontSize()+Tz)+Fz(this.fontFamily())}_addTextLine(e){this.align()===Pg&&(e=e.trim());const r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),r=e.length;return kw().measureText(e).width+n*r}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,o=this.attrs.height,a=s!==Ch&&s!==void 0,l=o!==Ch&&o!==void 0,u=this.padding(),d=s-u*2,m=o-u*2,g=0,v=this.wrap(),y=v!==nR,x=v!==Dz&&y,S=this.ellipsis();this.textArr=[],kw().font=this._getContextFont();const _=S?this._getTextWidth(Dw):0;for(let M=0,E=e.length;M<E;++M){let A=e[M],L=this._getTextWidth(A);if(a&&L>d)for(;A.length>0;){let D=0,U=Vd(A).length,O="",B=0;for(;D<U;){const T=D+U>>>1,z=Vd(A),W=z.slice(0,T+1).join(""),K=this._getTextWidth(W)+_;K<=d?(D=T+1,O=W,B=K):U=T}if(O){if(x){const W=Vd(A),K=Vd(O),Z=W[K.length],te=Z===Dv||Z===JP;let ne;if(te&&B<=d)ne=K.length;else{const de=K.lastIndexOf(Dv),Y=K.lastIndexOf(JP);ne=Math.max(de,Y)+1}ne>0&&(D=ne,O=W.slice(0,D).join(""),B=this._getTextWidth(O))}if(O=O.trimRight(),this._addTextLine(O),r=Math.max(r,B),g+=i,this._shouldHandleEllipsis(g)){this._tryToAddEllipsisToLastLine();break}if(A=Vd(A).slice(D).join("").trimLeft(),A.length>0&&(L=this._getTextWidth(A),L<=d)){this._addTextLine(A),g+=i,r=Math.max(r,L);break}}else break}else this._addTextLine(A),g+=i,r=Math.max(r,L),this._shouldHandleEllipsis(g)&&M<E-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&g+i>m)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){const n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==Ch&&i!==void 0,o=this.padding(),a=i-o*2;return!(this.wrap()!==nR)||s&&e+r>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Ch&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!s||(n&&(this._getTextWidth(o.text+Dw)<i||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Dw))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};om.Text=vr;vr.prototype._fillFunc=Oz;vr.prototype._strokeFunc=Iz;vr.prototype.className=bz;vr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Ez._registerNode)(vr);ji.Factory.overWriteSetter(vr,"width",(0,Oc.getNumberOrAutoValidator)());ji.Factory.overWriteSetter(vr,"height",(0,Oc.getNumberOrAutoValidator)());ji.Factory.addGetterSetter(vr,"direction",v6);ji.Factory.addGetterSetter(vr,"fontFamily","Arial");ji.Factory.addGetterSetter(vr,"fontSize",12,(0,Oc.getNumberValidator)());ji.Factory.addGetterSetter(vr,"fontStyle",y6);ji.Factory.addGetterSetter(vr,"fontVariant",y6);ji.Factory.addGetterSetter(vr,"padding",0,(0,Oc.getNumberValidator)());ji.Factory.addGetterSetter(vr,"align",_6);ji.Factory.addGetterSetter(vr,"verticalAlign",Pz);ji.Factory.addGetterSetter(vr,"lineHeight",1,(0,Oc.getNumberValidator)());ji.Factory.addGetterSetter(vr,"wrap",Nz);ji.Factory.addGetterSetter(vr,"ellipsis",!1,(0,Oc.getBooleanValidator)());ji.Factory.addGetterSetter(vr,"letterSpacing",0,(0,Oc.getNumberValidator)());ji.Factory.addGetterSetter(vr,"text","",(0,Oc.getStringValidator)());ji.Factory.addGetterSetter(vr,"textDecoration","");var ES={};Object.defineProperty(ES,"__esModule",{value:!0});ES.TextPath=void 0;const Fw=cr,ya=nn,Bz=$r,Rg=im,Ow=om,S6=kt,zz=Jt,Hz="",E6="normal";function w6(t){t.fillText(this.partialText,0,0)}function M6(t){t.strokeText(this.partialText,0,0)}class Zr extends Bz.Shape{constructor(e){super(e),this.dummyCanvas=Fw.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Rg.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:Rg.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Rg.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(let o=0;o<s.length;o++){e.save();const a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;e.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const i=n[r].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Fw.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Ow.Text.prototype.setText.call(this,e)}_getContextFont(){return Ow.Text.prototype._getContextFont.call(this)}_getTextSize(e){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),i==="right"&&(a=Math.max(0,this.pathLength-o));const l=(0,Ow.stringToArray)(this.text());let u=a;for(let d=0;d<l.length;d++){const m=this._getPointAtLength(u);if(!m)return;let g=this._getTextSize(l[d]).width+r;if(l[d]===" "&&i==="justify"){const M=this.text().split(" ").length-1;g+=(this.pathLength-o)/M}const v=this._getPointAtLength(u+g);if(!v)return;const y=Rg.Path.getLineLength(m.x,m.y,v.x,v.y);let x=0;if(s)try{x=s(l[d-1],l[d])*this.fontSize()}catch{x=0}m.x+=x,v.x+=x,this.textWidth+=x;const S=Rg.Path.getPointOnLine(x+y/2,m.x,m.y,v.x,v.y),_=Math.atan2(v.y-m.y,v.x-m.x);this.glyphInfo.push({transposeX:S.x,transposeY:S.y,text:l[d],rotation:_,p0:m,p1:v}),u+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});let n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,o,a;for(let u=0;u<e.length/2;u++)o=e[u*2],a=e[u*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);const l=this.fontSize();return{x:n-l/2,y:i-l/2,width:r-n+l,height:s-i+l}}destroy(){return Fw.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}ES.TextPath=Zr;Zr.prototype._fillFunc=w6;Zr.prototype._strokeFunc=M6;Zr.prototype._fillFuncHit=w6;Zr.prototype._strokeFuncHit=M6;Zr.prototype.className="TextPath";Zr.prototype._attrsAffectingSize=["text","fontSize","data"];(0,zz._registerNode)(Zr);ya.Factory.addGetterSetter(Zr,"data");ya.Factory.addGetterSetter(Zr,"fontFamily","Arial");ya.Factory.addGetterSetter(Zr,"fontSize",12,(0,S6.getNumberValidator)());ya.Factory.addGetterSetter(Zr,"fontStyle",E6);ya.Factory.addGetterSetter(Zr,"align","left");ya.Factory.addGetterSetter(Zr,"letterSpacing",0,(0,S6.getNumberValidator)());ya.Factory.addGetterSetter(Zr,"textBaseline","middle");ya.Factory.addGetterSetter(Zr,"fontVariant",E6);ya.Factory.addGetterSetter(Zr,"text",Hz);ya.Factory.addGetterSetter(Zr,"textDecoration","");ya.Factory.addGetterSetter(Zr,"kerningFunc",void 0);var wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.Transformer=void 0;const Pn=cr,Mn=nn,rR=Zn,Gz=$r,Vz=T1,iR=nm,na=Jt,Ic=kt,Wz=Jt,C6="tr-konva",jz=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${C6}`).join(" "),sR="nodesRect",Xz=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Yz={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},qz="ontouchstart"in na.Konva._global;function Kz(t,e,n){if(t==="rotater")return n;e+=Pn.Util.degToRad(Yz[t]||0);const r=(Pn.Util.radToDeg(e)%360+360)%360;return Pn.Util._inRange(r,315+22.5,360)||Pn.Util._inRange(r,0,22.5)?"ns-resize":Pn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Pn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Pn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Pn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Pn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Pn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Pn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Pn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const By=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function $z(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function A6(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:i}}function Zz(t,e){const n=$z(t);return A6(t,e,n)}function Qz(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=na.Konva.getAngle(t[i]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=s)}return r}let t2=0;class cn extends iR.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(jz,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Pn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return C6+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(i=>i.isAncestorOf(this)?(Pn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(o,s),i.on(Xz.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,o=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+s,y:l.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(sR),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(sR,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y,u=(na.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),d={x:o.x+a*Math.cos(u)+l*Math.sin(-u),y:o.y+l*Math.cos(u)+a*Math.sin(u),width:i.width*s.x,height:i.height*s.y,rotation:u};return A6(d,-na.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(u=>{const d=u.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],g=u.getAbsoluteTransform();m.forEach(function(v){const y=g.point(v);n.push(y)})});const r=new Pn.Transform;r.rotate(-na.Konva.getAngle(this.rotation()));let i=1/0,s=1/0,o=-1/0,a=-1/0;n.forEach(function(u){const d=r.point(u);i===void 0&&(i=o=d.x,s=a=d.y),i=Math.min(i,d.x),s=Math.min(s,d.y),o=Math.max(o,d.x),a=Math.max(a,d.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:o-i,height:a-s,rotation:na.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),By.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new Vz.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:qz?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{const i=na.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),o=Kz(e,i,s);n.getStage().content&&(n.getStage().content.style.cursor=o),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new Gz.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const i=r.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*Pn.Util._sign(r.height())-s),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},t2++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){let n,r,i;const s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const u=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(u,l,e)),s.setAbsolutePosition(l);const d=s.getAbsolutePosition();if(u.x===d.x&&u.y===d.y)return;if(this._movingAnchorName==="rotater"){const L=this._getNodeRect();n=s.x()-L.width/2,r=-s.y()+L.height/2;let D=Math.atan2(-r,n)+Math.PI/2;L.height<0&&(D-=Math.PI);const O=na.Konva.getAngle(this.rotation())+D,B=na.Konva.getAngle(this.rotationSnapTolerance()),z=Qz(this.rotationSnaps(),O,B)-L.rotation,W=Zz(L,z);this._fitNodesInto(W,e);return}const m=this.shiftBehavior();let g;m==="inverted"?g=this.keepRatio()&&!e.shiftKey:m==="none"?g=this.keepRatio():g=this.keepRatio()||e.shiftKey;var _=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){var v=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(v.y-s.y(),2));var y=this.findOne(".top-left").x()>v.x?-1:1,x=this.findOne(".top-left").y()>v.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-left").x(v.x-n),this.findOne(".top-left").y(v.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var v=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(v.y-s.y(),2));var y=this.findOne(".top-right").x()<v.x?-1:1,x=this.findOne(".top-right").y()>v.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-right").x(v.x+n),this.findOne(".top-right").y(v.y-r)}var S=s.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var v=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(s.y()-v.y,2));var y=v.x<s.x()?-1:1,x=s.y()<v.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,s.x(v.x-n),s.y(v.y+r)}S=s.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var v=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(s.y()-v.y,2));var y=this.findOne(".bottom-right").x()<v.x?-1:1,x=this.findOne(".bottom-right").y()<v.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".bottom-right").x(v.x+n),this.findOne(".bottom-right").y(v.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var _=this.centeredScaling()||e.altKey;if(_){const L=this.findOne(".top-left"),D=this.findOne(".bottom-right"),U=L.x(),O=L.y(),B=this.getWidth()-D.x(),T=this.getHeight()-D.y();D.move({x:-U,y:-O}),L.move({x:B,y:T})}const M=this.findOne(".top-left").getAbsolutePosition();n=M.x,r=M.y;const E=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),A=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:E,height:A,rotation:na.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();t2--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:e,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const r=this._getNodeRect(),i=1;if(Pn.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(Pn.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=new Pn.Transform;if(s.rotate(na.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const g=s.point({x:-this.padding()*2,y:0});e.x+=g.x,e.y+=g.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const g=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const g=s.point({x:0,y:-this.padding()*2});e.x+=g.x,e.y+=g.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const g=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const g=this.boundBoxFunc()(r,e);g?e=g:Pn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new Pn.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/o,r.height/o);const l=new Pn.Transform,u=e.width/o,d=e.height/o;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(u),Math.abs(d))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(u,d));const m=l.multiply(a.invert());this._nodes.forEach(g=>{var v;const y=g.getParent().getAbsoluteTransform(),x=g.getTransform().copy();x.translate(g.offsetX(),g.offsetY());const S=new Pn.Transform;S.multiply(y.copy().invert()).multiply(m).multiply(y).multiply(x);const _=S.decompose();g.setAttrs(_),(v=g.getLayer())===null||v===void 0||v.batchDraw()}),this.rotation(Pn.Util._getRotation(e.rotation)),this._nodes.forEach(g=>{this._fire("transform",{evt:n,target:g}),g._fire("transform",{evt:n,target:g})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(Pn.Util._getRotation(n.rotation));const r=n.width,i=n.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),u=this.find("._anchor");u.forEach(m=>{m.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Pn.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&u.forEach(m=>{d(m)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),iR.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return rR.Node.prototype.toObject.call(this)}clone(e){return rR.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}wS.Transformer=cn;cn.isTransforming=()=>t2>0;function Jz(t){return t instanceof Array||Pn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){By.indexOf(e)===-1&&Pn.Util.warn("Unknown anchor name: "+e+". Available names are: "+By.join(", "))}),t||[]}cn.prototype.className="Transformer";(0,Wz._registerNode)(cn);Mn.Factory.addGetterSetter(cn,"enabledAnchors",By,Jz);Mn.Factory.addGetterSetter(cn,"flipEnabled",!0,(0,Ic.getBooleanValidator)());Mn.Factory.addGetterSetter(cn,"resizeEnabled",!0);Mn.Factory.addGetterSetter(cn,"anchorSize",10,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"rotateEnabled",!0);Mn.Factory.addGetterSetter(cn,"rotateLineVisible",!0);Mn.Factory.addGetterSetter(cn,"rotationSnaps",[]);Mn.Factory.addGetterSetter(cn,"rotateAnchorOffset",50,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"rotateAnchorCursor","crosshair");Mn.Factory.addGetterSetter(cn,"rotationSnapTolerance",5,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"borderEnabled",!0);Mn.Factory.addGetterSetter(cn,"anchorStroke","rgb(0, 161, 255)");Mn.Factory.addGetterSetter(cn,"anchorStrokeWidth",1,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"anchorFill","white");Mn.Factory.addGetterSetter(cn,"anchorCornerRadius",0,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"borderStroke","rgb(0, 161, 255)");Mn.Factory.addGetterSetter(cn,"borderStrokeWidth",1,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"borderDash");Mn.Factory.addGetterSetter(cn,"keepRatio",!0);Mn.Factory.addGetterSetter(cn,"shiftBehavior","default");Mn.Factory.addGetterSetter(cn,"centeredScaling",!1);Mn.Factory.addGetterSetter(cn,"ignoreStroke",!1);Mn.Factory.addGetterSetter(cn,"padding",0,(0,Ic.getNumberValidator)());Mn.Factory.addGetterSetter(cn,"nodes");Mn.Factory.addGetterSetter(cn,"node");Mn.Factory.addGetterSetter(cn,"boundBoxFunc");Mn.Factory.addGetterSetter(cn,"anchorDragBoundFunc");Mn.Factory.addGetterSetter(cn,"anchorStyleFunc");Mn.Factory.addGetterSetter(cn,"shouldOverdrawWholeArea",!1);Mn.Factory.addGetterSetter(cn,"useSingleNodeRotation",!0);Mn.Factory.backCompat(cn,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var MS={};Object.defineProperty(MS,"__esModule",{value:!0});MS.Wedge=void 0;const CS=nn,eH=$r,tH=Jt,b6=kt,nH=Jt;class du extends eH.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,tH.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}MS.Wedge=du;du.prototype.className="Wedge";du.prototype._centroid=!0;du.prototype._attrsAffectingSize=["radius"];(0,nH._registerNode)(du);CS.Factory.addGetterSetter(du,"radius",0,(0,b6.getNumberValidator)());CS.Factory.addGetterSetter(du,"angle",0,(0,b6.getNumberValidator)());CS.Factory.addGetterSetter(du,"clockwise",!1);CS.Factory.backCompat(du,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var AS={};Object.defineProperty(AS,"__esModule",{value:!0});AS.Blur=void 0;const oR=nn,rH=Zn,iH=kt;function aR(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const sH=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],oH=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function aH(t,e){const n=t.data,r=t.width,i=t.height;let s,o,a,l,u,d,m,g,v,y,x,S,_,M,E,A,L,D,U,O,B,T,z,W;const K=e+e+1,Z=r-1,te=i-1,ne=e+1,de=ne*(ne+1)/2,Y=new aR,ae=sH[e],se=oH[e];let he=null,Me=Y,ze=null,ge=null;for(a=1;a<K;a++)Me=Me.next=new aR,a===ne&&(he=Me);for(Me.next=Y,m=d=0,o=0;o<i;o++){for(A=L=D=U=g=v=y=x=0,S=ne*(O=n[d]),_=ne*(B=n[d+1]),M=ne*(T=n[d+2]),E=ne*(z=n[d+3]),g+=de*O,v+=de*B,y+=de*T,x+=de*z,Me=Y,a=0;a<ne;a++)Me.r=O,Me.g=B,Me.b=T,Me.a=z,Me=Me.next;for(a=1;a<ne;a++)l=d+((Z<a?Z:a)<<2),g+=(Me.r=O=n[l])*(W=ne-a),v+=(Me.g=B=n[l+1])*W,y+=(Me.b=T=n[l+2])*W,x+=(Me.a=z=n[l+3])*W,A+=O,L+=B,D+=T,U+=z,Me=Me.next;for(ze=Y,ge=he,s=0;s<r;s++)n[d+3]=z=x*ae>>se,z!==0?(z=255/z,n[d]=(g*ae>>se)*z,n[d+1]=(v*ae>>se)*z,n[d+2]=(y*ae>>se)*z):n[d]=n[d+1]=n[d+2]=0,g-=S,v-=_,y-=M,x-=E,S-=ze.r,_-=ze.g,M-=ze.b,E-=ze.a,l=m+((l=s+e+1)<Z?l:Z)<<2,A+=ze.r=n[l],L+=ze.g=n[l+1],D+=ze.b=n[l+2],U+=ze.a=n[l+3],g+=A,v+=L,y+=D,x+=U,ze=ze.next,S+=O=ge.r,_+=B=ge.g,M+=T=ge.b,E+=z=ge.a,A-=O,L-=B,D-=T,U-=z,ge=ge.next,d+=4;m+=r}for(s=0;s<r;s++){for(L=D=U=A=v=y=x=g=0,d=s<<2,S=ne*(O=n[d]),_=ne*(B=n[d+1]),M=ne*(T=n[d+2]),E=ne*(z=n[d+3]),g+=de*O,v+=de*B,y+=de*T,x+=de*z,Me=Y,a=0;a<ne;a++)Me.r=O,Me.g=B,Me.b=T,Me.a=z,Me=Me.next;for(u=r,a=1;a<=e;a++)d=u+s<<2,g+=(Me.r=O=n[d])*(W=ne-a),v+=(Me.g=B=n[d+1])*W,y+=(Me.b=T=n[d+2])*W,x+=(Me.a=z=n[d+3])*W,A+=O,L+=B,D+=T,U+=z,Me=Me.next,a<te&&(u+=r);for(d=s,ze=Y,ge=he,o=0;o<i;o++)l=d<<2,n[l+3]=z=x*ae>>se,z>0?(z=255/z,n[l]=(g*ae>>se)*z,n[l+1]=(v*ae>>se)*z,n[l+2]=(y*ae>>se)*z):n[l]=n[l+1]=n[l+2]=0,g-=S,v-=_,y-=M,x-=E,S-=ze.r,_-=ze.g,M-=ze.b,E-=ze.a,l=s+((l=o+ne)<te?l:te)*r<<2,g+=A+=ze.r=n[l],v+=L+=ze.g=n[l+1],y+=D+=ze.b=n[l+2],x+=U+=ze.a=n[l+3],ze=ze.next,S+=O=ge.r,_+=B=ge.g,M+=T=ge.b,E+=z=ge.a,A-=O,L-=B,D-=T,U-=z,ge=ge.next,d+=r}}const lH=function(e){const n=Math.round(this.blurRadius());n>0&&aH(e,n)};AS.Blur=lH;oR.Factory.addGetterSetter(rH.Node,"blurRadius",0,(0,iH.getNumberValidator)(),oR.Factory.afterSetFilter);var bS={};Object.defineProperty(bS,"__esModule",{value:!0});bS.Brighten=void 0;const lR=nn,uH=Zn,cH=kt,dH=function(t){const e=this.brightness()*255,n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};bS.Brighten=dH;lR.Factory.addGetterSetter(uH.Node,"brightness",0,(0,cH.getNumberValidator)(),lR.Factory.afterSetFilter);var PS={};Object.defineProperty(PS,"__esModule",{value:!0});PS.Contrast=void 0;const uR=nn,fH=Zn,hH=kt,pH=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length;let i=150,s=150,o=150;for(let a=0;a<r;a+=4)i=n[a],s=n[a+1],o=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,n[a]=i,n[a+1]=s,n[a+2]=o};PS.Contrast=pH;uR.Factory.addGetterSetter(fH.Node,"contrast",0,(0,hH.getNumberValidator)(),uR.Factory.afterSetFilter);var RS={};Object.defineProperty(RS,"__esModule",{value:!0});RS.Emboss=void 0;const Ec=nn,TS=Zn,mH=cr,P6=kt,gH=function(t){const e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=t.data,o=t.width,a=t.height,l=o*4;let u=0,d=0,m=a;switch(r){case"top-left":u=-1,d=-1;break;case"top":u=-1,d=0;break;case"top-right":u=-1,d=1;break;case"right":u=0,d=1;break;case"bottom-right":u=1,d=1;break;case"bottom":u=1,d=0;break;case"bottom-left":u=1,d=-1;break;case"left":u=0,d=-1;break;default:mH.Util.error("Unknown emboss direction: "+r)}do{const g=(m-1)*l;let v=u;m+v<1&&(v=0),m+v>a&&(v=0);const y=(m-1+v)*o*4;let x=o;do{const S=g+(x-1)*4;let _=d;x+_<1&&(_=0),x+_>o&&(_=0);const M=y+(x-1+_)*4,E=s[S]-s[M],A=s[S+1]-s[M+1],L=s[S+2]-s[M+2];let D=E;const U=D>0?D:-D,O=A>0?A:-A,B=L>0?L:-L;if(O>U&&(D=A),B>U&&(D=L),D*=e,i){const T=s[S]+D,z=s[S+1]+D,W=s[S+2]+D;s[S]=T>255?255:T<0?0:T,s[S+1]=z>255?255:z<0?0:z,s[S+2]=W>255?255:W<0?0:W}else{let T=n-D;T<0?T=0:T>255&&(T=255),s[S]=s[S+1]=s[S+2]=T}}while(--x)}while(--m)};RS.Emboss=gH;Ec.Factory.addGetterSetter(TS.Node,"embossStrength",.5,(0,P6.getNumberValidator)(),Ec.Factory.afterSetFilter);Ec.Factory.addGetterSetter(TS.Node,"embossWhiteLevel",.5,(0,P6.getNumberValidator)(),Ec.Factory.afterSetFilter);Ec.Factory.addGetterSetter(TS.Node,"embossDirection","top-left",void 0,Ec.Factory.afterSetFilter);Ec.Factory.addGetterSetter(TS.Node,"embossBlend",!1,void 0,Ec.Factory.afterSetFilter);var LS={};Object.defineProperty(LS,"__esModule",{value:!0});LS.Enhance=void 0;const cR=nn,vH=Zn,_H=kt;function Iw(t,e,n,r,i){const s=n-e,o=i-r;if(s===0)return r+o/2;if(o===0)return r;let a=(t-e)/s;return a=o*a+r,a}const yH=function(t){const e=t.data,n=e.length;let r=e[0],i=r,s,o=e[1],a=o,l,u=e[2],d=u,m;const g=this.enhance();if(g===0)return;for(let D=0;D<n;D+=4)s=e[D+0],s<r?r=s:s>i&&(i=s),l=e[D+1],l<o?o=l:l>a&&(a=l),m=e[D+2],m<u?u=m:m>d&&(d=m);i===r&&(i=255,r=0),a===o&&(a=255,o=0),d===u&&(d=255,u=0);let v,y,x,S,_,M,E,A,L;g>0?(y=i+g*(255-i),x=r-g*(r-0),_=a+g*(255-a),M=o-g*(o-0),A=d+g*(255-d),L=u-g*(u-0)):(v=(i+r)*.5,y=i+g*(i-v),x=r+g*(r-v),S=(a+o)*.5,_=a+g*(a-S),M=o+g*(o-S),E=(d+u)*.5,A=d+g*(d-E),L=u+g*(u-E));for(let D=0;D<n;D+=4)e[D+0]=Iw(e[D+0],r,i,x,y),e[D+1]=Iw(e[D+1],o,a,M,_),e[D+2]=Iw(e[D+2],u,d,L,A)};LS.Enhance=yH;cR.Factory.addGetterSetter(vH.Node,"enhance",0,(0,_H.getNumberValidator)(),cR.Factory.afterSetFilter);var NS={};Object.defineProperty(NS,"__esModule",{value:!0});NS.Grayscale=void 0;const xH=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=.34*e[r]+.5*e[r+1]+.16*e[r+2];e[r]=i,e[r+1]=i,e[r+2]=i}};NS.Grayscale=xH;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});DS.HSL=void 0;const Op=nn,iA=Zn,sA=kt;Op.Factory.addGetterSetter(iA.Node,"hue",0,(0,sA.getNumberValidator)(),Op.Factory.afterSetFilter);Op.Factory.addGetterSetter(iA.Node,"saturation",0,(0,sA.getNumberValidator)(),Op.Factory.afterSetFilter);Op.Factory.addGetterSetter(iA.Node,"luminance",0,(0,sA.getNumberValidator)(),Op.Factory.afterSetFilter);const SH=function(t){const e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),u=.299*r+.701*a+.167*l,d=.587*r-.587*a+.33*l,m=.114*r-.114*a-.497*l,g=.299*r-.299*a-.328*l,v=.587*r+.413*a+.035*l,y=.114*r-.114*a+.293*l,x=.299*r-.3*a+1.25*l,S=.587*r-.586*a-1.05*l,_=.114*r+.886*a-.2*l;let M,E,A,L;for(let D=0;D<n;D+=4)M=e[D+0],E=e[D+1],A=e[D+2],L=e[D+3],e[D+0]=u*M+d*E+m*A+o,e[D+1]=g*M+v*E+y*A+o,e[D+2]=x*M+S*E+_*A+o,e[D+3]=L};DS.HSL=SH;var kS={};Object.defineProperty(kS,"__esModule",{value:!0});kS.HSV=void 0;const Ip=nn,oA=Zn,aA=kt,EH=function(t){const e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=r*i*Math.cos(s*Math.PI/180),a=r*i*Math.sin(s*Math.PI/180),l=.299*r+.701*o+.167*a,u=.587*r-.587*o+.33*a,d=.114*r-.114*o-.497*a,m=.299*r-.299*o-.328*a,g=.587*r+.413*o+.035*a,v=.114*r-.114*o+.293*a,y=.299*r-.3*o+1.25*a,x=.587*r-.586*o-1.05*a,S=.114*r+.886*o-.2*a;let _,M,E,A;for(let L=0;L<n;L+=4)_=e[L+0],M=e[L+1],E=e[L+2],A=e[L+3],e[L+0]=l*_+u*M+d*E,e[L+1]=m*_+g*M+v*E,e[L+2]=y*_+x*M+S*E,e[L+3]=A};kS.HSV=EH;Ip.Factory.addGetterSetter(oA.Node,"hue",0,(0,aA.getNumberValidator)(),Ip.Factory.afterSetFilter);Ip.Factory.addGetterSetter(oA.Node,"saturation",0,(0,aA.getNumberValidator)(),Ip.Factory.afterSetFilter);Ip.Factory.addGetterSetter(oA.Node,"value",0,(0,aA.getNumberValidator)(),Ip.Factory.afterSetFilter);var FS={};Object.defineProperty(FS,"__esModule",{value:!0});FS.Invert=void 0;const wH=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};FS.Invert=wH;var OS={};Object.defineProperty(OS,"__esModule",{value:!0});OS.Kaleidoscope=void 0;const zy=nn,R6=Zn,dR=cr,T6=kt,MH=function(t,e,n){const r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2;let u=Math.sqrt(a*a+l*l),d=s-a,m=o-l;const g=Math.sqrt(d*d+m*m);u=g>u?g:u;const v=o,y=s,x=360/y*Math.PI/180;for(let S=0;S<y;S+=1){const _=Math.sin(S*x),M=Math.cos(S*x);for(let E=0;E<v;E+=1){d=Math.floor(a+u*E/v*M),m=Math.floor(l+u*E/v*_);let A=(m*s+d)*4;const L=r[A+0],D=r[A+1],U=r[A+2],O=r[A+3];A=(S+E*s)*4,i[A+0]=L,i[A+1]=D,i[A+2]=U,i[A+3]=O}}},CH=function(t,e,n){const r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2;let u=Math.sqrt(a*a+l*l),d=s-a,m=o-l;const g=Math.sqrt(d*d+m*m);u=g>u?g:u;const v=o,y=s,x=0;let S,_;for(d=0;d<s;d+=1)for(m=0;m<o;m+=1){const M=d-a,E=m-l,A=Math.sqrt(M*M+E*E)*v/u;let L=(Math.atan2(E,M)*180/Math.PI+360+x)%360;L=L*y/360,S=Math.floor(L),_=Math.floor(A);let D=(_*s+S)*4;const U=r[D+0],O=r[D+1],B=r[D+2],T=r[D+3];D=(m*s+d)*4,i[D+0]=U,i[D+1]=O,i[D+2]=B,i[D+3]=T}},AH=function(t){const e=t.width,n=t.height;let r,i,s,o,a,l,u,d,m,g,v=Math.round(this.kaleidoscopePower());const y=Math.round(this.kaleidoscopeAngle()),x=Math.floor(e*(y%360)/360);if(v<1)return;const S=dR.Util.createCanvasElement();S.width=e,S.height=n;const _=S.getContext("2d").getImageData(0,0,e,n);dR.Util.releaseCanvas(S),MH(t,_,{polarCenterX:e/2,polarCenterY:n/2});let M=e/Math.pow(2,v);for(;M<=8;)M=M*2,v-=1;M=Math.ceil(M);let E=M,A=0,L=E,D=1;for(x+M>e&&(A=E,L=0,D=-1),i=0;i<n;i+=1)for(r=A;r!==L;r+=D)s=Math.round(r+x)%e,m=(e*i+s)*4,a=_.data[m+0],l=_.data[m+1],u=_.data[m+2],d=_.data[m+3],g=(e*i+r)*4,_.data[g+0]=a,_.data[g+1]=l,_.data[g+2]=u,_.data[g+3]=d;for(i=0;i<n;i+=1)for(E=Math.floor(M),o=0;o<v;o+=1){for(r=0;r<E+1;r+=1)m=(e*i+r)*4,a=_.data[m+0],l=_.data[m+1],u=_.data[m+2],d=_.data[m+3],g=(e*i+E*2-r-1)*4,_.data[g+0]=a,_.data[g+1]=l,_.data[g+2]=u,_.data[g+3]=d;E*=2}CH(_,t,{polarRotation:0})};OS.Kaleidoscope=AH;zy.Factory.addGetterSetter(R6.Node,"kaleidoscopePower",2,(0,T6.getNumberValidator)(),zy.Factory.afterSetFilter);zy.Factory.addGetterSetter(R6.Node,"kaleidoscopeAngle",0,(0,T6.getNumberValidator)(),zy.Factory.afterSetFilter);var IS={};Object.defineProperty(IS,"__esModule",{value:!0});IS.Mask=void 0;const fR=nn,bH=Zn,PH=kt;function Fv(t,e,n){let r=(n*t.width+e)*4;const i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function Tg(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function RH(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function TH(t,e){const n=Fv(t,0,0),r=Fv(t,t.width-1,0),i=Fv(t,0,t.height-1),s=Fv(t,t.width-1,t.height-1),o=e||10;if(Tg(n,r)<o&&Tg(r,s)<o&&Tg(s,i)<o&&Tg(i,n)<o){const a=RH([r,n,s,i]),l=[];for(let u=0;u<t.width*t.height;u++){const d=Tg(a,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=d<o?0:255}return l}}function LH(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function NH(t,e,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<e;l++){const u=a*e+l;let d=0;for(let m=0;m<i;m++)for(let g=0;g<i;g++){const v=a+m-s,y=l+g-s;if(v>=0&&v<n&&y>=0&&y<e){const x=v*e+y,S=r[m*i+g];d+=t[x]*S}}o[u]=d===255*8?255:0}return o}function DH(t,e,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<e;l++){const u=a*e+l;let d=0;for(let m=0;m<i;m++)for(let g=0;g<i;g++){const v=a+m-s,y=l+g-s;if(v>=0&&v<n&&y>=0&&y<e){const x=v*e+y,S=r[m*i+g];d+=t[x]*S}}o[u]=d>=255*4?255:0}return o}function kH(t,e,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(let a=0;a<n;a++)for(let l=0;l<e;l++){const u=a*e+l;let d=0;for(let m=0;m<i;m++)for(let g=0;g<i;g++){const v=a+m-s,y=l+g-s;if(v>=0&&v<n&&y>=0&&y<e){const x=v*e+y,S=r[m*i+g];d+=t[x]*S}}o[u]=d}return o}const FH=function(t){const e=this.threshold();let n=TH(t,e);return n&&(n=NH(n,t.width,t.height),n=DH(n,t.width,t.height),n=kH(n,t.width,t.height),LH(t,n)),t};IS.Mask=FH;fR.Factory.addGetterSetter(bH.Node,"threshold",0,(0,PH.getNumberValidator)(),fR.Factory.afterSetFilter);var US={};Object.defineProperty(US,"__esModule",{value:!0});US.Noise=void 0;const hR=nn,OH=Zn,IH=kt,UH=function(t){const e=this.noise()*255,n=t.data,r=n.length,i=e/2;for(let s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};US.Noise=UH;hR.Factory.addGetterSetter(OH.Node,"noise",.2,(0,IH.getNumberValidator)(),hR.Factory.afterSetFilter);var BS={};Object.defineProperty(BS,"__esModule",{value:!0});BS.Pixelate=void 0;const pR=nn,BH=cr,zH=Zn,HH=kt,GH=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,o,a,l,u,d,m=Math.ceil(n/e),g=Math.ceil(r/e),v,y,x,S,_,M,E,A=t.data;if(e<=0){BH.Util.error("pixelSize value can not be <= 0");return}for(_=0;_<m;_+=1)for(M=0;M<g;M+=1){for(a=0,l=0,u=0,d=0,v=_*e,y=v+e,x=M*e,S=x+e,E=0,i=v;i<y;i+=1)if(!(i>=n))for(s=x;s<S;s+=1)s>=r||(o=(n*s+i)*4,a+=A[o+0],l+=A[o+1],u+=A[o+2],d+=A[o+3],E+=1);for(a=a/E,l=l/E,u=u/E,d=d/E,i=v;i<y;i+=1)if(!(i>=n))for(s=x;s<S;s+=1)s>=r||(o=(n*s+i)*4,A[o+0]=a,A[o+1]=l,A[o+2]=u,A[o+3]=d)}};BS.Pixelate=GH;pR.Factory.addGetterSetter(zH.Node,"pixelSize",8,(0,HH.getNumberValidator)(),pR.Factory.afterSetFilter);var zS={};Object.defineProperty(zS,"__esModule",{value:!0});zS.Posterize=void 0;const mR=nn,VH=Zn,WH=kt,jH=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e;for(let s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};zS.Posterize=jH;mR.Factory.addGetterSetter(VH.Node,"levels",.5,(0,WH.getNumberValidator)(),mR.Factory.afterSetFilter);var HS={};Object.defineProperty(HS,"__esModule",{value:!0});HS.RGB=void 0;const Hy=nn,lA=Zn,XH=kt,YH=function(t){const e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue();for(let o=0;o<n;o+=4){const a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255;e[o]=a*r,e[o+1]=a*i,e[o+2]=a*s,e[o+3]=e[o+3]}};HS.RGB=YH;Hy.Factory.addGetterSetter(lA.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Hy.Factory.addGetterSetter(lA.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Hy.Factory.addGetterSetter(lA.Node,"blue",0,XH.RGBComponent,Hy.Factory.afterSetFilter);var GS={};Object.defineProperty(GS,"__esModule",{value:!0});GS.RGBA=void 0;const j0=nn,VS=Zn,qH=kt,KH=function(t){const e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o=this.alpha();for(let a=0;a<n;a+=4){const l=1-o;e[a]=r*o+e[a]*l,e[a+1]=i*o+e[a+1]*l,e[a+2]=s*o+e[a+2]*l}};GS.RGBA=KH;j0.Factory.addGetterSetter(VS.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});j0.Factory.addGetterSetter(VS.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});j0.Factory.addGetterSetter(VS.Node,"blue",0,qH.RGBComponent,j0.Factory.afterSetFilter);j0.Factory.addGetterSetter(VS.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.Sepia=void 0;const $H=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+0],s=e[r+1],o=e[r+2];e[r+0]=Math.min(255,i*.393+s*.769+o*.189),e[r+1]=Math.min(255,i*.349+s*.686+o*.168),e[r+2]=Math.min(255,i*.272+s*.534+o*.131)}};WS.Sepia=$H;var jS={};Object.defineProperty(jS,"__esModule",{value:!0});jS.Solarize=void 0;const ZH=function(t){const e=t.data,n=t.width,r=t.height,i=n*4;let s=r;do{const o=(s-1)*i;let a=n;do{const l=o+(a-1)*4;let u=e[l],d=e[l+1],m=e[l+2];u>127&&(u=255-u),d>127&&(d=255-d),m>127&&(m=255-m),e[l]=u,e[l+1]=d,e[l+2]=m}while(--a)}while(--s)};jS.Solarize=ZH;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});XS.Threshold=void 0;const gR=nn,QH=Zn,JH=kt,eG=function(t){const e=this.threshold()*255,n=t.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<e?0:255};XS.Threshold=eG;gR.Factory.addGetterSetter(QH.Node,"threshold",.5,(0,JH.getNumberValidator)(),gR.Factory.afterSetFilter);Object.defineProperty(tS,"__esModule",{value:!0});tS.Konva=void 0;const vR=Iy,tG=aS,nG=cS,rG=hS,iG=pS,sG=mS,_R=Fp,oG=b1,aG=im,lG=T1,uG=_S,cG=yS,dG=xS,fG=SS,hG=om,pG=ES,mG=wS,gG=MS,vG=AS,_G=bS,yG=PS,xG=RS,SG=LS,EG=NS,wG=DS,MG=kS,CG=FS,AG=OS,bG=IS,PG=US,RG=BS,TG=zS,LG=HS,NG=GS,DG=WS,kG=jS,FG=XS;tS.Konva=vR.Konva.Util._assign(vR.Konva,{Arc:tG.Arc,Arrow:nG.Arrow,Circle:rG.Circle,Ellipse:iG.Ellipse,Image:sG.Image,Label:_R.Label,Tag:_R.Tag,Line:oG.Line,Path:aG.Path,Rect:lG.Rect,RegularPolygon:uG.RegularPolygon,Ring:cG.Ring,Sprite:dG.Sprite,Star:fG.Star,Text:hG.Text,TextPath:pG.TextPath,Transformer:mG.Transformer,Wedge:gG.Wedge,Filters:{Blur:vG.Blur,Brighten:_G.Brighten,Contrast:yG.Contrast,Emboss:xG.Emboss,Enhance:SG.Enhance,Grayscale:EG.Grayscale,HSL:wG.HSL,HSV:MG.HSV,Invert:CG.Invert,Kaleidoscope:AG.Kaleidoscope,Mask:bG.Mask,Noise:PG.Noise,Pixelate:RG.Pixelate,Posterize:TG.Posterize,RGB:LG.RGB,RGBA:NG.RGBA,Sepia:DG.Sepia,Solarize:kG.Solarize,Threshold:FG.Threshold}});var OG=$N.exports;Object.defineProperty(OG,"__esModule",{value:!0});const IG=tS;$N.exports=IG.Konva;var n2={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=Iy;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=Iy;t.exports=r.Konva})(n2,n2.exports);var UG=n2.exports;const X0=y1(UG);var L6={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BG=function(e){var n={},r=V,i=s0,s=Object.assign;function o(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),L=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=L&&c[L]||c["@@iterator"],typeof c=="function"?c:null)}function U(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case d:return"Fragment";case u:return"Portal";case g:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case v:return(c._context.displayName||"Context")+".Provider";case x:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return h=c.displayName||null,h!==null?h:U(c.type)||"Memo";case E:h=c._payload,c=c._init;try{return U(c(h))}catch{}}return null}function O(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(h);case 8:return h===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function B(c){var h=c,w=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(w=h.return),c=h.return;while(c)}return h.tag===3?w:null}function T(c){if(B(c)!==c)throw Error(o(188))}function z(c){var h=c.alternate;if(!h){if(h=B(c),h===null)throw Error(o(188));return h!==c?null:c}for(var w=c,b=h;;){var R=w.return;if(R===null)break;var H=R.alternate;if(H===null){if(b=R.return,b!==null){w=b;continue}break}if(R.child===H.child){for(H=R.child;H;){if(H===w)return T(R),c;if(H===b)return T(R),h;H=H.sibling}throw Error(o(188))}if(w.return!==b.return)w=R,b=H;else{for(var q=!1,me=R.child;me;){if(me===w){q=!0,w=R,b=H;break}if(me===b){q=!0,b=R,w=H;break}me=me.sibling}if(!q){for(me=H.child;me;){if(me===w){q=!0,w=H,b=R;break}if(me===b){q=!0,b=H,w=R;break}me=me.sibling}if(!q)throw Error(o(189))}}if(w.alternate!==b)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?c:h}function W(c){return c=z(c),c!==null?K(c):null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=K(c);if(h!==null)return h;c=c.sibling}return null}function Z(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var h=Z(c);if(h!==null)return h}c=c.sibling}return null}var te=Array.isArray,ne=e.getPublicInstance,de=e.getRootHostContext,Y=e.getChildHostContext,ae=e.prepareForCommit,se=e.resetAfterCommit,he=e.createInstance,Me=e.appendInitialChild,ze=e.finalizeInitialChildren,ge=e.prepareUpdate,De=e.shouldSetTextContent,Xe=e.createTextInstance,Q=e.scheduleTimeout,ye=e.cancelTimeout,We=e.noTimeout,je=e.isPrimaryRenderer,Ve=e.supportsMutation,Je=e.supportsPersistence,$e=e.supportsHydration,le=e.getInstanceFromNode,At=e.preparePortalMount,Be=e.getCurrentEventPriority,He=e.detachDeletedInstance,ke=e.supportsMicrotasks,nt=e.scheduleMicrotask,Fe=e.supportsTestSelectors,ee=e.findFiberRoot,X=e.getBoundingRect,xe=e.getTextContent,Le=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,j=e.setupIntersectionObserver,N=e.appendChild,I=e.appendChildToContainer,J=e.commitTextUpdate,ie=e.commitMount,fe=e.commitUpdate,Ce=e.insertBefore,tt=e.insertInContainerBefore,Ze=e.removeChild,wt=e.removeChildFromContainer,gt=e.resetTextContent,bt=e.hideInstance,_e=e.hideTextInstance,dt=e.unhideInstance,Ue=e.unhideTextInstance,Ye=e.clearContainer,ft=e.cloneInstance,ut=e.createContainerChildSet,Ot=e.appendChildToContainerChildSet,kn=e.finalizeContainerChildren,Qn=e.replaceContainerChildren,un=e.cloneHiddenInstance,ci=e.cloneHiddenTextInstance,Fs=e.canHydrateInstance,kf=e.canHydrateTextInstance,Ff=e.canHydrateSuspenseInstance,Os=e.isSuspenseInstancePending,Bo=e.isSuspenseInstanceFallback,Of=e.getSuspenseInstanceFallbackErrorDetails,Sa=e.registerSuspenseInstanceRetry,zo=e.getNextHydratableSibling,If=e.getFirstHydratableChild,fu=e.getFirstHydratableChildWithinContainer,Uf=e.getFirstHydratableChildWithinSuspenseInstance,Bf=e.hydrateInstance,_m=e.hydrateTextInstance,ym=e.hydrateSuspenseInstance,zf=e.getNextHydratableInstanceAfterSuspenseInstance,xm=e.commitHydratedContainer,Sm=e.commitHydratedSuspenseInstance,Em=e.clearSuspenseBoundary,$=e.clearSuspenseBoundaryFromContainer,we=e.shouldDeleteUnhydratedTailInstances,Pe=e.didNotMatchHydratedContainerTextInstance,Re=e.didNotMatchHydratedTextInstance,Se;function Ke(c){if(Se===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);Se=h&&h[1]||""}return`
`+Se+c}var at=!1;function pt(c,h){if(!c||at)return"";at=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ce){var b=ce}Reflect.construct(c,[],h)}else{try{h.call()}catch(ce){b=ce}c.call(h.prototype)}else{try{throw Error()}catch(ce){b=ce}c()}}catch(ce){if(ce&&b&&typeof ce.stack=="string"){for(var R=ce.stack.split(`
`),H=b.stack.split(`
`),q=R.length-1,me=H.length-1;1<=q&&0<=me&&R[q]!==H[me];)me--;for(;1<=q&&0<=me;q--,me--)if(R[q]!==H[me]){if(q!==1||me!==1)do if(q--,me--,0>me||R[q]!==H[me]){var be=`
`+R[q].replace(" at new "," at ");return c.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",c.displayName)),be}while(1<=q&&0<=me);break}}}finally{at=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?Ke(c):""}var vt=Object.prototype.hasOwnProperty,Rt=[],Mt=-1;function rt(c){return{current:c}}function it(c){0>Mt||(c.current=Rt[Mt],Rt[Mt]=null,Mt--)}function xt(c,h){Mt++,Rt[Mt]=c.current,c.current=h}var Ut={},Lt=rt(Ut),Tt=rt(!1),St=Ut;function en(c,h){var w=c.type.contextTypes;if(!w)return Ut;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var R={},H;for(H in w)R[H]=h[H];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=R),R}function Dt(c){return c=c.childContextTypes,c!=null}function Fr(){it(Tt),it(Lt)}function co(c,h,w){if(Lt.current!==Ut)throw Error(o(168));xt(Lt,h),xt(Tt,w)}function _r(c,h,w){var b=c.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return w;b=b.getChildContext();for(var R in b)if(!(R in h))throw Error(o(108,O(c)||"Unknown",R));return s({},w,b)}function Is(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ut,St=Lt.current,xt(Lt,c),xt(Tt,Tt.current),!0}function tn(c,h,w){var b=c.stateNode;if(!b)throw Error(o(169));w?(c=_r(c,h,St),b.__reactInternalMemoizedMergedChildContext=c,it(Tt),it(Lt),xt(Lt,c)):it(Tt),xt(Tt,w)}var Fn=Math.clz32?Math.clz32:yr,Mi=Math.log,Or=Math.LN2;function yr(c){return c>>>=0,c===0?32:31-(Mi(c)/Or|0)|0}var Us=64,Qr=4194304;function Ea(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Hf(c,h){var w=c.pendingLanes;if(w===0)return 0;var b=0,R=c.suspendedLanes,H=c.pingedLanes,q=w&268435455;if(q!==0){var me=q&~R;me!==0?b=Ea(me):(H&=q,H!==0&&(b=Ea(H)))}else q=w&~R,q!==0?b=Ea(q):H!==0&&(b=Ea(H));if(b===0)return 0;if(h!==0&&h!==b&&!(h&R)&&(R=b&-b,H=h&-h,R>=H||R===16&&(H&4194240)!==0))return h;if(b&4&&(b|=w&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=b;0<h;)w=31-Fn(h),R=1<<w,b|=c[w],h&=~R;return b}function VE(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wm(c,h){for(var w=c.suspendedLanes,b=c.pingedLanes,R=c.expirationTimes,H=c.pendingLanes;0<H;){var q=31-Fn(H),me=1<<q,be=R[q];be===-1?(!(me&w)||me&b)&&(R[q]=VE(me,h)):be<=h&&(c.expiredLanes|=me),H&=~me}}function jc(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function hu(){var c=Us;return Us<<=1,!(Us&4194240)&&(Us=64),c}function Mm(c){for(var h=[],w=0;31>w;w++)h.push(c);return h}function dl(c,h,w){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Fn(h),c[h]=w}function dn(c,h){var w=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<w;){var R=31-Fn(w),H=1<<R;h[R]=0,b[R]=-1,c[R]=-1,w&=~H}}function Gf(c,h){var w=c.entangledLanes|=h;for(c=c.entanglements;w;){var b=31-Fn(w),R=1<<b;R&h|c[b]&h&&(c[b]|=h),w&=~R}}var on=0;function Cm(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Am=i.unstable_scheduleCallback,K1=i.unstable_cancelCallback,Ar=i.unstable_shouldYield,bm=i.unstable_requestPaint,br=i.unstable_now,Xc=i.unstable_ImmediatePriority,WE=i.unstable_UserBlockingPriority,pu=i.unstable_NormalPriority,fo=i.unstable_IdlePriority,Vf=null,ho=null;function po(c){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(Vf,c,void 0,(c.current.flags&128)===128)}catch{}}function Ho(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ci=typeof Object.is=="function"?Object.is:Ho,Bs=null,Yc=!1,Pm=!1;function zs(c){Bs===null?Bs=[c]:Bs.push(c)}function jE(c){Yc=!0,zs(c)}function Yi(){if(!Pm&&Bs!==null){Pm=!0;var c=0,h=on;try{var w=Bs;for(on=1;c<w.length;c++){var b=w[c];do b=b(!0);while(b!==null)}Bs=null,Yc=!1}catch(R){throw Bs!==null&&(Bs=Bs.slice(c+1)),Am(Xc,Yi),R}finally{on=h,Pm=!1}}return null}var mu=[],Jr=0,fl=null,hl=0,Ir=[],Ai=0,Go=null,mo=1,Hs="";function Vo(c,h){mu[Jr++]=hl,mu[Jr++]=fl,fl=c,hl=h}function pl(c,h,w){Ir[Ai++]=mo,Ir[Ai++]=Hs,Ir[Ai++]=Go,Go=c;var b=mo;c=Hs;var R=32-Fn(b)-1;b&=~(1<<R),w+=1;var H=32-Fn(h)+R;if(30<H){var q=R-R%5;H=(b&(1<<q)-1).toString(32),b>>=q,R-=q,mo=1<<32-Fn(h)+R|w<<R|b,Hs=H+c}else mo=1<<H|w<<R|b,Hs=c}function bi(c){c.return!==null&&(Vo(c,1),pl(c,1,0))}function hs(c){for(;c===fl;)fl=mu[--Jr],mu[Jr]=null,hl=mu[--Jr],mu[Jr]=null;for(;c===Go;)Go=Ir[--Ai],Ir[Ai]=null,Hs=Ir[--Ai],Ir[Ai]=null,mo=Ir[--Ai],Ir[Ai]=null}var dr=null,Pi=null,Tn=!1,qi=!1,Pr=null;function qc(c,h){var w=Fi(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=c,h=c.deletions,h===null?(c.deletions=[w],c.flags|=16):h.push(w)}function Rm(c,h){switch(c.tag){case 5:return h=Fs(h,c.type,c.pendingProps),h!==null?(c.stateNode=h,dr=c,Pi=If(h),!0):!1;case 6:return h=kf(h,c.pendingProps),h!==null?(c.stateNode=h,dr=c,Pi=null,!0):!1;case 13:if(h=Ff(h),h!==null){var w=Go!==null?{id:mo,overflow:Hs}:null;return c.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=Fi(18,null,null,0),w.stateNode=h,w.return=c,c.child=w,dr=c,Pi=null,!0}return!1;default:return!1}}function gu(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Wf(c){if(Tn){var h=Pi;if(h){var w=h;if(!Rm(c,h)){if(gu(c))throw Error(o(418));h=zo(w);var b=dr;h&&Rm(c,h)?qc(b,w):(c.flags=c.flags&-4097|2,Tn=!1,dr=c)}}else{if(gu(c))throw Error(o(418));c.flags=c.flags&-4097|2,Tn=!1,dr=c}}}function Tm(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;dr=c}function vu(c){if(!$e||c!==dr)return!1;if(!Tn)return Tm(c),Tn=!0,!1;if(c.tag!==3&&(c.tag!==5||we(c.type)&&!De(c.type,c.memoizedProps))){var h=Pi;if(h){if(gu(c))throw Kc(),Error(o(418));for(;h;)qc(c,h),h=zo(h)}}if(Tm(c),c.tag===13){if(!$e)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Pi=zf(c)}else Pi=dr?zo(c.stateNode):null;return!0}function Kc(){for(var c=Pi;c;)c=zo(c)}function ml(){$e&&(Pi=dr=null,qi=Tn=!1)}function jf(c){Pr===null?Pr=[c]:Pr.push(c)}var $1=a.ReactCurrentBatchConfig;function _u(c,h){if(Ci(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var w=Object.keys(c),b=Object.keys(h);if(w.length!==b.length)return!1;for(b=0;b<w.length;b++){var R=w[b];if(!vt.call(h,R)||!Ci(c[R],h[R]))return!1}return!0}function yu(c){switch(c.tag){case 5:return Ke(c.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return c=pt(c.type,!1),c;case 11:return c=pt(c.type.render,!1),c;case 1:return c=pt(c.type,!0),c;default:return""}}function go(c,h,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var b=w.stateNode}if(!b)throw Error(o(147,c));var R=b,H=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===H?h.ref:(h=function(q){var me=R.refs;q===null?delete me[H]:me[H]=q},h._stringRef=H,h)}if(typeof c!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,c))}return c}function gl(c,h){throw c=Object.prototype.toString.call(h),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function $c(c){var h=c._init;return h(c._payload)}function Ki(c){function h(Ae,pe){if(c){var Ne=Ae.deletions;Ne===null?(Ae.deletions=[pe],Ae.flags|=16):Ne.push(pe)}}function w(Ae,pe){if(!c)return null;for(;pe!==null;)h(Ae,pe),pe=pe.sibling;return null}function b(Ae,pe){for(Ae=new Map;pe!==null;)pe.key!==null?Ae.set(pe.key,pe):Ae.set(pe.index,pe),pe=pe.sibling;return Ae}function R(Ae,pe){return Ae=$o(Ae,pe),Ae.index=0,Ae.sibling=null,Ae}function H(Ae,pe,Ne){return Ae.index=Ne,c?(Ne=Ae.alternate,Ne!==null?(Ne=Ne.index,Ne<pe?(Ae.flags|=2,pe):Ne):(Ae.flags|=2,pe)):(Ae.flags|=1048576,pe)}function q(Ae){return c&&Ae.alternate===null&&(Ae.flags|=2),Ae}function me(Ae,pe,Ne,ht){return pe===null||pe.tag!==6?(pe=mg(Ne,Ae.mode,ht),pe.return=Ae,pe):(pe=R(pe,Ne),pe.return=Ae,pe)}function be(Ae,pe,Ne,ht){var Nt=Ne.type;return Nt===d?ue(Ae,pe,Ne.props.children,ht,Ne.key):pe!==null&&(pe.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&$c(Nt)===pe.type)?(ht=R(pe,Ne.props),ht.ref=go(Ae,pe,Ne),ht.return=Ae,ht):(ht=Cd(Ne.type,Ne.key,Ne.props,null,Ae.mode,ht),ht.ref=go(Ae,pe,Ne),ht.return=Ae,ht)}function ce(Ae,pe,Ne,ht){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ne.containerInfo||pe.stateNode.implementation!==Ne.implementation?(pe=gg(Ne,Ae.mode,ht),pe.return=Ae,pe):(pe=R(pe,Ne.children||[]),pe.return=Ae,pe)}function ue(Ae,pe,Ne,ht,Nt){return pe===null||pe.tag!==7?(pe=Oa(Ne,Ae.mode,ht,Nt),pe.return=Ae,pe):(pe=R(pe,Ne),pe.return=Ae,pe)}function Ee(Ae,pe,Ne){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=mg(""+pe,Ae.mode,Ne),pe.return=Ae,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case l:return Ne=Cd(pe.type,pe.key,pe.props,null,Ae.mode,Ne),Ne.ref=go(Ae,null,pe),Ne.return=Ae,Ne;case u:return pe=gg(pe,Ae.mode,Ne),pe.return=Ae,pe;case E:var ht=pe._init;return Ee(Ae,ht(pe._payload),Ne)}if(te(pe)||D(pe))return pe=Oa(pe,Ae.mode,Ne,null),pe.return=Ae,pe;gl(Ae,pe)}return null}function Te(Ae,pe,Ne,ht){var Nt=pe!==null?pe.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Nt!==null?null:me(Ae,pe,""+Ne,ht);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case l:return Ne.key===Nt?be(Ae,pe,Ne,ht):null;case u:return Ne.key===Nt?ce(Ae,pe,Ne,ht):null;case E:return Nt=Ne._init,Te(Ae,pe,Nt(Ne._payload),ht)}if(te(Ne)||D(Ne))return Nt!==null?null:ue(Ae,pe,Ne,ht,null);gl(Ae,Ne)}return null}function st(Ae,pe,Ne,ht,Nt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Ae=Ae.get(Ne)||null,me(pe,Ae,""+ht,Nt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return Ae=Ae.get(ht.key===null?Ne:ht.key)||null,be(pe,Ae,ht,Nt);case u:return Ae=Ae.get(ht.key===null?Ne:ht.key)||null,ce(pe,Ae,ht,Nt);case E:var Qt=ht._init;return st(Ae,pe,Ne,Qt(ht._payload),Nt)}if(te(ht)||D(ht))return Ae=Ae.get(Ne)||null,ue(pe,Ae,ht,Nt,null);gl(pe,ht)}return null}function yt(Ae,pe,Ne,ht){for(var Nt=null,Qt=null,Vt=pe,yn=pe=0,ri=null;Vt!==null&&yn<Ne.length;yn++){Vt.index>yn?(ri=Vt,Vt=null):ri=Vt.sibling;var xn=Te(Ae,Vt,Ne[yn],ht);if(xn===null){Vt===null&&(Vt=ri);break}c&&Vt&&xn.alternate===null&&h(Ae,Vt),pe=H(xn,pe,yn),Qt===null?Nt=xn:Qt.sibling=xn,Qt=xn,Vt=ri}if(yn===Ne.length)return w(Ae,Vt),Tn&&Vo(Ae,yn),Nt;if(Vt===null){for(;yn<Ne.length;yn++)Vt=Ee(Ae,Ne[yn],ht),Vt!==null&&(pe=H(Vt,pe,yn),Qt===null?Nt=Vt:Qt.sibling=Vt,Qt=Vt);return Tn&&Vo(Ae,yn),Nt}for(Vt=b(Ae,Vt);yn<Ne.length;yn++)ri=st(Vt,Ae,yn,Ne[yn],ht),ri!==null&&(c&&ri.alternate!==null&&Vt.delete(ri.key===null?yn:ri.key),pe=H(ri,pe,yn),Qt===null?Nt=ri:Qt.sibling=ri,Qt=ri);return c&&Vt.forEach(function(zu){return h(Ae,zu)}),Tn&&Vo(Ae,yn),Nt}function Pt(Ae,pe,Ne,ht){var Nt=D(Ne);if(typeof Nt!="function")throw Error(o(150));if(Ne=Nt.call(Ne),Ne==null)throw Error(o(151));for(var Qt=Nt=null,Vt=pe,yn=pe=0,ri=null,xn=Ne.next();Vt!==null&&!xn.done;yn++,xn=Ne.next()){Vt.index>yn?(ri=Vt,Vt=null):ri=Vt.sibling;var zu=Te(Ae,Vt,xn.value,ht);if(zu===null){Vt===null&&(Vt=ri);break}c&&Vt&&zu.alternate===null&&h(Ae,Vt),pe=H(zu,pe,yn),Qt===null?Nt=zu:Qt.sibling=zu,Qt=zu,Vt=ri}if(xn.done)return w(Ae,Vt),Tn&&Vo(Ae,yn),Nt;if(Vt===null){for(;!xn.done;yn++,xn=Ne.next())xn=Ee(Ae,xn.value,ht),xn!==null&&(pe=H(xn,pe,yn),Qt===null?Nt=xn:Qt.sibling=xn,Qt=xn);return Tn&&Vo(Ae,yn),Nt}for(Vt=b(Ae,Vt);!xn.done;yn++,xn=Ne.next())xn=st(Vt,Ae,yn,xn.value,ht),xn!==null&&(c&&xn.alternate!==null&&Vt.delete(xn.key===null?yn:xn.key),pe=H(xn,pe,yn),Qt===null?Nt=xn:Qt.sibling=xn,Qt=xn);return c&&Vt.forEach(function(tI){return h(Ae,tI)}),Tn&&Vo(Ae,yn),Nt}function Xt(Ae,pe,Ne,ht){if(typeof Ne=="object"&&Ne!==null&&Ne.type===d&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case l:e:{for(var Nt=Ne.key,Qt=pe;Qt!==null;){if(Qt.key===Nt){if(Nt=Ne.type,Nt===d){if(Qt.tag===7){w(Ae,Qt.sibling),pe=R(Qt,Ne.props.children),pe.return=Ae,Ae=pe;break e}}else if(Qt.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&$c(Nt)===Qt.type){w(Ae,Qt.sibling),pe=R(Qt,Ne.props),pe.ref=go(Ae,Qt,Ne),pe.return=Ae,Ae=pe;break e}w(Ae,Qt);break}else h(Ae,Qt);Qt=Qt.sibling}Ne.type===d?(pe=Oa(Ne.props.children,Ae.mode,ht,Ne.key),pe.return=Ae,Ae=pe):(ht=Cd(Ne.type,Ne.key,Ne.props,null,Ae.mode,ht),ht.ref=go(Ae,pe,Ne),ht.return=Ae,Ae=ht)}return q(Ae);case u:e:{for(Qt=Ne.key;pe!==null;){if(pe.key===Qt)if(pe.tag===4&&pe.stateNode.containerInfo===Ne.containerInfo&&pe.stateNode.implementation===Ne.implementation){w(Ae,pe.sibling),pe=R(pe,Ne.children||[]),pe.return=Ae,Ae=pe;break e}else{w(Ae,pe);break}else h(Ae,pe);pe=pe.sibling}pe=gg(Ne,Ae.mode,ht),pe.return=Ae,Ae=pe}return q(Ae);case E:return Qt=Ne._init,Xt(Ae,pe,Qt(Ne._payload),ht)}if(te(Ne))return yt(Ae,pe,Ne,ht);if(D(Ne))return Pt(Ae,pe,Ne,ht);gl(Ae,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,pe!==null&&pe.tag===6?(w(Ae,pe.sibling),pe=R(pe,Ne),pe.return=Ae,Ae=pe):(w(Ae,pe),pe=mg(Ne,Ae.mode,ht),pe.return=Ae,Ae=pe),q(Ae)):w(Ae,pe)}return Xt}var Ur=Ki(!0),wa=Ki(!1),ps=rt(null),ms=null,gs=null,Xf=null;function Zc(){Xf=gs=ms=null}function Yf(c,h,w){je?(xt(ps,h._currentValue),h._currentValue=w):(xt(ps,h._currentValue2),h._currentValue2=w)}function di(c){var h=ps.current;it(ps),je?c._currentValue=h:c._currentValue2=h}function fi(c,h,w){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===w)break;c=c.return}}function En(c,h){ms=c,Xf=gs=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(wn=!0),c.firstContext=null)}function ei(c){var h=je?c._currentValue:c._currentValue2;if(Xf!==c)if(c={context:c,memoizedValue:h,next:null},gs===null){if(ms===null)throw Error(o(308));gs=c,ms.dependencies={lanes:0,firstContext:c}}else gs=gs.next=c;return h}var Br=null;function qf(c){Br===null?Br=[c]:Br.push(c)}function Lm(c,h,w,b){var R=h.interleaved;return R===null?(w.next=w,qf(h)):(w.next=R.next,R.next=w),h.interleaved=w,vs(c,b)}function vs(c,h){c.lanes|=h;var w=c.alternate;for(w!==null&&(w.lanes|=h),w=c,c=c.return;c!==null;)c.childLanes|=h,w=c.alternate,w!==null&&(w.childLanes|=h),w=c,c=c.return;return w.tag===3?w.stateNode:null}var vo=!1;function Kf(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xu(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ri(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function _o(c,h,w){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,Bt&2){var R=b.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),b.pending=h,vs(c,w)}return R=b.interleaved,R===null?(h.next=h,qf(b)):(h.next=R.next,R.next=h),b.interleaved=h,vs(c,w)}function Ma(c,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var b=h.lanes;b&=c.pendingLanes,w|=b,h.lanes=w,Gf(c,w)}}function Qc(c,h){var w=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,w===b)){var R=null,H=null;if(w=w.firstBaseUpdate,w!==null){do{var q={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};H===null?R=H=q:H=H.next=q,w=w.next}while(w!==null);H===null?R=H=h:H=H.next=h}else R=H=h;w={baseState:b.baseState,firstBaseUpdate:R,lastBaseUpdate:H,shared:b.shared,effects:b.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=h:c.next=h,w.lastBaseUpdate=h}function Jc(c,h,w,b){var R=c.updateQueue;vo=!1;var H=R.firstBaseUpdate,q=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var be=me,ce=be.next;be.next=null,q===null?H=ce:q.next=ce,q=be;var ue=c.alternate;ue!==null&&(ue=ue.updateQueue,me=ue.lastBaseUpdate,me!==q&&(me===null?ue.firstBaseUpdate=ce:me.next=ce,ue.lastBaseUpdate=be))}if(H!==null){var Ee=R.baseState;q=0,ue=ce=be=null,me=H;do{var Te=me.lane,st=me.eventTime;if((b&Te)===Te){ue!==null&&(ue=ue.next={eventTime:st,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var yt=c,Pt=me;switch(Te=h,st=w,Pt.tag){case 1:if(yt=Pt.payload,typeof yt=="function"){Ee=yt.call(st,Ee,Te);break e}Ee=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Pt.payload,Te=typeof yt=="function"?yt.call(st,Ee,Te):yt,Te==null)break e;Ee=s({},Ee,Te);break e;case 2:vo=!0}}me.callback!==null&&me.lane!==0&&(c.flags|=64,Te=R.effects,Te===null?R.effects=[me]:Te.push(me))}else st={eventTime:st,lane:Te,tag:me.tag,payload:me.payload,callback:me.callback,next:null},ue===null?(ce=ue=st,be=Ee):ue=ue.next=st,q|=Te;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;Te=me,me=Te.next,Te.next=null,R.lastBaseUpdate=Te,R.shared.pending=null}}while(!0);if(ue===null&&(be=Ee),R.baseState=be,R.firstBaseUpdate=ce,R.lastBaseUpdate=ue,h=R.shared.interleaved,h!==null){R=h;do q|=R.lane,R=R.next;while(R!==h)}else H===null&&(R.shared.lanes=0);Co|=q,c.lanes=q,c.memoizedState=Ee}}function Nm(c,h,w){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var b=c[h],R=b.callback;if(R!==null){if(b.callback=null,b=w,typeof R!="function")throw Error(o(191,R));R.call(b)}}}var yo={},$i=rt(yo),Wo=rt(yo),zr=rt(yo);function Ti(c){if(c===yo)throw Error(o(174));return c}function Ca(c,h){xt(zr,h),xt(Wo,c),xt($i,yo),c=de(h),it($i),xt($i,c)}function hi(){it($i),it(Wo),it(zr)}function $f(c){var h=Ti(zr.current),w=Ti($i.current);h=Y(w,c.type,h),w!==h&&(xt(Wo,c),xt($i,h))}function Aa(c){Wo.current===c&&(it($i),it(Wo))}var On=rt(0);function Su(c){for(var h=c;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Os(w)||Bo(w)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ln=[];function Eu(){for(var c=0;c<Ln.length;c++){var h=Ln[c];je?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Ln.length=0}var wu=a.ReactCurrentDispatcher,ed=a.ReactCurrentBatchConfig,xo=0,an=null,In=null,qt=null,xr=!1,jn=!1,ba=0,td=0;function fr(){throw Error(o(321))}function Dm(c,h){if(h===null)return!1;for(var w=0;w<h.length&&w<c.length;w++)if(!Ci(c[w],h[w]))return!1;return!0}function Rr(c,h,w,b,R,H){if(xo=H,an=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,wu.current=c===null||c.memoizedState===null?Jf:KE,c=w(b,R),jn){H=0;do{if(jn=!1,ba=0,25<=H)throw Error(o(301));H+=1,qt=In=null,h.updateQueue=null,wu.current=$E,c=w(b,R)}while(jn)}if(wu.current=ld,h=In!==null&&In.next!==null,xo=0,qt=In=an=null,xr=!1,h)throw Error(o(300));return c}function nd(){var c=ba!==0;return ba=0,c}function _s(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?an.memoizedState=qt=c:qt=qt.next=c,qt}function Li(){if(In===null){var c=an.alternate;c=c!==null?c.memoizedState:null}else c=In.next;var h=qt===null?an.memoizedState:qt.next;if(h!==null)qt=h,In=c;else{if(c===null)throw Error(o(310));In=c,c={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},qt===null?an.memoizedState=qt=c:qt=qt.next=c}return qt}function Zi(c,h){return typeof h=="function"?h(c):h}function ys(c){var h=Li(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=c;var b=In,R=b.baseQueue,H=w.pending;if(H!==null){if(R!==null){var q=R.next;R.next=H.next,H.next=q}b.baseQueue=R=H,w.pending=null}if(R!==null){H=R.next,b=b.baseState;var me=q=null,be=null,ce=H;do{var ue=ce.lane;if((xo&ue)===ue)be!==null&&(be=be.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),b=ce.hasEagerState?ce.eagerState:c(b,ce.action);else{var Ee={lane:ue,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};be===null?(me=be=Ee,q=b):be=be.next=Ee,an.lanes|=ue,Co|=ue}ce=ce.next}while(ce!==null&&ce!==H);be===null?q=b:be.next=me,Ci(b,h.memoizedState)||(wn=!0),h.memoizedState=b,h.baseState=q,h.baseQueue=be,w.lastRenderedState=b}if(c=w.interleaved,c!==null){R=c;do H=R.lane,an.lanes|=H,Co|=H,R=R.next;while(R!==c)}else R===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function jo(c){var h=Li(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=c;var b=w.dispatch,R=w.pending,H=h.memoizedState;if(R!==null){w.pending=null;var q=R=R.next;do H=c(H,q.action),q=q.next;while(q!==R);Ci(H,h.memoizedState)||(wn=!0),h.memoizedState=H,h.baseQueue===null&&(h.baseState=H),w.lastRenderedState=H}return[H,b]}function rd(){}function id(c,h){var w=an,b=Li(),R=h(),H=!Ci(b.memoizedState,R);if(H&&(b.memoizedState=R,wn=!0),b=b.queue,ad(Om.bind(null,w,b,c),[c]),b.getSnapshot!==h||H||qt!==null&&qt.memoizedState.tag&1){if(w.flags|=2048,vl(9,Fm.bind(null,w,b,R,h),void 0,null),tr===null)throw Error(o(349));xo&30||km(w,h,R)}return R}function km(c,h,w){c.flags|=16384,c={getSnapshot:h,value:w},h=an.updateQueue,h===null?(h={lastEffect:null,stores:null},an.updateQueue=h,h.stores=[c]):(w=h.stores,w===null?h.stores=[c]:w.push(c))}function Fm(c,h,w,b){h.value=w,h.getSnapshot=b,Im(h)&&Um(c)}function Om(c,h,w){return w(function(){Im(h)&&Um(c)})}function Im(c){var h=c.getSnapshot;c=c.value;try{var w=h();return!Ci(c,w)}catch{return!0}}function Um(c){var h=vs(c,1);h!==null&&es(h,c,1,-1)}function Bm(c){var h=_s();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:c},h.queue=c,c=c.dispatch=qE.bind(null,an,c),[h.memoizedState,c]}function vl(c,h,w,b){return c={tag:c,create:h,destroy:w,deps:b,next:null},h=an.updateQueue,h===null?(h={lastEffect:null,stores:null},an.updateQueue=h,h.lastEffect=c.next=c):(w=h.lastEffect,w===null?h.lastEffect=c.next=c:(b=w.next,w.next=c,c.next=b,h.lastEffect=c)),c}function Mu(){return Li().memoizedState}function sd(c,h,w,b){var R=_s();an.flags|=c,R.memoizedState=vl(1|h,w,void 0,b===void 0?null:b)}function _l(c,h,w,b){var R=Li();b=b===void 0?null:b;var H=void 0;if(In!==null){var q=In.memoizedState;if(H=q.destroy,b!==null&&Dm(b,q.deps)){R.memoizedState=vl(h,w,H,b);return}}an.flags|=c,R.memoizedState=vl(1|h,w,H,b)}function od(c,h){return sd(8390656,8,c,h)}function ad(c,h){return _l(2048,8,c,h)}function Cu(c,h){return _l(4,2,c,h)}function zm(c,h){return _l(4,4,c,h)}function Hm(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function Gm(c,h,w){return w=w!=null?w.concat([c]):null,_l(4,4,Hm.bind(null,h,c),w)}function Zf(){}function Qf(c,h){var w=Li();h=h===void 0?null:h;var b=w.memoizedState;return b!==null&&h!==null&&Dm(h,b[1])?b[0]:(w.memoizedState=[c,h],c)}function Vm(c,h){var w=Li();h=h===void 0?null:h;var b=w.memoizedState;return b!==null&&h!==null&&Dm(h,b[1])?b[0]:(c=c(),w.memoizedState=[c,h],c)}function Wm(c,h,w){return xo&21?(Ci(w,h)||(w=hu(),an.lanes|=w,Co|=w,c.baseState=!0),h):(c.baseState&&(c.baseState=!1,wn=!0),c.memoizedState=w)}function XE(c,h){var w=on;on=w!==0&&4>w?w:4,c(!0);var b=ed.transition;ed.transition={};try{c(!1),h()}finally{on=w,ed.transition=b}}function jm(){return Li().memoizedState}function YE(c,h,w){var b=qo(c);if(w={lane:b,action:w,hasEagerState:!1,eagerState:null,next:null},Xm(c))Ym(h,w);else if(w=Lm(c,h,w,b),w!==null){var R=zn();es(w,c,b,R),qm(w,h,b)}}function qE(c,h,w){var b=qo(c),R={lane:b,action:w,hasEagerState:!1,eagerState:null,next:null};if(Xm(c))Ym(h,R);else{var H=c.alternate;if(c.lanes===0&&(H===null||H.lanes===0)&&(H=h.lastRenderedReducer,H!==null))try{var q=h.lastRenderedState,me=H(q,w);if(R.hasEagerState=!0,R.eagerState=me,Ci(me,q)){var be=h.interleaved;be===null?(R.next=R,qf(h)):(R.next=be.next,be.next=R),h.interleaved=R;return}}catch{}finally{}w=Lm(c,h,R,b),w!==null&&(R=zn(),es(w,c,b,R),qm(w,h,b))}}function Xm(c){var h=c.alternate;return c===an||h!==null&&h===an}function Ym(c,h){jn=xr=!0;var w=c.pending;w===null?h.next=h:(h.next=w.next,w.next=h),c.pending=h}function qm(c,h,w){if(w&4194240){var b=h.lanes;b&=c.pendingLanes,w|=b,h.lanes=w,Gf(c,w)}}var ld={readContext:ei,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},Jf={readContext:ei,useCallback:function(c,h){return _s().memoizedState=[c,h===void 0?null:h],c},useContext:ei,useEffect:od,useImperativeHandle:function(c,h,w){return w=w!=null?w.concat([c]):null,sd(4194308,4,Hm.bind(null,h,c),w)},useLayoutEffect:function(c,h){return sd(4194308,4,c,h)},useInsertionEffect:function(c,h){return sd(4,2,c,h)},useMemo:function(c,h){var w=_s();return h=h===void 0?null:h,c=c(),w.memoizedState=[c,h],c},useReducer:function(c,h,w){var b=_s();return h=w!==void 0?w(h):h,b.memoizedState=b.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},b.queue=c,c=c.dispatch=YE.bind(null,an,c),[b.memoizedState,c]},useRef:function(c){var h=_s();return c={current:c},h.memoizedState=c},useState:Bm,useDebugValue:Zf,useDeferredValue:function(c){return _s().memoizedState=c},useTransition:function(){var c=Bm(!1),h=c[0];return c=XE.bind(null,c[1]),_s().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,w){var b=an,R=_s();if(Tn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=h(),tr===null)throw Error(o(349));xo&30||km(b,h,w)}R.memoizedState=w;var H={value:w,getSnapshot:h};return R.queue=H,od(Om.bind(null,b,H,c),[c]),b.flags|=2048,vl(9,Fm.bind(null,b,H,w,h),void 0,null),w},useId:function(){var c=_s(),h=tr.identifierPrefix;if(Tn){var w=Hs,b=mo;w=(b&~(1<<32-Fn(b)-1)).toString(32)+w,h=":"+h+"R"+w,w=ba++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=td++,h=":"+h+"r"+w.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},KE={readContext:ei,useCallback:Qf,useContext:ei,useEffect:ad,useImperativeHandle:Gm,useInsertionEffect:Cu,useLayoutEffect:zm,useMemo:Vm,useReducer:ys,useRef:Mu,useState:function(){return ys(Zi)},useDebugValue:Zf,useDeferredValue:function(c){var h=Li();return Wm(h,In.memoizedState,c)},useTransition:function(){var c=ys(Zi)[0],h=Li().memoizedState;return[c,h]},useMutableSource:rd,useSyncExternalStore:id,useId:jm,unstable_isNewReconciler:!1},$E={readContext:ei,useCallback:Qf,useContext:ei,useEffect:ad,useImperativeHandle:Gm,useInsertionEffect:Cu,useLayoutEffect:zm,useMemo:Vm,useReducer:jo,useRef:Mu,useState:function(){return jo(Zi)},useDebugValue:Zf,useDeferredValue:function(c){var h=Li();return In===null?h.memoizedState=c:Wm(h,In.memoizedState,c)},useTransition:function(){var c=jo(Zi)[0],h=Li().memoizedState;return[c,h]},useMutableSource:rd,useSyncExternalStore:id,useId:jm,unstable_isNewReconciler:!1};function Gs(c,h){if(c&&c.defaultProps){h=s({},h),c=c.defaultProps;for(var w in c)h[w]===void 0&&(h[w]=c[w]);return h}return h}function ud(c,h,w,b){h=c.memoizedState,w=w(b,h),w=w==null?h:s({},h,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var Au={isMounted:function(c){return(c=c._reactInternals)?B(c)===c:!1},enqueueSetState:function(c,h,w){c=c._reactInternals;var b=zn(),R=qo(c),H=Ri(b,R);H.payload=h,w!=null&&(H.callback=w),h=_o(c,H,R),h!==null&&(es(h,c,R,b),Ma(h,c,R))},enqueueReplaceState:function(c,h,w){c=c._reactInternals;var b=zn(),R=qo(c),H=Ri(b,R);H.tag=1,H.payload=h,w!=null&&(H.callback=w),h=_o(c,H,R),h!==null&&(es(h,c,R,b),Ma(h,c,R))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var w=zn(),b=qo(c),R=Ri(w,b);R.tag=2,h!=null&&(R.callback=h),h=_o(c,R,b),h!==null&&(es(h,c,b,w),Ma(h,c,b))}};function Z1(c,h,w,b,R,H,q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,H,q):h.prototype&&h.prototype.isPureReactComponent?!_u(w,b)||!_u(R,H):!0}function Km(c,h,w){var b=!1,R=Ut,H=h.contextType;return typeof H=="object"&&H!==null?H=ei(H):(R=Dt(h)?St:Lt.current,b=h.contextTypes,H=(b=b!=null)?en(c,R):Ut),h=new h(w,H),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Au,c.stateNode=h,h._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=R,c.__reactInternalMemoizedMaskedChildContext=H),h}function $m(c,h,w,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,b),h.state!==c&&Au.enqueueReplaceState(h,h.state,null)}function eh(c,h,w,b){var R=c.stateNode;R.props=w,R.state=c.memoizedState,R.refs={},Kf(c);var H=h.contextType;typeof H=="object"&&H!==null?R.context=ei(H):(H=Dt(h)?St:Lt.current,R.context=en(c,H)),R.state=c.memoizedState,H=h.getDerivedStateFromProps,typeof H=="function"&&(ud(c,h,H,w),R.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&Au.enqueueReplaceState(R,R.state,null),Jc(c,w,R,b),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308)}function yl(c,h){try{var w="",b=h;do w+=yu(b),b=b.return;while(b);var R=w}catch(H){R=`
Error generating stack: `+H.message+`
`+H.stack}return{value:c,source:h,stack:R,digest:null}}function th(c,h,w){return{value:c,source:null,stack:w??null,digest:h??null}}function xs(c,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var Q1=typeof WeakMap=="function"?WeakMap:Map;function bu(c,h,w){w=Ri(-1,w),w.tag=3,w.payload={element:null};var b=h.value;return w.callback=function(){bl||(bl=!0,Gr=b),xs(c,h)},w}function Pu(c,h,w){w=Ri(-1,w),w.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var R=h.value;w.payload=function(){return b(R)},w.callback=function(){xs(c,h)}}var H=c.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(w.callback=function(){xs(c,h),typeof b!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var q=h.stack;this.componentDidCatch(h.value,{componentStack:q!==null?q:""})}),w}function cd(c,h,w){var b=c.pingCache;if(b===null){b=c.pingCache=new Q1;var R=new Set;b.set(h,R)}else R=b.get(h),R===void 0&&(R=new Set,b.set(h,R));R.has(w)||(R.add(w),c=fg.bind(null,c,h,w),h.then(c,c))}function dd(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function Zm(c,h,w,b,R){return c.mode&1?(c.flags|=65536,c.lanes=R,c):(c===h?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=Ri(-1,1),h.tag=2,_o(w,h,1))),w.lanes|=1),c)}var fd=a.ReactCurrentOwner,wn=!1;function pi(c,h,w,b){h.child=c===null?wa(h,null,w,b):Ur(h,c.child,w,b)}function J1(c,h,w,b,R){w=w.render;var H=h.ref;return En(h,R),b=Rr(c,h,w,b,H,R),w=nd(),c!==null&&!wn?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~R,So(c,h,R)):(Tn&&w&&bi(h),h.flags|=1,pi(c,h,b,R),h.child)}function Ni(c,h,w,b,R){if(c===null){var H=w.type;return typeof H=="function"&&!pg(H)&&H.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=H,ti(c,h,H,b,R)):(c=Cd(w.type,null,b,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(H=c.child,!(c.lanes&R)){var q=H.memoizedProps;if(w=w.compare,w=w!==null?w:_u,w(q,b)&&c.ref===h.ref)return So(c,h,R)}return h.flags|=1,c=$o(H,b),c.ref=h.ref,c.return=h,h.child=c}function ti(c,h,w,b,R){if(c!==null){var H=c.memoizedProps;if(_u(H,b)&&c.ref===h.ref)if(wn=!1,h.pendingProps=b=H,(c.lanes&R)!==0)c.flags&131072&&(wn=!0);else return h.lanes=c.lanes,So(c,h,R)}return nh(c,h,w,b,R)}function Qm(c,h,w){var b=h.pendingProps,R=b.children,H=c!==null?c.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Pa,bn),bn|=w;else{if(!(w&1073741824))return c=H!==null?H.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,xt(Pa,bn),bn|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=H!==null?H.baseLanes:w,xt(Pa,bn),bn|=b}else H!==null?(b=H.baseLanes|w,h.memoizedState=null):b=w,xt(Pa,bn),bn|=b;return pi(c,h,R,w),h.child}function Jm(c,h){var w=h.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function nh(c,h,w,b,R){var H=Dt(w)?St:Lt.current;return H=en(h,H),En(h,R),w=Rr(c,h,w,b,H,R),b=nd(),c!==null&&!wn?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~R,So(c,h,R)):(Tn&&b&&bi(h),h.flags|=1,pi(c,h,w,R),h.child)}function eg(c,h,w,b,R){if(Dt(w)){var H=!0;Is(h)}else H=!1;if(En(h,R),h.stateNode===null)Sl(c,h),Km(h,w,b),eh(h,w,b,R),b=!0;else if(c===null){var q=h.stateNode,me=h.memoizedProps;q.props=me;var be=q.context,ce=w.contextType;typeof ce=="object"&&ce!==null?ce=ei(ce):(ce=Dt(w)?St:Lt.current,ce=en(h,ce));var ue=w.getDerivedStateFromProps,Ee=typeof ue=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ee||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me!==b||be!==ce)&&$m(h,q,b,ce),vo=!1;var Te=h.memoizedState;q.state=Te,Jc(h,b,q,R),be=h.memoizedState,me!==b||Te!==be||Tt.current||vo?(typeof ue=="function"&&(ud(h,w,ue,b),be=h.memoizedState),(me=vo||Z1(h,w,me,b,Te,be,ce))?(Ee||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=be),q.props=b,q.state=be,q.context=ce,b=me):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{q=h.stateNode,xu(c,h),me=h.memoizedProps,ce=h.type===h.elementType?me:Gs(h.type,me),q.props=ce,Ee=h.pendingProps,Te=q.context,be=w.contextType,typeof be=="object"&&be!==null?be=ei(be):(be=Dt(w)?St:Lt.current,be=en(h,be));var st=w.getDerivedStateFromProps;(ue=typeof st=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me!==Ee||Te!==be)&&$m(h,q,b,be),vo=!1,Te=h.memoizedState,q.state=Te,Jc(h,b,q,R);var yt=h.memoizedState;me!==Ee||Te!==yt||Tt.current||vo?(typeof st=="function"&&(ud(h,w,st,b),yt=h.memoizedState),(ce=vo||Z1(h,w,ce,b,Te,yt,be)||!1)?(ue||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,yt,be),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,yt,be)),typeof q.componentDidUpdate=="function"&&(h.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof q.componentDidUpdate!="function"||me===c.memoizedProps&&Te===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===c.memoizedProps&&Te===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=yt),q.props=b,q.state=yt,q.context=be,b=ce):(typeof q.componentDidUpdate!="function"||me===c.memoizedProps&&Te===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===c.memoizedProps&&Te===c.memoizedState||(h.flags|=1024),b=!1)}return rh(c,h,w,b,H,R)}function rh(c,h,w,b,R,H){Jm(c,h);var q=(h.flags&128)!==0;if(!b&&!q)return R&&tn(h,w,!1),So(c,h,H);b=h.stateNode,fd.current=h;var me=q&&typeof w.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,c!==null&&q?(h.child=Ur(h,c.child,null,H),h.child=Ur(h,null,me,H)):pi(c,h,me,H),h.memoizedState=b.state,R&&tn(h,w,!0),h.child}function ih(c){var h=c.stateNode;h.pendingContext?co(c,h.pendingContext,h.pendingContext!==h.context):h.context&&co(c,h.context,!1),Ca(c,h.containerInfo)}function tg(c,h,w,b,R){return ml(),jf(R),h.flags|=256,pi(c,h,w,b),h.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function sh(c){return{baseLanes:c,cachePool:null,transitions:null}}function ng(c,h,w){var b=h.pendingProps,R=On.current,H=!1,q=(h.flags&128)!==0,me;if((me=q)||(me=c!==null&&c.memoizedState===null?!1:(R&2)!==0),me?(H=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(R|=1),xt(On,R&1),c===null)return Wf(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?Bo(c)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(q=b.children,c=b.fallback,H?(b=h.mode,H=h.child,q={mode:"hidden",children:q},!(b&1)&&H!==null?(H.childLanes=0,H.pendingProps=q):H=Bu(q,b,0,null),c=Oa(c,b,w,null),H.return=h,c.return=h,H.sibling=c,h.child=H,h.child.memoizedState=sh(w),h.memoizedState=hd,c):Ru(h,q));if(R=c.memoizedState,R!==null&&(me=R.dehydrated,me!==null))return ev(c,h,q,b,me,R,w);if(H){H=b.fallback,q=h.mode,R=c.child,me=R.sibling;var be={mode:"hidden",children:b.children};return!(q&1)&&h.child!==R?(b=h.child,b.childLanes=0,b.pendingProps=be,h.deletions=null):(b=$o(R,be),b.subtreeFlags=R.subtreeFlags&14680064),me!==null?H=$o(me,H):(H=Oa(H,q,w,null),H.flags|=2),H.return=h,b.return=h,b.sibling=H,h.child=b,b=H,H=h.child,q=c.child.memoizedState,q=q===null?sh(w):{baseLanes:q.baseLanes|w,cachePool:null,transitions:q.transitions},H.memoizedState=q,H.childLanes=c.childLanes&~w,h.memoizedState=hd,b}return H=c.child,c=H.sibling,b=$o(H,{mode:"visible",children:b.children}),!(h.mode&1)&&(b.lanes=w),b.return=h,b.sibling=null,c!==null&&(w=h.deletions,w===null?(h.deletions=[c],h.flags|=16):w.push(c)),h.child=b,h.memoizedState=null,b}function Ru(c,h){return h=Bu({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function xl(c,h,w,b){return b!==null&&jf(b),Ur(h,c.child,null,w),c=Ru(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function ev(c,h,w,b,R,H,q){if(w)return h.flags&256?(h.flags&=-257,b=th(Error(o(422))),xl(c,h,q,b)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(H=b.fallback,R=h.mode,b=Bu({mode:"visible",children:b.children},R,0,null),H=Oa(H,R,q,null),H.flags|=2,b.return=h,H.return=h,b.sibling=H,h.child=b,h.mode&1&&Ur(h,c.child,null,q),h.child.memoizedState=sh(q),h.memoizedState=hd,H);if(!(h.mode&1))return xl(c,h,q,null);if(Bo(R))return b=Of(R).digest,H=Error(o(419)),b=th(H,b,void 0),xl(c,h,q,b);if(w=(q&c.childLanes)!==0,wn||w){if(b=tr,b!==null){switch(q&-q){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=R&(b.suspendedLanes|q)?0:R,R!==0&&R!==H.retryLane&&(H.retryLane=R,vs(c,R),es(b,c,R,-1))}return Ko(),b=th(Error(o(421))),xl(c,h,q,b)}return Os(R)?(h.flags|=128,h.child=c.child,h=ka.bind(null,c),Sa(R,h),null):(c=H.treeContext,$e&&(Pi=Uf(R),dr=h,Tn=!0,Pr=null,qi=!1,c!==null&&(Ir[Ai++]=mo,Ir[Ai++]=Hs,Ir[Ai++]=Go,mo=c.id,Hs=c.overflow,Go=h)),h=Ru(h,b.children),h.flags|=4096,h)}function oh(c,h,w){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),fi(c.return,h,w)}function ah(c,h,w,b,R){var H=c.memoizedState;H===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:w,tailMode:R}:(H.isBackwards=h,H.rendering=null,H.renderingStartTime=0,H.last=b,H.tail=w,H.tailMode=R)}function rg(c,h,w){var b=h.pendingProps,R=b.revealOrder,H=b.tail;if(pi(c,h,b.children,w),b=On.current,b&2)b=b&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&oh(c,w,h);else if(c.tag===19)oh(c,w,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(xt(On,b),!(h.mode&1))h.memoizedState=null;else switch(R){case"forwards":for(w=h.child,R=null;w!==null;)c=w.alternate,c!==null&&Su(c)===null&&(R=w),w=w.sibling;w=R,w===null?(R=h.child,h.child=null):(R=w.sibling,w.sibling=null),ah(h,!1,R,w,H);break;case"backwards":for(w=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&Su(c)===null){h.child=R;break}c=R.sibling,R.sibling=w,w=R,R=c}ah(h,!0,w,null,H);break;case"together":ah(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Sl(c,h){!(h.mode&1)&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function So(c,h,w){if(c!==null&&(h.dependencies=c.dependencies),Co|=h.lanes,!(w&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(o(153));if(h.child!==null){for(c=h.child,w=$o(c,c.pendingProps),h.child=w,w.return=h;c.sibling!==null;)c=c.sibling,w=w.sibling=$o(c,c.pendingProps),w.return=h;w.sibling=null}return h.child}function ig(c,h,w){switch(h.tag){case 3:ih(h),ml();break;case 5:$f(h);break;case 1:Dt(h.type)&&Is(h);break;case 4:Ca(h,h.stateNode.containerInfo);break;case 10:Yf(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(xt(On,On.current&1),h.flags|=128,null):w&h.child.childLanes?ng(c,h,w):(xt(On,On.current&1),c=So(c,h,w),c!==null?c.sibling:null);xt(On,On.current&1);break;case 19:if(b=(w&h.childLanes)!==0,c.flags&128){if(b)return rg(c,h,w);h.flags|=128}var R=h.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),xt(On,On.current),b)break;return null;case 22:case 23:return h.lanes=0,Qm(c,h,w)}return So(c,h,w)}function Vs(c){c.flags|=4}function Eo(c,h){if(c!==null&&c.child===h.child)return!0;if(h.flags&16)return!1;for(c=h.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var pd,md,El,wo;if(Ve)pd=function(c,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)Me(c,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},md=function(){},El=function(c,h,w,b,R){if(c=c.memoizedProps,c!==b){var H=h.stateNode,q=Ti($i.current);w=ge(H,w,c,b,R,q),(h.updateQueue=w)&&Vs(h)}},wo=function(c,h,w,b){w!==b&&Vs(h)};else if(Je){pd=function(c,h,w,b){for(var R=h.child;R!==null;){if(R.tag===5){var H=R.stateNode;w&&b&&(H=un(H,R.type,R.memoizedProps,R)),Me(c,H)}else if(R.tag===6)H=R.stateNode,w&&b&&(H=ci(H,R.memoizedProps,R)),Me(c,H);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)H=R.child,H!==null&&(H.return=R),pd(c,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var tv=function(c,h,w,b){for(var R=h.child;R!==null;){if(R.tag===5){var H=R.stateNode;w&&b&&(H=un(H,R.type,R.memoizedProps,R)),Ot(c,H)}else if(R.tag===6)H=R.stateNode,w&&b&&(H=ci(H,R.memoizedProps,R)),Ot(c,H);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)H=R.child,H!==null&&(H.return=R),tv(c,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};md=function(c,h){var w=h.stateNode;if(!Eo(c,h)){c=w.containerInfo;var b=ut(c);tv(b,h,!1,!1),w.pendingChildren=b,Vs(h),kn(c,b)}},El=function(c,h,w,b,R){var H=c.stateNode,q=c.memoizedProps;if((c=Eo(c,h))&&q===b)h.stateNode=H;else{var me=h.stateNode,be=Ti($i.current),ce=null;q!==b&&(ce=ge(me,w,q,b,R,be)),c&&ce===null?h.stateNode=H:(H=ft(H,ce,w,q,b,h,c,me),ze(H,w,b,R,be)&&Vs(h),h.stateNode=H,c?Vs(h):pd(H,h,!1,!1))}},wo=function(c,h,w,b){w!==b?(c=Ti(zr.current),w=Ti($i.current),h.stateNode=Xe(b,c,w,h),Vs(h)):h.stateNode=c.stateNode}}else md=function(){},El=function(){},wo=function(){};function lt(c,h){if(!Tn)switch(c.tailMode){case"hidden":h=c.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var b=null;w!==null;)w.alternate!==null&&(b=w),w=w.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function Sr(c){var h=c.alternate!==null&&c.alternate.child===c.child,w=0,b=0;if(h)for(var R=c.child;R!==null;)w|=R.lanes|R.childLanes,b|=R.subtreeFlags&14680064,b|=R.flags&14680064,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)w|=R.lanes|R.childLanes,b|=R.subtreeFlags,b|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=b,c.childLanes=w,h}function sg(c,h,w){var b=h.pendingProps;switch(hs(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(h),null;case 1:return Dt(h.type)&&Fr(),Sr(h),null;case 3:return w=h.stateNode,hi(),it(Tt),it(Lt),Eu(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(vu(h)?Vs(h):c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Pr!==null&&(yh(Pr),Pr=null))),md(c,h),Sr(h),null;case 5:Aa(h),w=Ti(zr.current);var R=h.type;if(c!==null&&h.stateNode!=null)El(c,h,R,b,w),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(o(166));return Sr(h),null}if(c=Ti($i.current),vu(h)){if(!$e)throw Error(o(175));c=Bf(h.stateNode,h.type,h.memoizedProps,w,c,h,!qi),h.updateQueue=c,c!==null&&Vs(h)}else{var H=he(R,b,w,c,h);pd(H,h,!1,!1),h.stateNode=H,ze(H,R,b,w,c)&&Vs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Sr(h),null;case 6:if(c&&h.stateNode!=null)wo(c,h,c.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(o(166));if(c=Ti(zr.current),w=Ti($i.current),vu(h)){if(!$e)throw Error(o(176));if(c=h.stateNode,w=h.memoizedProps,(b=_m(c,w,h,!qi))&&(R=dr,R!==null))switch(R.tag){case 3:Pe(R.stateNode.containerInfo,c,w,(R.mode&1)!==0);break;case 5:Re(R.type,R.memoizedProps,R.stateNode,c,w,(R.mode&1)!==0)}b&&Vs(h)}else h.stateNode=Xe(b,c,w,h)}return Sr(h),null;case 13:if(it(On),b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Tn&&Pi!==null&&h.mode&1&&!(h.flags&128))Kc(),ml(),h.flags|=98560,R=!1;else if(R=vu(h),b!==null&&b.dehydrated!==null){if(c===null){if(!R)throw Error(o(318));if(!$e)throw Error(o(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(o(317));ym(R,h)}else ml(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;Sr(h),R=!1}else Pr!==null&&(yh(Pr),Pr=null),R=!0;if(!R)return h.flags&65536?h:null}return h.flags&128?(h.lanes=w,h):(w=b!==null,w!==(c!==null&&c.memoizedState!==null)&&w&&(h.child.flags|=8192,h.mode&1&&(c===null||On.current&1?rr===0&&(rr=3):Ko())),h.updateQueue!==null&&(h.flags|=4),Sr(h),null);case 4:return hi(),md(c,h),c===null&&At(h.stateNode.containerInfo),Sr(h),null;case 10:return di(h.type._context),Sr(h),null;case 17:return Dt(h.type)&&Fr(),Sr(h),null;case 19:if(it(On),R=h.memoizedState,R===null)return Sr(h),null;if(b=(h.flags&128)!==0,H=R.rendering,H===null)if(b)lt(R,!1);else{if(rr!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(H=Su(c),H!==null){for(h.flags|=128,lt(R,!1),c=H.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),h.subtreeFlags=0,c=w,w=h.child;w!==null;)b=w,R=c,b.flags&=14680066,H=b.alternate,H===null?(b.childLanes=0,b.lanes=R,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=H.childLanes,b.lanes=H.lanes,b.child=H.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=H.memoizedProps,b.memoizedState=H.memoizedState,b.updateQueue=H.updateQueue,b.type=H.type,R=H.dependencies,b.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),w=w.sibling;return xt(On,On.current&1|2),h.child}c=c.sibling}R.tail!==null&&br()>Al&&(h.flags|=128,b=!0,lt(R,!1),h.lanes=4194304)}else{if(!b)if(c=Su(H),c!==null){if(h.flags|=128,b=!0,c=c.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),lt(R,!0),R.tail===null&&R.tailMode==="hidden"&&!H.alternate&&!Tn)return Sr(h),null}else 2*br()-R.renderingStartTime>Al&&w!==1073741824&&(h.flags|=128,b=!0,lt(R,!1),h.lanes=4194304);R.isBackwards?(H.sibling=h.child,h.child=H):(c=R.last,c!==null?c.sibling=H:h.child=H,R.last=H)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=br(),h.sibling=null,c=On.current,xt(On,b?c&1|2:c&1),h):(Sr(h),null);case 22:case 23:return xh(),w=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(h.flags|=8192),w&&h.mode&1?bn&1073741824&&(Sr(h),Ve&&h.subtreeFlags&6&&(h.flags|=8192)):Sr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}function nv(c,h){switch(hs(h),h.tag){case 1:return Dt(h.type)&&Fr(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return hi(),it(Tt),it(Lt),Eu(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return Aa(h),null;case 13:if(it(On),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(o(340));ml()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return it(On),null;case 4:return hi(),null;case 10:return di(h.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var lh=!1,Xn=!1,gd=typeof WeakSet=="function"?WeakSet:Set,mt=null;function wl(c,h){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(b){rn(c,h,b)}else w.current=null}function uh(c,h,w){try{w()}catch(b){rn(c,h,b)}}var og=!1;function rv(c,h){for(ae(c.containerInfo),mt=h;mt!==null;)if(c=mt,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,mt=h;else for(;mt!==null;){c=mt;try{var w=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,R=w.memoizedState,H=c.stateNode,q=H.getSnapshotBeforeUpdate(c.elementType===c.type?b:Gs(c.type,b),R);H.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Ve&&Ye(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){rn(c,c.return,me)}if(h=c.sibling,h!==null){h.return=c.return,mt=h;break}mt=c.return}return w=og,og=!1,w}function Tu(c,h,w){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var R=b=b.next;do{if((R.tag&c)===c){var H=R.destroy;R.destroy=void 0,H!==void 0&&uh(h,w,H)}R=R.next}while(R!==b)}}function vd(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&c)===c){var b=w.create;w.destroy=b()}w=w.next}while(w!==h)}}function _d(c){var h=c.ref;if(h!==null){var w=c.stateNode;switch(c.tag){case 5:c=ne(w);break;default:c=w}typeof h=="function"?h(c):h.current=c}}function ch(c){var h=c.alternate;h!==null&&(c.alternate=null,ch(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&He(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function ag(c){return c.tag===5||c.tag===3||c.tag===4}function dh(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||ag(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Lu(c,h,w){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?tt(w,c,h):I(w,c);else if(b!==4&&(c=c.child,c!==null))for(Lu(c,h,w),c=c.sibling;c!==null;)Lu(c,h,w),c=c.sibling}function lg(c,h,w){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?Ce(w,c,h):N(w,c);else if(b!==4&&(c=c.child,c!==null))for(lg(c,h,w),c=c.sibling;c!==null;)lg(c,h,w),c=c.sibling}var Hr=null,Ss=!1;function Ws(c,h,w){for(w=w.child;w!==null;)fh(c,h,w),w=w.sibling}function fh(c,h,w){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(Vf,w)}catch{}switch(w.tag){case 5:Xn||wl(w,h);case 6:if(Ve){var b=Hr,R=Ss;Hr=null,Ws(c,h,w),Hr=b,Ss=R,Hr!==null&&(Ss?wt(Hr,w.stateNode):Ze(Hr,w.stateNode))}else Ws(c,h,w);break;case 18:Ve&&Hr!==null&&(Ss?$(Hr,w.stateNode):Em(Hr,w.stateNode));break;case 4:Ve?(b=Hr,R=Ss,Hr=w.stateNode.containerInfo,Ss=!0,Ws(c,h,w),Hr=b,Ss=R):(Je&&(b=w.stateNode.containerInfo,R=ut(b),Qn(b,R)),Ws(c,h,w));break;case 0:case 11:case 14:case 15:if(!Xn&&(b=w.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){R=b=b.next;do{var H=R,q=H.destroy;H=H.tag,q!==void 0&&(H&2||H&4)&&uh(w,h,q),R=R.next}while(R!==b)}Ws(c,h,w);break;case 1:if(!Xn&&(wl(w,h),b=w.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=w.memoizedProps,b.state=w.memoizedState,b.componentWillUnmount()}catch(me){rn(w,h,me)}Ws(c,h,w);break;case 21:Ws(c,h,w);break;case 22:w.mode&1?(Xn=(b=Xn)||w.memoizedState!==null,Ws(c,h,w),Xn=b):Ws(c,h,w);break;default:Ws(c,h,w)}}function ug(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new gd),h.forEach(function(b){var R=Sh.bind(null,c,b);w.has(b)||(w.add(b),b.then(R,R))})}}function Di(c,h){var w=h.deletions;if(w!==null)for(var b=0;b<w.length;b++){var R=w[b];try{var H=c,q=h;if(Ve){var me=q;e:for(;me!==null;){switch(me.tag){case 5:Hr=me.stateNode,Ss=!1;break e;case 3:Hr=me.stateNode.containerInfo,Ss=!0;break e;case 4:Hr=me.stateNode.containerInfo,Ss=!0;break e}me=me.return}if(Hr===null)throw Error(o(160));fh(H,q,R),Hr=null,Ss=!1}else fh(H,q,R);var be=R.alternate;be!==null&&(be.return=null),R.return=null}catch(ce){rn(R,h,ce)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)yd(h,c),h=h.sibling}function yd(c,h){var w=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Di(h,c),Qi(c),b&4){try{Tu(3,c,c.return),vd(3,c)}catch(Te){rn(c,c.return,Te)}try{Tu(5,c,c.return)}catch(Te){rn(c,c.return,Te)}}break;case 1:Di(h,c),Qi(c),b&512&&w!==null&&wl(w,w.return);break;case 5:if(Di(h,c),Qi(c),b&512&&w!==null&&wl(w,w.return),Ve){if(c.flags&32){var R=c.stateNode;try{gt(R)}catch(Te){rn(c,c.return,Te)}}if(b&4&&(R=c.stateNode,R!=null)){var H=c.memoizedProps;if(w=w!==null?w.memoizedProps:H,b=c.type,h=c.updateQueue,c.updateQueue=null,h!==null)try{fe(R,h,b,w,H,c)}catch(Te){rn(c,c.return,Te)}}}break;case 6:if(Di(h,c),Qi(c),b&4&&Ve){if(c.stateNode===null)throw Error(o(162));R=c.stateNode,H=c.memoizedProps,w=w!==null?w.memoizedProps:H;try{J(R,w,H)}catch(Te){rn(c,c.return,Te)}}break;case 3:if(Di(h,c),Qi(c),b&4){if(Ve&&$e&&w!==null&&w.memoizedState.isDehydrated)try{xm(h.containerInfo)}catch(Te){rn(c,c.return,Te)}if(Je){R=h.containerInfo,H=h.pendingChildren;try{Qn(R,H)}catch(Te){rn(c,c.return,Te)}}}break;case 4:if(Di(h,c),Qi(c),b&4&&Je){H=c.stateNode,R=H.containerInfo,H=H.pendingChildren;try{Qn(R,H)}catch(Te){rn(c,c.return,Te)}}break;case 13:Di(h,c),Qi(c),R=c.child,R.flags&8192&&(H=R.memoizedState!==null,R.stateNode.isHidden=H,!H||R.alternate!==null&&R.alternate.memoizedState!==null||(Ou=br())),b&4&&ug(c);break;case 22:var q=w!==null&&w.memoizedState!==null;if(c.mode&1?(Xn=(w=Xn)||q,Di(h,c),Xn=w):Di(h,c),Qi(c),b&8192){if(w=c.memoizedState!==null,(c.stateNode.isHidden=w)&&!q&&c.mode&1)for(mt=c,b=c.child;b!==null;){for(h=mt=b;mt!==null;){q=mt;var me=q.child;switch(q.tag){case 0:case 11:case 14:case 15:Tu(4,q,q.return);break;case 1:wl(q,q.return);var be=q.stateNode;if(typeof be.componentWillUnmount=="function"){var ce=q,ue=q.return;try{var Ee=ce;be.props=Ee.memoizedProps,be.state=Ee.memoizedState,be.componentWillUnmount()}catch(Te){rn(ce,ue,Te)}}break;case 5:wl(q,q.return);break;case 22:if(q.memoizedState!==null){ph(h);continue}}me!==null?(me.return=q,mt=me):ph(h)}b=b.sibling}if(Ve){e:if(b=null,Ve)for(h=c;;){if(h.tag===5){if(b===null){b=h;try{R=h.stateNode,w?bt(R):dt(h.stateNode,h.memoizedProps)}catch(Te){rn(c,c.return,Te)}}}else if(h.tag===6){if(b===null)try{H=h.stateNode,w?_e(H):Ue(H,h.memoizedProps)}catch(Te){rn(c,c.return,Te)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}}}break;case 19:Di(h,c),Qi(c),b&4&&ug(c);break;case 21:break;default:Di(h,c),Qi(c)}}function Qi(c){var h=c.flags;if(h&2){try{if(Ve){e:{for(var w=c.return;w!==null;){if(ag(w)){var b=w;break e}w=w.return}throw Error(o(160))}switch(b.tag){case 5:var R=b.stateNode;b.flags&32&&(gt(R),b.flags&=-33);var H=dh(c);lg(c,H,R);break;case 3:case 4:var q=b.stateNode.containerInfo,me=dh(c);Lu(c,me,q);break;default:throw Error(o(161))}}}catch(be){rn(c,c.return,be)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function hh(c,h,w){mt=c,xd(c)}function xd(c,h,w){for(var b=(c.mode&1)!==0;mt!==null;){var R=mt,H=R.child;if(R.tag===22&&b){var q=R.memoizedState!==null||lh;if(!q){var me=R.alternate,be=me!==null&&me.memoizedState!==null||Xn;me=lh;var ce=Xn;if(lh=q,(Xn=be)&&!ce)for(mt=R;mt!==null;)q=mt,be=q.child,q.tag===22&&q.memoizedState!==null?mh(R):be!==null?(be.return=q,mt=be):mh(R);for(;H!==null;)mt=H,xd(H),H=H.sibling;mt=R,lh=me,Xn=ce}Nu(c)}else R.subtreeFlags&8772&&H!==null?(H.return=R,mt=H):Nu(c)}}function Nu(c){for(;mt!==null;){var h=mt;if(h.flags&8772){var w=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Xn||vd(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Xn)if(w===null)b.componentDidMount();else{var R=h.elementType===h.type?w.memoizedProps:Gs(h.type,w.memoizedProps);b.componentDidUpdate(R,w.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var H=h.updateQueue;H!==null&&Nm(h,H,b);break;case 3:var q=h.updateQueue;if(q!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=ne(h.child.stateNode);break;case 1:w=h.child.stateNode}Nm(h,q,w)}break;case 5:var me=h.stateNode;w===null&&h.flags&4&&ie(me,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if($e&&h.memoizedState===null){var be=h.alternate;if(be!==null){var ce=be.memoizedState;if(ce!==null){var ue=ce.dehydrated;ue!==null&&Sm(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Xn||h.flags&512&&_d(h)}catch(Ee){rn(h,h.return,Ee)}}if(h===c){mt=null;break}if(w=h.sibling,w!==null){w.return=h.return,mt=w;break}mt=h.return}}function ph(c){for(;mt!==null;){var h=mt;if(h===c){mt=null;break}var w=h.sibling;if(w!==null){w.return=h.return,mt=w;break}mt=h.return}}function mh(c){for(;mt!==null;){var h=mt;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{vd(4,h)}catch(be){rn(h,w,be)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var R=h.return;try{b.componentDidMount()}catch(be){rn(h,R,be)}}var H=h.return;try{_d(h)}catch(be){rn(h,H,be)}break;case 5:var q=h.return;try{_d(h)}catch(be){rn(h,q,be)}}}catch(be){rn(h,h.return,be)}if(h===c){mt=null;break}var me=h.sibling;if(me!==null){me.return=h.return,mt=me;break}mt=h.return}}var Du=0,Sd=1,ku=2,gh=3,Ml=4;if(typeof Symbol=="function"&&Symbol.for){var Cl=Symbol.for;Du=Cl("selector.component"),Sd=Cl("selector.has_pseudo_class"),ku=Cl("selector.role"),gh=Cl("selector.test_id"),Ml=Cl("selector.text")}function Bn(c){var h=le(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(c=ee(c),c===null)throw Error(o(362));return c.stateNode.current}function Gt(c,h){switch(h.$$typeof){case Du:if(c.type===h.value)return!0;break;case Sd:e:{h=h.value,c=[c,0];for(var w=0;w<c.length;){var b=c[w++],R=c[w++],H=h[R];if(b.tag!==5||!Le(b)){for(;H!=null&&Gt(b,H);)R++,H=h[R];if(R===h.length){h=!0;break e}else for(b=b.child;b!==null;)c.push(b,R),b=b.sibling}}h=!1}return h;case ku:if(c.tag===5&&Ie(c.stateNode,h.value))return!0;break;case Ml:if((c.tag===5||c.tag===6)&&(c=xe(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case gh:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Yn(c){switch(c.$$typeof){case Du:return"<"+(U(c.value)||"Unknown")+">";case Sd:return":has("+(Yn(c)||"")+")";case ku:return'[role="'+c.value+'"]';case Ml:return'"'+c.value+'"';case gh:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function Jn(c,h){var w=[];c=[c,0];for(var b=0;b<c.length;){var R=c[b++],H=c[b++],q=h[H];if(R.tag!==5||!Le(R)){for(;q!=null&&Gt(R,q);)H++,q=h[H];if(H===h.length)w.push(R);else for(R=R.child;R!==null;)c.push(R,H),R=R.sibling}}return w}function Er(c,h){if(!Fe)throw Error(o(363));c=Bn(c),c=Jn(c,h),h=[],c=Array.from(c);for(var w=0;w<c.length;){var b=c[w++];if(b.tag===5)Le(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return h}var Ji=Math.ceil,Xo=a.ReactCurrentDispatcher,er=a.ReactCurrentOwner,Nn=a.ReactCurrentBatchConfig,Bt=0,tr=null,qn=null,nr=0,bn=0,Pa=rt(0),rr=0,Mo=null,Co=0,Fu=0,Ao=0,Ra=null,ir=null,Ou=0,Al=1/0,js=null;function Yo(){Al=br()+500}var bl=!1,Gr=null,mi=null,gi=!1,Xs=null,Vr=0,Iu=0,Ed=null,Uu=-1,vh=0;function zn(){return Bt&6?br():Uu!==-1?Uu:Uu=br()}function qo(c){return c.mode&1?Bt&2&&nr!==0?nr&-nr:$1.transition!==null?(vh===0&&(vh=hu()),vh):(c=on,c!==0?c:Be()):1}function es(c,h,w,b){if(50<Iu)throw Iu=0,Ed=null,Error(o(185));dl(c,w,b),(!(Bt&2)||c!==tr)&&(c===tr&&(!(Bt&2)&&(Fu|=w),rr===4&&Ys(c,nr)),ni(c,b),w===1&&Bt===0&&!(h.mode&1)&&(Yo(),Yc&&Yi()))}function ni(c,h){var w=c.callbackNode;wm(c,h);var b=Hf(c,c===tr?nr:0);if(b===0)w!==null&&K1(w),c.callbackNode=null,c.callbackPriority=0;else if(h=b&-b,c.callbackPriority!==h){if(w!=null&&K1(w),h===1)c.tag===0?jE(iv.bind(null,c)):zs(iv.bind(null,c)),ke?nt(function(){!(Bt&6)&&Yi()}):Am(Xc,Yi),w=null;else{switch(Cm(b)){case 1:w=Xc;break;case 4:w=WE;break;case 16:w=pu;break;case 536870912:w=fo;break;default:w=pu}w=Md(w,Ta.bind(null,c))}c.callbackPriority=h,c.callbackNode=w}}function Ta(c,h){if(Uu=-1,vh=0,Bt&6)throw Error(o(327));var w=c.callbackNode;if(Da()&&c.callbackNode!==w)return null;var b=Hf(c,c===tr?nr:0);if(b===0)return null;if(b&30||b&c.expiredLanes||h)h=wd(c,b);else{h=b;var R=Bt;Bt|=2;var H=ov();(tr!==c||nr!==h)&&(js=null,Yo(),La(c,h));do try{ZE();break}catch(me){Na(c,me)}while(!0);Zc(),Xo.current=H,Bt=R,qn!==null?h=0:(tr=null,nr=0,h=rr)}if(h!==0){if(h===2&&(R=jc(c),R!==0&&(b=R,h=_h(c,R))),h===1)throw w=Mo,La(c,0),Ys(c,b),ni(c,br()),w;if(h===6)Ys(c,b);else{if(R=c.current.alternate,!(b&30)&&!cg(R)&&(h=wd(c,b),h===2&&(H=jc(c),H!==0&&(b=H,h=_h(c,H))),h===1))throw w=Mo,La(c,0),Ys(c,b),ni(c,br()),w;switch(c.finishedWork=R,c.finishedLanes=b,h){case 0:case 1:throw Error(o(345));case 2:Pl(c,ir,js);break;case 3:if(Ys(c,b),(b&130023424)===b&&(h=Ou+500-br(),10<h)){if(Hf(c,0)!==0)break;if(R=c.suspendedLanes,(R&b)!==b){zn(),c.pingedLanes|=c.suspendedLanes&R;break}c.timeoutHandle=Q(Pl.bind(null,c,ir,js),h);break}Pl(c,ir,js);break;case 4:if(Ys(c,b),(b&4194240)===b)break;for(h=c.eventTimes,R=-1;0<b;){var q=31-Fn(b);H=1<<q,q=h[q],q>R&&(R=q),b&=~H}if(b=R,b=br()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Ji(b/1960))-b,10<b){c.timeoutHandle=Q(Pl.bind(null,c,ir,js),b);break}Pl(c,ir,js);break;case 5:Pl(c,ir,js);break;default:throw Error(o(329))}}}return ni(c,br()),c.callbackNode===w?Ta.bind(null,c):null}function _h(c,h){var w=Ra;return c.current.memoizedState.isDehydrated&&(La(c,h).flags|=256),c=wd(c,h),c!==2&&(h=ir,ir=w,h!==null&&yh(h)),c}function yh(c){ir===null?ir=c:ir.push.apply(ir,c)}function cg(c){for(var h=c;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var b=0;b<w.length;b++){var R=w[b],H=R.getSnapshot;R=R.value;try{if(!Ci(H(),R))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ys(c,h){for(h&=~Ao,h&=~Fu,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var w=31-Fn(h),b=1<<w;c[w]=-1,h&=~b}}function iv(c){if(Bt&6)throw Error(o(327));Da();var h=Hf(c,0);if(!(h&1))return ni(c,br()),null;var w=wd(c,h);if(c.tag!==0&&w===2){var b=jc(c);b!==0&&(h=b,w=_h(c,b))}if(w===1)throw w=Mo,La(c,0),Ys(c,h),ni(c,br()),w;if(w===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Pl(c,ir,js),ni(c,br()),null}function sv(c){Xs!==null&&Xs.tag===0&&!(Bt&6)&&Da();var h=Bt;Bt|=1;var w=Nn.transition,b=on;try{if(Nn.transition=null,on=1,c)return c()}finally{on=b,Nn.transition=w,Bt=h,!(Bt&6)&&Yi()}}function xh(){bn=Pa.current,it(Pa)}function La(c,h){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==We&&(c.timeoutHandle=We,ye(w)),qn!==null)for(w=qn.return;w!==null;){var b=w;switch(hs(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Fr();break;case 3:hi(),it(Tt),it(Lt),Eu();break;case 5:Aa(b);break;case 4:hi();break;case 13:it(On);break;case 19:it(On);break;case 10:di(b.type._context);break;case 22:case 23:xh()}w=w.return}if(tr=c,qn=c=$o(c.current,null),nr=bn=h,rr=0,Mo=null,Ao=Fu=Co=0,ir=Ra=null,Br!==null){for(h=0;h<Br.length;h++)if(w=Br[h],b=w.interleaved,b!==null){w.interleaved=null;var R=b.next,H=w.pending;if(H!==null){var q=H.next;H.next=R,b.next=q}w.pending=b}Br=null}return c}function Na(c,h){do{var w=qn;try{if(Zc(),wu.current=ld,xr){for(var b=an.memoizedState;b!==null;){var R=b.queue;R!==null&&(R.pending=null),b=b.next}xr=!1}if(xo=0,qt=In=an=null,jn=!1,ba=0,er.current=null,w===null||w.return===null){rr=1,Mo=h,qn=null;break}e:{var H=c,q=w.return,me=w,be=h;if(h=nr,me.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var ce=be,ue=me,Ee=ue.tag;if(!(ue.mode&1)&&(Ee===0||Ee===11||Ee===15)){var Te=ue.alternate;Te?(ue.updateQueue=Te.updateQueue,ue.memoizedState=Te.memoizedState,ue.lanes=Te.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var st=dd(q);if(st!==null){st.flags&=-257,Zm(st,q,me,H,h),st.mode&1&&cd(H,ce,h),h=st,be=ce;var yt=h.updateQueue;if(yt===null){var Pt=new Set;Pt.add(be),h.updateQueue=Pt}else yt.add(be);break e}else{if(!(h&1)){cd(H,ce,h),Ko();break e}be=Error(o(426))}}else if(Tn&&me.mode&1){var Xt=dd(q);if(Xt!==null){!(Xt.flags&65536)&&(Xt.flags|=256),Zm(Xt,q,me,H,h),jf(yl(be,me));break e}}H=be=yl(be,me),rr!==4&&(rr=2),Ra===null?Ra=[H]:Ra.push(H),H=q;do{switch(H.tag){case 3:H.flags|=65536,h&=-h,H.lanes|=h;var Ae=bu(H,be,h);Qc(H,Ae);break e;case 1:me=be;var pe=H.type,Ne=H.stateNode;if(!(H.flags&128)&&(typeof pe.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(mi===null||!mi.has(Ne)))){H.flags|=65536,h&=-h,H.lanes|=h;var ht=Pu(H,me,h);Qc(H,ht);break e}}H=H.return}while(H!==null)}av(w)}catch(Nt){h=Nt,qn===w&&w!==null&&(qn=w=w.return);continue}break}while(!0)}function ov(){var c=Xo.current;return Xo.current=ld,c===null?ld:c}function Ko(){(rr===0||rr===3||rr===2)&&(rr=4),tr===null||!(Co&268435455)&&!(Fu&268435455)||Ys(tr,nr)}function wd(c,h){var w=Bt;Bt|=2;var b=ov();(tr!==c||nr!==h)&&(js=null,La(c,h));do try{ki();break}catch(R){Na(c,R)}while(!0);if(Zc(),Bt=w,Xo.current=b,qn!==null)throw Error(o(261));return tr=null,nr=0,rr}function ki(){for(;qn!==null;)dg(qn)}function ZE(){for(;qn!==null&&!Ar();)dg(qn)}function dg(c){var h=Fa(c.alternate,c,bn);c.memoizedProps=c.pendingProps,h===null?av(c):qn=h,er.current=null}function av(c){var h=c;do{var w=h.alternate;if(c=h.return,h.flags&32768){if(w=nv(w,h),w!==null){w.flags&=32767,qn=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{rr=6,qn=null;return}}else if(w=sg(w,h,bn),w!==null){qn=w;return}if(h=h.sibling,h!==null){qn=h;return}qn=h=c}while(h!==null);rr===0&&(rr=5)}function Pl(c,h,w){var b=on,R=Nn.transition;try{Nn.transition=null,on=1,lv(c,h,w,b)}finally{Nn.transition=R,on=b}return null}function lv(c,h,w,b){do Da();while(Xs!==null);if(Bt&6)throw Error(o(327));w=c.finishedWork;var R=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var H=w.lanes|w.childLanes;if(dn(c,H),c===tr&&(qn=tr=null,nr=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||gi||(gi=!0,Md(pu,function(){return Da(),null})),H=(w.flags&15990)!==0,w.subtreeFlags&15990||H){H=Nn.transition,Nn.transition=null;var q=on;on=1;var me=Bt;Bt|=4,er.current=null,rv(c,w),yd(w,c),se(c.containerInfo),c.current=w,hh(w),bm(),Bt=me,on=q,Nn.transition=H}else c.current=w;if(gi&&(gi=!1,Xs=c,Vr=R),H=c.pendingLanes,H===0&&(mi=null),po(w.stateNode),ni(c,br()),h!==null)for(b=c.onRecoverableError,w=0;w<h.length;w++)R=h[w],b(R.value,{componentStack:R.stack,digest:R.digest});if(bl)throw bl=!1,c=Gr,Gr=null,c;return Vr&1&&c.tag!==0&&Da(),H=c.pendingLanes,H&1?c===Ed?Iu++:(Iu=0,Ed=c):Iu=0,Yi(),null}function Da(){if(Xs!==null){var c=Cm(Vr),h=Nn.transition,w=on;try{if(Nn.transition=null,on=16>c?16:c,Xs===null)var b=!1;else{if(c=Xs,Xs=null,Vr=0,Bt&6)throw Error(o(331));var R=Bt;for(Bt|=4,mt=c.current;mt!==null;){var H=mt,q=H.child;if(mt.flags&16){var me=H.deletions;if(me!==null){for(var be=0;be<me.length;be++){var ce=me[be];for(mt=ce;mt!==null;){var ue=mt;switch(ue.tag){case 0:case 11:case 15:Tu(8,ue,H)}var Ee=ue.child;if(Ee!==null)Ee.return=ue,mt=Ee;else for(;mt!==null;){ue=mt;var Te=ue.sibling,st=ue.return;if(ch(ue),ue===ce){mt=null;break}if(Te!==null){Te.return=st,mt=Te;break}mt=st}}}var yt=H.alternate;if(yt!==null){var Pt=yt.child;if(Pt!==null){yt.child=null;do{var Xt=Pt.sibling;Pt.sibling=null,Pt=Xt}while(Pt!==null)}}mt=H}}if(H.subtreeFlags&2064&&q!==null)q.return=H,mt=q;else e:for(;mt!==null;){if(H=mt,H.flags&2048)switch(H.tag){case 0:case 11:case 15:Tu(9,H,H.return)}var Ae=H.sibling;if(Ae!==null){Ae.return=H.return,mt=Ae;break e}mt=H.return}}var pe=c.current;for(mt=pe;mt!==null;){q=mt;var Ne=q.child;if(q.subtreeFlags&2064&&Ne!==null)Ne.return=q,mt=Ne;else e:for(q=pe;mt!==null;){if(me=mt,me.flags&2048)try{switch(me.tag){case 0:case 11:case 15:vd(9,me)}}catch(Nt){rn(me,me.return,Nt)}if(me===q){mt=null;break e}var ht=me.sibling;if(ht!==null){ht.return=me.return,mt=ht;break e}mt=me.return}}if(Bt=R,Yi(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(Vf,c)}catch{}b=!0}return b}finally{on=w,Nn.transition=h}}return!1}function uv(c,h,w){h=yl(w,h),h=bu(c,h,1),c=_o(c,h,1),h=zn(),c!==null&&(dl(c,1,h),ni(c,h))}function rn(c,h,w){if(c.tag===3)uv(c,c,w);else for(;h!==null;){if(h.tag===3){uv(h,c,w);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(mi===null||!mi.has(b))){c=yl(w,c),c=Pu(h,c,1),h=_o(h,c,1),c=zn(),h!==null&&(dl(h,1,c),ni(h,c));break}}h=h.return}}function fg(c,h,w){var b=c.pingCache;b!==null&&b.delete(h),h=zn(),c.pingedLanes|=c.suspendedLanes&w,tr===c&&(nr&w)===w&&(rr===4||rr===3&&(nr&130023424)===nr&&500>br()-Ou?La(c,0):Ao|=w),ni(c,h)}function cv(c,h){h===0&&(c.mode&1?(h=Qr,Qr<<=1,!(Qr&130023424)&&(Qr=4194304)):h=1);var w=zn();c=vs(c,h),c!==null&&(dl(c,h,w),ni(c,w))}function ka(c){var h=c.memoizedState,w=0;h!==null&&(w=h.retryLane),cv(c,w)}function Sh(c,h){var w=0;switch(c.tag){case 13:var b=c.stateNode,R=c.memoizedState;R!==null&&(w=R.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(h),cv(c,w)}var Fa;Fa=function(c,h,w){if(c!==null)if(c.memoizedProps!==h.pendingProps||Tt.current)wn=!0;else{if(!(c.lanes&w)&&!(h.flags&128))return wn=!1,ig(c,h,w);wn=!!(c.flags&131072)}else wn=!1,Tn&&h.flags&1048576&&pl(h,hl,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;Sl(c,h),c=h.pendingProps;var R=en(h,Lt.current);En(h,w),R=Rr(null,h,b,c,R,w);var H=nd();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Dt(b)?(H=!0,Is(h)):H=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Kf(h),R.updater=Au,h.stateNode=R,R._reactInternals=h,eh(h,b,c,w),h=rh(null,h,b,!0,H,w)):(h.tag=0,Tn&&H&&bi(h),pi(null,h,R,w),h=h.child),h;case 16:b=h.elementType;e:{switch(Sl(c,h),c=h.pendingProps,R=b._init,b=R(b._payload),h.type=b,R=h.tag=dv(b),c=Gs(b,c),R){case 0:h=nh(null,h,b,c,w);break e;case 1:h=eg(null,h,b,c,w);break e;case 11:h=J1(null,h,b,c,w);break e;case 14:h=Ni(null,h,b,Gs(b.type,c),w);break e}throw Error(o(306,b,""))}return h;case 0:return b=h.type,R=h.pendingProps,R=h.elementType===b?R:Gs(b,R),nh(c,h,b,R,w);case 1:return b=h.type,R=h.pendingProps,R=h.elementType===b?R:Gs(b,R),eg(c,h,b,R,w);case 3:e:{if(ih(h),c===null)throw Error(o(387));b=h.pendingProps,H=h.memoizedState,R=H.element,xu(c,h),Jc(h,b,null,w);var q=h.memoizedState;if(b=q.element,$e&&H.isDehydrated)if(H={element:b,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},h.updateQueue.baseState=H,h.memoizedState=H,h.flags&256){R=yl(Error(o(423)),h),h=tg(c,h,b,w,R);break e}else if(b!==R){R=yl(Error(o(424)),h),h=tg(c,h,b,w,R);break e}else for($e&&(Pi=fu(h.stateNode.containerInfo),dr=h,Tn=!0,Pr=null,qi=!1),w=wa(h,null,b,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ml(),b===R){h=So(c,h,w);break e}pi(c,h,b,w)}h=h.child}return h;case 5:return $f(h),c===null&&Wf(h),b=h.type,R=h.pendingProps,H=c!==null?c.memoizedProps:null,q=R.children,De(b,R)?q=null:H!==null&&De(b,H)&&(h.flags|=32),Jm(c,h),pi(c,h,q,w),h.child;case 6:return c===null&&Wf(h),null;case 13:return ng(c,h,w);case 4:return Ca(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=Ur(h,null,b,w):pi(c,h,b,w),h.child;case 11:return b=h.type,R=h.pendingProps,R=h.elementType===b?R:Gs(b,R),J1(c,h,b,R,w);case 7:return pi(c,h,h.pendingProps,w),h.child;case 8:return pi(c,h,h.pendingProps.children,w),h.child;case 12:return pi(c,h,h.pendingProps.children,w),h.child;case 10:e:{if(b=h.type._context,R=h.pendingProps,H=h.memoizedProps,q=R.value,Yf(h,b,q),H!==null)if(Ci(H.value,q)){if(H.children===R.children&&!Tt.current){h=So(c,h,w);break e}}else for(H=h.child,H!==null&&(H.return=h);H!==null;){var me=H.dependencies;if(me!==null){q=H.child;for(var be=me.firstContext;be!==null;){if(be.context===b){if(H.tag===1){be=Ri(-1,w&-w),be.tag=2;var ce=H.updateQueue;if(ce!==null){ce=ce.shared;var ue=ce.pending;ue===null?be.next=be:(be.next=ue.next,ue.next=be),ce.pending=be}}H.lanes|=w,be=H.alternate,be!==null&&(be.lanes|=w),fi(H.return,w,h),me.lanes|=w;break}be=be.next}}else if(H.tag===10)q=H.type===h.type?null:H.child;else if(H.tag===18){if(q=H.return,q===null)throw Error(o(341));q.lanes|=w,me=q.alternate,me!==null&&(me.lanes|=w),fi(q,w,h),q=H.sibling}else q=H.child;if(q!==null)q.return=H;else for(q=H;q!==null;){if(q===h){q=null;break}if(H=q.sibling,H!==null){H.return=q.return,q=H;break}q=q.return}H=q}pi(c,h,R.children,w),h=h.child}return h;case 9:return R=h.type,b=h.pendingProps.children,En(h,w),R=ei(R),b=b(R),h.flags|=1,pi(c,h,b,w),h.child;case 14:return b=h.type,R=Gs(b,h.pendingProps),R=Gs(b.type,R),Ni(c,h,b,R,w);case 15:return ti(c,h,h.type,h.pendingProps,w);case 17:return b=h.type,R=h.pendingProps,R=h.elementType===b?R:Gs(b,R),Sl(c,h),h.tag=1,Dt(b)?(c=!0,Is(h)):c=!1,En(h,w),Km(h,b,R),eh(h,b,R,w),rh(null,h,b,!0,c,w);case 19:return rg(c,h,w);case 22:return Qm(c,h,w)}throw Error(o(156,h.tag))};function Md(c,h){return Am(c,h)}function hg(c,h,w,b){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(c,h,w,b){return new hg(c,h,w,b)}function pg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function dv(c){if(typeof c=="function")return pg(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===M)return 14}return 2}function $o(c,h){var w=c.alternate;return w===null?(w=Fi(c.tag,h,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=h,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,h=c.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function Cd(c,h,w,b,R,H){var q=2;if(b=c,typeof c=="function")pg(c)&&(q=1);else if(typeof c=="string")q=5;else e:switch(c){case d:return Oa(w.children,R,H,h);case m:q=8,R|=8;break;case g:return c=Fi(12,w,h,R|2),c.elementType=g,c.lanes=H,c;case S:return c=Fi(13,w,h,R),c.elementType=S,c.lanes=H,c;case _:return c=Fi(19,w,h,R),c.elementType=_,c.lanes=H,c;case A:return Bu(w,R,H,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case v:q=10;break e;case y:q=9;break e;case x:q=11;break e;case M:q=14;break e;case E:q=16,b=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return h=Fi(q,w,h,R),h.elementType=c,h.type=b,h.lanes=H,h}function Oa(c,h,w,b){return c=Fi(7,c,b,h),c.lanes=w,c}function Bu(c,h,w,b){return c=Fi(22,c,b,h),c.elementType=A,c.lanes=w,c.stateNode={isHidden:!1},c}function mg(c,h,w){return c=Fi(6,c,null,h),c.lanes=w,c}function gg(c,h,w){return h=Fi(4,c.children!==null?c.children:[],c.key,h),h.lanes=w,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function f(c,h,w,b,R){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mm(0),this.expirationTimes=Mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mm(0),this.identifierPrefix=b,this.onRecoverableError=R,$e&&(this.mutableSourceEagerHydrationData=null)}function p(c,h,w,b,R,H,q,me,be){return c=new f(c,h,w,me,be),h===1?(h=1,H===!0&&(h|=8)):h=0,H=Fi(3,null,null,h),c.current=H,H.stateNode=c,H.memoizedState={element:b,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kf(H),c}function C(c){if(!c)return Ut;c=c._reactInternals;e:{if(B(c)!==c||c.tag!==1)throw Error(o(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Dt(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(c.tag===1){var w=c.type;if(Dt(w))return _r(c,w,h)}return h}function P(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=W(h),c===null?null:c.stateNode}function F(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<h?w:h}}function G(c,h){F(c,h),(c=c.alternate)&&F(c,h)}function oe(c){return c=W(c),c===null?null:c.stateNode}function ve(){return null}return n.attemptContinuousHydration=function(c){if(c.tag===13){var h=vs(c,134217728);if(h!==null){var w=zn();es(h,c,134217728,w)}G(c,134217728)}},n.attemptDiscreteHydration=function(c){if(c.tag===13){var h=vs(c,1);if(h!==null){var w=zn();es(h,c,1,w)}G(c,1)}},n.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=qo(c),w=vs(c,h);if(w!==null){var b=zn();es(w,c,h,b)}G(c,h)}},n.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var w=Ea(h.pendingLanes);w!==0&&(Gf(h,w|1),ni(h,br()),!(Bt&6)&&(Yo(),Yi()))}break;case 13:sv(function(){var b=vs(c,1);if(b!==null){var R=zn();es(b,c,1,R)}}),G(c,1)}},n.batchedUpdates=function(c,h){var w=Bt;Bt|=1;try{return c(h)}finally{Bt=w,Bt===0&&(Yo(),Yc&&Yi())}},n.createComponentSelector=function(c){return{$$typeof:Du,value:c}},n.createContainer=function(c,h,w,b,R,H,q){return p(c,h,!1,null,w,b,R,H,q)},n.createHasPseudoClassSelector=function(c){return{$$typeof:Sd,value:c}},n.createHydrationContainer=function(c,h,w,b,R,H,q,me,be){return c=p(w,b,!0,c,R,H,q,me,be),c.context=C(null),w=c.current,b=zn(),R=qo(w),H=Ri(b,R),H.callback=h??null,_o(w,H,R),c.current.lanes=R,dl(c,R,b),ni(c,b),c},n.createPortal=function(c,h,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:c,containerInfo:h,implementation:w}},n.createRoleSelector=function(c){return{$$typeof:ku,value:c}},n.createTestNameSelector=function(c){return{$$typeof:gh,value:c}},n.createTextSelector=function(c){return{$$typeof:Ml,value:c}},n.deferredUpdates=function(c){var h=on,w=Nn.transition;try{return Nn.transition=null,on=16,c()}finally{on=h,Nn.transition=w}},n.discreteUpdates=function(c,h,w,b,R){var H=on,q=Nn.transition;try{return Nn.transition=null,on=1,c(h,w,b,R)}finally{on=H,Nn.transition=q,Bt===0&&Yo()}},n.findAllNodes=Er,n.findBoundingRects=function(c,h){if(!Fe)throw Error(o(363));h=Er(c,h),c=[];for(var w=0;w<h.length;w++)c.push(X(h[w]));for(h=c.length-1;0<h;h--){w=c[h];for(var b=w.x,R=b+w.width,H=w.y,q=H+w.height,me=h-1;0<=me;me--)if(h!==me){var be=c[me],ce=be.x,ue=ce+be.width,Ee=be.y,Te=Ee+be.height;if(b>=ce&&H>=Ee&&R<=ue&&q<=Te){c.splice(h,1);break}else if(b!==ce||w.width!==be.width||Te<H||Ee>q){if(!(H!==Ee||w.height!==be.height||ue<b||ce>R)){ce>b&&(be.width+=ce-b,be.x=b),ue<R&&(be.width=R-ce),c.splice(h,1);break}}else{Ee>H&&(be.height+=Ee-H,be.y=H),Te<q&&(be.height=q-Ee),c.splice(h,1);break}}}return c},n.findHostInstance=P,n.findHostInstanceWithNoPortals=function(c){return c=z(c),c=c!==null?Z(c):null,c===null?null:c.stateNode},n.findHostInstanceWithWarning=function(c){return P(c)},n.flushControlled=function(c){var h=Bt;Bt|=1;var w=Nn.transition,b=on;try{Nn.transition=null,on=1,c()}finally{on=b,Nn.transition=w,Bt=h,Bt===0&&(Yo(),Yi())}},n.flushPassiveEffects=Da,n.flushSync=sv,n.focusWithin=function(c,h){if(!Fe)throw Error(o(363));for(c=Bn(c),h=Jn(c,h),h=Array.from(h),c=0;c<h.length;){var w=h[c++];if(!Le(w)){if(w.tag===5&&Oe(w.stateNode))return!0;for(w=w.child;w!==null;)h.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return on},n.getFindAllNodesFailureDescription=function(c,h){if(!Fe)throw Error(o(363));var w=0,b=[];c=[Bn(c),0];for(var R=0;R<c.length;){var H=c[R++],q=c[R++],me=h[q];if((H.tag!==5||!Le(H))&&(Gt(H,me)&&(b.push(Yn(me)),q++,q>w&&(w=q)),q<h.length))for(H=H.child;H!==null;)c.push(H,q),H=H.sibling}if(w<h.length){for(c=[];w<h.length;w++)c.push(Yn(h[w]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},n.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ne(c.child.stateNode);default:return c.child.stateNode}},n.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:oe,findFiberByHostInstance:c.findFiberByHostInstance||ve,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Vf=h.inject(c),ho=h}catch{}c=!!h.checkDCE}}return c},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(c,h,w,b){if(!Fe)throw Error(o(363));c=Er(c,h);var R=j(c,w,b).disconnect;return{disconnect:function(){R()}}},n.registerMutableSourceForHydration=function(c,h){var w=h._getVersion;w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w)},n.runWithPriority=function(c,h){var w=on;try{return on=c,h()}finally{on=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(c,h,w,b){var R=h.current,H=zn(),q=qo(R);return w=C(w),h.context===null?h.context=w:h.pendingContext=w,h=Ri(H,q),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=_o(R,h,q),c!==null&&(es(c,R,q,H),Ma(c,R,q)),q},n};L6.exports=BG;var zG=L6.exports;const HG=y1(zG);var N6={exports:{}},Rf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Rf.ConcurrentRoot=1;Rf.ContinuousEventPriority=4;Rf.DefaultEventPriority=16;Rf.DiscreteEventPriority=1;Rf.IdleEventPriority=536870912;Rf.LegacyRoot=0;N6.exports=Rf;var D6=N6.exports;const yR={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let xR=!1,SR=!1;const uA=".react-konva-event",GG=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,VG=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,WG={};function YS(t,e,n=WG){if(!xR&&"zIndex"in e&&(console.warn(VG),xR=!0),!SR&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(GG),SR=!0)}for(var s in n)if(!yR[s]){var o=s.slice(0,2)==="on",a=n[s]!==e[s];if(o&&a){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var u=!e.hasOwnProperty(s);u&&t.setAttr(s,void 0)}var d=e._useStrictMode,m={},g=!1;const v={};for(var s in e)if(!yR[s]){var o=s.slice(0,2)==="on",y=n[s]!==e[s];if(o&&y){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(v[l]=e[s])}!o&&(e[s]!==n[s]||d&&e[s]!==t.getAttr(s))&&(g=!0,m[s]=e[s])}g&&(t.setAttrs(m),Uc(t));for(var l in v)t.on(l+uA,v[l])}function Uc(t){if(!Jt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const k6={},jG={};X0.Node.prototype._applyProps=YS;function XG(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Uc(t)}function YG(t,e,n){let r=X0[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=X0.Group);const i={},s={};for(var o in e){var a=o.slice(0,2)==="on";a?s[o]=e[o]:i[o]=e[o]}const l=new r(i);return YS(l,s),l}function qG(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function KG(t,e,n){return!1}function $G(t){return t}function ZG(){return null}function QG(){return null}function JG(t,e,n,r){return jG}function eV(){}function tV(t){}function nV(t,e){return!1}function rV(){return k6}function iV(){return k6}const sV=setTimeout,oV=clearTimeout,aV=-1;function lV(t,e){return!1}const uV=!1,cV=!0,dV=!0;function fV(t,e){e.parent===t?e.moveToTop():t.add(e),Uc(t)}function hV(t,e){e.parent===t?e.moveToTop():t.add(e),Uc(t)}function F6(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Uc(t)}function pV(t,e,n){F6(t,e,n)}function mV(t,e){e.destroy(),e.off(uA),Uc(t)}function gV(t,e){e.destroy(),e.off(uA),Uc(t)}function vV(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function _V(t,e,n){}function yV(t,e,n,r,i){YS(t,i,r)}function xV(t){t.hide(),Uc(t)}function SV(t){}function EV(t,e){(e.visible==null||e.visible)&&t.show()}function wV(t,e){}function MV(t){}function CV(){}const AV=()=>D6.DefaultEventPriority,bV=Object.freeze(Object.defineProperty({__proto__:null,appendChild:fV,appendChildToContainer:hV,appendInitialChild:XG,cancelTimeout:oV,clearContainer:MV,commitMount:_V,commitTextUpdate:vV,commitUpdate:yV,createInstance:YG,createTextInstance:qG,detachDeletedInstance:CV,finalizeInitialChildren:KG,getChildHostContext:iV,getCurrentEventPriority:AV,getPublicInstance:$G,getRootHostContext:rV,hideInstance:xV,hideTextInstance:SV,idlePriority:s0.unstable_IdlePriority,insertBefore:F6,insertInContainerBefore:pV,isPrimaryRenderer:uV,noTimeout:aV,now:s0.unstable_now,prepareForCommit:ZG,preparePortalMount:QG,prepareUpdate:JG,removeChild:mV,removeChildFromContainer:gV,resetAfterCommit:eV,resetTextContent:tV,run:s0.unstable_runWithPriority,scheduleTimeout:sV,shouldDeprioritizeSubtree:nV,shouldSetTextContent:lV,supportsMutation:dV,unhideInstance:EV,unhideTextInstance:wV,warnsIfNotActing:cV},Symbol.toStringTag,{value:"Module"}));var PV=Object.defineProperty,RV=Object.defineProperties,TV=Object.getOwnPropertyDescriptors,ER=Object.getOwnPropertySymbols,LV=Object.prototype.hasOwnProperty,NV=Object.prototype.propertyIsEnumerable,wR=(t,e,n)=>e in t?PV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MR=(t,e)=>{for(var n in e||(e={}))LV.call(e,n)&&wR(t,n,e[n]);if(ER)for(var n of ER(e))NV.call(e,n)&&wR(t,n,e[n]);return t},DV=(t,e)=>RV(t,TV(e)),CR,AR;typeof window<"u"&&((CR=window.document)!=null&&CR.createElement||((AR=window.navigator)==null?void 0:AR.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function O6(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=O6(r,e,n);if(i)return i;r=r.sibling}}function I6(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const bR=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=bR;return}return bR.apply(this,arguments)};const cA=I6(V.createContext(null));class dA extends V.Component{render(){return V.createElement(cA.Provider,{value:this._reactInternals},this.props.children)}}function kV(){const t=V.useContext(cA);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=O6(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function FV(){const t=kV(),[e]=V.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==cA&&!e.has(i)&&e.set(i,V.useContext(I6(i)))}n=n.return}return e}function U6(){const t=FV();return V.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>V.createElement(e,null,V.createElement(n.Provider,DV(MR({},r),{value:t.get(n)}))),e=>V.createElement(dA,MR({},e))),[t])}function OV(t){const e=Sn.useRef({});return Sn.useLayoutEffect(()=>{e.current=t}),Sn.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const IV=t=>{const e=Sn.useRef(),n=Sn.useRef(),r=Sn.useRef(),i=OV(t),s=U6(),o=a=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(a):l.current=a)};return Sn.useLayoutEffect(()=>(n.current=new X0.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=Jg.createContainer(n.current,D6.LegacyRoot,!1,null),Jg.updateContainer(Sn.createElement(s,{},t.children),r.current),()=>{X0.isBrowser&&(o(null),Jg.updateContainer(null,r.current,null),n.current.destroy())}),[]),Sn.useLayoutEffect(()=>{o(n.current),YS(n.current,t,i),Jg.updateContainer(Sn.createElement(s,{},t.children),r.current,null)}),Sn.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},ol="Layer",B6="Label",qS="Rect",Gy="Circle",fA="Line",am="Image",Y0="Text",z6="Tag",Jg=HG(bV);Jg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Sn.version,rendererPackageName:"react-konva"});const H6=Sn.forwardRef((t,e)=>Sn.createElement(dA,{},Sn.createElement(IV,{...t,forwardedRef:e})));function UV(t,e,n,r){const i=Math.abs(t-n),s=Math.abs(e-r);return i>s?i+.375*s:s+.375*i}function dp(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const r=UV(t[n].x,t[n].z,t[(n+1)%t.length].x,t[(n+1)%t.length].z);e[n]=BV(r)}return zV(t,e)}function BV(t){return Math.round(3*t)}function zV(t,e){const n=t.length,r=new Array(8);for(let x=0;x<8;x++){r[x]=new Array(n);for(let S=0;S<n;S++)r[x][S]={x:0,z:0}}let i=0;for(let x=0;x<n;x++)i+=e[x];let s=new Array(i);for(let x=0;x<i;x++)s[x]={x:0,z:0};const o=r[0],a=r[1],l=r[2],u=r[3],d=r[4],m=r[5],g=r[6],v=r[7];for(let x=0;x<n;x++)v[x]=t[x];for(let x=0,S=n-2;x<S;x++)l[x].x=1,l[x].z=1,u[x].x=3*(v[x+2].x-2*v[x+1].x+v[x].x),u[x].z=3*(v[x+2].z-2*v[x+1].z+v[x].z);l[n-3].x=0,l[n-3].z=0,d[0].x=4,d[0].z=4,a[0].x=u[0].x/d[0].x,a[0].z=u[0].z/d[0].z;for(let x=1,S=0,_=n-2;x<_;x++,S++)o[S].x=l[S].x/d[S].x,d[x].x=4-o[S].x,a[x].x=(u[x].x-a[S].x)/d[x].x,o[S].z=l[S].z/d[S].z,d[x].z=4-o[S].z,a[x].z=(u[x].z-a[S].z)/d[x].z;m[n-3]=a[n-3];for(let x=n-4;x>=0;x--)m[x].x=a[x].x-o[x].x*m[x+1].x,m[x].z=a[x].z-o[x].z*m[x+1].z;for(let x=n-2;x>=1;x--)m[x]=m[x-1];m[0].x=0,m[0].z=0,m[n-1].x=0,m[n-1].z=0;for(let x=0;x<n-1;x++)g[x].x=v[x+1].x-v[x].x-(2*m[x].x+m[x+1].x)*(1/3),d[x].x=(m[x+1].x-m[x].x)*(1/3),g[x].z=v[x+1].z-v[x].z-(2*m[x].z+m[x+1].z)*(1/3),d[x].z=(m[x+1].z-m[x].z)*(1/3);let y=0;for(let x=0;x<n-1;x++){const S=e[x];for(let _=0;_<S;_++){const M=_/S;s[y].x=((d[x].x*M+m[x].x)*M+g[x].x)*M+v[x].x,s[y].z=((d[x].z*M+m[x].z)*M+g[x].z)*M+v[x].z,y++}}return e[n-1]==1&&(s[y].x=t[n-1].x,s[y].z=t[n-1].z,y++),s=s.slice(0,y),s}const lm=wi(void 0),G6=wi(void 0);var V6=(t=>(t[t.PrimeStampedeKangaCow=20]="PrimeStampedeKangaCow",t[t.PrimeStampedeCamera=22]="PrimeStampedeCamera",t[t.PrimeWalker=23]="PrimeWalker",t[t.PrimeTumbleweed=27]="PrimeTumbleweed",t[t.PrimeTremorAlien=31]="PrimeTremorAlien",t[t.PrimeStampedeKangaRex=34]="PrimeStampedeKangaRex",t))(V6||{});const PR={20:"Stampede Kanga Cow",22:"Stampede Camera",23:"Walker",27:"Tumbleweed",31:"Tremor Alien",34:"Stampede Kanga Rex"};var W6=(t=>(t[t.NilMyStartCoords=0]="NilMyStartCoords",t[t.NilXxxxx=1]="NilXxxxx",t[t.NilSugar=2]="NilSugar",t[t.Enemy_BoxerFly=3]="Enemy_BoxerFly",t[t.NilBugTest=4]="NilBugTest",t[t.NilClover=5]="NilClover",t[t.NilGrass=6]="NilGrass",t[t.NilWeed=7]="NilWeed",t[t.Enemy_Slug=8]="Enemy_Slug",t[t.Enemy_Ant=9]="Enemy_Ant",t[t.NilSunflower=10]="NilSunflower",t[t.NilCosmo=11]="NilCosmo",t[t.NilPoppy=12]="NilPoppy",t[t.NilWallEnd=13]="NilWallEnd",t[t.NilWaterPatch=14]="NilWaterPatch",t[t.NilFireAnt=15]="NilFireAnt",t[t.NilWaterBug=16]="NilWaterBug",t[t.NilTree=17]="NilTree",t[t.NilDragonfly=18]="NilDragonfly",t[t.NilCatTail=19]="NilCatTail",t[t.NilDuckWeed=20]="NilDuckWeed",t[t.NilLilyFlower=21]="NilLilyFlower",t[t.NilLilyPad=22]="NilLilyPad",t[t.NilPondGrass=23]="NilPondGrass",t[t.NilReed=24]="NilReed",t[t.NilPondFishEnemy=25]="NilPondFishEnemy",t[t.HoneycombPlatform=26]="HoneycombPlatform",t[t.NilHoneyPatch=27]="NilHoneyPatch",t[t.NilFirecracker=28]="NilFirecracker",t[t.NilDetonator=29]="NilDetonator",t[t.NilWaxMembrane=30]="NilWaxMembrane",t[t.Enemy_Mosquito=31]="Enemy_Mosquito",t[t.NilCheckpoint=32]="NilCheckpoint",t[t.NilLawnDoor=33]="NilLawnDoor",t[t.NilDock=34]="NilDock",t[t.Foot=35]="Foot",t[t.Enemy_Spider=36]="Enemy_Spider",t[t.Enemy_Caterpiller=37]="Enemy_Caterpiller",t[t.NilEnemy_Firefly=38]="NilEnemy_Firefly",t[t.NilExitLog=39]="NilExitLog",t[t.NilRootSwing=40]="NilRootSwing",t[t.NilThornBush=41]="NilThornBush",t[t.NilFireFlyTargetLocation=42]="NilFireFlyTargetLocation",t[t.NilFireWall=43]="NilFireWall",t[t.NilWaterValve=44]="NilWaterValve",t[t.NilHoneyTube=45]="NilHoneyTube",t[t.Enemy_Larva=46]="Enemy_Larva",t[t.NilEnemy_FlyingBee=47]="NilEnemy_FlyingBee",t[t.Enemy_WorkerBee=48]="Enemy_WorkerBee",t[t.NilEnemy_QueenBee=49]="NilEnemy_QueenBee",t[t.NilRockLedge=50]="NilRockLedge",t[t.NilStump=51]="NilStump",t[t.NilRollingBoulder=52]="NilRollingBoulder",t[t.Enemy_Roach=53]="Enemy_Roach",t[t.Enemy_Skippy=54]="Enemy_Skippy",t))(W6||{});const RR={0:"My Start Coords",1:"xxxxx",2:"Sugar",3:"ENEMY: BOXERFLY",4:"bug test",5:"Clover",6:"Grass",7:"Weed",8:"Slug enemy",9:"Fireant enemy",10:"Sunflower",11:"Cosmo",12:"Poppy",13:"Wall End",14:"Water Patch",15:"FireAnt",16:"WaterBug",17:"Tree (flight level)",18:"Dragonfly",19:"Cat Tail",20:"Duck Weed",21:"Lily Flower",22:"Lily Pad",23:"Pond Grass",24:"Reed",25:"Pond Fish Enemy",26:"Honeycomb platform",27:"Honey Patch",28:"Firecracker",29:"Detonator",30:"Wax Membrane",31:"Mosquito Enemy",32:"Checkpoint",33:"Lawn Door",34:"Dock",35:"Foot",36:"ENEMY: SPIDER",37:"ENEMY: CATERPILLER",38:"ENEMY: FIREFLY",39:"Exit Log",40:"Root swing",41:"Thorn Bush",42:"FireFly Target Location",43:"Fire Wall",44:"Water Valve",45:"Honey Tube",46:"ENEMY: LARVA",47:"ENEMY: FLYING BEE",48:"ENEMY: WORKER BEE",49:"ENEMY: QUEEN BEE",50:"Rock Ledge",51:"Stump",52:"Rolling Boulder",53:"ENEMY: ROACH",54:"ENEMY: SKIPPY"};var j6=(t=>(t[t.PrimeEnemy_Gnome=4]="PrimeEnemy_Gnome",t[t.PrimeEnemy_HouseFly=10]="PrimeEnemy_HouseFly",t[t.PrimeBumbleBee=25]="PrimeBumbleBee",t[t.PrimeEnemy_Flea=38]="PrimeEnemy_Flea",t[t.PrimeEnemy_Tick=39]="PrimeEnemy_Tick",t[t.PrimeSlotCar=40]="PrimeSlotCar",t[t.PrimeEnemy_ToySoldier=43]="PrimeEnemy_ToySoldier",t[t.PrimeEnemy_Otto=45]="PrimeEnemy_Otto",t[t.PrimeEnemy_Dragonfly=52]="PrimeEnemy_Dragonfly",t[t.PrimeVacuume=58]="PrimeVacuume",t[t.PrimeMothPath=60]="PrimeMothPath",t[t.PrimeEnemy_ComputerBug=61]="PrimeEnemy_ComputerBug",t[t.PrimeHanger=63]="PrimeHanger",t[t.PrimeEnemy_Roach=65]="PrimeEnemy_Roach",t[t.PrimeEnemy_Ant=68]="PrimeEnemy_Ant",t))(j6||{});const TR={4:"Gnome",10:"House Fly",25:"Bumble Bee",38:"Flea",39:"Tick",40:"Slot Car",43:"Toy Soldier",45:"Otto",52:"Dragonfly",58:"Vacuum",60:"Moth",61:"Computer Bug",63:"Hanger",65:"Roach",68:"Ant"};var X6=(t=>(t[t.StartCoords=0]="StartCoords",t[t.Cactus=1]="Cactus",t[t.WaterPatch=2]="WaterPatch",t[t.Sign=3]="Sign",t[t.Tree=4]="Tree",t[t.POW=5]="POW",t[t.FinishLine=6]="FinishLine",t[t.Vase=7]="Vase",t[t.Rickshaw=8]="Rickshaw",t[t.FlagPole=9]="FlagPole",t[t.Waterfall=10]="Waterfall",t[t.Token=11]="Token",t[t.StickyTiresPOW=12]="StickyTiresPOW",t[t.SuspensionPOW=13]="SuspensionPOW",t[t.EasterHead=14]="EasterHead",t[t.DustDevil=15]="DustDevil",t[t.SnoMan=16]="SnoMan",t[t.CampFire=17]="CampFire",t[t._Yeti=18]="_Yeti",t[t.LavaGenerator=19]="LavaGenerator",t[t.Pillar=20]="Pillar",t[t.Pylon=21]="Pylon",t[t.Boat=22]="Boat",t[t._Camel=23]="_Camel",t[t.Statue=24]="Statue",t[t.Sphinx=25]="Sphinx",t[t.TeamTorch=26]="TeamTorch",t[t.TeamBase=27]="TeamBase",t[t.BubbleGenerator=28]="BubbleGenerator",t[t.InvisibilityPOW=29]="InvisibilityPOW",t[t.Rock=30]="Rock",t[t.BrontoNeck=31]="BrontoNeck",t[t.RockOverhang=32]="RockOverhang",t[t.Vine=33]="Vine",t[t.AztecHead=34]="AztecHead",t[t._Beetle=35]="_Beetle",t[t.CastleTower=36]="CastleTower",t[t.Catapult=37]="Catapult",t[t.Gong=38]="Gong",t[t.House=39]="House",t[t.Cauldron=40]="Cauldron",t[t.Well=41]="Well",t[t.Volcano=42]="Volcano",t[t.Clock=43]="Clock",t[t.Goddess=44]="Goddess",t[t.StoneHenge=45]="StoneHenge",t[t.Coliseum=46]="Coliseum",t[t.Stump=47]="Stump",t[t.Baracade=48]="Baracade",t[t.VikingFlag=49]="VikingFlag",t[t.TorchPot=50]="TorchPot",t[t.Cannon=51]="Cannon",t[t.Clam=52]="Clam",t[t._SharkSpline=53]="_SharkSpline",t[t._TrollSpline=54]="_TrollSpline",t[t.WeaponsRack=55]="WeaponsRack",t[t.Capsule=56]="Capsule",t[t.SeaMine=57]="SeaMine",t[t._PteradactylSpline=58]="_PteradactylSpline",t[t.Dragon=59]="Dragon",t[t.TarPatch=60]="TarPatch",t[t._MymmySpline=61]="_MymmySpline",t[t.TotemPole=62]="TotemPole",t[t.Druid=63]="Druid",t[t._PolarBearSpline=64]="_PolarBearSpline",t[t.Flower=65]="Flower",t[t._VikingSplinne=66]="_VikingSplinne",t))(X6||{});const LR={0:"My Start Coords",1:"Cactus",2:"Water Patch",3:"Sign",4:"Tree",5:"POW",6:"Finish Line",7:"Vase",8:"Rickshaw",9:"Flag Pole",10:"Waterfall",11:"Token",12:"Sticky Tires POW",13:"Suspension POW",14:"Easter Head",15:"Dust Devil",16:"Sno Man",17:"Camp Fire",18:"Yeti",19:"Lava Generator",20:"Pillar",21:"Pylon",22:"Solar Boat",23:"Camel - Spline",24:"Statue",25:"Sphinx Head",26:"Team Torch",27:"Team Base",28:"Bubble Generator",29:"Invisibility POW",30:"Rock",31:"Brontosaur Neck",32:"Rock Overhang",33:"Vine",34:"Aztec Head",35:"Beetle - Spline",36:"Castle Tower",37:"Catapult",38:"Gong",39:"Houses",40:"Cauldron",41:"Well",42:"Volcano",43:"Crete Clock",44:"Goddess",45:"Stone Henge",46:"Coliseum",47:"Stump",48:"Baracade",49:"Viking Flag",50:"Torchpot",51:"Cannon",52:"Clam",53:"Shark - Spline",54:"Troll - Spline",55:"Weapons Rack",56:"Capsule",57:"Sea Mine",58:"Pteradactyl - Spline",59:"Chinese Dragon",60:"Tar Patch",61:"Mummy -Spline",62:"Totem Pole",63:"Druid",64:"Polar Bear - Spline",65:"Flower",66:"Viking - Spline"};var Y6=(t=>(t[t.Enemy_Raptor=15]="Enemy_Raptor",t[t.DustDevil=16]="DustDevil",t[t.Enemy_Brach=26]="Enemy_Brach",t[t.LaserOrb=32]="LaserOrb",t[t.Enemy_Ramphor=48]="Enemy_Ramphor",t[t.TimeDemoSpline=49]="TimeDemoSpline",t))(Y6||{});const NR={15:"Raptor Enemy",16:"Dust Devil",26:"Brach Enemy",32:"Laser Orb",48:"Ramphor Enemy",49:"Time Demo Spline"};var q6=(t=>(t[t.Human=4]="Human",t[t.BrainAlien=7]="BrainAlien",t[t.Onion=8]="Onion",t[t.Corn=9]="Corn",t[t.Tomato=10]="Tomato",t[t.MagnetMonster=35]="MagnetMonster",t[t.MovingPlatform=40]="MovingPlatform",t[t.Flamester=49]="Flamester",t[t.GiantLizard=50]="GiantLizard",t[t.Mantis=52]="Mantis",t[t.Mutant=59]="Mutant",t[t.MutantRobot=60]="MutantRobot",t[t.HumanScientist=61]="HumanScientist",t[t.Clown=78]="Clown",t[t.ClownFish=79]="ClownFish",t[t.StrongMan=81]="StrongMan",t[t.JawsBot=89]="JawsBot",t[t.IceCube=92]="IceCube",t[t.HammerBot=93]="HammerBot",t[t.DrillBot=94]="DrillBot",t[t.SwingerBot=95]="SwingerBot",t[t.LavaPlatform=98]="LavaPlatform",t[t.RailGun=103]="RailGun",t))(q6||{});const DR={4:"Human",7:"Brain Alien",8:"Onion",9:"Corn",10:"Tomato",35:"Magnet Monster",40:"Moving Platform",49:"Flamester",50:"Giant Lizard",52:"Mantis",59:"Mutant",60:"Mutant Robot",61:"Scientist Human",78:"Clown",79:"Clown Fish",81:"Strongman",89:"Jawsbot",92:"Ice Cube",93:"Hammer Bot",94:"Drill Bot",95:"Swinger Bot",98:"Lava Platform",103:"Rail Gun"};function q0(t,e){return t.GAME_TYPE===It.BILLY_FRONTIER?HV(e):t.GAME_TYPE===It.BUGDOM?GV(e):t.GAME_TYPE===It.BUGDOM_2?VV(e):t.GAME_TYPE===It.CRO_MAG?WV(e):t.GAME_TYPE===It.NANOSAUR_2?jV(e):t.GAME_TYPE===It.OTTO_MATIC?XV(e):"Unknown Item."}function HV(t){return t in PR?PR[t]:"Unknown Billy Item."}function GV(t){return t in RR?RR[t]:"Unknown Bugdom Item."}function VV(t){return t in TR?TR[t]:"Unknown Bugdom 2 Item."}function WV(t){return t in LR?LR[t]:"Unknown Cro Mag Item."}function jV(t){return t in NR?NR[t]:"Unknown Nanosaur 2 Item."}function XV(t){return t in DR?DR[t]:"Unknown Otto Item."}function K6(t,e){e(n=>{const r=n.SpNb[zt+t].obj.length===1?[{x:n.SpNb[zt+t].obj[0].x,z:n.SpNb[zt+t].obj[0].z}]:dp(n.SpNb[zt+t].obj);n.SpPt[zt+t].obj=r})}const YV=V.memo(({data:t,setData:e,splineIdx:n})=>{const r=hn(lm),[i,s]=V.useState(null),o=t.SpNb[zt+n].obj,a=t.SpIt[zt+n].obj,l=V.useMemo(()=>t.SpPt[zt+n].obj.flatMap(u=>[u.x,u.z]),[t.SpPt[zt+n].obj]);return k.jsxs(k.Fragment,{children:[k.jsx(fA,{points:l,stroke:r===n?"red":"blue",strokeWidth:r===n?5:2,draggable:!0,onDragStart:()=>{s(t.SpNb[zt+n].obj.map(u=>({x:u.x,z:u.z})))},onDragEnd:u=>{if(!i)return;const d=u.target.x(),m=u.target.y();e(g=>{const v=g.SpNb[zt+n].obj;for(let y=0;y<v.length;y++)v[y].x=i[y].x+d,v[y].z=i[y].z+m}),K6(n,e),u.target.x(0),u.target.y(0),s(null)}}),o.map((u,d)=>{if(d!==0)return k.jsx(qV,{nub:u,nubIdx:d,splineIdx:n,setData:e},d)}),a.map((u,d)=>{let m=Math.floor(l.length*Math.min(.99,u.placement));return m%2!==0&&m--,k.jsx(KV,{x:l[m],z:l[m+1],item:u},d)})]})}),qV=V.memo(({nub:t,nubIdx:e,splineIdx:n,setData:r})=>{const[i,s]=or(lm),[o,a]=V.useState(!1);return k.jsxs(k.Fragment,{children:[k.jsx(Gy,{x:t.x,y:t.z,radius:10,draggable:!0,fill:i===n?"red":"blue",onMouseDown:()=>s(n),onDragStart:()=>s(n),onDragEnd:l=>{r(u=>{u.SpNb[zt+n].obj[e]={x:Math.round(l.target.x()),z:Math.round(l.target.y())},e===u.SpNb[zt+n].obj.length-1&&(u.SpNb[zt+n].obj[0]={x:Math.round(l.target.x()),z:Math.round(l.target.y())})}),K6(n,r)},onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1)}),k.jsx(Y0,{x:t.x-4,y:t.z-4,text:e.toString(),fill:"white",opacity:.8,onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1),visible:!o})]})}),r2=12,Ov=r2/2,KV=V.memo(({x:t,z:e,item:n})=>{const[r,i]=V.useState(!1),s=hn(Dr);return k.jsxs(k.Fragment,{children:[k.jsx(qS,{x:t-Ov,y:e-Ov,width:r2,height:r2,stroke:"blue",fill:"blue",onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1)}),k.jsx(Y0,{text:n.type.toString(),fill:"white",visible:!r,x:t-Ov,y:e-Ov,draggable:!0,fontSize:8,onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1)}),k.jsxs(B6,{opacity:1,visible:r,x:t+15,y:e,children:[k.jsx(z6,{fill:"blue"}),k.jsx(Y0,{text:q0(s,n.type),fontSize:8,fill:"white"})]})]})}),zt=1e3;function $V(t,e){if(t.Liqd)for(const n of t.Liqd[1e3].obj){const r=[];for(let i=0;i<e.LIQD_NUBS;i++)r.push([n[`x_${i}`],n[`y_${i}`]]);n.nubs=r}}function ZV(t,e){t(n=>{var i,s,o,a;n.Hedr[1e3].obj.numFences=((i=n.Fenc)==null?void 0:i[1e3].obj.length)??0,n.Hedr[1e3].obj.numItems=((s=n.Itms)==null?void 0:s[1e3].obj.length)??0,n.Hedr[1e3].obj.numWaterPatches=((o=n.Liqd)==null?void 0:o[1e3].obj.length)??0,n.Hedr[1e3].obj.numSplines=((a=n.Spln)==null?void 0:a[1e3].obj.length)??0,n.Itms[1e3].obj.sort((l,u)=>l.x>u.x?1:l.x<u.x?-1:l.z>u.z?1:l.z<u.z?-1:0);const r=n;if(n.Liqd!==void 0)for(const l of r.Liqd[1e3].obj)for(let u=0;u<e.LIQD_NUBS;u++)l[`x_${u}`]=l.nubs[u][0],l[`y_${u}`]=l.nubs[u][1];if(n.Spln!==void 0)for(let l=0;l<n.Spln[1e3].obj.length;l++){const u=zt+l,d=n.SpPt[u].obj.length;n.Spln[1e3].obj[l].numPoints=d;const m=n.SpNb[u].obj.length;n.Spln[1e3].obj[l].numNubs=m;const g=n.SpIt[u].obj.length;n.Spln[1e3].obj[l].numItems=g}if(n.Liqd!==void 0)for(let l=0;l<n.Liqd[1e3].obj.length;l++){const u=n.Liqd[1e3].obj[l];if(!u)return;let d=u.nubs[0][0],m=u.nubs[0][0],g=u.nubs[0][1],v=u.nubs[0][1];for(let y=0;y<u.numNubs;y++)u.nubs[y][0]<d&&(d=u.nubs[y][0]),u.nubs[y][0]>m&&(m=u.nubs[y][0]),u.nubs[y][1]<g&&(g=u.nubs[y][1]),u.nubs[y][1]>v&&(v=u.nubs[y][1]);u.bBoxLeft=d,u.bBoxRight=m,u.bBoxTop=g,u.bBoxBottom=v}})}var $6={},KS={};KS.byteLength=eW;KS.toByteArray=nW;KS.fromByteArray=sW;var Wa=[],Ro=[],QV=typeof Uint8Array<"u"?Uint8Array:Array,Uw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ah=0,JV=Uw.length;Ah<JV;++Ah)Wa[Ah]=Uw[Ah],Ro[Uw.charCodeAt(Ah)]=Ah;Ro[45]=62;Ro[95]=63;function Z6(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function eW(t){var e=Z6(t),n=e[0],r=e[1];return(n+r)*3/4-r}function tW(t,e,n){return(e+n)*3/4-n}function nW(t){var e,n=Z6(t),r=n[0],i=n[1],s=new QV(tW(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Ro[t.charCodeAt(l)]<<18|Ro[t.charCodeAt(l+1)]<<12|Ro[t.charCodeAt(l+2)]<<6|Ro[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ro[t.charCodeAt(l)]<<2|Ro[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Ro[t.charCodeAt(l)]<<10|Ro[t.charCodeAt(l+1)]<<4|Ro[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function rW(t){return Wa[t>>18&63]+Wa[t>>12&63]+Wa[t>>6&63]+Wa[t&63]}function iW(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(rW(r));return i.join("")}function sW(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(iW(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Wa[e>>2]+Wa[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Wa[e>>10]+Wa[e>>4&63]+Wa[e<<2&63]+"=")),i.join("")}var hA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,d=-7,m=n?i-1:0,g=n?-1:1,v=t[e+m];for(m+=g,s=v&(1<<-d)-1,v>>=-d,d+=a;d>0;s=s*256+t[e+m],m+=g,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+m],m+=g,d-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(v?-1:1)*o*Math.pow(2,s-r)};hA.write=function(t,e,n,r,i,s){var o,a,l,u=s*8-i-1,d=(1<<u)-1,m=d>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,y=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+m>=1?e+=g/l:e+=g*Math.pow(2,1-m),e*l>=2&&(o++,l/=2),o+m>=d?(a=0,o=d):o+m>=1?(a=(e*l-1)*Math.pow(2,i),o=o+m):(a=e*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;t[n+v]=a&255,v+=y,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+v]=o&255,v+=y,o/=256,u-=8);t[n+v-y]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=KS,n=hA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=M,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const j=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(j,N),j.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(j){if(j>i)throw new RangeError('The value "'+j+'" is invalid for option "size"');const N=new Uint8Array(j);return Object.setPrototypeOf(N,a.prototype),N}function a(j,N,I){if(typeof j=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(j)}return l(j,N,I)}a.poolSize=8192;function l(j,N,I){if(typeof j=="string")return g(j,N);if(ArrayBuffer.isView(j))return y(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(X(j,ArrayBuffer)||j&&X(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(j,SharedArrayBuffer)||j&&X(j.buffer,SharedArrayBuffer)))return x(j,N,I);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const J=j.valueOf&&j.valueOf();if(J!=null&&J!==j)return a.from(J,N,I);const ie=S(j);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return a.from(j[Symbol.toPrimitive]("string"),N,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}a.from=function(j,N,I){return l(j,N,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function d(j,N,I){return u(j),j<=0?o(j):N!==void 0?typeof I=="string"?o(j).fill(N,I):o(j).fill(N):o(j)}a.alloc=function(j,N,I){return d(j,N,I)};function m(j){return u(j),o(j<0?0:_(j)|0)}a.allocUnsafe=function(j){return m(j)},a.allocUnsafeSlow=function(j){return m(j)};function g(j,N){if((typeof N!="string"||N==="")&&(N="utf8"),!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);const I=E(j,N)|0;let J=o(I);const ie=J.write(j,N);return ie!==I&&(J=J.slice(0,ie)),J}function v(j){const N=j.length<0?0:_(j.length)|0,I=o(N);for(let J=0;J<N;J+=1)I[J]=j[J]&255;return I}function y(j){if(X(j,Uint8Array)){const N=new Uint8Array(j);return x(N.buffer,N.byteOffset,N.byteLength)}return v(j)}function x(j,N,I){if(N<0||j.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<N+(I||0))throw new RangeError('"length" is outside of buffer bounds');let J;return N===void 0&&I===void 0?J=new Uint8Array(j):I===void 0?J=new Uint8Array(j,N):J=new Uint8Array(j,N,I),Object.setPrototypeOf(J,a.prototype),J}function S(j){if(a.isBuffer(j)){const N=_(j.length)|0,I=o(N);return I.length===0||j.copy(I,0,0,N),I}if(j.length!==void 0)return typeof j.length!="number"||xe(j.length)?o(0):v(j);if(j.type==="Buffer"&&Array.isArray(j.data))return v(j.data)}function _(j){if(j>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return j|0}function M(j){return+j!=j&&(j=0),a.alloc(+j)}a.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==a.prototype},a.compare=function(N,I){if(X(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),X(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(N)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===I)return 0;let J=N.length,ie=I.length;for(let fe=0,Ce=Math.min(J,ie);fe<Ce;++fe)if(N[fe]!==I[fe]){J=N[fe],ie=I[fe];break}return J<ie?-1:ie<J?1:0},a.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(N,I){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return a.alloc(0);let J;if(I===void 0)for(I=0,J=0;J<N.length;++J)I+=N[J].length;const ie=a.allocUnsafe(I);let fe=0;for(J=0;J<N.length;++J){let Ce=N[J];if(X(Ce,Uint8Array))fe+Ce.length>ie.length?(a.isBuffer(Ce)||(Ce=a.from(Ce)),Ce.copy(ie,fe)):Uint8Array.prototype.set.call(ie,Ce,fe);else if(a.isBuffer(Ce))Ce.copy(ie,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=Ce.length}return ie};function E(j,N){if(a.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||X(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const I=j.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&I===0)return 0;let ie=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return He(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Fe(j).length;default:if(ie)return J?-1:He(j).length;N=(""+N).toLowerCase(),ie=!0}}a.byteLength=E;function A(j,N,I){let J=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,N>>>=0,I<=N))return"";for(j||(j="utf8");;)switch(j){case"hex":return ae(this,N,I);case"utf8":case"utf-8":return Z(this,N,I);case"ascii":return de(this,N,I);case"latin1":case"binary":return Y(this,N,I);case"base64":return K(this,N,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,N,I);default:if(J)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),J=!0}}a.prototype._isBuffer=!0;function L(j,N,I){const J=j[N];j[N]=j[I],j[I]=J}a.prototype.swap16=function(){const N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<N;I+=2)L(this,I,I+1);return this},a.prototype.swap32=function(){const N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<N;I+=4)L(this,I,I+3),L(this,I+1,I+2);return this},a.prototype.swap64=function(){const N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<N;I+=8)L(this,I,I+7),L(this,I+1,I+6),L(this,I+2,I+5),L(this,I+3,I+4);return this},a.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?Z(this,0,N):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(N){if(!a.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:a.compare(this,N)===0},a.prototype.inspect=function(){let N="";const I=t.INSPECT_MAX_BYTES;return N=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(N+=" ... "),"<Buffer "+N+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(N,I,J,ie,fe){if(X(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),!a.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(I===void 0&&(I=0),J===void 0&&(J=N?N.length:0),ie===void 0&&(ie=0),fe===void 0&&(fe=this.length),I<0||J>N.length||ie<0||fe>this.length)throw new RangeError("out of range index");if(ie>=fe&&I>=J)return 0;if(ie>=fe)return-1;if(I>=J)return 1;if(I>>>=0,J>>>=0,ie>>>=0,fe>>>=0,this===N)return 0;let Ce=fe-ie,tt=J-I;const Ze=Math.min(Ce,tt),wt=this.slice(ie,fe),gt=N.slice(I,J);for(let bt=0;bt<Ze;++bt)if(wt[bt]!==gt[bt]){Ce=wt[bt],tt=gt[bt];break}return Ce<tt?-1:tt<Ce?1:0};function D(j,N,I,J,ie){if(j.length===0)return-1;if(typeof I=="string"?(J=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,xe(I)&&(I=ie?0:j.length-1),I<0&&(I=j.length+I),I>=j.length){if(ie)return-1;I=j.length-1}else if(I<0)if(ie)I=0;else return-1;if(typeof N=="string"&&(N=a.from(N,J)),a.isBuffer(N))return N.length===0?-1:U(j,N,I,J,ie);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(j,N,I):Uint8Array.prototype.lastIndexOf.call(j,N,I):U(j,[N],I,J,ie);throw new TypeError("val must be string, number or Buffer")}function U(j,N,I,J,ie){let fe=1,Ce=j.length,tt=N.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(j.length<2||N.length<2)return-1;fe=2,Ce/=2,tt/=2,I/=2}function Ze(gt,bt){return fe===1?gt[bt]:gt.readUInt16BE(bt*fe)}let wt;if(ie){let gt=-1;for(wt=I;wt<Ce;wt++)if(Ze(j,wt)===Ze(N,gt===-1?0:wt-gt)){if(gt===-1&&(gt=wt),wt-gt+1===tt)return gt*fe}else gt!==-1&&(wt-=wt-gt),gt=-1}else for(I+tt>Ce&&(I=Ce-tt),wt=I;wt>=0;wt--){let gt=!0;for(let bt=0;bt<tt;bt++)if(Ze(j,wt+bt)!==Ze(N,bt)){gt=!1;break}if(gt)return wt}return-1}a.prototype.includes=function(N,I,J){return this.indexOf(N,I,J)!==-1},a.prototype.indexOf=function(N,I,J){return D(this,N,I,J,!0)},a.prototype.lastIndexOf=function(N,I,J){return D(this,N,I,J,!1)};function O(j,N,I,J){I=Number(I)||0;const ie=j.length-I;J?(J=Number(J),J>ie&&(J=ie)):J=ie;const fe=N.length;J>fe/2&&(J=fe/2);let Ce;for(Ce=0;Ce<J;++Ce){const tt=parseInt(N.substr(Ce*2,2),16);if(xe(tt))return Ce;j[I+Ce]=tt}return Ce}function B(j,N,I,J){return ee(He(N,j.length-I),j,I,J)}function T(j,N,I,J){return ee(ke(N),j,I,J)}function z(j,N,I,J){return ee(Fe(N),j,I,J)}function W(j,N,I,J){return ee(nt(N,j.length-I),j,I,J)}a.prototype.write=function(N,I,J,ie){if(I===void 0)ie="utf8",J=this.length,I=0;else if(J===void 0&&typeof I=="string")ie=I,J=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(J)?(J=J>>>0,ie===void 0&&(ie="utf8")):(ie=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-I;if((J===void 0||J>fe)&&(J=fe),N.length>0&&(J<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let Ce=!1;for(;;)switch(ie){case"hex":return O(this,N,I,J);case"utf8":case"utf-8":return B(this,N,I,J);case"ascii":case"latin1":case"binary":return T(this,N,I,J);case"base64":return z(this,N,I,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,N,I,J);default:if(Ce)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),Ce=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(j,N,I){return N===0&&I===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(N,I))}function Z(j,N,I){I=Math.min(j.length,I);const J=[];let ie=N;for(;ie<I;){const fe=j[ie];let Ce=null,tt=fe>239?4:fe>223?3:fe>191?2:1;if(ie+tt<=I){let Ze,wt,gt,bt;switch(tt){case 1:fe<128&&(Ce=fe);break;case 2:Ze=j[ie+1],(Ze&192)===128&&(bt=(fe&31)<<6|Ze&63,bt>127&&(Ce=bt));break;case 3:Ze=j[ie+1],wt=j[ie+2],(Ze&192)===128&&(wt&192)===128&&(bt=(fe&15)<<12|(Ze&63)<<6|wt&63,bt>2047&&(bt<55296||bt>57343)&&(Ce=bt));break;case 4:Ze=j[ie+1],wt=j[ie+2],gt=j[ie+3],(Ze&192)===128&&(wt&192)===128&&(gt&192)===128&&(bt=(fe&15)<<18|(Ze&63)<<12|(wt&63)<<6|gt&63,bt>65535&&bt<1114112&&(Ce=bt))}}Ce===null?(Ce=65533,tt=1):Ce>65535&&(Ce-=65536,J.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),J.push(Ce),ie+=tt}return ne(J)}const te=4096;function ne(j){const N=j.length;if(N<=te)return String.fromCharCode.apply(String,j);let I="",J=0;for(;J<N;)I+=String.fromCharCode.apply(String,j.slice(J,J+=te));return I}function de(j,N,I){let J="";I=Math.min(j.length,I);for(let ie=N;ie<I;++ie)J+=String.fromCharCode(j[ie]&127);return J}function Y(j,N,I){let J="";I=Math.min(j.length,I);for(let ie=N;ie<I;++ie)J+=String.fromCharCode(j[ie]);return J}function ae(j,N,I){const J=j.length;(!N||N<0)&&(N=0),(!I||I<0||I>J)&&(I=J);let ie="";for(let fe=N;fe<I;++fe)ie+=Le[j[fe]];return ie}function se(j,N,I){const J=j.slice(N,I);let ie="";for(let fe=0;fe<J.length-1;fe+=2)ie+=String.fromCharCode(J[fe]+J[fe+1]*256);return ie}a.prototype.slice=function(N,I){const J=this.length;N=~~N,I=I===void 0?J:~~I,N<0?(N+=J,N<0&&(N=0)):N>J&&(N=J),I<0?(I+=J,I<0&&(I=0)):I>J&&(I=J),I<N&&(I=N);const ie=this.subarray(N,I);return Object.setPrototypeOf(ie,a.prototype),ie};function he(j,N,I){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+N>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(N,I,J){N=N>>>0,I=I>>>0,J||he(N,I,this.length);let ie=this[N],fe=1,Ce=0;for(;++Ce<I&&(fe*=256);)ie+=this[N+Ce]*fe;return ie},a.prototype.readUintBE=a.prototype.readUIntBE=function(N,I,J){N=N>>>0,I=I>>>0,J||he(N,I,this.length);let ie=this[N+--I],fe=1;for(;I>0&&(fe*=256);)ie+=this[N+--I]*fe;return ie},a.prototype.readUint8=a.prototype.readUInt8=function(N,I){return N=N>>>0,I||he(N,1,this.length),this[N]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(N,I){return N=N>>>0,I||he(N,2,this.length),this[N]|this[N+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(N,I){return N=N>>>0,I||he(N,2,this.length),this[N]<<8|this[N+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(N,I){return N=N>>>0,I||he(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(N,I){return N=N>>>0,I||he(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},a.prototype.readBigUInt64LE=Ie(function(N){N=N>>>0,$e(N,"offset");const I=this[N],J=this[N+7];(I===void 0||J===void 0)&&le(N,this.length-8);const ie=I+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24,fe=this[++N]+this[++N]*2**8+this[++N]*2**16+J*2**24;return BigInt(ie)+(BigInt(fe)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ie(function(N){N=N>>>0,$e(N,"offset");const I=this[N],J=this[N+7];(I===void 0||J===void 0)&&le(N,this.length-8);const ie=I*2**24+this[++N]*2**16+this[++N]*2**8+this[++N],fe=this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+J;return(BigInt(ie)<<BigInt(32))+BigInt(fe)}),a.prototype.readIntLE=function(N,I,J){N=N>>>0,I=I>>>0,J||he(N,I,this.length);let ie=this[N],fe=1,Ce=0;for(;++Ce<I&&(fe*=256);)ie+=this[N+Ce]*fe;return fe*=128,ie>=fe&&(ie-=Math.pow(2,8*I)),ie},a.prototype.readIntBE=function(N,I,J){N=N>>>0,I=I>>>0,J||he(N,I,this.length);let ie=I,fe=1,Ce=this[N+--ie];for(;ie>0&&(fe*=256);)Ce+=this[N+--ie]*fe;return fe*=128,Ce>=fe&&(Ce-=Math.pow(2,8*I)),Ce},a.prototype.readInt8=function(N,I){return N=N>>>0,I||he(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},a.prototype.readInt16LE=function(N,I){N=N>>>0,I||he(N,2,this.length);const J=this[N]|this[N+1]<<8;return J&32768?J|4294901760:J},a.prototype.readInt16BE=function(N,I){N=N>>>0,I||he(N,2,this.length);const J=this[N+1]|this[N]<<8;return J&32768?J|4294901760:J},a.prototype.readInt32LE=function(N,I){return N=N>>>0,I||he(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},a.prototype.readInt32BE=function(N,I){return N=N>>>0,I||he(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},a.prototype.readBigInt64LE=Ie(function(N){N=N>>>0,$e(N,"offset");const I=this[N],J=this[N+7];(I===void 0||J===void 0)&&le(N,this.length-8);const ie=this[N+4]+this[N+5]*2**8+this[N+6]*2**16+(J<<24);return(BigInt(ie)<<BigInt(32))+BigInt(I+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24)}),a.prototype.readBigInt64BE=Ie(function(N){N=N>>>0,$e(N,"offset");const I=this[N],J=this[N+7];(I===void 0||J===void 0)&&le(N,this.length-8);const ie=(I<<24)+this[++N]*2**16+this[++N]*2**8+this[++N];return(BigInt(ie)<<BigInt(32))+BigInt(this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+J)}),a.prototype.readFloatLE=function(N,I){return N=N>>>0,I||he(N,4,this.length),n.read(this,N,!0,23,4)},a.prototype.readFloatBE=function(N,I){return N=N>>>0,I||he(N,4,this.length),n.read(this,N,!1,23,4)},a.prototype.readDoubleLE=function(N,I){return N=N>>>0,I||he(N,8,this.length),n.read(this,N,!0,52,8)},a.prototype.readDoubleBE=function(N,I){return N=N>>>0,I||he(N,8,this.length),n.read(this,N,!1,52,8)};function Me(j,N,I,J,ie,fe){if(!a.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>ie||N<fe)throw new RangeError('"value" argument is out of bounds');if(I+J>j.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(N,I,J,ie){if(N=+N,I=I>>>0,J=J>>>0,!ie){const tt=Math.pow(2,8*J)-1;Me(this,N,I,J,tt,0)}let fe=1,Ce=0;for(this[I]=N&255;++Ce<J&&(fe*=256);)this[I+Ce]=N/fe&255;return I+J},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(N,I,J,ie){if(N=+N,I=I>>>0,J=J>>>0,!ie){const tt=Math.pow(2,8*J)-1;Me(this,N,I,J,tt,0)}let fe=J-1,Ce=1;for(this[I+fe]=N&255;--fe>=0&&(Ce*=256);)this[I+fe]=N/Ce&255;return I+J},a.prototype.writeUint8=a.prototype.writeUInt8=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,1,255,0),this[I]=N&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,2,65535,0),this[I]=N&255,this[I+1]=N>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,2,65535,0),this[I]=N>>>8,this[I+1]=N&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,4,4294967295,0),this[I+3]=N>>>24,this[I+2]=N>>>16,this[I+1]=N>>>8,this[I]=N&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,4,4294967295,0),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=N&255,I+4};function ze(j,N,I,J,ie){Je(N,J,ie,j,I,7);let fe=Number(N&BigInt(4294967295));j[I++]=fe,fe=fe>>8,j[I++]=fe,fe=fe>>8,j[I++]=fe,fe=fe>>8,j[I++]=fe;let Ce=Number(N>>BigInt(32)&BigInt(4294967295));return j[I++]=Ce,Ce=Ce>>8,j[I++]=Ce,Ce=Ce>>8,j[I++]=Ce,Ce=Ce>>8,j[I++]=Ce,I}function ge(j,N,I,J,ie){Je(N,J,ie,j,I,7);let fe=Number(N&BigInt(4294967295));j[I+7]=fe,fe=fe>>8,j[I+6]=fe,fe=fe>>8,j[I+5]=fe,fe=fe>>8,j[I+4]=fe;let Ce=Number(N>>BigInt(32)&BigInt(4294967295));return j[I+3]=Ce,Ce=Ce>>8,j[I+2]=Ce,Ce=Ce>>8,j[I+1]=Ce,Ce=Ce>>8,j[I]=Ce,I+8}a.prototype.writeBigUInt64LE=Ie(function(N,I=0){return ze(this,N,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ie(function(N,I=0){return ge(this,N,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(N,I,J,ie){if(N=+N,I=I>>>0,!ie){const Ze=Math.pow(2,8*J-1);Me(this,N,I,J,Ze-1,-Ze)}let fe=0,Ce=1,tt=0;for(this[I]=N&255;++fe<J&&(Ce*=256);)N<0&&tt===0&&this[I+fe-1]!==0&&(tt=1),this[I+fe]=(N/Ce>>0)-tt&255;return I+J},a.prototype.writeIntBE=function(N,I,J,ie){if(N=+N,I=I>>>0,!ie){const Ze=Math.pow(2,8*J-1);Me(this,N,I,J,Ze-1,-Ze)}let fe=J-1,Ce=1,tt=0;for(this[I+fe]=N&255;--fe>=0&&(Ce*=256);)N<0&&tt===0&&this[I+fe+1]!==0&&(tt=1),this[I+fe]=(N/Ce>>0)-tt&255;return I+J},a.prototype.writeInt8=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,1,127,-128),N<0&&(N=255+N+1),this[I]=N&255,I+1},a.prototype.writeInt16LE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,2,32767,-32768),this[I]=N&255,this[I+1]=N>>>8,I+2},a.prototype.writeInt16BE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,2,32767,-32768),this[I]=N>>>8,this[I+1]=N&255,I+2},a.prototype.writeInt32LE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,4,2147483647,-2147483648),this[I]=N&255,this[I+1]=N>>>8,this[I+2]=N>>>16,this[I+3]=N>>>24,I+4},a.prototype.writeInt32BE=function(N,I,J){return N=+N,I=I>>>0,J||Me(this,N,I,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=N&255,I+4},a.prototype.writeBigInt64LE=Ie(function(N,I=0){return ze(this,N,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ie(function(N,I=0){return ge(this,N,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function De(j,N,I,J,ie,fe){if(I+J>j.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Xe(j,N,I,J,ie){return N=+N,I=I>>>0,ie||De(j,N,I,4),n.write(j,N,I,J,23,4),I+4}a.prototype.writeFloatLE=function(N,I,J){return Xe(this,N,I,!0,J)},a.prototype.writeFloatBE=function(N,I,J){return Xe(this,N,I,!1,J)};function Q(j,N,I,J,ie){return N=+N,I=I>>>0,ie||De(j,N,I,8),n.write(j,N,I,J,52,8),I+8}a.prototype.writeDoubleLE=function(N,I,J){return Q(this,N,I,!0,J)},a.prototype.writeDoubleBE=function(N,I,J){return Q(this,N,I,!1,J)},a.prototype.copy=function(N,I,J,ie){if(!a.isBuffer(N))throw new TypeError("argument should be a Buffer");if(J||(J=0),!ie&&ie!==0&&(ie=this.length),I>=N.length&&(I=N.length),I||(I=0),ie>0&&ie<J&&(ie=J),ie===J||N.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),N.length-I<ie-J&&(ie=N.length-I+J);const fe=ie-J;return this===N&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,J,ie):Uint8Array.prototype.set.call(N,this.subarray(J,ie),I),fe},a.prototype.fill=function(N,I,J,ie){if(typeof N=="string"){if(typeof I=="string"?(ie=I,I=0,J=this.length):typeof J=="string"&&(ie=J,J=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(N.length===1){const Ce=N.charCodeAt(0);(ie==="utf8"&&Ce<128||ie==="latin1")&&(N=Ce)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if(I<0||this.length<I||this.length<J)throw new RangeError("Out of range index");if(J<=I)return this;I=I>>>0,J=J===void 0?this.length:J>>>0,N||(N=0);let fe;if(typeof N=="number")for(fe=I;fe<J;++fe)this[fe]=N;else{const Ce=a.isBuffer(N)?N:a.from(N,ie),tt=Ce.length;if(tt===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(fe=0;fe<J-I;++fe)this[fe+I]=Ce[fe%tt]}return this};const ye={};function We(j,N,I){ye[j]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}We("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),We("ERR_INVALID_ARG_TYPE",function(j,N){return`The "${j}" argument must be of type number. Received type ${typeof N}`},TypeError),We("ERR_OUT_OF_RANGE",function(j,N,I){let J=`The value of "${j}" is out of range.`,ie=I;return Number.isInteger(I)&&Math.abs(I)>2**32?ie=je(String(I)):typeof I=="bigint"&&(ie=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(ie=je(ie)),ie+="n"),J+=` It must be ${N}. Received ${ie}`,J},RangeError);function je(j){let N="",I=j.length;const J=j[0]==="-"?1:0;for(;I>=J+4;I-=3)N=`_${j.slice(I-3,I)}${N}`;return`${j.slice(0,I)}${N}`}function Ve(j,N,I){$e(N,"offset"),(j[N]===void 0||j[N+I]===void 0)&&le(N,j.length-(I+1))}function Je(j,N,I,J,ie,fe){if(j>I||j<N){const Ce=typeof N=="bigint"?"n":"";let tt;throw N===0||N===BigInt(0)?tt=`>= 0${Ce} and < 2${Ce} ** ${(fe+1)*8}${Ce}`:tt=`>= -(2${Ce} ** ${(fe+1)*8-1}${Ce}) and < 2 ** ${(fe+1)*8-1}${Ce}`,new ye.ERR_OUT_OF_RANGE("value",tt,j)}Ve(J,ie,fe)}function $e(j,N){if(typeof j!="number")throw new ye.ERR_INVALID_ARG_TYPE(N,"number",j)}function le(j,N,I){throw Math.floor(j)!==j?($e(j,I),new ye.ERR_OUT_OF_RANGE("offset","an integer",j)):N<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${N}`,j)}const At=/[^+/0-9A-Za-z-_]/g;function Be(j){if(j=j.split("=")[0],j=j.trim().replace(At,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function He(j,N){N=N||1/0;let I;const J=j.length;let ie=null;const fe=[];for(let Ce=0;Ce<J;++Ce){if(I=j.charCodeAt(Ce),I>55295&&I<57344){if(!ie){if(I>56319){(N-=3)>-1&&fe.push(239,191,189);continue}else if(Ce+1===J){(N-=3)>-1&&fe.push(239,191,189);continue}ie=I;continue}if(I<56320){(N-=3)>-1&&fe.push(239,191,189),ie=I;continue}I=(ie-55296<<10|I-56320)+65536}else ie&&(N-=3)>-1&&fe.push(239,191,189);if(ie=null,I<128){if((N-=1)<0)break;fe.push(I)}else if(I<2048){if((N-=2)<0)break;fe.push(I>>6|192,I&63|128)}else if(I<65536){if((N-=3)<0)break;fe.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((N-=4)<0)break;fe.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return fe}function ke(j){const N=[];for(let I=0;I<j.length;++I)N.push(j.charCodeAt(I)&255);return N}function nt(j,N){let I,J,ie;const fe=[];for(let Ce=0;Ce<j.length&&!((N-=2)<0);++Ce)I=j.charCodeAt(Ce),J=I>>8,ie=I%256,fe.push(ie),fe.push(J);return fe}function Fe(j){return e.toByteArray(Be(j))}function ee(j,N,I,J){let ie;for(ie=0;ie<J&&!(ie+I>=N.length||ie>=j.length);++ie)N[ie+I]=j[ie];return ie}function X(j,N){return j instanceof N||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===N.name}function xe(j){return j!==j}const Le=function(){const j="0123456789abcdef",N=new Array(256);for(let I=0;I<16;++I){const J=I*16;for(let ie=0;ie<16;++ie)N[J+ie]=j[I]+j[ie]}return N}();function Ie(j){return typeof BigInt>"u"?Oe:j}function Oe(){throw new Error("BigInt not supported")}})($6);function Q6(){return k.jsxs(k.Fragment,{children:[k.jsx("p",{className:"text-6xl pb-2",children:"Pangea Level Editor"}),k.jsx(et,{onClick:()=>window.open("https://github.com/LachlanBWWright/PangeaRSEdit"),children:"View on GitHub"}),k.jsx("p",{children:"This is a work in progress level editor for Otto Matic (And hopefully additional Pangea Software games)."}),k.jsx("p",{children:"Introducing items that were not originally found in the level will be likely to cause Otto Matic to crash. Downloaded levels can be used by replacing the existing by level data, which can be found in the Terrain folder within Otto's Data folder. Otto Matic has strict limits for enemies, which means that placed enemy items may not appear. This can be bypassed by adding enemies as spline items."}),k.jsxs("p",{children:[" ","This project uses"," ",k.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://github.com/jorio/rsrcdump",children:"RSRCDump"})," ","by Jorio, the creator of the ports of Pangea games to modern day operating systems. Any feedback is appreciated!"]})]})}function kR(t,[e,n]){return Math.min(n,Math.max(e,t))}function mn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function L1(t,e=[]){let n=[];function r(s,o){const a=V.createContext(o),l=n.length;n=[...n,o];const u=m=>{var _;const{scope:g,children:v,...y}=m,x=((_=g==null?void 0:g[t])==null?void 0:_[l])||a,S=V.useMemo(()=>y,Object.values(y));return k.jsx(x.Provider,{value:S,children:v})};u.displayName=s+"Provider";function d(m,g){var x;const v=((x=g==null?void 0:g[t])==null?void 0:x[l])||a,y=V.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>V.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return V.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,oW(i,...e)]}function oW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const m=l(s)[`__scope${u}`];return{...a,...m}},{});return V.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function FR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pA(...t){return e=>{let n=!1;const r=t.map(i=>{const s=FR(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():FR(t[i],null)}}}}function $n(...t){return V.useCallback(pA(...t),t)}var K0=V.forwardRef((t,e)=>{const{children:n,...r}=t,i=V.Children.toArray(n),s=i.find(lW);if(s){const o=s.props.children,a=i.map(l=>l===s?V.Children.count(o)>1?V.Children.only(null):V.isValidElement(o)?o.props.children:null:l);return k.jsx(i2,{...r,ref:e,children:V.isValidElement(o)?V.cloneElement(o,void 0,a):null})}return k.jsx(i2,{...r,ref:e,children:n})});K0.displayName="Slot";var i2=V.forwardRef((t,e)=>{const{children:n,...r}=t;if(V.isValidElement(n)){const i=cW(n);return V.cloneElement(n,{...uW(r,n.props),ref:e?pA(e,i):i})}return V.Children.count(n)>1?V.Children.only(null):null});i2.displayName="SlotClone";var aW=({children:t})=>k.jsx(k.Fragment,{children:t});function lW(t){return V.isValidElement(t)&&t.type===aW}function uW(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function cW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dW(t){const e=t+"CollectionProvider",[n,r]=L1(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:x}=v,S=Sn.useRef(null),_=Sn.useRef(new Map).current;return k.jsx(i,{scope:y,itemMap:_,collectionRef:S,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=Sn.forwardRef((v,y)=>{const{scope:x,children:S}=v,_=s(a,x),M=$n(y,_.collectionRef);return k.jsx(K0,{ref:M,children:S})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",m=Sn.forwardRef((v,y)=>{const{scope:x,children:S,..._}=v,M=Sn.useRef(null),E=$n(y,M),A=s(u,x);return Sn.useEffect(()=>(A.itemMap.set(M,{ref:M,..._}),()=>void A.itemMap.delete(M))),k.jsx(K0,{[d]:"",ref:E,children:S})});m.displayName=u;function g(v){const y=s(t+"CollectionConsumer",v);return Sn.useCallback(()=>{const S=y.collectionRef.current;if(!S)return[];const _=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((A,L)=>_.indexOf(A.ref.current)-_.indexOf(L.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},g,r]}var fW=V.createContext(void 0);function hW(t){const e=V.useContext(fW);return t||e||"ltr"}var pW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kr=pW.reduce((t,e)=>{const n=V.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?K0:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function mW(t,e){t&&Lc.flushSync(()=>t.dispatchEvent(e))}function us(t){const e=V.useRef(t);return V.useEffect(()=>{e.current=t}),V.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function J6(t,e=globalThis==null?void 0:globalThis.document){const n=us(t);V.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var gW="DismissableLayer",s2="dismissableLayer.update",vW="dismissableLayer.pointerDownOutside",_W="dismissableLayer.focusOutside",OR,e8=V.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),t8=V.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=V.useContext(e8),[d,m]=V.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=V.useState({}),y=$n(e,U=>m(U)),x=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(S),M=d?x.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,A=M>=_,L=SW(U=>{const O=U.target,B=[...u.branches].some(T=>T.contains(O));!A||B||(i==null||i(U),o==null||o(U),U.defaultPrevented||a==null||a())},g),D=EW(U=>{const O=U.target;[...u.branches].some(T=>T.contains(O))||(s==null||s(U),o==null||o(U),U.defaultPrevented||a==null||a())},g);return J6(U=>{M===u.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))},g),V.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(OR=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),IR(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=OR)}},[d,g,n,u]),V.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),IR())},[d,u]),V.useEffect(()=>{const U=()=>v({});return document.addEventListener(s2,U),()=>document.removeEventListener(s2,U)},[]),k.jsx(kr.div,{...l,ref:y,style:{pointerEvents:E?A?"auto":"none":void 0,...t.style},onFocusCapture:mn(t.onFocusCapture,D.onFocusCapture),onBlurCapture:mn(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:mn(t.onPointerDownCapture,L.onPointerDownCapture)})});t8.displayName=gW;var yW="DismissableLayerBranch",xW=V.forwardRef((t,e)=>{const n=V.useContext(e8),r=V.useRef(null),i=$n(e,r);return V.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),k.jsx(kr.div,{...t,ref:i})});xW.displayName=yW;function SW(t,e=globalThis==null?void 0:globalThis.document){const n=us(t),r=V.useRef(!1),i=V.useRef(()=>{});return V.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){n8(vW,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function EW(t,e=globalThis==null?void 0:globalThis.document){const n=us(t),r=V.useRef(!1);return V.useEffect(()=>{const i=s=>{s.target&&!r.current&&n8(_W,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function IR(){const t=new CustomEvent(s2);document.dispatchEvent(t)}function n8(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?mW(i,s):i.dispatchEvent(s)}var Bw=0;function wW(){V.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UR()),document.body.insertAdjacentElement("beforeend",t[1]??UR()),Bw++,()=>{Bw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Bw--}},[])}function UR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zw="focusScope.autoFocusOnMount",Hw="focusScope.autoFocusOnUnmount",BR={bubbles:!1,cancelable:!0},MW="FocusScope",r8=V.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=V.useState(null),u=us(i),d=us(s),m=V.useRef(null),g=$n(e,x=>l(x)),v=V.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;V.useEffect(()=>{if(r){let x=function(E){if(v.paused||!a)return;const A=E.target;a.contains(A)?m.current=A:Ju(m.current,{select:!0})},S=function(E){if(v.paused||!a)return;const A=E.relatedTarget;A!==null&&(a.contains(A)||Ju(m.current,{select:!0}))},_=function(E){if(document.activeElement===document.body)for(const L of E)L.removedNodes.length>0&&Ju(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",S);const M=new MutationObserver(_);return a&&M.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",S),M.disconnect()}}},[r,a,v.paused]),V.useEffect(()=>{if(a){HR.add(v);const x=document.activeElement;if(!a.contains(x)){const _=new CustomEvent(zw,BR);a.addEventListener(zw,u),a.dispatchEvent(_),_.defaultPrevented||(CW(TW(i8(a)),{select:!0}),document.activeElement===x&&Ju(a))}return()=>{a.removeEventListener(zw,u),setTimeout(()=>{const _=new CustomEvent(Hw,BR);a.addEventListener(Hw,d),a.dispatchEvent(_),_.defaultPrevented||Ju(x??document.body,{select:!0}),a.removeEventListener(Hw,d),HR.remove(v)},0)}}},[a,u,d,v]);const y=V.useCallback(x=>{if(!n&&!r||v.paused)return;const S=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(S&&_){const M=x.currentTarget,[E,A]=AW(M);E&&A?!x.shiftKey&&_===A?(x.preventDefault(),n&&Ju(E,{select:!0})):x.shiftKey&&_===E&&(x.preventDefault(),n&&Ju(A,{select:!0})):_===M&&x.preventDefault()}},[n,r,v.paused]);return k.jsx(kr.div,{tabIndex:-1,...o,ref:g,onKeyDown:y})});r8.displayName=MW;function CW(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ju(r,{select:e}),document.activeElement!==n)return}function AW(t){const e=i8(t),n=zR(e,t),r=zR(e.reverse(),t);return[n,r]}function i8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zR(t,e){for(const n of t)if(!bW(n,{upTo:e}))return n}function bW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function PW(t){return t instanceof HTMLInputElement&&"select"in t}function Ju(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&PW(t)&&e&&t.select()}}var HR=RW();function RW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=GR(t,e),t.unshift(e)},remove(e){var n;t=GR(t,e),(n=t[0])==null||n.resume()}}}function GR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function TW(t){return t.filter(e=>e.tagName!=="A")}var Ei=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},LW=M5.useId||(()=>{}),NW=0;function mA(t){const[e,n]=V.useState(LW());return Ei(()=>{n(r=>r??String(NW++))},[t]),e?`radix-${e}`:""}const DW=["top","right","bottom","left"],wc=Math.min,Js=Math.max,Vy=Math.round,Iv=Math.floor,$a=t=>({x:t,y:t}),kW={left:"right",right:"left",bottom:"top",top:"bottom"},FW={start:"end",end:"start"};function o2(t,e,n){return Js(t,wc(e,n))}function eu(t,e){return typeof t=="function"?t(e):t}function tu(t){return t.split("-")[0]}function um(t){return t.split("-")[1]}function gA(t){return t==="x"?"y":"x"}function vA(t){return t==="y"?"height":"width"}function Mc(t){return["top","bottom"].includes(tu(t))?"y":"x"}function _A(t){return gA(Mc(t))}function OW(t,e,n){n===void 0&&(n=!1);const r=um(t),i=_A(t),s=vA(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Wy(o)),[o,Wy(o)]}function IW(t){const e=Wy(t);return[a2(t),e,a2(e)]}function a2(t){return t.replace(/start|end/g,e=>FW[e])}function UW(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function BW(t,e,n,r){const i=um(t);let s=UW(tu(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(a2)))),s}function Wy(t){return t.replace(/left|right|bottom|top/g,e=>kW[e])}function zW(t){return{top:0,right:0,bottom:0,left:0,...t}}function s8(t){return typeof t!="number"?zW(t):{top:t,right:t,bottom:t,left:t}}function jy(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function VR(t,e,n){let{reference:r,floating:i}=t;const s=Mc(e),o=_A(e),a=vA(o),l=tu(e),u=s==="y",d=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,g=r[a]/2-i[a]/2;let v;switch(l){case"top":v={x:d,y:r.y-i.height};break;case"bottom":v={x:d,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(um(e)){case"start":v[o]-=g*(n&&u?-1:1);break;case"end":v[o]+=g*(n&&u?-1:1);break}return v}const HW=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:m}=VR(u,r,l),g=r,v={},y=0;for(let x=0;x<a.length;x++){const{name:S,fn:_}=a[x],{x:M,y:E,data:A,reset:L}=await _({x:d,y:m,initialPlacement:r,placement:g,strategy:i,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});d=M??d,m=E??m,v={...v,[S]:{...v[S],...A}},L&&y<=50&&(y++,typeof L=="object"&&(L.placement&&(g=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):L.rects),{x:d,y:m}=VR(u,g,l)),x=-1)}return{x:d,y:m,placement:g,strategy:i,middlewareData:v}};async function $0(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:g=!1,padding:v=0}=eu(e,t),y=s8(v),S=a[g?m==="floating"?"reference":"floating":m],_=jy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),M=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),A=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},L=jy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:E,strategy:l}):M);return{top:(_.top-L.top+y.top)/A.y,bottom:(L.bottom-_.bottom+y.bottom)/A.y,left:(_.left-L.left+y.left)/A.x,right:(L.right-_.right+y.right)/A.x}}const GW=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=eu(t,e)||{};if(u==null)return{};const m=s8(d),g={x:n,y:r},v=_A(i),y=vA(v),x=await o.getDimensions(u),S=v==="y",_=S?"top":"left",M=S?"bottom":"right",E=S?"clientHeight":"clientWidth",A=s.reference[y]+s.reference[v]-g[v]-s.floating[y],L=g[v]-s.reference[v],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let U=D?D[E]:0;(!U||!await(o.isElement==null?void 0:o.isElement(D)))&&(U=a.floating[E]||s.floating[y]);const O=A/2-L/2,B=U/2-x[y]/2-1,T=wc(m[_],B),z=wc(m[M],B),W=T,K=U-x[y]-z,Z=U/2-x[y]/2+O,te=o2(W,Z,K),ne=!l.arrow&&um(i)!=null&&Z!==te&&s.reference[y]/2-(Z<W?T:z)-x[y]/2<0,de=ne?Z<W?Z-W:Z-K:0;return{[v]:g[v]+de,data:{[v]:te,centerOffset:Z-te-de,...ne&&{alignmentOffset:de}},reset:ne}}}),VW=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...S}=eu(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=tu(i),M=Mc(a),E=tu(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(u.floating)),L=g||(E||!x?[Wy(a)]:IW(a)),D=y!=="none";!g&&D&&L.push(...BW(a,x,y,A));const U=[a,...L],O=await $0(e,S),B=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&B.push(O[_]),m){const Z=OW(i,o,A);B.push(O[Z[0]],O[Z[1]])}if(T=[...T,{placement:i,overflows:B}],!B.every(Z=>Z<=0)){var z,W;const Z=(((z=s.flip)==null?void 0:z.index)||0)+1,te=U[Z];if(te)return{data:{index:Z,overflows:T},reset:{placement:te}};let ne=(W=T.filter(de=>de.overflows[0]<=0).sort((de,Y)=>de.overflows[1]-Y.overflows[1])[0])==null?void 0:W.placement;if(!ne)switch(v){case"bestFit":{var K;const de=(K=T.filter(Y=>{if(D){const ae=Mc(Y.placement);return ae===M||ae==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ae=>ae>0).reduce((ae,se)=>ae+se,0)]).sort((Y,ae)=>Y[1]-ae[1])[0])==null?void 0:K[0];de&&(ne=de);break}case"initialPlacement":ne=a;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function WR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function jR(t){return DW.some(e=>t[e]>=0)}const WW=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=eu(t,e);switch(r){case"referenceHidden":{const s=await $0(e,{...i,elementContext:"reference"}),o=WR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jR(o)}}}case"escaped":{const s=await $0(e,{...i,altBoundary:!0}),o=WR(s,n.floating);return{data:{escapedOffsets:o,escaped:jR(o)}}}default:return{}}}}};async function jW(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=tu(n),a=um(n),l=Mc(n)==="y",u=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,m=eu(e,t);let{mainAxis:g,crossAxis:v,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof y=="number"&&(v=a==="end"?y*-1:y),l?{x:v*d,y:g*u}:{x:g*u,y:v*d}}const XW=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await jW(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},YW=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:_,y:M}=S;return{x:_,y:M}}},...l}=eu(t,e),u={x:n,y:r},d=await $0(e,l),m=Mc(tu(i)),g=gA(m);let v=u[g],y=u[m];if(s){const S=g==="y"?"top":"left",_=g==="y"?"bottom":"right",M=v+d[S],E=v-d[_];v=o2(M,v,E)}if(o){const S=m==="y"?"top":"left",_=m==="y"?"bottom":"right",M=y+d[S],E=y-d[_];y=o2(M,y,E)}const x=a.fn({...e,[g]:v,[m]:y});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:s,[m]:o}}}}}},qW=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=eu(t,e),d={x:n,y:r},m=Mc(i),g=gA(m);let v=d[g],y=d[m];const x=eu(a,e),S=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const E=g==="y"?"height":"width",A=s.reference[g]-s.floating[E]+S.mainAxis,L=s.reference[g]+s.reference[E]-S.mainAxis;v<A?v=A:v>L&&(v=L)}if(u){var _,M;const E=g==="y"?"width":"height",A=["top","left"].includes(tu(i)),L=s.reference[m]-s.floating[E]+(A&&((_=o.offset)==null?void 0:_[m])||0)+(A?0:S.crossAxis),D=s.reference[m]+s.reference[E]+(A?0:((M=o.offset)==null?void 0:M[m])||0)-(A?S.crossAxis:0);y<L?y=L:y>D&&(y=D)}return{[g]:v,[m]:y}}}},KW=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=eu(t,e),d=await $0(e,u),m=tu(i),g=um(i),v=Mc(i)==="y",{width:y,height:x}=s.floating;let S,_;m==="top"||m==="bottom"?(S=m,_=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=m,S=g==="end"?"top":"bottom");const M=x-d.top-d.bottom,E=y-d.left-d.right,A=wc(x-d[S],M),L=wc(y-d[_],E),D=!e.middlewareData.shift;let U=A,O=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(O=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=M),D&&!g){const T=Js(d.left,0),z=Js(d.right,0),W=Js(d.top,0),K=Js(d.bottom,0);v?O=y-2*(T!==0||z!==0?T+z:Js(d.left,d.right)):U=x-2*(W!==0||K!==0?W+K:Js(d.top,d.bottom))}await l({...e,availableWidth:O,availableHeight:U});const B=await o.getDimensions(a.floating);return y!==B.width||x!==B.height?{reset:{rects:!0}}:{}}}};function $S(){return typeof window<"u"}function cm(t){return o8(t)?(t.nodeName||"").toLowerCase():"#document"}function no(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function al(t){var e;return(e=(o8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function o8(t){return $S()?t instanceof Node||t instanceof no(t).Node:!1}function ma(t){return $S()?t instanceof Element||t instanceof no(t).Element:!1}function el(t){return $S()?t instanceof HTMLElement||t instanceof no(t).HTMLElement:!1}function XR(t){return!$S()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof no(t).ShadowRoot}function N1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ga(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function $W(t){return["table","td","th"].includes(cm(t))}function ZS(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function yA(t){const e=xA(),n=ma(t)?ga(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ZW(t){let e=Cc(t);for(;el(e)&&!Up(e);){if(yA(e))return e;if(ZS(e))return null;e=Cc(e)}return null}function xA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Up(t){return["html","body","#document"].includes(cm(t))}function ga(t){return no(t).getComputedStyle(t)}function QS(t){return ma(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Cc(t){if(cm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||XR(t)&&t.host||al(t);return XR(e)?e.host:e}function a8(t){const e=Cc(t);return Up(e)?t.ownerDocument?t.ownerDocument.body:t.body:el(e)&&N1(e)?e:a8(e)}function Z0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=a8(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=no(i);if(s){const a=l2(o);return e.concat(o,o.visualViewport||[],N1(i)?i:[],a&&n?Z0(a):[])}return e.concat(i,Z0(i,[],n))}function l2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function l8(t){const e=ga(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=el(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Vy(n)!==s||Vy(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function SA(t){return ma(t)?t:t.contextElement}function Mp(t){const e=SA(t);if(!el(e))return $a(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=l8(e);let o=(s?Vy(n.width):n.width)/r,a=(s?Vy(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const QW=$a(0);function u8(t){const e=no(t);return!xA()||!e.visualViewport?QW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function JW(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==no(t)?!1:e}function df(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=SA(t);let o=$a(1);e&&(r?ma(r)&&(o=Mp(r)):o=Mp(t));const a=JW(s,n,r)?u8(s):$a(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,m=i.height/o.y;if(s){const g=no(s),v=r&&ma(r)?no(r):r;let y=g,x=l2(y);for(;x&&r&&v!==y;){const S=Mp(x),_=x.getBoundingClientRect(),M=ga(x),E=_.left+(x.clientLeft+parseFloat(M.paddingLeft))*S.x,A=_.top+(x.clientTop+parseFloat(M.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,m*=S.y,l+=E,u+=A,y=no(x),x=l2(y)}}return jy({width:d,height:m,x:l,y:u})}function EA(t,e){const n=QS(t).scrollLeft;return e?e.left+n:df(al(t)).left+n}function c8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:EA(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function ej(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=al(r),a=e?ZS(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=$a(1);const d=$a(0),m=el(r);if((m||!m&&!s)&&((cm(r)!=="body"||N1(o))&&(l=QS(r)),el(r))){const v=df(r);u=Mp(r),d.x=v.x+r.clientLeft,d.y=v.y+r.clientTop}const g=o&&!m&&!s?c8(o,l,!0):$a(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+g.x,y:n.y*u.y-l.scrollTop*u.y+d.y+g.y}}function tj(t){return Array.from(t.getClientRects())}function nj(t){const e=al(t),n=QS(t),r=t.ownerDocument.body,i=Js(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Js(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+EA(t);const a=-n.scrollTop;return ga(r).direction==="rtl"&&(o+=Js(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function rj(t,e){const n=no(t),r=al(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=xA();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function ij(t,e){const n=df(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=el(t)?Mp(t):$a(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function YR(t,e,n){let r;if(e==="viewport")r=rj(t,n);else if(e==="document")r=nj(al(t));else if(ma(e))r=ij(e,n);else{const i=u8(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return jy(r)}function d8(t,e){const n=Cc(t);return n===e||!ma(n)||Up(n)?!1:ga(n).position==="fixed"||d8(n,e)}function sj(t,e){const n=e.get(t);if(n)return n;let r=Z0(t,[],!1).filter(a=>ma(a)&&cm(a)!=="body"),i=null;const s=ga(t).position==="fixed";let o=s?Cc(t):t;for(;ma(o)&&!Up(o);){const a=ga(o),l=yA(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||N1(o)&&!l&&d8(t,o))?r=r.filter(d=>d!==o):i=a,o=Cc(o)}return e.set(t,r),r}function oj(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?ZS(e)?[]:sj(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const m=YR(e,d,i);return u.top=Js(m.top,u.top),u.right=wc(m.right,u.right),u.bottom=wc(m.bottom,u.bottom),u.left=Js(m.left,u.left),u},YR(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function aj(t){const{width:e,height:n}=l8(t);return{width:e,height:n}}function lj(t,e,n){const r=el(e),i=al(e),s=n==="fixed",o=df(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=$a(0);if(r||!r&&!s)if((cm(e)!=="body"||N1(i))&&(a=QS(e)),r){const g=df(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&(l.x=EA(i));const u=i&&!r&&!s?c8(i,a):$a(0),d=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:d,y:m,width:o.width,height:o.height}}function Gw(t){return ga(t).position==="static"}function qR(t,e){if(!el(t)||ga(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return al(t)===n&&(n=n.ownerDocument.body),n}function f8(t,e){const n=no(t);if(ZS(t))return n;if(!el(t)){let i=Cc(t);for(;i&&!Up(i);){if(ma(i)&&!Gw(i))return i;i=Cc(i)}return n}let r=qR(t,e);for(;r&&$W(r)&&Gw(r);)r=qR(r,e);return r&&Up(r)&&Gw(r)&&!yA(r)?n:r||ZW(t)||n}const uj=async function(t){const e=this.getOffsetParent||f8,n=this.getDimensions,r=await n(t.floating);return{reference:lj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cj(t){return ga(t).direction==="rtl"}const dj={convertOffsetParentRelativeRectToViewportRelativeRect:ej,getDocumentElement:al,getClippingRect:oj,getOffsetParent:f8,getElementRects:uj,getClientRects:tj,getDimensions:aj,getScale:Mp,isElement:ma,isRTL:cj};function h8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function fj(t,e){let n=null,r;const i=al(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:d,top:m,width:g,height:v}=u;if(a||e(),!g||!v)return;const y=Iv(m),x=Iv(i.clientWidth-(d+g)),S=Iv(i.clientHeight-(m+v)),_=Iv(d),E={rootMargin:-y+"px "+-x+"px "+-S+"px "+-_+"px",threshold:Js(0,wc(1,l))||1};let A=!0;function L(D){const U=D[0].intersectionRatio;if(U!==l){if(!A)return o();U?o(!1,U):r=setTimeout(()=>{o(!1,1e-7)},1e3)}U===1&&!h8(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(L,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,E)}n.observe(t)}return o(!0),s}function hj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=SA(t),d=i||s?[...u?Z0(u):[],...Z0(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const m=u&&a?fj(u,n):null;let g=-1,v=null;o&&(v=new ResizeObserver(_=>{let[M]=_;M&&M.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=v)==null||E.observe(e)})),n()}),u&&!l&&v.observe(u),v.observe(e));let y,x=l?df(t):null;l&&S();function S(){const _=df(t);x&&!h8(x,_)&&n(),x=_,y=requestAnimationFrame(S)}return n(),()=>{var _;d.forEach(M=>{i&&M.removeEventListener("scroll",n),s&&M.removeEventListener("resize",n)}),m==null||m(),(_=v)==null||_.disconnect(),v=null,l&&cancelAnimationFrame(y)}}const pj=XW,mj=YW,gj=VW,vj=KW,_j=WW,KR=GW,yj=qW,xj=(t,e,n)=>{const r=new Map,i={platform:dj,...n},s={...i.platform,_c:r};return HW(t,e,{...i,platform:s})};var ey=typeof document<"u"?V.useLayoutEffect:V.useEffect;function Xy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Xy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function p8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $R(t,e){const n=p8(t);return Math.round(e*n)/n}function Vw(t){const e=V.useRef(t);return ey(()=>{e.current=t}),e}function Sj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,m]=V.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,v]=V.useState(r);Xy(g,r)||v(r);const[y,x]=V.useState(null),[S,_]=V.useState(null),M=V.useCallback(Y=>{Y!==D.current&&(D.current=Y,x(Y))},[]),E=V.useCallback(Y=>{Y!==U.current&&(U.current=Y,_(Y))},[]),A=s||y,L=o||S,D=V.useRef(null),U=V.useRef(null),O=V.useRef(d),B=l!=null,T=Vw(l),z=Vw(i),W=Vw(u),K=V.useCallback(()=>{if(!D.current||!U.current)return;const Y={placement:e,strategy:n,middleware:g};z.current&&(Y.platform=z.current),xj(D.current,U.current,Y).then(ae=>{const se={...ae,isPositioned:W.current!==!1};Z.current&&!Xy(O.current,se)&&(O.current=se,Lc.flushSync(()=>{m(se)}))})},[g,e,n,z,W]);ey(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,m(Y=>({...Y,isPositioned:!1})))},[u]);const Z=V.useRef(!1);ey(()=>(Z.current=!0,()=>{Z.current=!1}),[]),ey(()=>{if(A&&(D.current=A),L&&(U.current=L),A&&L){if(T.current)return T.current(A,L,K);K()}},[A,L,K,T,B]);const te=V.useMemo(()=>({reference:D,floating:U,setReference:M,setFloating:E}),[M,E]),ne=V.useMemo(()=>({reference:A,floating:L}),[A,L]),de=V.useMemo(()=>{const Y={position:n,left:0,top:0};if(!ne.floating)return Y;const ae=$R(ne.floating,d.x),se=$R(ne.floating,d.y);return a?{...Y,transform:"translate("+ae+"px, "+se+"px)",...p8(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:se}},[n,a,ne.floating,d.x,d.y]);return V.useMemo(()=>({...d,update:K,refs:te,elements:ne,floatingStyles:de}),[d,K,te,ne,de])}const Ej=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?KR({element:r.current,padding:i}).fn(n):{}:r?KR({element:r,padding:i}).fn(n):{}}}},wj=(t,e)=>({...pj(t),options:[t,e]}),Mj=(t,e)=>({...mj(t),options:[t,e]}),Cj=(t,e)=>({...yj(t),options:[t,e]}),Aj=(t,e)=>({...gj(t),options:[t,e]}),bj=(t,e)=>({...vj(t),options:[t,e]}),Pj=(t,e)=>({..._j(t),options:[t,e]}),Rj=(t,e)=>({...Ej(t),options:[t,e]});var Tj="Arrow",m8=V.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return k.jsx(kr.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:k.jsx("polygon",{points:"0,0 30,0 15,10"})})});m8.displayName=Tj;var Lj=m8;function Nj(t){const[e,n]=V.useState(void 0);return Ei(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var wA="Popper",[g8,v8]=L1(wA),[Dj,_8]=g8(wA),y8=t=>{const{__scopePopper:e,children:n}=t,[r,i]=V.useState(null);return k.jsx(Dj,{scope:e,anchor:r,onAnchorChange:i,children:n})};y8.displayName=wA;var x8="PopperAnchor",S8=V.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=_8(x8,n),o=V.useRef(null),a=$n(e,o);return V.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:k.jsx(kr.div,{...i,ref:a})});S8.displayName=x8;var MA="PopperContent",[kj,Fj]=g8(MA),E8=V.forwardRef((t,e)=>{var Q,ye,We,je,Ve,Je;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:v="optimized",onPlaced:y,...x}=t,S=_8(MA,n),[_,M]=V.useState(null),E=$n(e,$e=>M($e)),[A,L]=V.useState(null),D=Nj(A),U=(D==null?void 0:D.width)??0,O=(D==null?void 0:D.height)??0,B=r+(s!=="center"?"-"+s:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},z=Array.isArray(u)?u:[u],W=z.length>0,K={padding:T,boundary:z.filter(Ij),altBoundary:W},{refs:Z,floatingStyles:te,placement:ne,isPositioned:de,middlewareData:Y}=Sj({strategy:"fixed",placement:B,whileElementsMounted:(...$e)=>hj(...$e,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[wj({mainAxis:i+O,alignmentAxis:o}),l&&Mj({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Cj():void 0,...K}),l&&Aj({...K}),bj({...K,apply:({elements:$e,rects:le,availableWidth:At,availableHeight:Be})=>{const{width:He,height:ke}=le.reference,nt=$e.floating.style;nt.setProperty("--radix-popper-available-width",`${At}px`),nt.setProperty("--radix-popper-available-height",`${Be}px`),nt.setProperty("--radix-popper-anchor-width",`${He}px`),nt.setProperty("--radix-popper-anchor-height",`${ke}px`)}}),A&&Rj({element:A,padding:a}),Uj({arrowWidth:U,arrowHeight:O}),g&&Pj({strategy:"referenceHidden",...K})]}),[ae,se]=C8(ne),he=us(y);Ei(()=>{de&&(he==null||he())},[de,he]);const Me=(Q=Y.arrow)==null?void 0:Q.x,ze=(ye=Y.arrow)==null?void 0:ye.y,ge=((We=Y.arrow)==null?void 0:We.centerOffset)!==0,[De,Xe]=V.useState();return Ei(()=>{_&&Xe(window.getComputedStyle(_).zIndex)},[_]),k.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:de?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(je=Y.transformOrigin)==null?void 0:je.x,(Ve=Y.transformOrigin)==null?void 0:Ve.y].join(" "),...((Je=Y.hide)==null?void 0:Je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:k.jsx(kj,{scope:n,placedSide:ae,onArrowChange:L,arrowX:Me,arrowY:ze,shouldHideArrow:ge,children:k.jsx(kr.div,{"data-side":ae,"data-align":se,...x,ref:E,style:{...x.style,animation:de?void 0:"none"}})})})});E8.displayName=MA;var w8="PopperArrow",Oj={top:"bottom",right:"left",bottom:"top",left:"right"},M8=V.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Fj(w8,r),o=Oj[s.placedSide];return k.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:k.jsx(Lj,{...i,ref:n,style:{...i.style,display:"block"}})})});M8.displayName=w8;function Ij(t){return t!==null}var Uj=t=>({name:"transformOrigin",options:t,fn(e){var S,_,M;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=C8(n),m={start:"0%",center:"50%",end:"100%"}[d],g=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,v=(((M=i.arrow)==null?void 0:M.y)??0)+l/2;let y="",x="";return u==="bottom"?(y=o?m:`${g}px`,x=`${-l}px`):u==="top"?(y=o?m:`${g}px`,x=`${r.floating.height+l}px`):u==="right"?(y=`${-l}px`,x=o?m:`${v}px`):u==="left"&&(y=`${r.floating.width+l}px`,x=o?m:`${v}px`),{data:{x:y,y:x}}}});function C8(t){const[e,n="center"]=t.split("-");return[e,n]}var Bj=y8,zj=S8,Hj=E8,Gj=M8,Vj="Portal",A8=V.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=V.useState(!1);Ei(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?bN.createPortal(k.jsx(kr.div,{...r,ref:e}),o):null});A8.displayName=Vj;function u2({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Wj({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=us(n),l=V.useCallback(u=>{if(s){const m=typeof u=="function"?u(t):u;m!==t&&a(m)}else i(u)},[s,t,i,a]);return[o,l]}function Wj({defaultProp:t,onChange:e}){const n=V.useState(t),[r]=n,i=V.useRef(r),s=us(e);return V.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function jj(t){const e=V.useRef({value:t,previous:t});return V.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Xj="VisuallyHidden",b8=V.forwardRef((t,e)=>k.jsx(kr.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));b8.displayName=Xj;var Yj=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},bh=new WeakMap,Uv=new WeakMap,Bv={},Ww=0,P8=function(t){return t&&(t.host||P8(t.parentNode))},qj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=P8(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Kj=function(t,e,n,r){var i=qj(e,Array.isArray(t)?t:[t]);Bv[n]||(Bv[n]=new WeakMap);var s=Bv[n],o=[],a=new Set,l=new Set(i),u=function(m){!m||a.has(m)||(a.add(m),u(m.parentNode))};i.forEach(u);var d=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(g){if(a.has(g))d(g);else try{var v=g.getAttribute(r),y=v!==null&&v!=="false",x=(bh.get(g)||0)+1,S=(s.get(g)||0)+1;bh.set(g,x),s.set(g,S),o.push(g),x===1&&y&&Uv.set(g,!0),S===1&&g.setAttribute(n,"true"),y||g.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",g,_)}})};return d(e),a.clear(),Ww++,function(){o.forEach(function(m){var g=bh.get(m)-1,v=s.get(m)-1;bh.set(m,g),s.set(m,v),g||(Uv.has(m)||m.removeAttribute(r),Uv.delete(m)),v||m.removeAttribute(n)}),Ww--,Ww||(bh=new WeakMap,bh=new WeakMap,Uv=new WeakMap,Bv={})}},$j=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Yj(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Kj(r,i,n,"aria-hidden")):function(){return null}},ja=function(){return ja=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ja.apply(this,arguments)};function R8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zj(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var ty="right-scroll-bar-position",ny="width-before-scroll-bar",Qj="with-scroll-bars-hidden",Jj="--removed-body-scroll-bar-size";function jw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function eX(t,e){var n=V.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var tX=typeof window<"u"?V.useLayoutEffect:V.useEffect,ZR=new WeakMap;function nX(t,e){var n=eX(null,function(r){return t.forEach(function(i){return jw(i,r)})});return tX(function(){var r=ZR.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||jw(a,null)}),s.forEach(function(a){i.has(a)||jw(a,o)})}ZR.set(n,t)},[t]),n}function rX(t){return t}function iX(t,e){e===void 0&&(e=rX);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function sX(t){t===void 0&&(t={});var e=iX(null);return e.options=ja({async:!0,ssr:!1},t),e}var T8=function(t){var e=t.sideCar,n=R8(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return V.createElement(r,ja({},n))};T8.isSideCarExport=!0;function oX(t,e){return t.useMedium(e),T8}var L8=sX(),Xw=function(){},JS=V.forwardRef(function(t,e){var n=V.useRef(null),r=V.useState({onScrollCapture:Xw,onWheelCapture:Xw,onTouchMoveCapture:Xw}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,m=t.shards,g=t.sideCar,v=t.noIsolation,y=t.inert,x=t.allowPinchZoom,S=t.as,_=S===void 0?"div":S,M=t.gapMode,E=R8(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,L=nX([n,e]),D=ja(ja({},E),i);return V.createElement(V.Fragment,null,d&&V.createElement(A,{sideCar:L8,removeScrollBar:u,shards:m,noIsolation:v,inert:y,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:M}),o?V.cloneElement(V.Children.only(a),ja(ja({},D),{ref:L})):V.createElement(_,ja({},D,{className:l,ref:L}),a))});JS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};JS.classNames={fullWidth:ny,zeroRight:ty};var aX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=aX();return e&&t.setAttribute("nonce",e),t}function uX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function cX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=lX())&&(uX(e,n),cX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fX=function(){var t=dX();return function(e,n){V.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},N8=function(){var t=fX(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},hX={left:0,top:0,right:0,gap:0},Yw=function(t){return parseInt(t||"",10)||0},pX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Yw(n),Yw(r),Yw(i)]},mX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hX;var e=pX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},gX=N8(),Cp="data-scroll-locked",vX=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Qj,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Cp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ty,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ny,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ty," .").concat(ty,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ny," .").concat(ny,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Cp,`] {
    `).concat(Jj,": ").concat(a,`px;
  }
`)},QR=function(){var t=parseInt(document.body.getAttribute(Cp)||"0",10);return isFinite(t)?t:0},_X=function(){V.useEffect(function(){return document.body.setAttribute(Cp,(QR()+1).toString()),function(){var t=QR()-1;t<=0?document.body.removeAttribute(Cp):document.body.setAttribute(Cp,t.toString())}},[])},yX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;_X();var s=V.useMemo(function(){return mX(i)},[i]);return V.createElement(gX,{styles:vX(s,!e,i,n?"":"!important")})},c2=!1;if(typeof window<"u")try{var zv=Object.defineProperty({},"passive",{get:function(){return c2=!0,!0}});window.addEventListener("test",zv,zv),window.removeEventListener("test",zv,zv)}catch{c2=!1}var Ph=c2?{passive:!1}:!1,xX=function(t){return t.tagName==="TEXTAREA"},D8=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!xX(t)&&n[e]==="visible")},SX=function(t){return D8(t,"overflowY")},EX=function(t){return D8(t,"overflowX")},JR=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=k8(t,r);if(i){var s=F8(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},wX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},MX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},k8=function(t,e){return t==="v"?SX(e):EX(e)},F8=function(t,e){return t==="v"?wX(e):MX(e)},CX=function(t,e){return t==="h"&&e==="rtl"?-1:1},AX=function(t,e,n,r,i){var s=CX(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,d=o>0,m=0,g=0;do{var v=F8(t,a),y=v[0],x=v[1],S=v[2],_=x-S-s*y;(y||_)&&k8(t,a)&&(m+=_,g+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(m)<1||!d&&Math.abs(g)<1)&&(u=!0),u},Hv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},e4=function(t){return[t.deltaX,t.deltaY]},t4=function(t){return t&&"current"in t?t.current:t},bX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},RX=0,Rh=[];function TX(t){var e=V.useRef([]),n=V.useRef([0,0]),r=V.useRef(),i=V.useState(RX++)[0],s=V.useState(N8)[0],o=V.useRef(t);V.useEffect(function(){o.current=t},[t]),V.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=Zj([t.lockRef.current],(t.shards||[]).map(t4),!0).filter(Boolean);return x.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=V.useCallback(function(x,S){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var _=Hv(x),M=n.current,E="deltaX"in x?x.deltaX:M[0]-_[0],A="deltaY"in x?x.deltaY:M[1]-_[1],L,D=x.target,U=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in x&&U==="h"&&D.type==="range")return!1;var O=JR(U,D);if(!O)return!0;if(O?L=U:(L=U==="v"?"h":"v",O=JR(U,D)),!O)return!1;if(!r.current&&"changedTouches"in x&&(E||A)&&(r.current=L),!L)return!0;var B=r.current||L;return AX(B,S,x,B==="h"?E:A)},[]),l=V.useCallback(function(x){var S=x;if(!(!Rh.length||Rh[Rh.length-1]!==s)){var _="deltaY"in S?e4(S):Hv(S),M=e.current.filter(function(L){return L.name===S.type&&(L.target===S.target||S.target===L.shadowParent)&&bX(L.delta,_)})[0];if(M&&M.should){S.cancelable&&S.preventDefault();return}if(!M){var E=(o.current.shards||[]).map(t4).filter(Boolean).filter(function(L){return L.contains(S.target)}),A=E.length>0?a(S,E[0]):!o.current.noIsolation;A&&S.cancelable&&S.preventDefault()}}},[]),u=V.useCallback(function(x,S,_,M){var E={name:x,delta:S,target:_,should:M,shadowParent:LX(_)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(A){return A!==E})},1)},[]),d=V.useCallback(function(x){n.current=Hv(x),r.current=void 0},[]),m=V.useCallback(function(x){u(x.type,e4(x),x.target,a(x,t.lockRef.current))},[]),g=V.useCallback(function(x){u(x.type,Hv(x),x.target,a(x,t.lockRef.current))},[]);V.useEffect(function(){return Rh.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",l,Ph),document.addEventListener("touchmove",l,Ph),document.addEventListener("touchstart",d,Ph),function(){Rh=Rh.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,Ph),document.removeEventListener("touchmove",l,Ph),document.removeEventListener("touchstart",d,Ph)}},[]);var v=t.removeScrollBar,y=t.inert;return V.createElement(V.Fragment,null,y?V.createElement(s,{styles:PX(i)}):null,v?V.createElement(yX,{gapMode:t.gapMode}):null)}function LX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const NX=oX(L8,TX);var O8=V.forwardRef(function(t,e){return V.createElement(JS,ja({},t,{ref:e,sideCar:NX}))});O8.classNames=JS.classNames;var DX=[" ","Enter","ArrowUp","ArrowDown"],kX=[" ","Enter"],D1="Select",[eE,tE,FX]=dW(D1),[dm,Oie]=L1(D1,[FX,v8]),nE=v8(),[OX,Bc]=dm(D1),[IX,UX]=dm(D1),I8=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:m,disabled:g,required:v,form:y}=t,x=nE(e),[S,_]=V.useState(null),[M,E]=V.useState(null),[A,L]=V.useState(!1),D=hW(u),[U=!1,O]=u2({prop:r,defaultProp:i,onChange:s}),[B,T]=u2({prop:o,defaultProp:a,onChange:l}),z=V.useRef(null),W=S?y||!!S.closest("form"):!0,[K,Z]=V.useState(new Set),te=Array.from(K).map(ne=>ne.props.value).join(";");return k.jsx(Bj,{...x,children:k.jsxs(OX,{required:v,scope:e,trigger:S,onTriggerChange:_,valueNode:M,onValueNodeChange:E,valueNodeHasChildren:A,onValueNodeHasChildrenChange:L,contentId:mA(),value:B,onValueChange:T,open:U,onOpenChange:O,dir:D,triggerPointerDownPosRef:z,disabled:g,children:[k.jsx(eE.Provider,{scope:e,children:k.jsx(IX,{scope:t.__scopeSelect,onNativeOptionAdd:V.useCallback(ne=>{Z(de=>new Set(de).add(ne))},[]),onNativeOptionRemove:V.useCallback(ne=>{Z(de=>{const Y=new Set(de);return Y.delete(ne),Y})},[]),children:n})}),W?k.jsxs(lD,{"aria-hidden":!0,required:v,tabIndex:-1,name:d,autoComplete:m,value:B,onChange:ne=>T(ne.target.value),disabled:g,form:y,children:[B===void 0?k.jsx("option",{value:""}):null,Array.from(K)]},te):null]})})};I8.displayName=D1;var U8="SelectTrigger",B8=V.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=nE(n),o=Bc(U8,n),a=o.disabled||r,l=$n(e,o.onTriggerChange),u=tE(n),d=V.useRef("touch"),[m,g,v]=uD(x=>{const S=u().filter(E=>!E.disabled),_=S.find(E=>E.value===o.value),M=cD(S,x,_);M!==void 0&&o.onValueChange(M.value)}),y=x=>{a||(o.onOpenChange(!0),v()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return k.jsx(zj,{asChild:!0,...s,children:k.jsx(kr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":aD(o.value)?"":void 0,...i,ref:l,onClick:mn(i.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&y(x)}),onPointerDown:mn(i.onPointerDown,x=>{d.current=x.pointerType;const S=x.target;S.hasPointerCapture(x.pointerId)&&S.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(y(x),x.preventDefault())}),onKeyDown:mn(i.onKeyDown,x=>{const S=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(S&&x.key===" ")&&DX.includes(x.key)&&(y(),x.preventDefault())})})})});B8.displayName=U8;var z8="SelectValue",H8=V.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Bc(z8,n),{onValueNodeHasChildrenChange:u}=l,d=s!==void 0,m=$n(e,l.onValueNodeChange);return Ei(()=>{u(d)},[u,d]),k.jsx(kr.span,{...a,ref:m,style:{pointerEvents:"none"},children:aD(l.value)?k.jsx(k.Fragment,{children:o}):s})});H8.displayName=z8;var BX="SelectIcon",G8=V.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return k.jsx(kr.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});G8.displayName=BX;var zX="SelectPortal",V8=t=>k.jsx(A8,{asChild:!0,...t});V8.displayName=zX;var ff="SelectContent",W8=V.forwardRef((t,e)=>{const n=Bc(ff,t.__scopeSelect),[r,i]=V.useState();if(Ei(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Lc.createPortal(k.jsx(j8,{scope:t.__scopeSelect,children:k.jsx(eE.Slot,{scope:t.__scopeSelect,children:k.jsx("div",{children:t.children})})}),s):null}return k.jsx(X8,{...t,ref:e})});W8.displayName=ff;var ra=10,[j8,zc]=dm(ff),HX="SelectContentImpl",X8=V.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:g,collisionPadding:v,sticky:y,hideWhenDetached:x,avoidCollisions:S,..._}=t,M=Bc(ff,n),[E,A]=V.useState(null),[L,D]=V.useState(null),U=$n(e,Q=>A(Q)),[O,B]=V.useState(null),[T,z]=V.useState(null),W=tE(n),[K,Z]=V.useState(!1),te=V.useRef(!1);V.useEffect(()=>{if(E)return $j(E)},[E]),wW();const ne=V.useCallback(Q=>{const[ye,...We]=W().map(Je=>Je.ref.current),[je]=We.slice(-1),Ve=document.activeElement;for(const Je of Q)if(Je===Ve||(Je==null||Je.scrollIntoView({block:"nearest"}),Je===ye&&L&&(L.scrollTop=0),Je===je&&L&&(L.scrollTop=L.scrollHeight),Je==null||Je.focus(),document.activeElement!==Ve))return},[W,L]),de=V.useCallback(()=>ne([O,E]),[ne,O,E]);V.useEffect(()=>{K&&de()},[K,de]);const{onOpenChange:Y,triggerPointerDownPosRef:ae}=M;V.useEffect(()=>{if(E){let Q={x:0,y:0};const ye=je=>{var Ve,Je;Q={x:Math.abs(Math.round(je.pageX)-(((Ve=ae.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(je.pageY)-(((Je=ae.current)==null?void 0:Je.y)??0))}},We=je=>{Q.x<=10&&Q.y<=10?je.preventDefault():E.contains(je.target)||Y(!1),document.removeEventListener("pointermove",ye),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",We,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",We,{capture:!0})}}},[E,Y,ae]),V.useEffect(()=>{const Q=()=>Y(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[Y]);const[se,he]=uD(Q=>{const ye=W().filter(Ve=>!Ve.disabled),We=ye.find(Ve=>Ve.ref.current===document.activeElement),je=cD(ye,Q,We);je&&setTimeout(()=>je.ref.current.focus())}),Me=V.useCallback((Q,ye,We)=>{const je=!te.current&&!We;(M.value!==void 0&&M.value===ye||je)&&(B(Q),je&&(te.current=!0))},[M.value]),ze=V.useCallback(()=>E==null?void 0:E.focus(),[E]),ge=V.useCallback((Q,ye,We)=>{const je=!te.current&&!We;(M.value!==void 0&&M.value===ye||je)&&z(Q)},[M.value]),De=r==="popper"?d2:Y8,Xe=De===d2?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:g,collisionPadding:v,sticky:y,hideWhenDetached:x,avoidCollisions:S}:{};return k.jsx(j8,{scope:n,content:E,viewport:L,onViewportChange:D,itemRefCallback:Me,selectedItem:O,onItemLeave:ze,itemTextRefCallback:ge,focusSelectedItem:de,selectedItemText:T,position:r,isPositioned:K,searchRef:se,children:k.jsx(O8,{as:K0,allowPinchZoom:!0,children:k.jsx(r8,{asChild:!0,trapped:M.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:mn(i,Q=>{var ye;(ye=M.trigger)==null||ye.focus({preventScroll:!0}),Q.preventDefault()}),children:k.jsx(t8,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:k.jsx(De,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:Q=>Q.preventDefault(),..._,...Xe,onPlaced:()=>Z(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:mn(_.onKeyDown,Q=>{const ye=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ye&&Q.key.length===1&&he(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let je=W().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Ve=Q.target,Je=je.indexOf(Ve);je=je.slice(Je+1)}setTimeout(()=>ne(je)),Q.preventDefault()}})})})})})})});X8.displayName=HX;var GX="SelectItemAlignedPosition",Y8=V.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Bc(ff,n),o=zc(ff,n),[a,l]=V.useState(null),[u,d]=V.useState(null),m=$n(e,U=>d(U)),g=tE(n),v=V.useRef(!1),y=V.useRef(!0),{viewport:x,selectedItem:S,selectedItemText:_,focusSelectedItem:M}=o,E=V.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&x&&S&&_){const U=s.trigger.getBoundingClientRect(),O=u.getBoundingClientRect(),B=s.valueNode.getBoundingClientRect(),T=_.getBoundingClientRect();if(s.dir!=="rtl"){const Ve=T.left-O.left,Je=B.left-Ve,$e=U.left-Je,le=U.width+$e,At=Math.max(le,O.width),Be=window.innerWidth-ra,He=kR(Je,[ra,Math.max(ra,Be-At)]);a.style.minWidth=le+"px",a.style.left=He+"px"}else{const Ve=O.right-T.right,Je=window.innerWidth-B.right-Ve,$e=window.innerWidth-U.right-Je,le=U.width+$e,At=Math.max(le,O.width),Be=window.innerWidth-ra,He=kR(Je,[ra,Math.max(ra,Be-At)]);a.style.minWidth=le+"px",a.style.right=He+"px"}const z=g(),W=window.innerHeight-ra*2,K=x.scrollHeight,Z=window.getComputedStyle(u),te=parseInt(Z.borderTopWidth,10),ne=parseInt(Z.paddingTop,10),de=parseInt(Z.borderBottomWidth,10),Y=parseInt(Z.paddingBottom,10),ae=te+ne+K+Y+de,se=Math.min(S.offsetHeight*5,ae),he=window.getComputedStyle(x),Me=parseInt(he.paddingTop,10),ze=parseInt(he.paddingBottom,10),ge=U.top+U.height/2-ra,De=W-ge,Xe=S.offsetHeight/2,Q=S.offsetTop+Xe,ye=te+ne+Q,We=ae-ye;if(ye<=ge){const Ve=z.length>0&&S===z[z.length-1].ref.current;a.style.bottom="0px";const Je=u.clientHeight-x.offsetTop-x.offsetHeight,$e=Math.max(De,Xe+(Ve?ze:0)+Je+de),le=ye+$e;a.style.height=le+"px"}else{const Ve=z.length>0&&S===z[0].ref.current;a.style.top="0px";const $e=Math.max(ge,te+x.offsetTop+(Ve?Me:0)+Xe)+We;a.style.height=$e+"px",x.scrollTop=ye-ge+x.offsetTop}a.style.margin=`${ra}px 0`,a.style.minHeight=se+"px",a.style.maxHeight=W+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[g,s.trigger,s.valueNode,a,u,x,S,_,s.dir,r]);Ei(()=>E(),[E]);const[A,L]=V.useState();Ei(()=>{u&&L(window.getComputedStyle(u).zIndex)},[u]);const D=V.useCallback(U=>{U&&y.current===!0&&(E(),M==null||M(),y.current=!1)},[E,M]);return k.jsx(WX,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:k.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:k.jsx(kr.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Y8.displayName=GX;var VX="SelectPopperPosition",d2=V.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ra,...s}=t,o=nE(n);return k.jsx(Hj,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});d2.displayName=VX;var[WX,CA]=dm(ff,{}),f2="SelectViewport",q8=V.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=zc(f2,n),o=CA(f2,n),a=$n(e,s.onViewportChange),l=V.useRef(0);return k.jsxs(k.Fragment,{children:[k.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),k.jsx(eE.Slot,{scope:n,children:k.jsx(kr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:mn(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&m){const v=Math.abs(l.current-d.scrollTop);if(v>0){const y=window.innerHeight-ra*2,x=parseFloat(m.style.minHeight),S=parseFloat(m.style.height),_=Math.max(x,S);if(_<y){const M=_+v,E=Math.min(y,M),A=M-E;m.style.height=E+"px",m.style.bottom==="0px"&&(d.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});q8.displayName=f2;var K8="SelectGroup",[jX,XX]=dm(K8),YX=V.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=mA();return k.jsx(jX,{scope:n,id:i,children:k.jsx(kr.div,{role:"group","aria-labelledby":i,...r,ref:e})})});YX.displayName=K8;var $8="SelectLabel",Z8=V.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=XX($8,n);return k.jsx(kr.div,{id:i.id,...r,ref:e})});Z8.displayName=$8;var Yy="SelectItem",[qX,Q8]=dm(Yy),J8=V.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Bc(Yy,n),l=zc(Yy,n),u=a.value===r,[d,m]=V.useState(s??""),[g,v]=V.useState(!1),y=$n(e,M=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,M,r,i)}),x=mA(),S=V.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return k.jsx(qX,{scope:n,value:r,disabled:i,textId:x,isSelected:u,onItemTextChange:V.useCallback(M=>{m(E=>E||((M==null?void 0:M.textContent)??"").trim())},[]),children:k.jsx(eE.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:k.jsx(kr.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:mn(o.onFocus,()=>v(!0)),onBlur:mn(o.onBlur,()=>v(!1)),onClick:mn(o.onClick,()=>{S.current!=="mouse"&&_()}),onPointerUp:mn(o.onPointerUp,()=>{S.current==="mouse"&&_()}),onPointerDown:mn(o.onPointerDown,M=>{S.current=M.pointerType}),onPointerMove:mn(o.onPointerMove,M=>{var E;S.current=M.pointerType,i?(E=l.onItemLeave)==null||E.call(l):S.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:mn(o.onPointerLeave,M=>{var E;M.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:mn(o.onKeyDown,M=>{var A;((A=l.searchRef)==null?void 0:A.current)!==""&&M.key===" "||(kX.includes(M.key)&&_(),M.key===" "&&M.preventDefault())})})})})});J8.displayName=Yy;var e0="SelectItemText",eD=V.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Bc(e0,n),a=zc(e0,n),l=Q8(e0,n),u=UX(e0,n),[d,m]=V.useState(null),g=$n(e,_=>m(_),l.onItemTextChange,_=>{var M;return(M=a.itemTextRefCallback)==null?void 0:M.call(a,_,l.value,l.disabled)}),v=d==null?void 0:d.textContent,y=V.useMemo(()=>k.jsx("option",{value:l.value,disabled:l.disabled,children:v},l.value),[l.disabled,l.value,v]),{onNativeOptionAdd:x,onNativeOptionRemove:S}=u;return Ei(()=>(x(y),()=>S(y)),[x,S,y]),k.jsxs(k.Fragment,{children:[k.jsx(kr.span,{id:l.textId,...s,ref:g}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Lc.createPortal(s.children,o.valueNode):null]})});eD.displayName=e0;var tD="SelectItemIndicator",nD=V.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Q8(tD,n).isSelected?k.jsx(kr.span,{"aria-hidden":!0,...r,ref:e}):null});nD.displayName=tD;var h2="SelectScrollUpButton",rD=V.forwardRef((t,e)=>{const n=zc(h2,t.__scopeSelect),r=CA(h2,t.__scopeSelect),[i,s]=V.useState(!1),o=$n(e,r.onScrollButtonChange);return Ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?k.jsx(sD,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});rD.displayName=h2;var p2="SelectScrollDownButton",iD=V.forwardRef((t,e)=>{const n=zc(p2,t.__scopeSelect),r=CA(p2,t.__scopeSelect),[i,s]=V.useState(!1),o=$n(e,r.onScrollButtonChange);return Ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;s(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?k.jsx(sD,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});iD.displayName=p2;var sD=V.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=zc("SelectScrollButton",n),o=V.useRef(null),a=tE(n),l=V.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return V.useEffect(()=>()=>l(),[l]),Ei(()=>{var d;const u=a().find(m=>m.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),k.jsx(kr.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:mn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:mn(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:mn(i.onPointerLeave,()=>{l()})})}),KX="SelectSeparator",oD=V.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return k.jsx(kr.div,{"aria-hidden":!0,...r,ref:e})});oD.displayName=KX;var m2="SelectArrow",$X=V.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=nE(n),s=Bc(m2,n),o=zc(m2,n);return s.open&&o.position==="popper"?k.jsx(Gj,{...i,...r,ref:e}):null});$X.displayName=m2;function aD(t){return t===""||t===void 0}var lD=V.forwardRef((t,e)=>{const{value:n,...r}=t,i=V.useRef(null),s=$n(e,i),o=jj(n);return V.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&d){const m=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(m)}},[o,n]),k.jsx(b8,{asChild:!0,children:k.jsx("select",{...r,ref:s,defaultValue:n})})});lD.displayName="BubbleSelect";function uD(t){const e=us(t),n=V.useRef(""),r=V.useRef(0),i=V.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=V.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return V.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function cD(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=ZX(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function ZX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var QX=I8,dD=B8,JX=H8,eY=G8,tY=V8,fD=W8,nY=q8,hD=Z8,pD=J8,rY=eD,iY=nD,mD=rD,gD=iD,vD=oD;/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_D=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>V.createElement("svg",{ref:l,...oY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_D("lucide",i),...a},[...o.map(([u,d])=>V.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=(t,e)=>{const n=V.forwardRef(({className:r,...i},s)=>V.createElement(aY,{ref:s,iconNode:e,className:_D(`lucide-${sY(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uY=rE("Check",lY);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yD=rE("ChevronDown",cY);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fY=rE("ChevronUp",dY);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pY=rE("X",hY),nu=QX,k1=JX,tl=V.forwardRef(({className:t,children:e,...n},r)=>k.jsxs(dD,{ref:r,className:Si("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,k.jsx(eY,{asChild:!0,children:k.jsx(yD,{className:"h-4 w-4 opacity-50"})})]}));tl.displayName=dD.displayName;const xD=V.forwardRef(({className:t,...e},n)=>k.jsx(mD,{ref:n,className:Si("flex cursor-default items-center justify-center py-1",t),...e,children:k.jsx(fY,{className:"h-4 w-4"})}));xD.displayName=mD.displayName;const SD=V.forwardRef(({className:t,...e},n)=>k.jsx(gD,{ref:n,className:Si("flex cursor-default items-center justify-center py-1",t),...e,children:k.jsx(yD,{className:"h-4 w-4"})}));SD.displayName=gD.displayName;const nl=V.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>k.jsx(tY,{children:k.jsxs(fD,{ref:i,className:Si("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[k.jsx(xD,{}),k.jsx(nY,{className:Si("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),k.jsx(SD,{})]})}));nl.displayName=fD.displayName;const mY=V.forwardRef(({className:t,...e},n)=>k.jsx(hD,{ref:n,className:Si("px-2 py-1.5 text-sm font-semibold",t),...e}));mY.displayName=hD.displayName;const li=V.forwardRef(({className:t,children:e,...n},r)=>k.jsxs(pD,{ref:r,className:Si("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[k.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:k.jsx(iY,{children:k.jsx(uY,{className:"h-4 w-4"})})}),k.jsx(rY,{children:e})]}));li.displayName=pD.displayName;const gY=V.forwardRef(({className:t,...e},n)=>k.jsx(vD,{ref:n,className:Si("-mx-1 my-1 h-px bg-muted",t),...e}));gY.displayName=vD.displayName;function vY({mapFile:t,setMapFile:e,setMapImagesFile:n,setMapImages:r,pyodideWorker:i,setData:s}){const[o,a]=or(Dr),[l,u]=V.useState(!1),d=async(g,v)=>{const y=v.DATA_TYPE!==Z_.TRT_FILE?g+".rsrc":g,x=y.split("/").pop();if(!x)return;a(v);const _=await(await fetch(y)).blob();e(new File([_],x)),v.DATA_TYPE===Z_.TRT_FILE&&(g=g.split(".")[0]+".trt");const M=await m(_,v);if(v.DATA_TYPE!==Z_.RSRC_FORK){const A=await(await fetch(g)).blob(),L=new File([A],g.split("/").pop()??""),D=await L.arrayBuffer(),U=new DataView(D),O=await qw(U,v);n(L),r(O)}else{console.log(M);const E=M.Timg[1e3].data;console.log(E);const A=$6.Buffer.from(E,"hex");console.log(A),console.log(A.byteLength),console.log("Resized",A.byteLength/2/32/32);const L=new DataView(A.buffer),D=await qw(L,v);r(D)}},m=async(g,v)=>{const y=await g.arrayBuffer(),S=await new Promise((_,M)=>{i.postMessage({type:"save_to_json",bytes:y,struct_specs:v.STRUCT_SPECS,include_types:[],exclude_types:[]}),i.onmessage=E=>{E.data.type==="save_to_json"?_(E.data.result):M(new Error("Unexpected response from pyodide worker"))}});return $V(S,o),s(S),S};return k.jsxs("div",{className:"flex text-white m-auto flex-1 gap-8 flex-col items-center justify-center ",children:[k.jsxs("div",{className:"flex flex-col gap-2 lg:w-1/2",children:[k.jsx(Q6,{}),k.jsxs("div",{className:"flex flex-row justify-center gap-2 items-center",children:[k.jsx("p",{children:"Show non-functional games"}),k.jsx(qC,{checked:l,onCheckedChange:u})]})]}),k.jsxs("div",{className:"flex flex-col gap-2 lg:w-1/3",children:[k.jsx("p",{children:"Select Game"}),k.jsxs(nu,{children:[k.jsx(tl,{className:"min-w-fit",children:k.jsx(k1,{placeholder:"Otto Matic"})}),k.jsxs(nl,{children:[k.jsx(li,{value:"ottoMatic",onClick:()=>a(Zs),children:"Otto Matic"}),k.jsx(li,{value:"budgdom2",onClick:()=>a(Rl),children:"Bugdom 2"}),k.jsx(li,{value:"croMag",onClick:()=>a(ii),children:"Cro-Mag Rally"}),k.jsx(li,{value:"nanosaur2",onClick:()=>a(Qo),children:"Nanosaur 2"}),k.jsx(li,{value:"billyFrontier",onClick:()=>a(Ad),children:"Billy Frontier"})]})]}),k.jsx("p",{children:"Upload Level Data (.ter.rsrc)"}),k.jsx(Fy,{className:"text-2xl",acceptType:".ter.rsrc",handleOnChange:async g=>{var y,x;if(!((x=(y=g.target)==null?void 0:y.files)!=null&&x[0]))return;const v=g.target.files[0];e(v),m(v,Zs)}}),k.jsx("p",{children:"Upload Texture Data (.ter)"}),k.jsx(Fy,{className:"text-2xl",acceptType:".ter",disabled:!t,handleOnChange:async g=>{var _,M;if(!((M=(_=g.target)==null?void 0:_.files)!=null&&M[0]))return;const v=g.target.files[0],y=await v.arrayBuffer(),x=new DataView(y),S=await qw(x,o);n(v),r(S)}})]}),k.jsxs("div",{className:"flex flex-row gap-8 overflow-x-auto flex-wrap justify-center max-w-full  ",children:[k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Otto Matic Levels"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/EarthFarm.ter",Zs),children:"Level 1"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/BlobWorld.ter",Zs),children:"Level 2"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/BlobBoss.ter",Zs),children:"Level 3"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/Apocalypse.ter",Zs),children:"Level 4"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/Cloud.ter",Zs),children:"Level 5"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/Jungle.ter",Zs),children:"Level 6"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/JungleBoss.ter",Zs),children:"Level 7"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/FireIce.ter",Zs),children:"Level 8"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/Saucer.ter",Zs),children:"Level 9"}),k.jsx(et,{onClick:()=>d("assets/ottoMatic/terrain/BrainBoss.ter",Zs),children:"Level 10"})]}),l&&k.jsxs(k.Fragment,{children:[" ",k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Bugdom Levels "}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Training.ter",Ua),children:"Level 1"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Lawn.ter",Ua),children:"Level 2"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Pond.ter",Ua),children:"Level 3"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Beach.ter",Ua),children:"Level 4"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Flight.ter",Ua),children:"Level 5"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/BeeHive.ter",Ua),children:"Level 6"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/QueenBee.ter",Ua),children:"Level 7"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/Night.ter",Ua),children:"Level 8"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/AntHill.ter",Ua),children:"Level 9"}),k.jsx(et,{onClick:()=>d("assets/bugdom/terrain/AntKing.ter",Ua),children:"Level 10"})]}),k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Bugdom 2 Levels "}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level1_Garden.ter",Rl),children:"Level 1"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level2_SideWalk.ter",Rl),children:"Level 2"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level3_DogHair.ter",Rl),children:"Level 3"}),k.jsx(et,{disabled:!0,children:"Level 4"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level5_Playroom.ter",Rl),children:"Level 5"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level6_Closet.ter",Rl),children:"Level 6"}),k.jsx(et,{disabled:!0,children:"Level 7"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level8_Garbage.ter",Rl),children:"Level 8"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level9_Balsa.ter",Rl),children:"Level 9"}),k.jsx(et,{onClick:()=>d("assets/bugdom2/terrain/Level10_Park.ter",Rl),children:"Level 10"})]}),k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Cro-Mag Races"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/StoneAge_Desert.ter",ii),children:"Desert"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/StoneAge_Jungle.ter",ii),children:"Jungle"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/StoneAge_Ice.ter",ii),children:"Ice"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/BronzeAge_Crete.ter",ii),children:"Crete"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/BronzeAge_China.ter",ii),children:"China"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/BronzeAge_Egypt.ter",ii),children:"Egypt"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/IronAge_Europe.ter",ii),children:"Europe"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/IronAge_Scandinavia.ter",ii),children:"Scandinavia"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/IronAge_Atlantis.ter",ii),children:"Atlantis"})]}),k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Cro-Mag Battles "}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Aztec.ter",ii),children:"Aztec"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Celtic.ter",ii),children:"Celtic"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Coliseum.ter",ii),children:"Coliseum"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Maze.ter",ii),children:"Maze"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Ramps.ter",ii),children:"Ramps"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_Spiral.ter",ii),children:"Spiral"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_StoneHenge.ter",ii),children:"Stonehenge"}),k.jsx(et,{onClick:()=>d("assets/croMag/terrain/Battle_TarPits.ter",ii),children:"Tar Pits"})]})," ",k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Nanosaur Levels"}),k.jsx(et,{onClick:()=>d("assets/nanosaur/terrain/Level1.ter",FP),children:"Default"}),k.jsx(et,{onClick:()=>d("assets/nanosaur/terrain/Level1Pro.ter",FP),children:"Extreme"})]}),k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Nanosaur 2 Levels"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/level1.ter",Qo),children:"Level 1"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/level2.ter",Qo),children:"Level 2"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/level3.ter",Qo),children:"Level 3"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/battle1.ter",Qo),children:"Battle 1"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/battle2.ter",Qo),children:"Battle 2"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/battle3.ter",Qo),children:"Battle 3"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/race1.ter",Qo),children:"Race 1"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/race2.ter",Qo),children:"Race 2"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/flag1.ter",Qo),children:"CTF 1"}),k.jsx(et,{onClick:()=>d("assets/nanosaur2/terrain/flag2.ter",Qo),children:"CTF 2"})]}),k.jsxs("div",{className:"grid grid-cols-1 grid-rows-11 grid-flow-col text-2xl gap-1 min-w-40",children:[k.jsx("p",{children:"Billy Frontier Levels"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/swamp_duel.ter",Ad),children:"Swamp Duel"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/swamp_shootout.ter",Ad),children:"Swamp Shootout"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/swamp_stampede.ter",Ad),children:"Swamp Stampede"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/town_duel.ter",Ad),children:"Town Duel"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/town_shootout.ter",Ad),children:"Town Shootout"}),k.jsx(et,{onClick:()=>d("assets/billyFrontier/terrain/town_stampede.ter",Ad),children:"Town Stampede"})]})," "]})]})]})}async function qw(t,e){let n=0;return await new Promise((s,o)=>{if(e.GAME_TYPE!==It.BUGDOM){let a=0;for(;n!=t.byteLength;){const m=t.getInt32(n);if(n+=4,m===0)break;n+=m,a++}n=0;const l=new Array(a),u={count:0};let d=0;for(;n<t.byteLength;){const m=t.getInt32(n);n+=4;const g=new DataView(t.buffer.slice(n,n+m)),v=e.SUPERTILE_TEXMAP_SIZE*e.SUPERTILE_TEXMAP_SIZE*2;n+=m;const y=new RN;y.onmessage=x=>{const S=x.data;if(S.type!=="decompressRes")return;const _=document.createElement("canvas");_.width=e.SUPERTILE_TEXMAP_SIZE,_.height=e.SUPERTILE_TEXMAP_SIZE;const M=_.getContext("2d");if(!M)throw o("Bad data!"),new Error("Bad data!");M.putImageData(S.imageData,0,0),l[S.id]=_,u.count++,u.count===a&&s(l),y.terminate()},y.postMessage({compressedDataView:g,outputSize:v,type:"decompress",id:d,width:e.SUPERTILE_TEXMAP_SIZE,height:e.SUPERTILE_TEXMAP_SIZE}),d++}return[]}})}var ED=Symbol.for("immer-nothing"),n4=Symbol.for("immer-draftable"),so=Symbol.for("immer-state");function ua(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bp=Object.getPrototypeOf;function zp(t){return!!t&&!!t[so]}function hf(t){var e;return t?wD(t)||Array.isArray(t)||!!t[n4]||!!((e=t.constructor)!=null&&e[n4])||sE(t)||oE(t):!1}var _Y=Object.prototype.constructor.toString();function wD(t){if(!t||typeof t!="object")return!1;const e=Bp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_Y}function qy(t,e){iE(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function iE(t){const e=t[so];return e?e.type_:Array.isArray(t)?1:sE(t)?2:oE(t)?3:0}function g2(t,e){return iE(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function MD(t,e,n){const r=iE(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function yY(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function sE(t){return t instanceof Map}function oE(t){return t instanceof Set}function Wd(t){return t.copy_||t.base_}function v2(t,e){if(sE(t))return new Map(t);if(oE(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=wD(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[so];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Bp(t),r)}else{const r=Bp(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Q0(t,e=!1){return aE(t)||zp(t)||!hf(t)||(iE(t)>1&&(t.set=t.add=t.clear=t.delete=xY),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Q0(r,!0))),t}function xY(){ua(2)}function aE(t){return Object.isFrozen(t)}var SY={};function pf(t){const e=SY[t];return e||ua(0,t),e}var J0;function CD(){return J0}function EY(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function r4(t,e){e&&(pf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function _2(t){y2(t),t.drafts_.forEach(wY),t.drafts_=null}function y2(t){t===J0&&(J0=t.parent_)}function i4(t){return J0=EY(J0,t)}function wY(t){const e=t[so];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function s4(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[so].modified_&&(_2(e),ua(4)),hf(t)&&(t=Ky(e,t),e.parent_||$y(e,t)),e.patches_&&pf("Patches").generateReplacementPatches_(n[so].base_,t,e.patches_,e.inversePatches_)):t=Ky(e,n,[]),_2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ED?t:void 0}function Ky(t,e,n){if(aE(e))return e;const r=e[so];if(!r)return qy(e,(i,s)=>o4(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return $y(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),qy(s,(a,l)=>o4(t,r,i,a,l,n,o)),$y(t,i,!1),n&&t.patches_&&pf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function o4(t,e,n,r,i,s,o){if(zp(i)){const a=s&&e&&e.type_!==3&&!g2(e.assigned_,r)?s.concat(r):void 0,l=Ky(t,i,a);if(MD(n,r,l),zp(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(hf(i)&&!aE(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ky(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&$y(t,i)}}function $y(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Q0(e,n)}function MY(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:CD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=AA;n&&(i=[r],s=e1);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var AA={get(t,e){if(e===so)return t;const n=Wd(t);if(!g2(n,e))return CY(t,n,e);const r=n[e];return t.finalized_||!hf(r)?r:r===Kw(t.base_,e)?($w(t),t.copy_[e]=S2(r,t)):r},has(t,e){return e in Wd(t)},ownKeys(t){return Reflect.ownKeys(Wd(t))},set(t,e,n){const r=AD(Wd(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Kw(Wd(t),e),s=i==null?void 0:i[so];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(yY(n,i)&&(n!==void 0||g2(t.base_,e)))return!0;$w(t),x2(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Kw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,$w(t),x2(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Wd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ua(11)},getPrototypeOf(t){return Bp(t.base_)},setPrototypeOf(){ua(12)}},e1={};qy(AA,(t,e)=>{e1[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});e1.deleteProperty=function(t,e){return e1.set.call(this,t,e,void 0)};e1.set=function(t,e,n){return AA.set.call(this,t[0],e,n,t[0])};function Kw(t,e){const n=t[so];return(n?Wd(n):t)[e]}function CY(t,e,n){var i;const r=AD(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function AD(t,e){if(!(e in t))return;let n=Bp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Bp(n)}}function x2(t){t.modified_||(t.modified_=!0,t.parent_&&x2(t.parent_))}function $w(t){t.copy_||(t.copy_=v2(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var AY=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...u){return o.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&ua(6),r!==void 0&&typeof r!="function"&&ua(7);let i;if(hf(e)){const s=i4(this),o=S2(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?_2(s):y2(s)}return r4(s,r),s4(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===ED&&(i=void 0),this.autoFreeze_&&Q0(i,!0),r){const s=[],o=[];pf("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else ua(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){hf(t)||ua(8),zp(t)&&(t=bY(t));const e=i4(this),n=S2(t,void 0);return n[so].isManual_=!0,y2(e),n}finishDraft(t,e){const n=t&&t[so];(!n||!n.isManual_)&&ua(9);const{scope_:r}=n;return r4(r,e),s4(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=pf("Patches").applyPatches_;return zp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function S2(t,e){const n=sE(t)?pf("MapSet").proxyMap_(t,e):oE(t)?pf("MapSet").proxySet_(t,e):MY(t,e);return(e?e.scope_:CD()).drafts_.push(n),n}function bY(t){return zp(t)||ua(10,t),bD(t)}function bD(t){if(!hf(t)||aE(t))return t;const e=t[so];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=v2(t,e.scope_.immer_.useStrictShallowCopy_)}else n=v2(t,!0);return qy(n,(r,i)=>{MD(n,r,bD(i))}),e&&(e.finalized_=!1),n}var oo=new AY,PY=oo.produce;oo.produceWithPatches.bind(oo);oo.setAutoFreeze.bind(oo);oo.setUseStrictShallowCopy.bind(oo);oo.applyPatches.bind(oo);oo.createDraft.bind(oo);oo.finishDraft.bind(oo);function E2(t){var e=V.useState(function(){return Q0(typeof t=="function"?t():t,!0)}),n=e[1];return[e[0],V.useCallback(function(r){n(typeof r=="function"?PY(r):Q0(r))},[])]}const F1=wi(void 0);var PD=(t=>(t[t.WOOD=0]="WOOD",t[t.WHITE=1]="WHITE",t[t.CANYON=2]="CANYON",t[t.TALLGRASS=3]="TALLGRASS",t[t.SMALLGRASS=4]="SMALLGRASS",t[t.SWAMPTREE=5]="SWAMPTREE",t[t.PICKETFENCE=6]="PICKETFENCE",t))(PD||{});const a4={0:"Wood",1:"White",2:"Canyon",3:"Tall Grass",4:"Small Grass",5:"Swamp Tree",6:"Picket Fence"};var RD=(t=>(t[t.THORN=0]="THORN",t[t.WHEAT=1]="WHEAT",t[t.GRASS=2]="GRASS",t[t.FOREST2=3]="FOREST2",t[t.NIGHT=4]="NIGHT",t[t.POND=5]="POND",t[t.MOSS=6]="MOSS",t[t.WOOD=7]="WOOD",t[t.HIVE=8]="HIVE",t))(RD||{});const l4={0:"Thorn",1:"Wheat",2:"Grass",3:"Forest 2",4:"Night",5:"Pond",6:"Moss",7:"Wood",8:"Hive"};var TD=(t=>(t[t.GRASS=0]="GRASS",t[t.LAWNEDGING=1]="LAWNEDGING",t[t.DOGHAIR=2]="DOGHAIR",t[t.BRICKWALL=3]="BRICKWALL",t[t.DOGCOLLAR=4]="DOGCOLLAR",t[t.DOGHAIRDENSE=5]="DOGHAIRDENSE",t[t.CARD=6]="CARD",t[t.BLOCK=7]="BLOCK",t[t.BALSA=8]="BALSA",t[t.CLOTH=9]="CLOTH",t[t.BOOKS=10]="BOOKS",t[t.COMPUTER=11]="COMPUTER",t[t.SHOEBOX=12]="SHOEBOX",t[t.WATERGRASS=13]="WATERGRASS",t[t.GARBAGECAN=14]="GARBAGECAN",t[t.BOXFENCE=15]="BOXFENCE",t))(TD||{});const u4={0:"Grass",1:"Lawn Edging",2:"Dog Hair",3:"Brick Wall",4:"Dog Collar",5:"Dog Hair Dense",6:"Card",7:"Block",8:"Balsa",9:"Cloth",10:"Books",11:"Computer",12:"Shoebox",13:"Water Grass",14:"Garbage Can",15:"Box Fence"};var LD=(t=>(t[t.DESERTSKIN=0]="DESERTSKIN",t[t.INVISIBLE=1]="INVISIBLE",t[t.CHINA1=2]="CHINA1",t[t.CHINA2=3]="CHINA2",t[t.CHINA3=4]="CHINA3",t[t.CHINA4=5]="CHINA4",t[t.HIEROGLYPHS=6]="HIEROGLYPHS",t[t.CAMEL=7]="CAMEL",t[t.FARM=8]="FARM",t[t.AZTEC=9]="AZTEC",t[t.ROCKWALL=10]="ROCKWALL",t[t.TALLROCKWALL=11]="TALLROCKWALL",t[t.ROCKPILE=12]="ROCKPILE",t[t.TRIBAL=13]="TRIBAL",t[t.HORNS=14]="HORNS",t[t.CRETE=15]="CRETE",t[t.ROCKPILE2=16]="ROCKPILE2",t[t.ORANGEROCK=17]="ORANGEROCK",t[t.SEAWEED=18]="SEAWEED",t[t.SEAWEED2=19]="SEAWEED2",t[t.SEAWEED3=20]="SEAWEED3",t[t.SEAWEED4=21]="SEAWEED4",t[t.SEAWEED5=22]="SEAWEED5",t[t.SEAWEED6=23]="SEAWEED6",t[t.CHINACONCRETE=24]="CHINACONCRETE",t[t.CHINADESIGN=25]="CHINADESIGN",t[t.VIKING=26]="VIKING",t))(LD||{});const c4={0:"Desert Skin",1:"Invisible",2:"China 1",3:"China 2",4:"China 3",5:"China 4",6:"Hieroglyphs",7:"Camel",8:"Farm",9:"Aztec",10:"Rock Wall",11:"Tall Rock Wall",12:"Rockpile",13:"Tribal",14:"Horns",15:"Crete",16:"Rockpile 2",17:"Orange Rock",18:"Seaweed",19:"Seaweed 2",20:"Seaweed 3",21:"Seaweed 4",22:"Seaweed 5",23:"Seaweed 6",24:"China Concrete",25:"China Design",26:"Viking"};var ND=(t=>(t[t.LEVEL_1_BLOCKENEMY=0]="LEVEL_1_BLOCKENEMY",t[t.LEVEL_1_PINETREE=1]="LEVEL_1_PINETREE",t[t.LEVEL_2_BLOCKENEMY=2]="LEVEL_2_BLOCKENEMY",t[t.LEVEL_2_DUSTDEVIL=3]="LEVEL_2_DUSTDEVIL",t[t.LEVEL_3_BLOCKENEMY=4]="LEVEL_3_BLOCKENEMY",t))(ND||{});const d4={0:"Level 1 Block Enemy",1:"Level 1 Pine Tree",2:"Level 2 Block Enemy",3:"Level 2 Dust Devil",4:"Level 3 Block Enemy"};var DD=(t=>(t[t.FARMWOOD=0]="FARMWOOD",t[t.CORNSTALK=1]="CORNSTALK",t[t.CHICKENWIRE=2]="CHICKENWIRE",t[t.METALFARM=3]="METALFARM",t[t.PINKCRYSTAL=4]="PINKCRYSTAL",t[t.MECH=5]="MECH",t[t.SLIMETREE=6]="SLIMETREE",t[t.BLUECRYSTAL=7]="BLUECRYSTAL",t[t.MECH2=8]="MECH2",t[t.JUNGLEWOOD=9]="JUNGLEWOOD",t[t.JUNGLEFERN=10]="JUNGLEFERN",t[t.LAMP=11]="LAMP",t[t.RUBBLE=12]="RUBBLE",t[t.CRUNCH=13]="CRUNCH",t[t.FUN=14]="FUN",t[t.HEDGE=15]="HEDGE",t[t.LINE=16]="LINE",t[t.TENT=17]="TENT",t[t.LAVAFENCE=18]="LAVAFENCE",t[t.ROCKFENCE=19]="ROCKFENCE",t[t.SAUCER=20]="SAUCER",t[t.NEURONFENCE=21]="NEURONFENCE",t))(DD||{});const f4={0:"Farmwood",1:"Cornsilk",2:"Chicken Wire",3:"Metal Farm",4:"Pink Crystal",5:"Mechanical",6:"Slimetree",7:"Blue Crystal",8:"Mechanical 2",9:"Jungle Wood",10:"Jungle Fern",11:"Lamp",12:"Rubble",13:"Crunch",14:"Fun",15:"Hedge",16:"Line",17:"Tent",18:"Lava Fence",19:"Rock Fence",20:"Saucer",21:"Neuron Fence"};function Zw(t,e){return t.GAME_TYPE===It.BILLY_FRONTIER?RY(e):t.GAME_TYPE===It.BUGDOM?TY(e):t.GAME_TYPE===It.BUGDOM_2?LY(e):t.GAME_TYPE===It.CRO_MAG?NY(e):t.GAME_TYPE===It.NANOSAUR_2?DY(e):t.GAME_TYPE===It.OTTO_MATIC?kY(e):"Unknown Fence."}function RY(t){return t in a4?a4[t]:"Unknown Billy Fence."}function TY(t){return t in l4?l4[t]:"Unknown Bugdom Fence."}function LY(t){return t in u4?u4[t]:"Unknown Bugdom 2 Fence."}function NY(t){return t in c4?c4[t]:"Unknown Cro Mag Fence."}function DY(t){return t in d4?d4[t]:"Unknown Nanosaur 2 Fence."}function kY(t){return t in f4?f4[t]:"Unknown Otto Fence."}function FY(t){if(t.GAME_TYPE===It.BILLY_FRONTIER)return Object.keys(PD);if(t.GAME_TYPE===It.BUGDOM)return Object.keys(RD);if(t.GAME_TYPE===It.BUGDOM_2)return Object.keys(TD);if(t.GAME_TYPE===It.CRO_MAG)return Object.keys(LD);if(t.GAME_TYPE===It.NANOSAUR_2)return Object.keys(ND);if(t.GAME_TYPE===It.OTTO_MATIC)return Object.keys(DD);throw new Error("Invalid Game Type")}const qs=1e3;function OY({data:t,setData:e}){const n=hn(Dr),[r,i]=or(F1),s=r!==void 0?t.Fenc[1e3].obj[r]:null,o=FY(n).map(a=>parseInt(a)).filter(a=>isNaN(a)===!1);return k.jsxs("div",{className:"flex flex-col gap-2",children:[s===null?k.jsx(et,{onClick:()=>{e(a=>{const l=Object.keys(a.Fenc[1e3].obj),u=l.length!==0?l[l.length-1]:"999",d=parseInt(u)+1;a.Fenc[1e3].obj[d]={fenceType:0,numNubs:2,junkNubListPtr:0,bbTop:0,bbBottom:0,bbLeft:0,bbRight:0},a.FnNb[d+qs]={name:"Fence Nub List",obj:[[0,0],[1e3,1e3]],order:999},a.FnNb[d+qs].obj[0]=[0,0],a.FnNb[d+qs].obj[1]=[1e3,1e3]})},children:"Add New Fence"}):k.jsxs("p",{children:["Fence ",r," (",s.numNubs," points)"]}),k.jsxs("div",{className:"grid grid-cols-[2fr_1fr] gap-2 w-full",children:[k.jsx("div",{className:"flex flex-col",children:s!==null&&k.jsxs(k.Fragment,{children:[k.jsx("img",{src:n.GAME_TYPE===It.OTTO_MATIC?`assets/ottoMatic/fences/fence${String(s.fenceType).padStart(3,"0")}.png`:"",className:"max-h-56 mx-auto"}),k.jsxs(nu,{value:Zw(n,s.fenceType),onValueChange:a=>{const l=parseInt(a);e(u=>{r!==void 0&&(u.Fenc[1e3].obj[r].fenceType=l)})},children:[k.jsx(tl,{children:k.jsx(k1,{children:Zw(n,s.fenceType)})}),k.jsx(nl,{children:o.map(a=>k.jsx(li,{className:"text-black",value:a.toString(),children:Zw(n,a)},a))})]})]})}),s&&k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsx(et,{disabled:r===void 0,onClick:()=>{e(a=>{r!==void 0&&(a.Fenc[1e3].obj[r].numNubs++,a.FnNb[r+qs].obj.unshift([a.FnNb[r+qs].obj[0][0]-25,a.FnNb[r+qs].obj[0][1]-25]))})},children:"Add Front Nub"}),k.jsx(et,{disabled:r===void 0,onClick:()=>{e(a=>{if(r===void 0)return;const l=a.FnNb[r+qs].obj.length-1;a.Fenc[1e3].obj[r].numNubs++,a.FnNb[r+qs].obj.push([a.FnNb[r+qs].obj[l][0]+25,a.FnNb[r+qs].obj[l][1]+25])})},children:"Add Back Nub"}),k.jsx(_c,{disabled:r===void 0||t.Fenc[1e3].obj[r].numNubs<=1,onClick:()=>{e(a=>{r===void 0||a.Fenc[1e3].obj[r].numNubs<=1||(a.Fenc[1e3].obj[r].numNubs--,a.FnNb[r+qs].obj.shift())})},children:"Remove Front Nub"}),k.jsx(_c,{disabled:r===void 0||t.Fenc[1e3].obj[r].numNubs<=1,onClick:()=>{e(a=>{r===void 0||a.Fenc[1e3].obj[r].numNubs<=1||(a.Fenc[1e3].obj[r].numNubs--,a.FnNb[r+qs].obj.pop())})},children:"Remove Back Nub"}),k.jsx(_c,{disabled:r===void 0,onClick:()=>{r!==void 0&&(e(a=>{a.Fenc[1e3].obj.splice(r,1);let l;for(const u of Object.keys(a.FnNb))l=u,parseInt(u)>r+qs&&(a.FnNb[parseInt(u)-1]=a.FnNb[parseInt(u)]);if(l===void 0)throw new Error("Missing Final Nubkey");delete a.FnNb[parseInt(l)]}),i(void 0))},children:"Delete Fence"})]})]})]})}const bA=wi(void 0),kD=wi(void 0);var FD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.BasicPlant=1]="BasicPlant",t[t.SpacePodGenerator=2]="SpacePodGenerator",t[t.Enemy_Squooshy=3]="Enemy_Squooshy",t[t.Human=4]="Human",t[t.Atom=5]="Atom",t[t.PowerupPod=6]="PowerupPod",t[t.Enemy_BrainAlien=7]="Enemy_BrainAlien",t[t.Enemy_Onion=8]="Enemy_Onion",t[t.Enemy_Corn=9]="Enemy_Corn",t[t.Enemy_Tomato=10]="Enemy_Tomato",t[t.Barn=11]="Barn",t[t.Silo=12]="Silo",t[t.WoodenGate=13]="WoodenGate",t[t.PhonePole=14]="PhonePole",t[t.Tractor=15]="Tractor",t[t.Sprout=16]="Sprout",t[t.CornStalk=17]="CornStalk",t[t.BigLeafPlant=18]="BigLeafPlant",t[t.MetalGate=19]="MetalGate",t[t.FencePost=20]="FencePost",t[t.Windmill=21]="Windmill",t[t.MetalTub=22]="MetalTub",t[t.OutHouse=23]="OutHouse",t[t.Rock=24]="Rock",t[t.Hay=25]="Hay",t[t.ExitRocket=26]="ExitRocket",t[t.Checkpoint=27]="Checkpoint",t[t.SlimePipe=28]="SlimePipe",t[t.FallingCrystal=29]="FallingCrystal",t[t.Enemy_Blob=30]="Enemy_Blob",t[t.BumperBubble=31]="BumperBubble",t[t.BasicCrystal=32]="BasicCrystal",t[t.InertBubble=33]="InertBubble",t[t.SlimeTree=34]="SlimeTree",t[t.MagnetMonster=35]="MagnetMonster",t[t.FallingSlimePlatform=36]="FallingSlimePlatform",t[t.BubblePump=37]="BubblePump",t[t.SlimeMech=38]="SlimeMech",t[t.SpinningPlatform=39]="SpinningPlatform",t[t.MovingPlatform=40]="MovingPlatform",t[t.MachineBoss=41]="MachineBoss",t[t.BlobBossTube=42]="BlobBossTube",t[t.ScaffoldingPost=43]="ScaffoldingPost",t[t.JungleGate=44]="JungleGate",t[t.CrunchDoor=45]="CrunchDoor",t[t.Manhole=46]="Manhole",t[t.CloudPlatform=47]="CloudPlatform",t[t.CloudTunnel=48]="CloudTunnel",t[t.Enemy_Flamester=49]="Enemy_Flamester",t[t.Enemy_GiantLizard=50]="Enemy_GiantLizard",t[t.Enemy_FlyTrap=51]="Enemy_FlyTrap",t[t.Enemy_Mantis=52]="Enemy_Mantis",t[t.TurtlePlatform=53]="TurtlePlatform",t[t.Smashable=54]="Smashable",t[t.LeafPlatform=55]="LeafPlatform",t[t.HelpBeacon=56]="HelpBeacon",t[t.Teleporter=57]="Teleporter",t[t.ZipLinePost=58]="ZipLinePost",t[t.Enemy_Mutant=59]="Enemy_Mutant",t[t.Enemy_MutantRobot=60]="Enemy_MutantRobot",t[t.HumanScientist=61]="HumanScientist",t[t.ProximityMine=62]="ProximityMine",t[t.LampPost=63]="LampPost",t[t.DebrisGate=64]="DebrisGate",t[t.GraveStone=65]="GraveStone",t[t.CrashedShip=66]="CrashedShip",t[t.ChainReactingMine=67]="ChainReactingMine",t[t.Rubble=68]="Rubble",t[t.TeleporterMap=69]="TeleporterMap",t[t.GreenSteam=70]="GreenSteam",t[t.TentacleGenerator=71]="TentacleGenerator",t[t.PitcherPlantBoss=72]="PitcherPlantBoss",t[t.PitcherPod=73]="PitcherPod",t[t.TractorBeamPost=74]="TractorBeamPost",t[t.Cannon=75]="Cannon",t[t.BumperCar=76]="BumperCar",t[t.TireBumperStrip=77]="TireBumperStrip",t[t.Enemy_Clown=78]="Enemy_Clown",t[t.Clownfish=79]="Clownfish",t[t.BumperCarPowerPost=80]="BumperCarPowerPost",t[t.Enemy_StrongMan=81]="Enemy_StrongMan",t[t.BumperCarGate=82]="BumperCarGate",t[t.RocketSled=83]="RocketSled",t[t.TrapDoor=84]="TrapDoor",t[t.ZigZagSlats=85]="ZigZagSlats",t[t.Unknown=86]="Unknown",t[t.LavaPillar=87]="LavaPillar",t[t.VolcanoGeneratorZone=88]="VolcanoGeneratorZone",t[t.JawsBot=89]="JawsBot",t[t.IceSaucer=90]="IceSaucer",t[t.RunwayLights=91]="RunwayLights",t[t.Enemy_IceCube=92]="Enemy_IceCube",t[t.HammerBot=93]="HammerBot",t[t.DrillBot=94]="DrillBot",t[t.SwingerBot=95]="SwingerBot",t[t.LavaStone=96]="LavaStone",t[t.Snowball=97]="Snowball",t[t.LavaPlatform=98]="LavaPlatform",t[t.Smoker=99]="Smoker",t[t.RadarDish=100]="RadarDish",t[t.PeopleHut=101]="PeopleHut",t[t.Beemer=102]="Beemer",t[t.Railgun=103]="Railgun",t[t.Turret=104]="Turret",t[t.Enemy_BrainBoss=105]="Enemy_BrainBoss",t[t.BlobArrow=106]="BlobArrow",t[t.NeuronStrand=107]="NeuronStrand",t[t.BrainPort=108]="BrainPort",t))(FD||{});const h4={0:"My Start Coords",1:"Basic Plant",2:"Space Pod Generator",3:"Squooshy Enemy",4:"Human",5:"Atom",6:"Powerup Pod",7:"Brain Alien Enemy",8:"Onion Enemy",9:"Corn Enemy",10:"Tomato Enemy",11:"Barn",12:"Silo",13:"Wooden Gate",14:"Phone Pole",15:"Farm Tractor",16:"Sprout",17:"Corn Stalk",18:"Big Leaf Plant",19:"Metal Gate",20:"Fence Post",21:"Windmill",22:"Metal Tub",23:"Outhouse",24:"Rock",25:"Hay Bale",26:"Exit Rocket",27:"Checkpoint",28:"Slime Pipe",29:"Falling Crystal",41:"Machine Boss",42:"Blob Boss Tube",43:"Scaffolding Post",44:"Jungle Gate",45:"Crunch Door",46:"Manhole",47:"Cloud Platform",48:"Cloud Tunnel",49:"Flamester",50:"Giant Lizard",51:"Fly Trap",52:"Mantis",53:"Turtle Platform",54:"Smashable",55:"Leaf Platform",56:"Help Beacon",57:"Teleporter",58:"Zip Line Post",59:"Mutant Enemy",30:"Blob Enemy",31:"Bumper Bubble",32:"Basic Crystal",33:"Soap Bubble",34:"Slime Tree",35:"Magnet Monster",36:"Falling Slime Platform",37:"Bubble Pump",38:"Slime Mech",39:"Spinning Platform",40:"Moving Platform",60:"Mutant Robot Enemy",61:"Scientist Human",62:"Proximity Mine",63:"Lamp Posts",64:"Debris Gate",65:"Grave Stone",66:"Crashed Ship",67:"Chain Reacting Mine",68:"Rubble",69:"Teleporter Map",70:"Green Steam",71:"Tentacle Generator",72:"Pitcher Plant Boss",73:"Pitcher Pod",74:"Shepherd Beam Post",75:"Cannon",76:"Bumper Car",77:"Tire Bumper",78:"Clown Enemy",79:"Clown Fish",80:"Bumper Car Power Post",81:"Strongman Enemy",82:"Bumper Car Gate",83:"Tobogan",84:"Trap Door",85:"Zig-Zag Slats",86:"Unknown",87:"Lava Pillar",88:"Volcano Generator",89:"Jaws Bot",90:"Ice Saucer",91:"Runway Lights",92:"Ice Cube",93:"Hammer Bot",94:"Drill Bot",95:"Swinger Bot",96:"Lava Stone",97:"Snowball",98:"Lava Platform",99:"Smoker",100:"Tower / Radar Dish",101:"People Hut",102:"Beemer",103:"Rail Gun",104:"Turret",105:"Brain Boss",106:"Blob Arrow",107:"Neuron Strand",108:"Brain Port"},qe={flags:"Unknown",p0:"Unknown",p1:"Unknown",p2:"Unknown",p3:"Unknown"},Xa={0:qe,1:qe,2:qe,3:qe,4:qe,5:qe,6:qe,7:qe,8:qe,9:qe,10:qe,11:qe,12:qe,13:qe,14:qe,15:qe,16:qe,17:qe,18:qe,19:qe,20:qe,21:qe,22:qe,23:qe,24:qe,25:qe,26:qe,27:qe,28:qe,29:qe,41:qe,42:qe,43:qe,44:qe,45:qe,46:qe,47:qe,48:qe,49:qe,50:qe,51:qe,52:qe,53:qe,54:qe,55:qe,56:qe,57:qe,58:qe,59:qe,30:qe,31:qe,32:qe,33:qe,34:qe,35:qe,36:qe,37:qe,38:qe,39:qe,40:qe,60:qe,61:qe,62:qe,63:qe,64:qe,65:qe,66:qe,67:qe,68:qe,69:qe,70:qe,71:qe,72:qe,73:qe,74:qe,75:qe,76:qe,77:qe,78:qe,79:qe,80:qe,81:qe,82:qe,83:qe,84:qe,85:qe,86:qe,87:qe,88:qe,89:qe,90:qe,91:qe,92:qe,93:qe,94:qe,95:qe,96:qe,97:qe,98:qe,99:qe,100:qe,101:qe,102:qe,103:qe,104:qe,105:qe,106:qe,107:qe,108:qe};function OD(t){return typeof t=="string"&&(t=parseInt(t)),isNaN(t)?0:t>65535?65535:t<0?0:t}function lc(t){return typeof t=="string"&&(t=parseInt(t)||0),isNaN(t)?0:t>255?255:t<0?0:t}const jr=V.forwardRef(({className:t,type:e,...n},r)=>k.jsx("input",{type:e,className:Si("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));jr.displayName="Input";var ID=(t=>(t[t.StartCoords=0]="StartCoords",t[t.Dueler=1]="Dueler",t[t.Building=2]="Building",t[t.HeadStone=3]="HeadStone",t[t.Plant=4]="Plant",t[t.DuelRockWall=5]="DuelRockWall",t[t.Coffin=6]="Coffin",t[t.FrogMan_Shootout=7]="FrogMan_Shootout",t[t.Bandito_Shootout=8]="Bandito_Shootout",t[t.Barrel=9]="Barrel",t[t.WoodCrate=10]="WoodCrate",t[t.HayBale=11]="HayBale",t[t.ShootoutSaloon=12]="ShootoutSaloon",t[t.ShootoutAlley=13]="ShootoutAlley",t[t.Post=14]="Post",t[t.Flame=15]="Flame",t[t.Smoker=16]="Smoker",t[t.SceneryKangaCow=17]="SceneryKangaCow",t[t.Table=18]="Table",t[t.Chair=19]="Chair",t[t.StampedeKanga=20]="StampedeKanga",t[t.Boost=21]="Boost",t[t.StampedeCamera=22]="StampedeCamera",t[t.Wallker=23]="Wallker",t[t.DeadTree=24]="DeadTree",t[t.Rock=25]="Rock",t[t.ElectricFence=26]="ElectricFence",t[t.Tumbleweed=27]="Tumbleweed",t[t.TremorGrave=28]="TremorGrave",t[t.TeePee=29]="TeePee",t[t.SwampCabin=30]="SwampCabin",t[t.TremorAlien_Shootout=31]="TremorAlien_Shootout",t[t.FreeLifePOW=32]="FreeLifePOW",t[t.SpearSkull=33]="SpearSkull",t[t.StampedeKangarex=34]="StampedeKangarex",t[t.Shorty_Shootout=35]="Shorty_Shootout",t[t.Peso=36]="Peso",t))(ID||{});const p4={0:"My Start Coords",1:"Dueler",2:"Building",3:"HeadStone",4:"Plant",5:"DuelRockWall",6:"Coffin",7:"FrogMan_Shootout",8:"Bandito_Shootout",9:"Barrel",10:"WoodCrate",11:"HayBale",12:"ShootoutSaloon",13:"ShootoutAlley",14:"Post",15:"Flame",16:"Smoker",17:"SceneryKangaCow",18:"Table",19:"Chair",20:"StampedeKanga",21:"Boost",22:"StampedeCamera",23:"Wallker",24:"DeadTree",25:"Rock",26:"ElectricFence",27:"Tumbleweed",28:"TremorGrave",29:"TeePee",30:"SwampCabin",31:"TremorAlien_Shootout",32:"FreeLifePOW",33:"SpearSkull",34:"StampedeKangarex",35:"Shorty_Shootout",36:"Peso"};var UD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.LadyBugBonus=1]="LadyBugBonus",t[t.Nut=2]="Nut",t[t.Enemy_BoxerFly=3]="Enemy_BoxerFly",t[t.Rock=4]="Rock",t[t.Clover=5]="Clover",t[t.Grass=6]="Grass",t[t.Weed=7]="Weed",t[t.SlugEnemy=8]="SlugEnemy",t[t.Enemy_Ant=9]="Enemy_Ant",t[t.SunFlower=10]="SunFlower",t[t.Cosmo=11]="Cosmo",t[t.Poppy=12]="Poppy",t[t.WallEnd=13]="WallEnd",t[t.WaterPatch=14]="WaterPatch",t[t.Enemy_FireAnt=15]="Enemy_FireAnt",t[t.WaterBug=16]="WaterBug",t[t.Tree=17]="Tree",t[t.DragonFly=18]="DragonFly",t[t.CatTail=19]="CatTail",t[t.DuckWeed=20]="DuckWeed",t[t.LilyFlower=21]="LilyFlower",t[t.LilyPad=22]="LilyPad",t[t.PondGrass=23]="PondGrass",t[t.Reed=24]="Reed",t[t.Enemy_PondFish=25]="Enemy_PondFish",t[t.HoneycombPlatform=26]="HoneycombPlatform",t[t.HoneyPatch=27]="HoneyPatch",t[t.Firecracker=28]="Firecracker",t[t.Detonator=29]="Detonator",t[t.HiveDoor=30]="HiveDoor",t[t.Enemy_Mosquito=31]="Enemy_Mosquito",t[t.Checkpoint=32]="Checkpoint",t[t.LawnDoor=33]="LawnDoor",t[t.Dock=34]="Dock",t[t.Foot=35]="Foot",t[t.Enemy_Spider=36]="Enemy_Spider",t[t.Enemy_Caterpiller=37]="Enemy_Caterpiller",t[t.FireFly=38]="FireFly",t[t.ExitLog=39]="ExitLog",t[t.RootSwing=40]="RootSwing",t[t.Thorn=41]="Thorn",t[t.FireFlyTargetLocation=42]="FireFlyTargetLocation",t[t.FireWall=43]="FireWall",t[t.WaterValve=44]="WaterValve",t[t.HoneyTube=45]="HoneyTube",t[t.Enemy_Larva=46]="Enemy_Larva",t[t.Enemy_FlyingBee=47]="Enemy_FlyingBee",t[t.Enemy_WorkerBee=48]="Enemy_WorkerBee",t[t.Enemy_QueenBee=49]="Enemy_QueenBee",t[t.RockLedge=50]="RockLedge",t[t.Stump=51]="Stump",t[t.RollingBoulder=52]="RollingBoulder",t[t.Enemy_Roach=53]="Enemy_Roach",t[t.Enemy_Skippy=54]="Enemy_Skippy",t[t.SlimePatch=55]="SlimePatch",t[t.LavaPatch=56]="LavaPatch",t[t.BentAntPipe=57]="BentAntPipe",t[t.HorizAntPipe=58]="HorizAntPipe",t[t.Enemy_KingAnt=59]="Enemy_KingAnt",t[t.Faucet=60]="Faucet",t[t.WoodPost=61]="WoodPost",t[t.FloorSpike=62]="FloorSpike",t[t.KingWaterPipe=63]="KingWaterPipe",t))(UD||{});const m4={0:"My Start Coords",1:"LadyBug Bonus",2:"Nut",3:"ENEMY: BOXERFLY",4:"Rock",5:"Clover",6:"Grass",7:"Weed",8:"Slug enemy",9:"Ant",10:"Sunflower",11:"Cosmo",12:"Poppy",13:"Wall End",14:"Water Patch",15:"FireAnt",16:"WaterBug",17:"Tree (flight level)",18:"Dragonfly",19:"Cat Tail",20:"Duck Weed",21:"Lily Flower",22:"Lily Pad",23:"Pond Grass",24:"Reed",25:"Pond Fish Enemy",26:"Honeycomb platform",27:"Honey Patch",28:"Firecracker",29:"Detonator",30:"Hive Door",31:"Mosquito Enemy",32:"Checkpoint",33:"Lawn Door",34:"Dock",35:"Foot",36:"ENEMY: SPIDER",37:"ENEMY: CATERPILLER",38:"Firefly",39:"Exit Log",40:"Root swing",41:"Thorn Bush",42:"FireFly Target Location",43:"Fire Wall",44:"Water Valve",45:"Honey Tube",46:"ENEMY: LARVA",47:"ENEMY: FLYING BEE",48:"ENEMY: WORKER BEE",49:"ENEMY: QUEEN BEE",50:"Rock Ledge",51:"Stump",52:"Rolling Boulder",53:"ENEMY: ROACH",54:"ENEMY: SKIPPY",55:"Slime Patch",56:"Lava Patch",57:"Bent Ant Pipe",58:"Horiz Ant Pipe",59:"ENEMY: KING ANT",60:"Water Faucet",61:"Wooden Post",62:"Floor Spike",63:"King Water Pipe"};var BD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.Snail=1]="Snail",t[t.SprinklerHead=2]="SprinklerHead",t[t.Butterfly=3]="Butterfly",t[t.Enemy_Gnome=4]="Enemy_Gnome",t[t.Daisy=5]="Daisy",t[t.Grass=6]="Grass",t[t.SnailShell=7]="SnailShell",t[t.Tulip=8]="Tulip",t[t.Acorn=9]="Acorn",t[t.Enemy_HouseFly=10]="Enemy_HouseFly",t[t.Scarecrow=11]="Scarecrow",t[t.Enemy_EvilPlant=12]="Enemy_EvilPlant",t[t.Door=13]="Door",t[t.RideBall=14]="RideBall",t[t.BowlingMarble=15]="BowlingMarble",t[t.BowlingPins=16]="BowlingPins",t[t.Brick=17]="Brick",t[t.Post=18]="Post",t[t.Chipmunk=19]="Chipmunk",t[t.ShrubRoot=20]="ShrubRoot",t[t.Pebble=21]="Pebble",t[t.SnakeGenerator=22]="SnakeGenerator",t[t.PoolCoping=23]="PoolCoping",t[t.PoolLeaf=24]="PoolLeaf",t[t.NilAdd=25]="NilAdd",t[t.SquishBerry=26]="SquishBerry",t[t.DogHouse=27]="DogHouse",t[t.Windmill=28]="Windmill",t[t.Rose=29]="Rose",t[t.TulipPot=30]="TulipPot",t[t.BeachBall=31]="BeachBall",t[t.ChlorineFloat=32]="ChlorineFloat",t[t.PoolRingFloat=33]="PoolRingFloat",t[t.DrainPipe=34]="DrainPipe",t[t.POW=35]="POW",t[t.Firecracker=36]="Firecracker",t[t.GlassBottle=37]="GlassBottle",t[t.Enemy_Flea=38]="Enemy_Flea",t[t.Enemy_Tick=39]="Enemy_Tick",t[t.SlotCar=40]="SlotCar",t[t.LetterBlock=41]="LetterBlock",t[t.MouseTrap=42]="MouseTrap",t[t.Enemy_ToySoldier=43]="Enemy_ToySoldier",t[t.FinishLine=44]="FinishLine",t[t.Enemy_Otto=45]="Enemy_Otto",t[t.Puzzle=46]="Puzzle",t[t.LegoWall=47]="LegoWall",t[t.FlashLight=48]="FlashLight",t[t.DCell=49]="DCell",t[t.Crayon=50]="Crayon",t[t.AntHill=51]="AntHill",t[t.Enemy_Dragonfly=52]="Enemy_Dragonfly",t[t.Cloud=53]="Cloud",t[t.Enemy_Frog=54]="Enemy_Frog",t[t.CardboardBox=55]="CardboardBox",t[t.Trampoline=56]="Trampoline",t[t.MothBall=57]="MothBall",t[t.Vaccum=58]="Vaccum",t[t.ClosetWall=59]="ClosetWall",t[t.Enemy_Moth=60]="Enemy_Moth",t[t.Enemy_ComputerBug=61]="Enemy_ComputerBug",t[t.SiliconPart=62]="SiliconPart",t[t.NilAdd2=63]="NilAdd2",t[t.BookStack=64]="BookStack",t[t.Enemy_Roach=65]="Enemy_Roach",t[t.ShoeBox=66]="ShoeBox",t[t.PictureFrame=67]="PictureFrame",t[t.Enemy_Ant=68]="Enemy_Ant",t[t.Enemy_PondFish=69]="Enemy_PondFish",t[t.LilyPad=70]="LilyPad",t[t.CatTail=71]="CatTail",t[t.Bubbler=72]="Bubbler",t[t.PlatformFlower=73]="PlatformFlower",t[t.FishingLure=74]="FishingLure",t[t.Silverware=75]="Silverware",t[t.PicnicBasket=76]="PicnicBasket",t[t.Kindling=77]="Kindling",t[t.BeeHive=78]="BeeHive",t[t.SodaCan=79]="SodaCan",t[t.Veggie=80]="Veggie",t[t.Jar=81]="Jar",t[t.TinCan=82]="TinCan",t[t.Detergent=83]="Detergent",t[t.BoxWall=84]="BoxWall",t[t.GliderPart=85]="GliderPart",t))(BD||{});const g4={0:"Start Coords",1:"Snail",2:"Sprinkler Head",3:"Butterfly",4:"Gnome",5:"Daisy",6:"Grass",7:"Snail Shell",8:"Tulip",9:"Acorn",10:"House Fly",11:"Scarecrow",12:"Evil Plant",13:"Lawn Door",14:"Ride Ball",15:"Bowling Marble",16:"Bowling Pins",17:"Brick",18:"Post",19:"Chipmunk",20:"Shrub Root",21:"Pebble",22:"Snake Generator",23:"Pool Coping",24:"Pool Leaf",25:"Nil Add",26:"Squish Berry",27:"Dog House",28:"Windmill",29:"Rose",30:"Tulip Pot",31:"Beach Ball",32:"Chlorine Float",33:"Pool Ring Float",34:"Drain Pipe",35:"Powerup",36:"Firecracker",37:"Glass Bottle",38:"Flea Enemy",39:"Tick Enemy",40:"Slot Car",41:"Letter Block",42:"Mouse Trap",43:"Toy Soldier",44:"Finish Line",45:"Otto Enemy",46:"Puzzle",47:"Lego Wall",48:"Flashlight",49:"D-cell",50:"Crayon",51:"Ant Hill",52:"Dragonfly Enemy",53:"Cloud",54:"Frog Enemy",55:"Cardboard Box",56:"Trampoline",57:"Moth Ball",58:"Vacuum",59:"PCI Card",60:"Moth Enemy",61:"Computer Bug Enemy",62:"Silicon Part",63:"Nil Add 2",64:"Book Stack",65:"Roach Enemy",66:"Shoe Box",67:"Picture Frame",68:"Ant Enemy",69:"Pond Fish Enemy",70:"Lily Pad",71:"Cat Tail",72:"Bubbler",73:"Platform Flower",74:"Fishing Lure",75:"Silverware",76:"Picnic Basket",77:"Kindling",78:"Bee Hive",79:"Soda Can",80:"Veggie",81:"Jar",82:"Tin Can",83:"Detergent",84:"Box Wall",85:"Glider Part"};var zD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.Cactus=1]="Cactus",t[t.WaterPatch=2]="WaterPatch",t[t.Sign=3]="Sign",t[t.Tree=4]="Tree",t[t.POW=5]="POW",t[t.FinishLine=6]="FinishLine",t[t.Vase=7]="Vase",t[t.Rickshaw=8]="Rickshaw",t[t.FlagPole=9]="FlagPole",t[t.Waterfall=10]="Waterfall",t[t.Token=11]="Token",t[t.StickyTiresPOW=12]="StickyTiresPOW",t[t.SuspensionPOW=13]="SuspensionPOW",t[t.EasterHead=14]="EasterHead",t[t.DustDevil=15]="DustDevil",t[t.SnoMan=16]="SnoMan",t[t.CampFire=17]="CampFire",t[t.Yeti=18]="Yeti",t[t.LavaGenerator=19]="LavaGenerator",t[t.Pillar=20]="Pillar",t[t.Pylon=21]="Pylon",t[t.Boat=22]="Boat",t[t.CamelSpline=23]="CamelSpline",t[t.Statue=24]="Statue",t[t.Sphinx=25]="Sphinx",t[t.TeamTorch=26]="TeamTorch",t[t.TeamBase=27]="TeamBase",t[t.BubbleGenerator=28]="BubbleGenerator",t[t.InvisibilityPOW=29]="InvisibilityPOW",t[t.Rock=30]="Rock",t[t.BrontoNeck=31]="BrontoNeck",t[t.RockOverhang=32]="RockOverhang",t[t.Vine=33]="Vine",t[t.AztecHead=34]="AztecHead",t[t.BeetleSpline=35]="BeetleSpline",t[t.CastleTower=36]="CastleTower",t[t.Catapult=37]="Catapult",t[t.Gong=38]="Gong",t[t.House=39]="House",t[t.Cauldron=40]="Cauldron",t[t.Well=41]="Well",t[t.Volcano=42]="Volcano",t[t.Clock=43]="Clock",t[t.Goddess=44]="Goddess",t[t.StoneHenge=45]="StoneHenge",t[t.Coliseum=46]="Coliseum",t[t.Stump=47]="Stump",t[t.Baracade=48]="Baracade",t[t.VikingFlag=49]="VikingFlag",t[t.TorchPot=50]="TorchPot",t[t.Cannon=51]="Cannon",t[t.Clam=52]="Clam",t[t.SharkSpline=53]="SharkSpline",t[t.TrollSpline=54]="TrollSpline",t[t.WeaponsRack=55]="WeaponsRack",t[t.Capsule=56]="Capsule",t[t.SeaMine=57]="SeaMine",t[t.PteradactylSpline=58]="PteradactylSpline",t[t.Dragon=59]="Dragon",t[t.TarPatch=60]="TarPatch",t[t.MummySpline=61]="MummySpline",t[t.TotemPole=62]="TotemPole",t[t.Druid=63]="Druid",t[t.PolarBearSpline=64]="PolarBearSpline",t[t.Flower=65]="Flower",t[t.VikingSpline=66]="VikingSpline",t))(zD||{});const v4={0:"My Start Coords",1:"Cactus",2:"WaterPatch",3:"Sign",4:"Tree",5:"POW",6:"FinishLine",7:"Vase",8:"Rickshaw",9:"FlagPole",10:"Waterfall",11:"Token",12:"StickyTiresPOW",13:"SuspensionPOW",14:"EasterHead",15:"DustDevil",16:"SnoMan",17:"CampFire",18:"Yeti",19:"LavaGenerator",20:"Pillar",21:"Pylon",22:"Boat",23:"CamelSpline",24:"Statue",25:"Sphinx",26:"TeamTorch",27:"TeamBase",28:"BubbleGenerator",29:"InvisibilityPOW",30:"Rock",31:"BrontoNeck",32:"RockOverhang",33:"Vine",34:"AztecHead",35:"BeetleSpline",36:"CastleTower",37:"Catapult",38:"Gong",39:"House",40:"Cauldron",41:"Well",42:"Volcano",43:"Clock",44:"Goddess",45:"StoneHenge",46:"Coliseum",47:"Stump",48:"Baracade",49:"VikingFlag",50:"TorchPot",51:"Cannon",52:"Clam",53:"SharkSpline",54:"TrollSpline",55:"WeaponsRack",56:"Capsule",57:"SeaMine",58:"PteradactylSpline",59:"Dragon",60:"TarPatch",61:"MummySpline",62:"TotemPole",63:"Druid",64:"PolarBearSpline",65:"Flower",66:"VikingSpline"};var HD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.PowerUp=1]="PowerUp",t[t.Enemy_Tricer=2]="Enemy_Tricer",t[t.Enemy_Rex=3]="Enemy_Rex",t[t.LavaPatch=4]="LavaPatch",t[t.Egg=5]="Egg",t[t.GasVent=6]="GasVent",t[t.Enemy_Ptera=7]="Enemy_Ptera",t[t.Enemy_Stego=8]="Enemy_Stego",t[t.TimePortal=9]="TimePortal",t[t.Tree=10]="Tree",t[t.Boulder=11]="Boulder",t[t.Mushroom=12]="Mushroom",t[t.Bush=13]="Bush",t[t.WaterPatch=14]="WaterPatch",t[t.Crystal=15]="Crystal",t[t.Enemy_Spitter=16]="Enemy_Spitter",t[t.StepStone=17]="StepStone",t[t.RollingBoulder=18]="RollingBoulder",t[t.SporePod=19]="SporePod",t))(HD||{});const _4={0:"My Start Coords",1:"PowerUp",2:"Triceratops enemy",3:"Rex enemy",4:"Lava patch",5:"Egg",6:"Gas vent",7:"Pteranodon enemy",8:"Stegosaurus enemy",9:"Time portal",10:"Tree",11:"Boulder",12:"Mushroom",13:"Bush",14:"Water patch",15:"Crystal",16:"Spitter enemy",17:"Step stone",18:"Rolling boulder",19:"Spore pod"};var GD=(t=>(t[t.StartCoords=0]="StartCoords",t[t.BirchTree=1]="BirchTree",t[t.PineTree=2]="PineTree",t[t.Egg=3]="Egg",t[t.EggWormhole=4]="EggWormhole",t[t.TowerTurret=5]="TowerTurret",t[t.WeaponPOW=6]="WeaponPOW",t[t.SmallTree=7]="SmallTree",t[t.FallenTree=8]="FallenTree",t[t.TreeStump=9]="TreeStump",t[t.Grass=10]="Grass",t[t.Fern=11]="Fern",t[t.BerryBush=12]="BerryBush",t[t.CatTail=13]="CatTail",t[t.Rock=14]="Rock",t[t.Enemy_Raptor=15]="Enemy_Raptor",t[t.DustDevil=16]="DustDevil",t[t.AirMine=17]="AirMine",t[t.ForestDoor=18]="ForestDoor",t[t.ForestDoorKey=19]="ForestDoorKey",t[t.Electrode=20]="Electrode",t[t.HealthPOW=21]="HealthPOW",t[t.FuelPOW=22]="FuelPOW",t[t.RiverRock=23]="RiverRock",t[t.GasMound=24]="GasMound",t[t.BentPineTree=25]="BentPineTree",t[t.Enemy_Brach=26]="Enemy_Brach",t[t.DesertTree=27]="DesertTree",t[t.DesertBush=28]="DesertBush",t[t.Cactus=29]="Cactus",t[t.Crystal=30]="Crystal",t[t.PalmTree=31]="PalmTree",t[t.LaserOrb=32]="LaserOrb",t[t.ShieldPOW=33]="ShieldPOW",t[t.Smoker=34]="Smoker",t[t.Flame=35]="Flame",t[t.PalmBush=36]="PalmBush",t[t.BurntDesertTree=37]="BurntDesertTree",t[t.HydraTree=38]="HydraTree",t[t.OddTree=39]="OddTree",t[t.GeckoPlant=40]="GeckoPlant",t[t.SproutPlant=41]="SproutPlant",t[t.Ivy=42]="Ivy",t[t.Asteroid=43]="Asteroid",t[t.SwampFallenTree=44]="SwampFallenTree",t[t.SwampStump=45]="SwampStump",t[t.Hole=46]="Hole",t[t.FreeLifePOW=47]="FreeLifePOW",t[t.RamphorEnemy=48]="RamphorEnemy",t))(GD||{});const y4={0:"My Start Coords",1:"Birch Tree",2:"Pine Tree",3:"Egg",4:"Egg Wormhole",5:"Tower Turret",6:"Weapon POW",7:"Small Tree",8:"Fallen Tree",9:"Tree Stump",10:"Grass",11:"Fern",12:"Berry Bush",13:"Cat Tail",14:"Rock",15:"Raptor Enemy",16:"Dust Devil",17:"Air Mine",18:"Forest Door",19:"Forest Door Key",20:"Electrode",21:"Health POW",22:"Fuel POW",23:"River Rock",24:"Gas Mound",25:"Bent Pine Tree",26:"Brach Enemy",27:"Desert Tree",28:"Desert Bush",29:"Cactus",30:"Crystal",31:"Palm Tree",32:"Laser Orb",33:"Shield POW",34:"Smoker",35:"Flame",36:"Palm Bush",37:"Burnt Desert Tree",38:"Hydra Tree",39:"Odd Tree",40:"Gecko Plant",41:"Sprout Plant",42:"Ivy",43:"Asteroid",44:"Swamp Fallen Tree",45:"Swamp Stump",46:"Hole",47:"Free Life POW",48:"Ramphor Enemy"};function Ap(t,e){return t.GAME_TYPE===It.BILLY_FRONTIER?IY(e):t.GAME_TYPE===It.BUGDOM?UY(e):t.GAME_TYPE===It.BUGDOM_2?BY(e):t.GAME_TYPE===It.CRO_MAG?zY(e):t.GAME_TYPE===It.NANOSAUR?HY(e):t.GAME_TYPE===It.NANOSAUR_2?GY(e):t.GAME_TYPE===It.OTTO_MATIC?VY(e):"Unknown Item."}function IY(t){return t in p4?p4[t]:"Unknown Billy Item."}function UY(t){return t in m4?m4[t]:"Unknown Bugdom Item."}function BY(t){return t in g4?g4[t]:"Unknown Bugdom 2 Item."}function zY(t){return t in v4?v4[t]:"Unknown Cro Mag Item."}function HY(t){return t in _4?_4[t]:"Unknown Nanosaur Item."}function GY(t){return t in y4?y4[t]:"Unknown Nanosaur 2 Item."}function VY(t){return t in h4?h4[t]:"Unknown Otto Item."}function VD(t){if(t.GAME_TYPE===It.BILLY_FRONTIER)return Object.keys(ID);if(t.GAME_TYPE===It.BUGDOM)return Object.keys(UD);if(t.GAME_TYPE===It.BUGDOM_2)return Object.keys(BD);if(t.GAME_TYPE===It.CRO_MAG)return Object.keys(zD);if(t.GAME_TYPE===It.NANOSAUR)return Object.keys(HD);if(t.GAME_TYPE===It.NANOSAUR_2)return Object.keys(GD);if(t.GAME_TYPE===It.OTTO_MATIC)return Object.keys(FD);throw new Error("Invalid game type!")}function WY({data:t,setData:e}){const n=hn(Dr),[r,i]=or(bA),s=r!==void 0?t.Itms[1e3].obj[r]:null,o=VD(n).map(a=>parseInt(a)).filter(a=>isNaN(a)===!1);return k.jsxs("div",{className:"flex flex-col gap-2",children:[s==null?k.jsx(jY,{}):k.jsxs("p",{children:["Item ",s.type," (",s.x,",",s.z,")"]}),k.jsx("div",{className:"flex flex-col gap-2",children:s!=null&&k.jsxs(k.Fragment,{children:[k.jsxs(nu,{value:s.type.toString()??"",onValueChange:a=>{const l=parseInt(a);e(u=>{r!==void 0&&(u.Itms[1e3].obj[r].type=l)})},children:[k.jsx(tl,{children:k.jsx(k1,{children:Ap(n,s.type)})}),k.jsx(nl,{children:o.map(a=>k.jsx(li,{className:"text-black",value:a.toString(),children:Ap(n,a)},a))})]}),k.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] gap-2 items-baseline",children:[k.jsxs("p",{className:"text-baseline align-text-bottom",children:["Flags (",Xa[s.type].flags,")"]}),k.jsx(jr,{type:"number",className:"col-span-3",value:s.flags.toString(),onChange:a=>{e(l=>{r!==void 0&&(l.Itms[1e3].obj[r].flags=OD(a.target.value))})}}),k.jsxs("p",{children:["Parameter 0 (",Xa[s.type].p0,")"]}),k.jsx(jr,{type:"number",value:s.p0.toString(),onChange:a=>{e(l=>{r!==void 0&&(l.Itms[1e3].obj[r].p0=lc(a.target.value))})}}),k.jsxs("p",{children:["Parameter 1 (",Xa[s.type].p1,")"]}),k.jsx(jr,{type:"number",value:s.p1.toString(),onChange:a=>{e(l=>{r!==void 0&&(l.Itms[1e3].obj[r].p1=lc(a.target.value))})}}),k.jsxs("p",{children:["Parameter 2 (",Xa[s.type].p2,")"]}),k.jsx(jr,{type:"number",value:s.p2.toString(),onChange:a=>{e(l=>{r!==void 0&&(l.Itms[1e3].obj[r].p2=lc(a.target.value))})}}),k.jsxs("p",{children:["Parameter 3 (",Xa[s.type].p3,")"]}),k.jsx(jr,{type:"number",value:s.p3.toString(),onChange:a=>{e(l=>{r!==void 0&&(l.Itms[1e3].obj[r].p3=lc(a.target.value))})}})]}),k.jsx(_c,{disabled:r===void 0,onClick:()=>{r!==void 0&&(e(a=>{a.Itms[1e3].obj.splice(r,1)}),i(void 0))},children:"Delete Item"})]})})]})}function jY(){const[t,e]=or(kD);V.useEffect(()=>()=>e(void 0),[]);const n=hn(Dr),r=VD(n).map(i=>parseInt(i)).filter(i=>isNaN(i)===!1);return t!==void 0?k.jsxs(k.Fragment,{children:[k.jsxs(nu,{value:Ap(n,t),onValueChange:i=>{const s=parseInt(i);e(s)},children:[k.jsx(tl,{children:k.jsx(k1,{children:Ap(n,t)})}),k.jsx(nl,{children:r.map(i=>k.jsx(li,{className:"text-black",value:i.toString(),children:Ap(n,i)},i))})]}),k.jsx("p",{children:"Click on the Canvas to add the selected item"}),k.jsx(_c,{onClick:()=>e(void 0),children:"Stop Adding Items"})]}):k.jsx(et,{onClick:()=>e(0),children:"Add Items"})}function XY(t){if(t.GAME_TYPE===It.BILLY_FRONTIER)return Object.keys(V6);if(t.GAME_TYPE===It.BUGDOM)return Object.keys(W6);if(t.GAME_TYPE===It.BUGDOM_2)return Object.keys(j6);if(t.GAME_TYPE===It.CRO_MAG)return Object.keys(X6);if(t.GAME_TYPE===It.NANOSAUR_2)return Object.keys(Y6);if(t.GAME_TYPE===It.OTTO_MATIC)return Object.keys(q6);throw new Error("Invalid Game!")}function YY({data:t,setData:e}){const n=hn(lm),[r,i]=or(G6),s=hn(Dr);V.useEffect(()=>{i(void 0)},[n]);const o=n!==void 0?t.SpIt[zt+n].obj:null;return k.jsxs("div",{className:"flex flex-col gap-2",children:[o==null?k.jsx(qY,{setData:e}):k.jsxs(nu,{onValueChange:a=>{i(a==="NoneSelected"?void 0:parseInt(a))},children:[k.jsx(tl,{children:r!==void 0?`#${r} ${q0(s,o[r].type)}`:"No Item Selected"}),k.jsxs(nl,{children:[k.jsx(li,{value:"NoneSelected",children:"No Item Selected"}),o.map((a,l)=>k.jsxs(li,{value:l.toString(),children:["#",l," (",q0(s,a.type),")"]},l))]})]}),k.jsxs("div",{className:"flex flex-col gap-2",children:[o&&k.jsx(KY,{splineData:o,setData:e}),o!=null&&k.jsx($Y,{data:t,setData:e})]})]})}function qY({setData:t}){return k.jsx(k.Fragment,{children:k.jsx(et,{onClick:()=>{t(e=>{e.Spln[1e3].obj.push({bbBottom:200,bbLeft:100,bbRight:200,bbTop:100,numItems:0,numNubs:3,numPoints:200});const n=zt+e.Spln[1e3].obj.length-1;e.SpIt[n]={obj:[]},e.SpNb[n]={obj:[{x:100,z:200},{x:150,z:100},{x:200,z:200},{x:100,z:200}]},e.SpPt[n]={obj:dp(e.SpNb[n].obj)}})},children:"Add New Spline"})})}function KY({setData:t,splineData:e}){const n=hn(lm),[r,i]=or(G6),s=hn(Dr);if(n===void 0)return k.jsx("p",{children:"No Selected Spline"});if(r===void 0)return k.jsx(k.Fragment,{});const o=e.at(r),a=XY(s).map(l=>parseInt(l)).filter(l=>isNaN(l)===!1);return o===void 0?k.jsx(k.Fragment,{}):k.jsxs(k.Fragment,{children:[k.jsxs(nu,{onValueChange:l=>{const u=parseInt(l);t(d=>{n===void 0||r===void 0||(d.SpIt[zt+n].obj[r].type=u)})},children:[k.jsx(tl,{children:q0(s,o.type)}),k.jsx(nl,{children:a.map(l=>k.jsx(li,{className:"text-black",value:l.toString(),children:q0(s,l)},l))})]}),k.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] gap-2 items-center",children:[k.jsxs("p",{children:["Flags (",Xa[o.type].flags,")"]}),k.jsx(jr,{type:"number",value:o.flags,onChange:l=>{t(u=>{n===void 0||r===void 0||(u.SpIt[zt+n].obj[r].flags=OD(l.target.value))})}}),k.jsxs("p",{children:["Parameter 0 (",Xa[o.type].p0,")"]}),k.jsx(jr,{type:"number",value:o.p0,onChange:l=>{t(u=>{n===void 0||r===void 0||(u.SpIt[zt+n].obj[r].p0=lc(l.target.value))})}}),k.jsxs("p",{children:["Parameter 1 (",Xa[o.type].p1,")"]}),k.jsx(jr,{type:"number",value:o.p1,onChange:l=>{t(u=>{n===void 0||r===void 0||(u.SpIt[zt+n].obj[r].p1=lc(l.target.value))})}}),k.jsxs("p",{children:["Parameter 2 (",Xa[o.type].p2,")"]}),k.jsx(jr,{type:"number",value:o.p2,onChange:l=>{t(u=>{n===void 0||r===void 0||(u.SpIt[zt+n].obj[r].p2=lc(l.target.value))})}}),k.jsxs("p",{children:["Parameter 3 (",Xa[o.type].p3,")"]}),k.jsx(jr,{type:"number",value:o.p3,onChange:l=>{t(u=>{n===void 0||r===void 0||(u.SpIt[zt+n].obj[r].p3=lc(l.target.value))})}}),k.jsx("p",{children:"Placement (0-1)"}),k.jsx(jr,{type:"number",value:o.placement,onChange:l=>{t(u=>{if(n===void 0||r===void 0)return;let d=parseFloat(l.target.value);d<0&&(d=0),d>1&&(d=1),isNaN(d)&&(d=0),u.SpIt[zt+n].obj[r].placement=d})}})]}),k.jsx("div",{children:k.jsx(_c,{disabled:n===void 0,onClick:()=>{t(l=>{r!==void 0&&(l.SpIt[zt+n].obj.splice(r),i(void 0))})},children:"Delete Spline Item"})})]})}function $Y({data:t,setData:e}){const[n,r]=or(lm);return k.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[k.jsx(et,{onClick:()=>{e(i=>{if(n===void 0)return;const s=i.SpNb[zt+n].obj;i.SpNb[zt+n].obj.splice(1,0,{x:s[0].x+30,z:s[0].z+30}),i.SpPt[zt+n]={obj:dp(i.SpNb[zt+n].obj)}})},children:"Add Front Nub"}),k.jsx(et,{onClick:()=>{e(i=>{if(n===void 0)return;const s=i.SpNb[zt+n].obj;i.SpNb[zt+n].obj.splice(s.length-1,0,{x:s[s.length-1].x+100,z:s[s.length-1].z+100}),i.SpPt[zt+n]={obj:dp(i.SpNb[zt+n].obj)}})},children:"Add Back Nub"}),k.jsx(et,{disabled:n===void 0||t.SpNb[zt+n].obj.length<=4,onClick:()=>{e(i=>{n!==void 0&&(i.SpNb[zt+n].obj.splice(1,1),i.SpPt[zt+n]={obj:dp(i.SpNb[zt+n].obj)})})},children:"Delete Front Nub"}),k.jsx(et,{disabled:n===void 0||t.SpNb[zt+n].obj.length<=4,onClick:()=>{e(i=>{if(n===void 0)return;const s=i.SpNb[zt+n].obj;i.SpNb[zt+n].obj.splice(s.length-2,1),i.SpPt[zt+n]={obj:dp(i.SpNb[zt+n].obj)}})},children:"Delete Back Nub"}),k.jsx(et,{disabled:n===void 0,onClick:()=>{e(i=>{n!==void 0&&i.SpIt[zt+n].obj.push({placement:.5,type:0,flags:0,p0:0,p1:0,p2:0,p3:0})})},children:"Add Spline Item"}),k.jsx(_c,{disabled:n===void 0,onClick:()=>{e(i=>{if(n===void 0)return;i.Spln[1e3].obj.splice(n,1);let s=zt+n;for(;i.SpNb[s+1]!==void 0;)i.SpNb[s]=i.SpNb[s+1],i.SpPt[s]=i.SpPt[s+1],i.SpIt[s]=i.SpIt[s+1],s++;delete i.SpNb[s],delete i.SpPt[s],delete i.SpIt[s]}),r(void 0)},children:"Delete Spline"})]})}const lE=wi(null),WD=wi(null);var za=(t=>(t[t.BLUEWATER=0]="BLUEWATER",t[t.SOAP=1]="SOAP",t[t.GREENWATER=2]="GREENWATER",t[t.OIL=3]="OIL",t[t.JUNGLEWATER=4]="JUNGLEWATER",t[t.MUD=5]="MUD",t[t.RADIOACTIVE=6]="RADIOACTIVE",t[t.LAVA=7]="LAVA",t))(za||{});const Qw={0:"Blue Water",1:"Soap",2:"Green Water",3:"Oil",4:"Jungle Water",5:"Mud",6:"Radioactive",7:"Lava"};var jD=(t=>(t[t.BLUEWATER=0]="BLUEWATER",t[t.POOLWATER=1]="POOLWATER",t[t.GARBAGE=2]="GARBAGE",t))(jD||{}),XD=(t=>(t[t.WATER=0]="WATER",t[t.HONEY=1]="HONEY",t[t.SLIME=2]="SLIME",t[t.LAVA=3]="LAVA",t))(XD||{}),YD=(t=>(t[t.BLUEWATER=0]="BLUEWATER",t[t.POOLWATER=1]="POOLWATER",t[t.GARBAGE=2]="GARBAGE",t))(YD||{}),qD=(t=>(t[t.WATER=0]="WATER",t[t.TAR=1]="TAR",t))(qD||{}),KD=(t=>(t[t.GREEN=0]="GREEN",t[t.BLUE=1]="BLUE",t[t.LAVA=2]="LAVA",t[t.LAVA_DIR0=3]="LAVA_DIR0",t[t.LAVA_DIR1=4]="LAVA_DIR1",t[t.LAVA_DIR2=5]="LAVA_DIR2",t[t.LAVA_DIR3=6]="LAVA_DIR3",t[t.LAVA_DIR4=7]="LAVA_DIR4",t[t.LAVA_DIR5=8]="LAVA_DIR5",t[t.LAVA_DIR6=9]="LAVA_DIR6",t[t.LAVA_DIR7=10]="LAVA_DIR7",t))(KD||{});function ZY(t){if(t.GAME_TYPE===It.BILLY_FRONTIER)return Object.keys(jD);if(t.GAME_TYPE===It.BUGDOM)return Object.keys(XD);if(t.GAME_TYPE===It.BUGDOM_2)return Object.keys(YD);if(t.GAME_TYPE===It.CRO_MAG)return Object.keys(qD);if(t.GAME_TYPE===It.NANOSAUR_2)return Object.keys(KD);if(t.GAME_TYPE===It.OTTO_MATIC)return Object.keys(za);throw new Error("Invalid water body type!")}function QY({data:t,setData:e}){const[n,r]=or(lE),[i,s]=or(WD),o=hn(Dr);if(t.Liqd===void 0)return;const a=n!==null?t.Liqd[1e3].obj[n]:null,l=a&&i!==null&&i<a.numNubs?a.nubs[i]:null,u=ZY(o).map(d=>parseInt(d)).filter(d=>isNaN(d)===!1);return k.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a==null?k.jsx(et,{onClick:()=>e(d=>{var m;d.Liqd[1e3].obj.push({type:0,nubs:[[100,100],[100,200],[200,200],[200,100]],numNubs:4,hotSpotX:150,hotSpotZ:150,bBoxTop:200,bBoxLeft:200,bBoxBottom:200,bBoxRight:200,height:0,flags:0,reserved:0});for(let g=4;g<o.LIQD_NUBS;g++)(m=d.Liqd[1e3].obj.at(-1))==null||m.nubs.push([0,0])}),children:"Add New Water Body"}):k.jsxs("p",{children:["Item ",a.type," (",Qw[a.type],")"]}),k.jsx("div",{className:"flex flex-col gap-2",children:a!=null&&k.jsxs(k.Fragment,{children:[k.jsxs(nu,{value:a.type.toString(),onValueChange:d=>{const m=parseInt(d);e(g=>{n!==null&&(g.Liqd[1e3].obj[n].type=m)})},children:[k.jsx(tl,{children:k.jsx(k1,{children:Qw[a.type]})}),k.jsx(nl,{children:u.map(d=>k.jsx(li,{className:"text-black",value:d.toString(),children:Qw[d]},d))})]}),a&&n!==null&&k.jsxs(k.Fragment,{children:[k.jsx("p",{children:"Adjust Hotspot Position"}),k.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] gap-2  items-center",children:[k.jsx("label",{htmlFor:"hotspotX",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"X"}),k.jsx(jr,{id:"hotspotX",type:"number",value:a.hotSpotX,onChange:d=>{const m=parseInt(d.target.value);isNaN(m)||e(g=>{n!==null&&(g.Liqd[1e3].obj[n].hotSpotX=m)})},placeholder:"X"}),k.jsx("label",{htmlFor:"hotspotZ",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Z"}),k.jsx(jr,{id:"hotspotZ",type:"number",value:a.hotSpotZ,onChange:d=>{const m=parseInt(d.target.value);isNaN(m)||e(g=>{n!==null&&(g.Liqd[1e3].obj[n].hotSpotZ=m)})},placeholder:"Z"})]})]}),l&&n!==null&&i!==null&&k.jsxs(k.Fragment,{children:[k.jsxs("p",{children:["Adjust Selected Nub Position (",i,")"]}),k.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] gap-2  items-center",children:[k.jsx("p",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"X"}),k.jsx(jr,{id:"nubX",type:"number",value:l[0],onChange:d=>{const m=parseInt(d.target.value);isNaN(m)||e(g=>{n===null||i===null||(g.Liqd[1e3].obj[n].nubs[i][0]=m)})},placeholder:"X"}),k.jsx("p",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Z"}),k.jsx(jr,{id:"nubZ",type:"number",value:l[1],onChange:d=>{const m=parseInt(d.target.value);isNaN(m)||e(g=>{n===null||i===null||(g.Liqd[1e3].obj[n].nubs[i][1]=m)})},placeholder:"Y"})]})]}),k.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[k.jsx(et,{onClick:()=>e(d=>{if(n===null||d.Liqd[1e3].obj[n].numNubs===o.LIQD_NUBS)return;const m=d.Liqd[1e3].obj[n].nubs[d.Liqd[1e3].obj[n].numNubs-1];m&&(d.Liqd[1e3].obj[n].nubs[d.Liqd[1e3].obj[n].numNubs]=[m[0]+50,m[1]+50],d.Liqd[1e3].obj[n].numNubs++)}),children:"Add Nub"}),k.jsx(et,{disabled:n===null||n!==null&&t.Liqd[1e3].obj[n].numNubs<=3,onClick:()=>{e(d=>{n!==null&&(d.Liqd[1e3].obj[n].numNubs<=3||d.Liqd[1e3].obj[n].numNubs--)})},children:"Delete Nub"}),k.jsx(_c,{disabled:n===null,onClick:()=>{n!==null&&(e(d=>{d.Liqd[1e3].obj.splice(n,1)}),r(null),s(null))},children:"Delete Water Body"})]})]})})]})}var Cs=(t=>(t[t.Topology=0]="Topology",t[t.Flags=1]="Flags",t[t.ElectricFloor0=2]="ElectricFloor0",t[t.ElectricFloor1=3]="ElectricFloor1",t))(Cs||{});const $D=wi(0);var m0=(t=>(t[t.CIRCLE_BRUSH=0]="CIRCLE_BRUSH",t[t.SQUARE_BRUSH=1]="SQUARE_BRUSH",t))(m0||{}),Ha=(t=>(t[t.SET_VALUE=0]="SET_VALUE",t[t.DELTA_VALUE=1]="DELTA_VALUE",t[t.DELTA_WITH_DROPOFF=2]="DELTA_WITH_DROPOFF",t))(Ha||{});const ZD=wi(0),QD=wi(0),JD=wi(1),ek=wi(0),tk=wi(1);var fp=(t=>(t[t.TWO_D=0]="TWO_D",t[t.THREE_D=1]="THREE_D",t))(fp||{});const nk=wi(0);function JY(){const[t,e]=or($D),[n,r]=or(ZD),[i,s]=or(QD),[o,a]=or(JD),[l,u]=or(ek),[d,m]=or(tk),[g,v]=or(nk);return V.useEffect(()=>{t!==Cs.Topology&&v(fp.TWO_D)},[t]),k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[k.jsx(et,{selected:t===Cs.Topology,onClick:()=>e(Cs.Topology),children:"Topology"}),k.jsx(et,{selected:t===Cs.Flags,onClick:()=>e(Cs.Flags),children:"Empty Tiles"}),k.jsx(et,{selected:t===Cs.ElectricFloor0,onClick:()=>e(Cs.ElectricFloor0),children:"Electric Floor 1"}),k.jsx(et,{selected:t===Cs.ElectricFloor1,onClick:()=>e(Cs.ElectricFloor1),children:"Electric Floor 2"})]}),t===Cs.Topology&&k.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] gap-2 items-center",children:[k.jsx("p",{children:"Brush Mode"}),k.jsxs(nu,{value:n.toString(),onValueChange:y=>{r(parseInt(y))},children:[k.jsx(tl,{children:n===m0.CIRCLE_BRUSH?"Circle Brush":"Square Brush"}),k.jsxs(nl,{children:[k.jsx(li,{value:m0.CIRCLE_BRUSH.toString(),children:"Circle Brush"}),k.jsx(li,{value:m0.SQUARE_BRUSH.toString(),children:"Square Brush"})]})]}),k.jsx("p",{children:"Adjustment Mode"}),k.jsxs(nu,{value:i.toString(),onValueChange:y=>{s(parseInt(y))},children:[k.jsxs(tl,{children:[i===Ha.SET_VALUE&&"Set Value",i===Ha.DELTA_VALUE&&"Delta Value",i===Ha.DELTA_WITH_DROPOFF&&"Delta with Dropoff"]}),k.jsxs(nl,{children:[k.jsx(li,{value:Ha.SET_VALUE.toString(),children:"Set Value"}),k.jsx(li,{value:Ha.DELTA_VALUE.toString(),children:"Delta Value"}),k.jsx(li,{value:Ha.DELTA_WITH_DROPOFF.toString(),children:"Delta with Dropoff"})]})]}),k.jsx("p",{children:"Brush Radius"}),k.jsx(jr,{type:"number",defaultValue:o,onChange:y=>a(parseInt(y.target.value)||0)}),k.jsx("p",{children:"Height Value"}),k.jsx(jr,{type:"number",defaultValue:l,onChange:y=>u(parseInt(y.target.value)||0)}),k.jsx("p",{children:"Topology View Opacity"}),k.jsx(jr,{type:"number",defaultValue:d,onChange:y=>m(parseFloat(y.target.value)||1)}),k.jsxs("div",{className:"flex flex-row justify-center gap-2 items-center col-span-2",children:[k.jsx("p",{children:"Show 3D Map (View Only)"}),k.jsx(qC,{checked:g===fp.THREE_D,onCheckedChange:y=>{v(y?fp.THREE_D:fp.TWO_D)}})]})]})]})}const rk=wi(0);function eq({data:t,setData:e,mapImages:n,setMapImages:r}){const i=hn(rk),s=t.Hedr[1e3].obj,o=hn(Dr);return k.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsxs("p",{children:["Replace Selected Tile (",i,")"]}),k.jsx(Fy,{acceptType:"image",disabled:t.STgd[1e3].obj[i].superTileId===0,handleOnChange:async a=>{var g,v;if(!((v=(g=a.target)==null?void 0:g.files)!=null&&v[0]))return;const l=a.target.files[0];if(!l)return;const u=document.createElement("canvas");u.width=o.SUPERTILE_TEXMAP_SIZE,u.height=o.SUPERTILE_TEXMAP_SIZE;const d=u.getContext("2d");if(!d)return;d.fillStyle="black",d.drawImage(await createImageBitmap(l,{resizeWidth:o.SUPERTILE_TEXMAP_SIZE,resizeHeight:o.SUPERTILE_TEXMAP_SIZE,resizeQuality:"high"}),0,0);const m=[...n];m.splice(t.STgd[1e3].obj[i].superTileId,1,u),r(m)}}),k.jsx(H6,{width:250,height:250,className:"mx-auto",children:k.jsx(ol,{children:k.jsx(tq,{image:n[t.STgd[1e3].obj[i].superTileId]})})})]}),k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsx("p",{children:"Upload Image For Whole Map"}),k.jsx(Fy,{acceptType:"image",handleOnChange:async a=>{var y,x;if(!((x=(y=a.target)==null?void 0:y.files)!=null&&x[0]))return;const l=a.target.files[0];if(!l)return;const u=document.createElement("canvas");u.width=o.SUPERTILE_TEXMAP_SIZE*(s.mapWidth/o.TILES_PER_SUPERTILE),u.height=o.SUPERTILE_TEXMAP_SIZE*(s.mapHeight/o.TILES_PER_SUPERTILE);const d=u.getContext("2d");if(!d)return;d.fillStyle="black",d.drawImage(await createImageBitmap(l,{resizeWidth:o.SUPERTILE_TEXMAP_SIZE*(s.mapWidth/o.TILES_PER_SUPERTILE),resizeHeight:o.SUPERTILE_TEXMAP_SIZE*(s.mapHeight/o.TILES_PER_SUPERTILE),resizeQuality:"high"}),0,0);const m=[],g=document.createElement("canvas");g.width=o.SUPERTILE_TEXMAP_SIZE,g.height=o.SUPERTILE_TEXMAP_SIZE;const v=g.getContext("2d");if(v){v.fillStyle="black",m.push(g);for(let S=0;S<s.mapHeight/o.TILES_PER_SUPERTILE;S++)for(let _=0;_<s.mapWidth/o.TILES_PER_SUPERTILE;_++){const M=d.getImageData(_*o.SUPERTILE_TEXMAP_SIZE,S*o.SUPERTILE_TEXMAP_SIZE,_*o.SUPERTILE_TEXMAP_SIZE+o.SUPERTILE_TEXMAP_SIZE,S*o.SUPERTILE_TEXMAP_SIZE+o.SUPERTILE_TEXMAP_SIZE),E=document.createElement("canvas");E.width=o.SUPERTILE_TEXMAP_SIZE,E.height=o.SUPERTILE_TEXMAP_SIZE;const A=E.getContext("2d");if(!A)return;A.fillStyle="black",A.putImageData(M,0,0),m.push(E)}r(m),e(S=>{for(let _=0;_<S.STgd[1e3].obj.length;_++)S.STgd[1e3].obj[_].superTileId=_+1;S.Hedr[1e3].obj.numUniqueSupertiles=m.length})}}})]}),k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsxs("p",{children:["Supertiles Wide: ",s.mapWidth/o.TILES_PER_SUPERTILE]}),k.jsxs("p",{children:["Supertiles High: ",s.mapHeight/o.TILES_PER_SUPERTILE]}),k.jsxs("p",{children:["Unique Supertiles ",s.numUniqueSupertiles]}),k.jsxs("p",{children:["Current Tile: #",i]}),k.jsxs("p",{children:["Texture ID: ",t.STgd[1e3].obj[i].superTileId]})]})]})}function tq({image:t}){return t?k.jsx(am,{image:t,width:250,height:250}):k.jsx(k.Fragment,{})}const w2=12,Gv=w2/2,nq=V.memo(function({data:e,setData:n,itemIdx:r}){const i=cp(bA),s=e.Itms[1e3].obj[r],[o,a]=V.useState(!1),l=hn(Dr),u=V.useCallback(()=>a(!0),[]),d=V.useCallback(()=>a(!1),[]),m=V.useCallback(()=>i(r),[r,i]),g=V.useCallback(S=>{n(_=>{_.Itms[1e3].obj[r].x=Math.round(S.target.x()+Gv),_.Itms[1e3].obj[r].z=Math.round(S.target.y()+Gv)})},[r,n]);if(s==null)return null;const v=s.x-Gv,y=s.z-Gv,x=Ap(l,s.type);return k.jsxs(k.Fragment,{children:[k.jsx(qS,{x:v,y,width:w2,height:w2,stroke:"red",fill:"red",draggable:!0,onMouseOver:u,onMouseLeave:d,onMouseDown:m,onDragStart:m,onDragEnd:g}),k.jsx(Y0,{text:s.type.toString(),fill:"black",visible:!o,fontSize:8,x:v,y,draggable:!0,onMouseOver:u,onMouseLeave:d}),o&&k.jsxs(B6,{opacity:1,x:s.x+15,y:s.z,children:[k.jsx(z6,{fill:"red"}),k.jsx(Y0,{text:x,fontSize:8,fill:"black"})]})]})}),Lg=V.memo(({data:t,setData:e})=>t.Itms?k.jsxs(ol,{children:[k.jsx(qS,{}),t.Itms[1e3].obj.map((n,r)=>k.jsx(nq,{data:t,setData:e,itemIdx:r},r))]}):k.jsx(k.Fragment,{})),rq=V.memo(({nub:t,idx:e,setNub:n})=>{const[r,i]=or(F1);return k.jsx(Gy,{x:t[0],y:t[1],radius:20,draggable:!0,fill:e===r?"red":ik(e),onMouseDown:()=>i(e),onDragStart:()=>{i(e)},onDragEnd:s=>{n([Math.round(s.target.x()),Math.round(s.target.y())])}})}),x4=V.memo(({data:t,setData:e,fenceIdx:n})=>{const[r,i]=or(F1),[s,o]=V.useState(null),a=t.FnNb[1e3+n].obj.flatMap(l=>[l[0],l[1]]);return k.jsxs(k.Fragment,{children:[k.jsx(fA,{points:a,stroke:n===r?"red":ik(n),strokeWidth:n===r?5:2,onClick:()=>i(n),draggable:!0,onDragStart:()=>{o(t.FnNb[1e3+n].obj.map(l=>[l[0],l[1]])),i(n)},onDragEnd:l=>{if(!s)return;const u=l.target.x(),d=l.target.y();e(m=>{const g=m.FnNb[1e3+n].obj;for(let v=0;v<g.length;v++)g[v][0]=s[v][0]+u,g[v][1]=s[v][1]+d}),l.target.x(0),l.target.y(0),o(null)}}),t.FnNb[1e3+n].obj.map((l,u)=>k.jsx(rq,{idx:n,nub:l,setNub:d=>{e(m=>{m.FnNb[1e3+n].obj[u]=d})}},u))]})});function ik(t){switch(t%5){case 0:return"#339933";case 1:return"#3399ff";case 2:return"#993399";case 3:return"#ff9933";case 4:default:return"#ff3399"}}function Ng({data:t,setData:e}){const n=hn(F1);return t.Fenc?k.jsxs(ol,{children:[t.Fenc[1e3].obj.map((r,i)=>{if(n!==i)return k.jsx(x4,{data:t,setData:e,fenceIdx:i},i)}),n!==void 0&&k.jsx(x4,{data:t,setData:e,fenceIdx:n})]}):k.jsx(k.Fragment,{})}function Dg({data:t,setData:e}){return t.Spln?k.jsx(ol,{children:t.Spln[1e3].obj.map((n,r)=>k.jsx(YV,{data:t,setData:e,splineIdx:r},r))}):k.jsx(k.Fragment,{})}const S4=V.memo(({data:t,setData:e,waterBodyIdx:n})=>{const[r,i]=or(lE),[s,o]=or(WD),a=t.Liqd[1e3].obj[n],[l,u]=V.useState(null);if(!a)return k.jsx(k.Fragment,{});const d=a.nubs.filter((m,g)=>g<a.numNubs).flatMap(m=>[m[0],m[1]]);return k.jsxs(k.Fragment,{children:[k.jsx(fA,{points:d,stroke:n===r?"#9999FFDD":"#9999FF77",strokeWidth:n===r?5:2,onClick:()=>i(n),closed:!0,fill:n===r?"#9999FFDD":"#9999FF77",draggable:!0,onDragStart:()=>{u(t.Liqd[1e3].obj[n].nubs.filter((m,g)=>g<t.Liqd[1e3].obj[n].numNubs).map(m=>[m[0],m[1]])),i(n)},onDragEnd:m=>{if(!l)return;const g=m.target.x(),v=m.target.y();e(y=>{const x=y.Liqd[1e3].obj[n].nubs;for(let S=0;S<l.length;S++)S<y.Liqd[1e3].obj[n].numNubs&&(x[S][0]=l[S][0]+g,x[S][1]=l[S][1]+v)}),m.target.x(0),m.target.y(0),u(null)}}),n===r&&t.Liqd[1e3].obj[n].nubs.map((m,g)=>{if(!(t.Liqd[1e3].obj[n].numNubs<=g))return k.jsx(k.Fragment,{children:k.jsx(Gy,{x:m[0],y:m[1],radius:s===g&&r===n?8:5,fill:s===g&&r===n?"#FF99FFDD":"#9999FFDD",draggable:!0,onClick:()=>{i(n),o(g)},onDragStart:()=>{i(n),o(g)},onDragEnd:v=>{e(y=>{y.Liqd[1e3].obj[n].nubs[g][0]=Math.round(v.target.x()),y.Liqd[1e3].obj[n].nubs[g][1]=Math.round(v.target.y())})}},n+"-"+g)})}),r===n&&k.jsx(Gy,{x:a.hotSpotX,y:a.hotSpotZ,radius:10,fill:"orange",draggable:!0,onDragEnd:m=>e(g=>{g.Liqd[1e3].obj[n].hotSpotX=Math.round(m.target.x()),g.Liqd[1e3].obj[n].hotSpotZ=Math.round(m.target.y())})})]})});function kg({data:t,setData:e}){const n=hn(lE);return t.Liqd?k.jsxs(ol,{children:[t.Liqd[1e3].obj.map((r,i)=>{if(n!==i)return k.jsx(S4,{data:t,setData:e,waterBodyIdx:i},i)}),n!==null&&k.jsx(S4,{data:t,setData:e,waterBodyIdx:n},n)]}):k.jsx(k.Fragment,{})}function iq({data:t,setData:e,isEditingTopology:n}){const r=hn($D),i=V.useMemo(()=>t.Layr[1e3].obj.map(s=>t.Atrb[1e3].obj[s]),[]);return r===Cs.Topology?k.jsx(sq,{data:t,setData:e,isEditingTopology:n}):r===Cs.Flags?k.jsx(oq,{data:t,tileGrid:i}):r===Cs.ElectricFloor0?k.jsx(aq,{data:t,tileGrid:i}):k.jsx(lq,{data:t,tileGrid:i})}function sq({data:t,setData:e,isEditingTopology:n}){const r=hn(ZD),i=hn(QD),s=hn(ek),o=hn(JD),a=hn(Dr),l=hn(tk),u=V.useMemo(()=>t.Hedr[1e3].obj,[t.Hedr]),d=x=>[(x-u.minY)/(u.maxY-u.minY)*255,(x-u.minY)/(u.maxY-u.minY)*255,(x-u.minY)/(u.maxY-u.minY)*255,255],m=(x,S)=>(x=Math.floor(x/a.TILE_SIZE),S=Math.floor(S/a.TILE_SIZE),S*(u.mapWidth+1)+x),g=V.useMemo(()=>t.YCrd[1e3].obj.flatMap(d),[t.YCrd[1e3].obj]),v=V.useMemo(()=>{const x=document.createElement("canvas");x.width=u.mapWidth+1,x.height=u.mapHeight+1;const S=x.getContext("2d");if(!S)throw new Error("Could not get canvas context");return S.putImageData(new ImageData(new Uint8ClampedArray(g),u.mapWidth+1,u.mapHeight+1),0,0),x},[u,t.YCrd[1e3].obj]),y=x=>{e(S=>{for(const _ of x){const{x:M,y:E,value:A,distance:L}=_;if(M<0||M>(u.mapWidth+1)*a.TILE_SIZE||E<0||E>(u.mapHeight+1)*a.TILE_SIZE)continue;const D=m(M,E);S.YCrd[1e3].obj[D]!==void 0&&(i===Ha.SET_VALUE?S.YCrd[1e3].obj[D]=A:i===Ha.DELTA_VALUE?S.YCrd[1e3].obj[D]=S.YCrd[1e3].obj[D]+A:i===Ha.DELTA_WITH_DROPOFF&&(S.YCrd[1e3].obj[D]=S.YCrd[1e3].obj[D]+A*(1-L)),S.YCrd[1e3].obj[D]<u.minY&&(S.YCrd[1e3].obj[D]=u.minY),S.YCrd[1e3].obj[D]>u.maxY&&(S.YCrd[1e3].obj[D]=u.maxY))}})};return k.jsx(ol,{imageSmoothingEnabled:!1,children:k.jsx(am,{x:0,y:0,opacity:l,width:(u.mapWidth+1)*a.TILE_SIZE,height:(u.mapHeight+1)*a.TILE_SIZE,onClick:x=>{var L;if(!n)return;const S=(L=x.target.getStage())==null?void 0:L.getRelativePointerPosition();if(!S)return;const _=Math.round(S.x),M=Math.round(S.y),E=(o-1)*a.TILE_SIZE,A=[];if(r===m0.CIRCLE_BRUSH){const D=_-E,U=M-E,O=E*2;for(let B=0;B<=O;B+=a.TILE_SIZE)for(let T=0;T<=O;T+=a.TILE_SIZE){const z=D+B,W=U+T,K=Math.pow(z-_,2)+Math.pow(W-M,2),Z=Math.sqrt(K)/E;K<=Math.pow(E,2)&&A.push({x:z,y:W,value:s,distance:Z})}}else{const D=_-E,U=M-E,O=E*2;for(let B=0;B<=O;B+=a.TILE_SIZE)for(let T=0;T<=O;T+=a.TILE_SIZE){const z=D+B,W=U+T,K=Math.abs(z-_),Z=Math.abs(W-M),te=Math.max(K,Z)/E;A.push({x:z,y:W,value:s,distance:te})}}y(A)},image:v})})}function oq({data:t,tileGrid:e}){const n=hn(Dr),r=V.useMemo(()=>t.Hedr[1e3].obj,[t.Hedr]),i=a=>a&1?[255,255,255,255]:[0,0,0,0],s=V.useMemo(()=>e.flatMap(a=>i(a.flags)),[t.Atrb[1e3].obj,n,r]),o=V.useMemo(()=>{const a=document.createElement("canvas");a.width=r.mapWidth,a.height=r.mapHeight;const l=a.getContext("2d");if(!l)throw new Error("Could not get canvas context");return l.putImageData(new ImageData(new Uint8ClampedArray(s),r.mapWidth,r.mapHeight),0,0),a},[r,t.YCrd[1e3].obj]);return k.jsx(ol,{imageSmoothingEnabled:!1,children:k.jsx(am,{x:0,y:0,width:r.mapWidth*n.TILE_SIZE,height:r.mapHeight*n.TILE_SIZE,image:o})})}function aq({data:t,tileGrid:e}){const n=hn(Dr),r=V.useMemo(()=>t.Hedr[1e3].obj,[t.Hedr]),i=a=>a&2?[255,255,255,255]:[0,0,0,0],s=V.useMemo(()=>e.flatMap(a=>i(a.flags)),[t.Atrb[1e3].obj,n,r]),o=V.useMemo(()=>{const a=document.createElement("canvas");a.width=r.mapWidth,a.height=r.mapHeight;const l=a.getContext("2d");if(!l)throw new Error("Could not get canvas context");return l.putImageData(new ImageData(new Uint8ClampedArray(s),r.mapWidth,r.mapHeight),0,0),a},[r,t.YCrd[1e3].obj]);return k.jsx(ol,{imageSmoothingEnabled:!1,children:k.jsx(am,{x:0,y:0,width:r.mapWidth*n.TILE_SIZE,height:r.mapHeight*n.TILE_SIZE,image:o})})}function lq({data:t,tileGrid:e}){const n=hn(Dr),r=V.useMemo(()=>t.Hedr[1e3].obj,[t.Hedr]),i=a=>a&4?[255,255,255,255]:[0,0,0,0],s=V.useMemo(()=>e.flatMap(a=>i(a.flags)),[t.Atrb[1e3].obj,n,r]),o=V.useMemo(()=>{const a=document.createElement("canvas");a.width=r.mapWidth,a.height=r.mapHeight;const l=a.getContext("2d");if(!l)throw new Error("Could not get canvas context");return l.putImageData(new ImageData(new Uint8ClampedArray(s),r.mapWidth,r.mapHeight),0,0),a},[r,t.YCrd[1e3].obj]);return k.jsx(ol,{imageSmoothingEnabled:!1,children:k.jsx(am,{x:0,y:0,width:r.mapWidth*n.TILE_SIZE,height:r.mapHeight*n.TILE_SIZE,image:o})})}const uq=V.memo(({data:t,mapImages:e})=>{const n=hn(Dr),[r,i]=or(rk),o=t.Hedr[1e3].obj.mapWidth/n.TILES_PER_SUPERTILE,a=t.STgd[1e3].obj,l=V.useMemo(()=>{const u=[];for(const d of a)u.push(e[d.superTileId??d]);return u},[t.Hedr,t.STgd,e]);return k.jsx(ol,{children:l.map((u,d)=>{const m=r===d;return k.jsxs(V.Fragment,{children:[k.jsx(am,{image:u,onClick:()=>i(d),x:d*n.SUPERTILE_TEXMAP_SIZE%(n.SUPERTILE_TEXMAP_SIZE*o),y:Math.floor(d/o)*n.SUPERTILE_TEXMAP_SIZE,width:n.SUPERTILE_TEXMAP_SIZE,height:n.SUPERTILE_TEXMAP_SIZE,fill:m?"red":""}),m&&k.jsx(qS,{onClick:()=>i(d),x:d*n.SUPERTILE_TEXMAP_SIZE%(n.SUPERTILE_TEXMAP_SIZE*o),y:Math.floor(d/o)*n.SUPERTILE_TEXMAP_SIZE,width:n.SUPERTILE_TEXMAP_SIZE,height:n.SUPERTILE_TEXMAP_SIZE,stroke:"red"})]},d)})})});function cq({data:t,setData:e,mapImages:n,view:r,stage:i,setStage:s}){var g,v;const o=cp(F1),a=cp(bA),l=cp(lm),u=cp(lE),d=hn(kD),m=V.useRef(null);return k.jsxs(H6,{width:((g=m.current)==null?void 0:g.offsetWidth)??3e3,height:((v=m.current)==null?void 0:v.offsetHeight)??2e3,scaleX:i.scale,scaleY:i.scale,x:i.x,y:i.y,draggable:!0,onClick:y=>{if(d===void 0)return;const x=y.target.getStage(),S=x==null?void 0:x.getRelativePointerPosition();if(!S)return;const _=Math.round(S.x),M=Math.round(S.y);e(E=>{E.Itms[1e3].obj.push({x:_,z:M,type:d,flags:0,p0:0,p1:0,p2:0,p3:0})})},onDblClick:()=>{o(void 0),a(void 0),l(void 0),u(null)},onWheel:y=>{y.evt.preventDefault();const x=1.05,S=y.target.getStage();if(!S)return;const _=S.scaleX(),M=S.getPointerPosition();if(!M)return;const E={x:M.x/_-S.x()/_,y:M.y/_-S.y()/_},A=y.evt.deltaY<0?_*x:_/x;s({scale:A,x:(M.x/A-E.x)*A,y:(M.y/A-E.y)*A})},children:[t.STgd&&k.jsx(uq,{data:t,mapImages:n}),r===4&&k.jsx(iq,{data:t,setData:e,isEditingTopology:r===4}),r===4||r===5&&k.jsxs(k.Fragment,{children:[k.jsx(kg,{data:t,setData:e}),k.jsx(Ng,{data:t,setData:e}),k.jsx(Lg,{data:t,setData:e}),k.jsx(Dg,{data:t,setData:e})]}),r===0&&k.jsxs(k.Fragment,{children:[k.jsx(kg,{data:t,setData:e}),k.jsx(Lg,{data:t,setData:e}),k.jsx(Dg,{data:t,setData:e}),k.jsx(Ng,{data:t,setData:e})]}),r===1&&k.jsxs(k.Fragment,{children:[k.jsx(Ng,{data:t,setData:e}),k.jsx(Lg,{data:t,setData:e}),k.jsx(Dg,{data:t,setData:e}),k.jsx(kg,{data:t,setData:e})]}),r===3&&k.jsxs(k.Fragment,{children:[k.jsx(kg,{data:t,setData:e}),k.jsx(Lg,{data:t,setData:e}),k.jsx(Ng,{data:t,setData:e}),k.jsx(Dg,{data:t,setData:e})]}),r===2&&k.jsxs(k.Fragment,{children:[k.jsx(kg,{data:t,setData:e}),k.jsx(Dg,{data:t,setData:e}),k.jsx(Ng,{data:t,setData:e}),k.jsx(Lg,{data:t,setData:e})]})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const uE="175",ry={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},dq={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sk=0,M2=1,ok=2,fq=3,ak=0,cE=1,g0=2,sa=3,ru=0,os=1,No=2,ql=0,nf=1,C2=2,A2=3,b2=4,lk=5,sc=100,uk=101,ck=102,dk=103,fk=104,hk=200,pk=201,mk=202,gk=203,Zy=204,Qy=205,vk=206,_k=207,yk=208,xk=209,Sk=210,Ek=211,wk=212,Mk=213,Ck=214,Jy=0,ex=1,tx=2,mf=3,nx=4,rx=5,ix=6,sx=7,O1=0,Ak=1,bk=2,Za=0,Pk=1,Rk=2,Tk=3,PA=4,Lk=5,Nk=6,Dk=7,P2="attached",kk="detached",dE=300,iu=301,Ac=302,t1=303,n1=304,fm=306,r1=1e3,ko=1001,i1=1002,yi=1003,RA=1004,hq=1004,hp=1005,pq=1005,Yr=1006,v0=1007,mq=1007,Ya=1008,gq=1008,va=1009,TA=1010,LA=1011,Hp=1012,fE=1013,su=1014,Ts=1015,hm=1016,hE=1017,pE=1018,Gp=1020,NA=35902,DA=1021,kA=1022,Gi=1023,FA=1024,OA=1025,Vp=1026,Wp=1027,mE=1028,I1=1029,IA=1030,gE=1031,vq=1032,vE=1033,_0=33776,y0=33777,x0=33778,S0=33779,ox=35840,ax=35841,lx=35842,ux=35843,cx=36196,dx=37492,fx=37496,hx=37808,px=37809,mx=37810,gx=37811,vx=37812,_x=37813,yx=37814,xx=37815,Sx=37816,Ex=37817,wx=37818,Mx=37819,Cx=37820,Ax=37821,E0=36492,bx=36494,Px=36495,UA=36283,Rx=36284,Tx=36285,Lx=36286,Fk=2200,Ok=2201,Ik=2202,s1=2300,Nx=2301,iy=2302,Zd=2400,Qd=2401,o1=2402,_E=2500,BA=2501,_q=0,yq=1,xq=2,Uk=3200,Bk=3201,Sq=3202,Eq=3203,Hc=0,zk=1,Hl="",As="srgb",gf="srgb-linear",a1="linear",Cn="srgb",wq=0,jd=7680,Mq=7681,Cq=7682,Aq=7683,bq=34055,Pq=34056,Rq=5386,Tq=512,Lq=513,Nq=514,Dq=515,kq=516,Fq=517,Oq=518,R2=519,Hk=512,Gk=513,Vk=514,zA=515,Wk=516,jk=517,Xk=518,Yk=519,l1=35044,Iq=35048,Uq=35040,Bq=35045,zq=35049,Hq=35041,Gq=35046,Vq=35050,Wq=35042,jq="100",T2="300 es",ca=2e3,u1=2001,Xq={COMPUTE:"compute",RENDER:"render"};let ll=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Ui=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let E4=1234567;const rf=Math.PI/180,jp=180/Math.PI;function ro(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ui[t&255]+Ui[t>>8&255]+Ui[t>>16&255]+Ui[t>>24&255]+"-"+Ui[e&255]+Ui[e>>8&255]+"-"+Ui[e>>16&15|64]+Ui[e>>24&255]+"-"+Ui[n&63|128]+Ui[n>>8&255]+"-"+Ui[n>>16&255]+Ui[n>>24&255]+Ui[r&255]+Ui[r>>8&255]+Ui[r>>16&255]+Ui[r>>24&255]).toLowerCase()}function Ht(t,e,n){return Math.max(e,Math.min(n,t))}function HA(t,e){return(t%e+e)%e}function Yq(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function qq(t,e,n){return t!==e?(n-t)/(e-t):0}function w0(t,e,n){return(1-n)*t+n*e}function Kq(t,e,n,r){return w0(t,e,1-Math.exp(-n*r))}function $q(t,e=1){return e-Math.abs(HA(t,e*2)-e)}function Zq(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Qq(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Jq(t,e){return t+Math.floor(Math.random()*(e-t+1))}function eK(t,e){return t+Math.random()*(e-t)}function tK(t){return t*(.5-Math.random())}function nK(t){t!==void 0&&(E4=t);let e=E4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rK(t){return t*rf}function iK(t){return t*jp}function sK(t){return(t&t-1)===0&&t!==0}function oK(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function aK(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function lK(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),d=o((e+r)/2),m=s((e-r)/2),g=o((e-r)/2),v=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":t.set(a*d,l*m,l*g,a*u);break;case"YZY":t.set(l*g,a*d,l*m,a*u);break;case"ZXZ":t.set(l*m,l*g,a*d,a*u);break;case"XZX":t.set(a*d,l*y,l*v,a*u);break;case"YXY":t.set(l*v,a*d,l*y,a*u);break;case"ZYZ":t.set(l*y,l*v,a*d,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function is(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Yt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const uK={DEG2RAD:rf,RAD2DEG:jp,generateUUID:ro,clamp:Ht,euclideanModulo:HA,mapLinear:Yq,inverseLerp:qq,lerp:w0,damp:Kq,pingpong:$q,smoothstep:Zq,smootherstep:Qq,randInt:Jq,randFloat:eK,randFloatSpread:tK,seededRandom:nK,degToRad:rK,radToDeg:iK,isPowerOfTwo:sK,ceilPowerOfTwo:oK,floorPowerOfTwo:aK,setQuaternionFromProperEuler:lK,normalize:Yt,denormalize:is};class Ge{constructor(e=0,n=0){Ge.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Ht(this.x,e.x,n.x),this.y=Ht(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Ht(this.x,e,n),this.y=Ht(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ht(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ht(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,n,r,i,s,o,a,l,u){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,u)}set(e,n,r,i,s,o,a,l,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],d=r[4],m=r[7],g=r[2],v=r[5],y=r[8],x=i[0],S=i[3],_=i[6],M=i[1],E=i[4],A=i[7],L=i[2],D=i[5],U=i[8];return s[0]=o*x+a*M+l*L,s[3]=o*S+a*E+l*D,s[6]=o*_+a*A+l*U,s[1]=u*x+d*M+m*L,s[4]=u*S+d*E+m*D,s[7]=u*_+d*A+m*U,s[2]=g*x+v*M+y*L,s[5]=g*S+v*E+y*D,s[8]=g*_+v*A+y*U,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8];return n*o*d-n*a*u-r*s*d+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],m=d*o-a*u,g=a*l-d*s,v=u*s-o*l,y=n*m+r*g+i*v;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=m*x,e[1]=(i*u-d*r)*x,e[2]=(a*r-i*o)*x,e[3]=g*x,e[4]=(d*n-i*l)*x,e[5]=(i*s-a*n)*x,e[6]=v*x,e[7]=(r*l-u*n)*x,e[8]=(o*n-r*s)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Jw.makeScale(e,n)),this}rotate(e){return this.premultiply(Jw.makeRotation(-e)),this}translate(e,n){return this.premultiply(Jw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jw=new Wt;function qk(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const cK={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pp(t,e){return new cK[t](e)}function c1(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Kk(){const t=c1("canvas");return t.style.display="block",t}const w4={};function sy(t){t in w4||(w4[t]=!0,console.warn(t))}function dK(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function fK(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function hK(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const M4=new Wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),C4=new Wt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function pK(){const t={enabled:!0,workingColorSpace:gf,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Cn&&(i.r=Kl(i.r),i.g=Kl(i.g),i.b=Kl(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Cn&&(i.r=bp(i.r),i.g=bp(i.g),i.b=bp(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Hl?a1:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[gf]:{primaries:e,whitePoint:r,transfer:a1,toXYZ:M4,fromXYZ:C4,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:As},outputColorSpaceConfig:{drawingBufferColorSpace:As}},[As]:{primaries:e,whitePoint:r,transfer:Cn,toXYZ:M4,fromXYZ:C4,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:As}}}),t}const fn=pK();function Kl(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function bp(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Th;class $k{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Th===void 0&&(Th=c1("canvas")),Th.width=e.width,Th.height=e.height;const i=Th.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Th}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=c1("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Kl(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Kl(n[r]/255)*255):n[r]=Kl(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mK=0;class uc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mK++}),this.uuid=ro(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(eM(i[o].image)):s.push(eM(i[o]))}else s=eM(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function eM(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?$k.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gK=0;class gr extends ll{constructor(e=gr.DEFAULT_IMAGE,n=gr.DEFAULT_MAPPING,r=ko,i=ko,s=Yr,o=Ya,a=Gi,l=va,u=gr.DEFAULT_ANISOTROPY,d=Hl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gK++}),this.uuid=ro(),this.name="",this.source=new uc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case r1:e.x=e.x-Math.floor(e.x);break;case ko:e.x=e.x<0?0:1;break;case i1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case r1:e.y=e.y-Math.floor(e.y);break;case ko:e.y=e.y<0?0:1;break;case i1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}gr.DEFAULT_IMAGE=null;gr.DEFAULT_MAPPING=dE;gr.DEFAULT_ANISOTROPY=1;class gn{constructor(e=0,n=0,r=0,i=1){gn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],d=l[4],m=l[8],g=l[1],v=l[5],y=l[9],x=l[2],S=l[6],_=l[10];if(Math.abs(d-g)<.01&&Math.abs(m-x)<.01&&Math.abs(y-S)<.01){if(Math.abs(d+g)<.1&&Math.abs(m+x)<.1&&Math.abs(y+S)<.1&&Math.abs(u+v+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(u+1)/2,A=(v+1)/2,L=(_+1)/2,D=(d+g)/4,U=(m+x)/4,O=(y+S)/4;return E>A&&E>L?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=D/r,s=U/r):A>L?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=D/i,s=O/i):L<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(L),r=U/s,i=O/s),this.set(r,i,s,n),this}let M=Math.sqrt((S-y)*(S-y)+(m-x)*(m-x)+(g-d)*(g-d));return Math.abs(M)<.001&&(M=1),this.x=(S-y)/M,this.y=(m-x)/M,this.z=(g-d)/M,this.w=Math.acos((u+v+_-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Ht(this.x,e.x,n.x),this.y=Ht(this.y,e.y,n.y),this.z=Ht(this.z,e.z,n.z),this.w=Ht(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Ht(this.x,e,n),this.y=Ht(this.y,e,n),this.z=Ht(this.z,e,n),this.w=Ht(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ht(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yE extends ll{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new gn(0,0,e,n),this.scissorTest=!1,this.viewport=new gn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new gr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new uc(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rl extends yE{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class U1 extends gr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=yi,this.minFilter=yi,this.wrapR=ko,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vK extends rl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new U1(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class xE extends gr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=yi,this.minFilter=yi,this.wrapR=ko,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _K extends rl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new xE(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class as{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],u=r[i+1],d=r[i+2],m=r[i+3];const g=s[o+0],v=s[o+1],y=s[o+2],x=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=d,e[n+3]=m;return}if(a===1){e[n+0]=g,e[n+1]=v,e[n+2]=y,e[n+3]=x;return}if(m!==x||l!==g||u!==v||d!==y){let S=1-a;const _=l*g+u*v+d*y+m*x,M=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const L=Math.sqrt(E),D=Math.atan2(L,_*M);S=Math.sin(S*D)/L,a=Math.sin(a*D)/L}const A=a*M;if(l=l*S+g*A,u=u*S+v*A,d=d*S+y*A,m=m*S+x*A,S===1-a){const L=1/Math.sqrt(l*l+u*u+d*d+m*m);l*=L,u*=L,d*=L,m*=L}}e[n]=l,e[n+1]=u,e[n+2]=d,e[n+3]=m}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],d=r[i+3],m=s[o],g=s[o+1],v=s[o+2],y=s[o+3];return e[n]=a*y+d*m+l*v-u*g,e[n+1]=l*y+d*g+u*m-a*v,e[n+2]=u*y+d*v+a*g-l*m,e[n+3]=d*y-a*m-l*g-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),d=a(i/2),m=a(s/2),g=l(r/2),v=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=g*d*m+u*v*y,this._y=u*v*m-g*d*y,this._z=u*d*y+g*v*m,this._w=u*d*m-g*v*y;break;case"YXZ":this._x=g*d*m+u*v*y,this._y=u*v*m-g*d*y,this._z=u*d*y-g*v*m,this._w=u*d*m+g*v*y;break;case"ZXY":this._x=g*d*m-u*v*y,this._y=u*v*m+g*d*y,this._z=u*d*y+g*v*m,this._w=u*d*m-g*v*y;break;case"ZYX":this._x=g*d*m-u*v*y,this._y=u*v*m+g*d*y,this._z=u*d*y-g*v*m,this._w=u*d*m+g*v*y;break;case"YZX":this._x=g*d*m+u*v*y,this._y=u*v*m+g*d*y,this._z=u*d*y-g*v*m,this._w=u*d*m-g*v*y;break;case"XZY":this._x=g*d*m-u*v*y,this._y=u*v*m-g*d*y,this._z=u*d*y+g*v*m,this._w=u*d*m+g*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],d=n[6],m=n[10],g=r+a+m;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(d-l)*v,this._y=(s-u)*v,this._z=(o-i)*v}else if(r>a&&r>m){const v=2*Math.sqrt(1+r-a-m);this._w=(d-l)/v,this._x=.25*v,this._y=(i+o)/v,this._z=(s+u)/v}else if(a>m){const v=2*Math.sqrt(1+a-r-m);this._w=(s-u)/v,this._x=(i+o)/v,this._y=.25*v,this._z=(l+d)/v}else{const v=2*Math.sqrt(1+m-r-a);this._w=(o-i)/v,this._x=(s+u)/v,this._y=(l+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ht(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,d=n._w;return this._x=r*d+o*a+i*u-s*l,this._y=i*d+o*l+s*a-r*u,this._z=s*d+o*u+r*l-i*a,this._w=o*d-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-n;return this._w=v*o+n*this._w,this._x=v*r+n*this._x,this._y=v*i+n*this._y,this._z=v*s+n*this._z,this.normalize(),this}const u=Math.sqrt(l),d=Math.atan2(u,a),m=Math.sin((1-n)*d)/u,g=Math.sin(n*d)/u;return this._w=o*m+this._w*g,this._x=r*m+this._x*g,this._y=i*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,n=0,r=0){re.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(A4.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(A4.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),d=2*(a*n-s*i),m=2*(s*r-o*n);return this.x=n+l*u+o*m-a*d,this.y=r+l*d+a*u-s*m,this.z=i+l*m+s*d-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Ht(this.x,e.x,n.x),this.y=Ht(this.y,e.y,n.y),this.z=Ht(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Ht(this.x,e,n),this.y=Ht(this.y,e,n),this.z=Ht(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ht(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return tM.copy(this).projectOnVector(e),this.sub(tM)}reflect(e){return this.sub(tM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ht(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tM=new re,A4=new as;class ls{constructor(e=new re(1/0,1/0,1/0),n=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Jo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Jo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Jo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Jo):Jo.fromBufferAttribute(s,o),Jo.applyMatrix4(e.matrixWorld),this.expandByPoint(Jo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Vv.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Vv.copy(r.boundingBox)),Vv.applyMatrix4(e.matrixWorld),this.union(Vv)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Jo),Jo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fg),Wv.subVectors(this.max,Fg),Lh.subVectors(e.a,Fg),Nh.subVectors(e.b,Fg),Dh.subVectors(e.c,Fg),ju.subVectors(Nh,Lh),Xu.subVectors(Dh,Nh),Pd.subVectors(Lh,Dh);let n=[0,-ju.z,ju.y,0,-Xu.z,Xu.y,0,-Pd.z,Pd.y,ju.z,0,-ju.x,Xu.z,0,-Xu.x,Pd.z,0,-Pd.x,-ju.y,ju.x,0,-Xu.y,Xu.x,0,-Pd.y,Pd.x,0];return!nM(n,Lh,Nh,Dh,Wv)||(n=[1,0,0,0,1,0,0,0,1],!nM(n,Lh,Nh,Dh,Wv))?!1:(jv.crossVectors(ju,Xu),n=[jv.x,jv.y,jv.z],nM(n,Lh,Nh,Dh,Wv))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Jo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Nl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nl=[new re,new re,new re,new re,new re,new re,new re,new re],Jo=new re,Vv=new ls,Lh=new re,Nh=new re,Dh=new re,ju=new re,Xu=new re,Pd=new re,Fg=new re,Wv=new re,jv=new re,Rd=new re;function nM(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Rd.fromArray(t,s);const a=i.x*Math.abs(Rd.x)+i.y*Math.abs(Rd.y)+i.z*Math.abs(Rd.z),l=e.dot(Rd),u=n.dot(Rd),d=r.dot(Rd);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>a)return!1}return!0}const yK=new ls,Og=new re,rM=new re;class Vi{constructor(e=new re,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):yK.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Og.subVectors(e,this.center);const n=Og.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Og,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Og.copy(e.center).add(rM)),this.expandByPoint(Og.copy(e.center).sub(rM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Dl=new re,iM=new re,Xv=new re,Yu=new re,sM=new re,Yv=new re,oM=new re;class pm{constructor(e=new re,n=new re(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dl)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Dl.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Dl.copy(this.origin).addScaledVector(this.direction,n),Dl.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){iM.copy(e).add(n).multiplyScalar(.5),Xv.copy(n).sub(e).normalize(),Yu.copy(this.origin).sub(iM);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Xv),a=Yu.dot(this.direction),l=-Yu.dot(Xv),u=Yu.lengthSq(),d=Math.abs(1-o*o);let m,g,v,y;if(d>0)if(m=o*l-a,g=o*a-l,y=s*d,m>=0)if(g>=-y)if(g<=y){const x=1/d;m*=x,g*=x,v=m*(m+o*g+2*a)+g*(o*m+g+2*l)+u}else g=s,m=Math.max(0,-(o*g+a)),v=-m*m+g*(g+2*l)+u;else g=-s,m=Math.max(0,-(o*g+a)),v=-m*m+g*(g+2*l)+u;else g<=-y?(m=Math.max(0,-(-o*s+a)),g=m>0?-s:Math.min(Math.max(-s,-l),s),v=-m*m+g*(g+2*l)+u):g<=y?(m=0,g=Math.min(Math.max(-s,-l),s),v=g*(g+2*l)+u):(m=Math.max(0,-(o*s+a)),g=m>0?s:Math.min(Math.max(-s,-l),s),v=-m*m+g*(g+2*l)+u);else g=o>0?-s:s,m=Math.max(0,-(o*g+a)),v=-m*m+g*(g+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(iM).addScaledVector(Xv,g),v}intersectSphere(e,n){Dl.subVectors(e.center,this.origin);const r=Dl.dot(this.direction),i=Dl.dot(Dl)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const u=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,g=this.origin;return u>=0?(r=(e.min.x-g.x)*u,i=(e.max.x-g.x)*u):(r=(e.max.x-g.x)*u,i=(e.min.x-g.x)*u),d>=0?(s=(e.min.y-g.y)*d,o=(e.max.y-g.y)*d):(s=(e.max.y-g.y)*d,o=(e.min.y-g.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),m>=0?(a=(e.min.z-g.z)*m,l=(e.max.z-g.z)*m):(a=(e.max.z-g.z)*m,l=(e.min.z-g.z)*m),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Dl)!==null}intersectTriangle(e,n,r,i,s){sM.subVectors(n,e),Yv.subVectors(r,e),oM.crossVectors(sM,Yv);let o=this.direction.dot(oM),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Yu.subVectors(this.origin,e);const l=a*this.direction.dot(Yv.crossVectors(Yu,Yv));if(l<0)return null;const u=a*this.direction.dot(sM.cross(Yu));if(u<0||l+u>o)return null;const d=-a*Yu.dot(oM);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ft{constructor(e,n,r,i,s,o,a,l,u,d,m,g,v,y,x,S){Ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,u,d,m,g,v,y,x,S)}set(e,n,r,i,s,o,a,l,u,d,m,g,v,y,x,S){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=d,_[10]=m,_[14]=g,_[3]=v,_[7]=y,_[11]=x,_[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ft().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/kh.setFromMatrixColumn(e,0).length(),s=1/kh.setFromMatrixColumn(e,1).length(),o=1/kh.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const g=o*d,v=o*m,y=a*d,x=a*m;n[0]=l*d,n[4]=-l*m,n[8]=u,n[1]=v+y*u,n[5]=g-x*u,n[9]=-a*l,n[2]=x-g*u,n[6]=y+v*u,n[10]=o*l}else if(e.order==="YXZ"){const g=l*d,v=l*m,y=u*d,x=u*m;n[0]=g+x*a,n[4]=y*a-v,n[8]=o*u,n[1]=o*m,n[5]=o*d,n[9]=-a,n[2]=v*a-y,n[6]=x+g*a,n[10]=o*l}else if(e.order==="ZXY"){const g=l*d,v=l*m,y=u*d,x=u*m;n[0]=g-x*a,n[4]=-o*m,n[8]=y+v*a,n[1]=v+y*a,n[5]=o*d,n[9]=x-g*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const g=o*d,v=o*m,y=a*d,x=a*m;n[0]=l*d,n[4]=y*u-v,n[8]=g*u+x,n[1]=l*m,n[5]=x*u+g,n[9]=v*u-y,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const g=o*l,v=o*u,y=a*l,x=a*u;n[0]=l*d,n[4]=x-g*m,n[8]=y*m+v,n[1]=m,n[5]=o*d,n[9]=-a*d,n[2]=-u*d,n[6]=v*m+y,n[10]=g-x*m}else if(e.order==="XZY"){const g=o*l,v=o*u,y=a*l,x=a*u;n[0]=l*d,n[4]=-m,n[8]=u*d,n[1]=g*m+x,n[5]=o*d,n[9]=v*m-y,n[2]=y*m-v,n[6]=a*d,n[10]=x*m+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xK,e,SK)}lookAt(e,n,r){const i=this.elements;return Ks.subVectors(e,n),Ks.lengthSq()===0&&(Ks.z=1),Ks.normalize(),qu.crossVectors(r,Ks),qu.lengthSq()===0&&(Math.abs(r.z)===1?Ks.x+=1e-4:Ks.z+=1e-4,Ks.normalize(),qu.crossVectors(r,Ks)),qu.normalize(),qv.crossVectors(Ks,qu),i[0]=qu.x,i[4]=qv.x,i[8]=Ks.x,i[1]=qu.y,i[5]=qv.y,i[9]=Ks.y,i[2]=qu.z,i[6]=qv.z,i[10]=Ks.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],d=r[1],m=r[5],g=r[9],v=r[13],y=r[2],x=r[6],S=r[10],_=r[14],M=r[3],E=r[7],A=r[11],L=r[15],D=i[0],U=i[4],O=i[8],B=i[12],T=i[1],z=i[5],W=i[9],K=i[13],Z=i[2],te=i[6],ne=i[10],de=i[14],Y=i[3],ae=i[7],se=i[11],he=i[15];return s[0]=o*D+a*T+l*Z+u*Y,s[4]=o*U+a*z+l*te+u*ae,s[8]=o*O+a*W+l*ne+u*se,s[12]=o*B+a*K+l*de+u*he,s[1]=d*D+m*T+g*Z+v*Y,s[5]=d*U+m*z+g*te+v*ae,s[9]=d*O+m*W+g*ne+v*se,s[13]=d*B+m*K+g*de+v*he,s[2]=y*D+x*T+S*Z+_*Y,s[6]=y*U+x*z+S*te+_*ae,s[10]=y*O+x*W+S*ne+_*se,s[14]=y*B+x*K+S*de+_*he,s[3]=M*D+E*T+A*Z+L*Y,s[7]=M*U+E*z+A*te+L*ae,s[11]=M*O+E*W+A*ne+L*se,s[15]=M*B+E*K+A*de+L*he,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],d=e[2],m=e[6],g=e[10],v=e[14],y=e[3],x=e[7],S=e[11],_=e[15];return y*(+s*l*m-i*u*m-s*a*g+r*u*g+i*a*v-r*l*v)+x*(+n*l*v-n*u*g+s*o*g-i*o*v+i*u*d-s*l*d)+S*(+n*u*m-n*a*v-s*o*m+r*o*v+s*a*d-r*u*d)+_*(-i*a*d-n*l*m+n*a*g+i*o*m-r*o*g+r*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],m=e[9],g=e[10],v=e[11],y=e[12],x=e[13],S=e[14],_=e[15],M=m*S*u-x*g*u+x*l*v-a*S*v-m*l*_+a*g*_,E=y*g*u-d*S*u-y*l*v+o*S*v+d*l*_-o*g*_,A=d*x*u-y*m*u+y*a*v-o*x*v-d*a*_+o*m*_,L=y*m*l-d*x*l-y*a*g+o*x*g+d*a*S-o*m*S,D=n*M+r*E+i*A+s*L;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/D;return e[0]=M*U,e[1]=(x*g*s-m*S*s-x*i*v+r*S*v+m*i*_-r*g*_)*U,e[2]=(a*S*s-x*l*s+x*i*u-r*S*u-a*i*_+r*l*_)*U,e[3]=(m*l*s-a*g*s-m*i*u+r*g*u+a*i*v-r*l*v)*U,e[4]=E*U,e[5]=(d*S*s-y*g*s+y*i*v-n*S*v-d*i*_+n*g*_)*U,e[6]=(y*l*s-o*S*s-y*i*u+n*S*u+o*i*_-n*l*_)*U,e[7]=(o*g*s-d*l*s+d*i*u-n*g*u-o*i*v+n*l*v)*U,e[8]=A*U,e[9]=(y*m*s-d*x*s-y*r*v+n*x*v+d*r*_-n*m*_)*U,e[10]=(o*x*s-y*a*s+y*r*u-n*x*u-o*r*_+n*a*_)*U,e[11]=(d*a*s-o*m*s-d*r*u+n*m*u+o*r*v-n*a*v)*U,e[12]=L*U,e[13]=(d*x*i-y*m*i+y*r*g-n*x*g-d*r*S+n*m*S)*U,e[14]=(y*a*i-o*x*i-y*r*l+n*x*l+o*r*S-n*a*S)*U,e[15]=(o*m*i-d*a*i+d*r*l-n*m*l-o*r*g+n*a*g)*U,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,d=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,d*a+r,d*l-i*o,0,u*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,d=o+o,m=a+a,g=s*u,v=s*d,y=s*m,x=o*d,S=o*m,_=a*m,M=l*u,E=l*d,A=l*m,L=r.x,D=r.y,U=r.z;return i[0]=(1-(x+_))*L,i[1]=(v+A)*L,i[2]=(y-E)*L,i[3]=0,i[4]=(v-A)*D,i[5]=(1-(g+_))*D,i[6]=(S+M)*D,i[7]=0,i[8]=(y+E)*U,i[9]=(S-M)*U,i[10]=(1-(g+x))*U,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=kh.set(i[0],i[1],i[2]).length();const o=kh.set(i[4],i[5],i[6]).length(),a=kh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ea.copy(this);const u=1/s,d=1/o,m=1/a;return ea.elements[0]*=u,ea.elements[1]*=u,ea.elements[2]*=u,ea.elements[4]*=d,ea.elements[5]*=d,ea.elements[6]*=d,ea.elements[8]*=m,ea.elements[9]*=m,ea.elements[10]*=m,n.setFromRotationMatrix(ea),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=ca){const l=this.elements,u=2*s/(n-e),d=2*s/(r-i),m=(n+e)/(n-e),g=(r+i)/(r-i);let v,y;if(a===ca)v=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===u1)v=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=m,l[12]=0,l[1]=0,l[5]=d,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=ca){const l=this.elements,u=1/(n-e),d=1/(r-i),m=1/(o-s),g=(n+e)*u,v=(r+i)*d;let y,x;if(a===ca)y=(o+s)*m,x=-2*m;else if(a===u1)y=s*m,x=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=x,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const kh=new re,ea=new Ft,xK=new re(0,0,0),SK=new re(1,1,1),qu=new re,qv=new re,Ks=new re,b4=new Ft,P4=new as;class ao{constructor(e=0,n=0,r=0,i=ao.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],d=i[9],m=i[2],g=i[6],v=i[10];switch(n){case"XYZ":this._y=Math.asin(Ht(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ht(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ht(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,v),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ht(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ht(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Ht(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return b4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(b4,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return P4.setFromEuler(this),this.setFromQuaternion(P4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ao.DEFAULT_ORDER="XYZ";class sf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let EK=0;const R4=new re,Fh=new as,kl=new Ft,Kv=new re,Ig=new re,wK=new re,MK=new as,T4=new re(1,0,0),L4=new re(0,1,0),N4=new re(0,0,1),D4={type:"added"},CK={type:"removed"},Oh={type:"childadded",child:null},aM={type:"childremoved",child:null};class _n extends ll{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EK++}),this.uuid=ro(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new re,n=new ao,r=new as,i=new re(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ft},normalMatrix:{value:new Wt}}),this.matrix=new Ft,this.matrixWorld=new Ft,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Fh.setFromAxisAngle(e,n),this.quaternion.multiply(Fh),this}rotateOnWorldAxis(e,n){return Fh.setFromAxisAngle(e,n),this.quaternion.premultiply(Fh),this}rotateX(e){return this.rotateOnAxis(T4,e)}rotateY(e){return this.rotateOnAxis(L4,e)}rotateZ(e){return this.rotateOnAxis(N4,e)}translateOnAxis(e,n){return R4.copy(e).applyQuaternion(this.quaternion),this.position.add(R4.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(T4,e)}translateY(e){return this.translateOnAxis(L4,e)}translateZ(e){return this.translateOnAxis(N4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(kl.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Kv.copy(e):Kv.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ig.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kl.lookAt(Ig,Kv,this.up):kl.lookAt(Kv,Ig,this.up),this.quaternion.setFromRotationMatrix(kl),i&&(kl.extractRotation(i.matrixWorld),Fh.setFromRotationMatrix(kl),this.quaternion.premultiply(Fh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(D4),Oh.child=e,this.dispatchEvent(Oh),Oh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(CK),aM.child=e,this.dispatchEvent(aM),aM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),kl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),kl.multiply(e.parent.matrixWorld)),e.applyMatrix4(kl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(D4),Oh.child=e,this.dispatchEvent(Oh),Oh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ig,e,wK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ig,MK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const m=l[u];s(e.shapes,m)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),d=o(e.images),m=o(e.shapes),g=o(e.skeletons),v=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),m.length>0&&(r.shapes=m),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}_n.DEFAULT_UP=new re(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ta=new re,Fl=new re,lM=new re,Ol=new re,Ih=new re,Uh=new re,k4=new re,uM=new re,cM=new re,dM=new re,fM=new gn,hM=new gn,pM=new gn;class Ps{constructor(e=new re,n=new re,r=new re){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),ta.subVectors(e,n),i.cross(ta);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){ta.subVectors(i,n),Fl.subVectors(r,n),lM.subVectors(e,n);const o=ta.dot(ta),a=ta.dot(Fl),l=ta.dot(lM),u=Fl.dot(Fl),d=Fl.dot(lM),m=o*u-a*a;if(m===0)return s.set(0,0,0),null;const g=1/m,v=(u*l-a*d)*g,y=(o*d-a*l)*g;return s.set(1-v-y,y,v)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ol)===null?!1:Ol.x>=0&&Ol.y>=0&&Ol.x+Ol.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ol)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ol.x),l.addScaledVector(o,Ol.y),l.addScaledVector(a,Ol.z),l)}static getInterpolatedAttribute(e,n,r,i,s,o){return fM.setScalar(0),hM.setScalar(0),pM.setScalar(0),fM.fromBufferAttribute(e,n),hM.fromBufferAttribute(e,r),pM.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(fM,s.x),o.addScaledVector(hM,s.y),o.addScaledVector(pM,s.z),o}static isFrontFacing(e,n,r,i){return ta.subVectors(r,n),Fl.subVectors(e,n),ta.cross(Fl).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ta.subVectors(this.c,this.b),Fl.subVectors(this.a,this.b),ta.cross(Fl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ps.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ps.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Ps.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Ps.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ps.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Ih.subVectors(i,r),Uh.subVectors(s,r),uM.subVectors(e,r);const l=Ih.dot(uM),u=Uh.dot(uM);if(l<=0&&u<=0)return n.copy(r);cM.subVectors(e,i);const d=Ih.dot(cM),m=Uh.dot(cM);if(d>=0&&m<=d)return n.copy(i);const g=l*m-d*u;if(g<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(r).addScaledVector(Ih,o);dM.subVectors(e,s);const v=Ih.dot(dM),y=Uh.dot(dM);if(y>=0&&v<=y)return n.copy(s);const x=v*u-l*y;if(x<=0&&u>=0&&y<=0)return a=u/(u-y),n.copy(r).addScaledVector(Uh,a);const S=d*y-v*m;if(S<=0&&m-d>=0&&v-y>=0)return k4.subVectors(s,i),a=(m-d)/(m-d+(v-y)),n.copy(i).addScaledVector(k4,a);const _=1/(S+x+g);return o=x*_,a=g*_,n.copy(r).addScaledVector(Ih,o).addScaledVector(Uh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Zk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ku={h:0,s:0,l:0},$v={h:0,s:0,l:0};function mM(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class _t{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=As){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=fn.workingColorSpace){return this.r=e,this.g=n,this.b=r,fn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=fn.workingColorSpace){if(e=HA(e,1),n=Ht(n,0,1),r=Ht(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=mM(o,s,e+1/3),this.g=mM(o,s,e),this.b=mM(o,s,e-1/3)}return fn.toWorkingColorSpace(this,i),this}setStyle(e,n=As){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=As){const r=Zk[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kl(e.r),this.g=Kl(e.g),this.b=Kl(e.b),this}copyLinearToSRGB(e){return this.r=bp(e.r),this.g=bp(e.g),this.b=bp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=As){return fn.fromWorkingColorSpace(Bi.copy(this),e),Math.round(Ht(Bi.r*255,0,255))*65536+Math.round(Ht(Bi.g*255,0,255))*256+Math.round(Ht(Bi.b*255,0,255))}getHexString(e=As){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=fn.workingColorSpace){fn.fromWorkingColorSpace(Bi.copy(this),n);const r=Bi.r,i=Bi.g,s=Bi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const d=(a+o)/2;if(a===o)l=0,u=0;else{const m=o-a;switch(u=d<=.5?m/(o+a):m/(2-o-a),o){case r:l=(i-s)/m+(i<s?6:0);break;case i:l=(s-r)/m+2;break;case s:l=(r-i)/m+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,n=fn.workingColorSpace){return fn.fromWorkingColorSpace(Bi.copy(this),n),e.r=Bi.r,e.g=Bi.g,e.b=Bi.b,e}getStyle(e=As){fn.fromWorkingColorSpace(Bi.copy(this),e);const n=Bi.r,r=Bi.g,i=Bi.b;return e!==As?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Ku),this.setHSL(Ku.h+e,Ku.s+n,Ku.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Ku),e.getHSL($v);const r=w0(Ku.h,$v.h,n),i=w0(Ku.s,$v.s,n),s=w0(Ku.l,$v.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Bi=new _t;_t.NAMES=Zk;let AK=0;class Xi extends ll{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AK++}),this.uuid=ro(),this.name="",this.type="Material",this.blending=nf,this.side=ru,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zy,this.blendDst=Qy,this.blendEquation=sc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new _t(0,0,0),this.blendAlpha=0,this.depthFunc=mf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=R2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jd,this.stencilZFail=jd,this.stencilZPass=jd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nf&&(r.blending=this.blending),this.side!==ru&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Zy&&(r.blendSrc=this.blendSrc),this.blendDst!==Qy&&(r.blendDst=this.blendDst),this.blendEquation!==sc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==mf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==R2&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==jd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==jd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Gc extends Xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Gl=bK();function bK(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ms(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ht(t,-65504,65504),Gl.floatView[0]=t;const e=Gl.uint32View[0],n=e>>23&511;return Gl.baseTable[n]+((e&8388607)>>Gl.shiftTable[n])}function t0(t){const e=t>>10;return Gl.uint32View[0]=Gl.mantissaTable[Gl.offsetTable[e]+(t&1023)]+Gl.exponentTable[e],Gl.floatView[0]}class PK{static toHalfFloat(e){return Ms(e)}static fromHalfFloat(e){return t0(e)}}const Tr=new re,Zv=new Ge;let RK=0;class Rn{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:RK++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=l1,this.updateRanges=[],this.gpuType=Ts,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Zv.fromBufferAttribute(this,n),Zv.applyMatrix3(e),this.setXY(n,Zv.x,Zv.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Tr.fromBufferAttribute(this,n),Tr.applyMatrix3(e),this.setXYZ(n,Tr.x,Tr.y,Tr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Tr.fromBufferAttribute(this,n),Tr.applyMatrix4(e),this.setXYZ(n,Tr.x,Tr.y,Tr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Tr.fromBufferAttribute(this,n),Tr.applyNormalMatrix(e),this.setXYZ(n,Tr.x,Tr.y,Tr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Tr.fromBufferAttribute(this,n),Tr.transformDirection(e),this.setXYZ(n,Tr.x,Tr.y,Tr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=is(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Yt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=is(n,this.array)),n}setX(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=is(n,this.array)),n}setY(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=is(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=is(n,this.array)),n}setW(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array),s=Yt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==l1&&(e.usage=this.usage),e}}class TK extends Rn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class LK extends Rn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class NK extends Rn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class DK extends Rn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class GA extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class kK extends Rn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class VA extends Rn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class FK extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=t0(this.array[e*this.itemSize]);return this.normalized&&(n=is(n,this.array)),n}setX(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize]=Ms(n),this}getY(e){let n=t0(this.array[e*this.itemSize+1]);return this.normalized&&(n=is(n,this.array)),n}setY(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+1]=Ms(n),this}getZ(e){let n=t0(this.array[e*this.itemSize+2]);return this.normalized&&(n=is(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+2]=Ms(n),this}getW(e){let n=t0(this.array[e*this.itemSize+3]);return this.normalized&&(n=is(n,this.array)),n}setW(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+3]=Ms(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array)),this.array[e+0]=Ms(n),this.array[e+1]=Ms(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array)),this.array[e+0]=Ms(n),this.array[e+1]=Ms(r),this.array[e+2]=Ms(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array),s=Yt(s,this.array)),this.array[e+0]=Ms(n),this.array[e+1]=Ms(r),this.array[e+2]=Ms(i),this.array[e+3]=Ms(s),this}}class Ct extends Rn{constructor(e,n,r){super(new Float32Array(e),n,r)}}let OK=0;const Po=new Ft,gM=new _n,Bh=new re,$s=new ls,Ug=new ls,si=new re;class Zt extends ll{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OK++}),this.uuid=ro(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qk(e)?VA:GA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Wt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Po.makeRotationFromQuaternion(e),this.applyMatrix4(Po),this}rotateX(e){return Po.makeRotationX(e),this.applyMatrix4(Po),this}rotateY(e){return Po.makeRotationY(e),this.applyMatrix4(Po),this}rotateZ(e){return Po.makeRotationZ(e),this.applyMatrix4(Po),this}translate(e,n,r){return Po.makeTranslation(e,n,r),this.applyMatrix4(Po),this}scale(e,n,r){return Po.makeScale(e,n,r),this.applyMatrix4(Po),this}lookAt(e){return gM.lookAt(e),gM.updateMatrix(),this.applyMatrix4(gM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bh).negate(),this.translate(Bh.x,Bh.y,Bh.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ct(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];$s.setFromBufferAttribute(s),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,$s.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,$s.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint($s.min),this.boundingBox.expandByPoint($s.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new re,1/0);return}if(e){const r=this.boundingSphere.center;if($s.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Ug.setFromBufferAttribute(a),this.morphTargetsRelative?(si.addVectors($s.min,Ug.min),$s.expandByPoint(si),si.addVectors($s.max,Ug.max),$s.expandByPoint(si)):($s.expandByPoint(Ug.min),$s.expandByPoint(Ug.max))}$s.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)si.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(si));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,d=a.count;u<d;u++)si.fromBufferAttribute(a,u),l&&(Bh.fromBufferAttribute(e,u),si.add(Bh)),i=Math.max(i,r.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Rn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let O=0;O<r.count;O++)a[O]=new re,l[O]=new re;const u=new re,d=new re,m=new re,g=new Ge,v=new Ge,y=new Ge,x=new re,S=new re;function _(O,B,T){u.fromBufferAttribute(r,O),d.fromBufferAttribute(r,B),m.fromBufferAttribute(r,T),g.fromBufferAttribute(s,O),v.fromBufferAttribute(s,B),y.fromBufferAttribute(s,T),d.sub(u),m.sub(u),v.sub(g),y.sub(g);const z=1/(v.x*y.y-y.x*v.y);isFinite(z)&&(x.copy(d).multiplyScalar(y.y).addScaledVector(m,-v.y).multiplyScalar(z),S.copy(m).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(z),a[O].add(x),a[B].add(x),a[T].add(x),l[O].add(S),l[B].add(S),l[T].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let O=0,B=M.length;O<B;++O){const T=M[O],z=T.start,W=T.count;for(let K=z,Z=z+W;K<Z;K+=3)_(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const E=new re,A=new re,L=new re,D=new re;function U(O){L.fromBufferAttribute(i,O),D.copy(L);const B=a[O];E.copy(B),E.sub(L.multiplyScalar(L.dot(B))).normalize(),A.crossVectors(D,B);const z=A.dot(l[O])<0?-1:1;o.setXYZW(O,E.x,E.y,E.z,z)}for(let O=0,B=M.length;O<B;++O){const T=M[O],z=T.start,W=T.count;for(let K=z,Z=z+W;K<Z;K+=3)U(e.getX(K+0)),U(e.getX(K+1)),U(e.getX(K+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Rn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let g=0,v=r.count;g<v;g++)r.setXYZ(g,0,0,0);const i=new re,s=new re,o=new re,a=new re,l=new re,u=new re,d=new re,m=new re;if(e)for(let g=0,v=e.count;g<v;g+=3){const y=e.getX(g+0),x=e.getX(g+1),S=e.getX(g+2);i.fromBufferAttribute(n,y),s.fromBufferAttribute(n,x),o.fromBufferAttribute(n,S),d.subVectors(o,s),m.subVectors(i,s),d.cross(m),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,S),a.add(d),l.add(d),u.add(d),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(S,u.x,u.y,u.z)}else for(let g=0,v=n.count;g<v;g+=3)i.fromBufferAttribute(n,g+0),s.fromBufferAttribute(n,g+1),o.fromBufferAttribute(n,g+2),d.subVectors(o,s),m.subVectors(i,s),d.cross(m),r.setXYZ(g+0,d.x,d.y,d.z),r.setXYZ(g+1,d.x,d.y,d.z),r.setXYZ(g+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)si.fromBufferAttribute(e,n),si.normalize(),e.setXYZ(n,si.x,si.y,si.z)}toNonIndexed(){function e(a,l){const u=a.array,d=a.itemSize,m=a.normalized,g=new u.constructor(l.length*d);let v=0,y=0;for(let x=0,S=l.length;x<S;x++){a.isInterleavedBufferAttribute?v=l[x]*a.data.stride+a.offset:v=l[x]*d;for(let _=0;_<d;_++)g[y++]=u[v++]}return new Rn(g,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Zt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let d=0,m=u.length;d<m;d++){const g=u[d],v=e(g,r);l.push(v)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let m=0,g=u.length;m<g;m++){const v=u[m];d.push(v.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(n))}const s=e.morphAttributes;for(const u in s){const d=[],m=s[u];for(let g=0,v=m.length;g<v;g++)d.push(m[g].clone(n));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const m=o[u];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const F4=new Ft,Td=new pm,Qv=new Vi,O4=new re,Jv=new re,e_=new re,t_=new re,vM=new re,n_=new re,I4=new re,r_=new re;class Nr extends _n{constructor(e=new Zt,n=new Gc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){n_.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const d=a[l],m=s[l];d!==0&&(vM.fromBufferAttribute(m,e),o?n_.addScaledVector(vM,d):n_.addScaledVector(vM.sub(n),d))}n.add(n_)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Qv.copy(r.boundingSphere),Qv.applyMatrix4(s),Td.copy(e.ray).recast(e.near),!(Qv.containsPoint(Td.origin)===!1&&(Td.intersectSphere(Qv,O4)===null||Td.origin.distanceToSquared(O4)>(e.far-e.near)**2))&&(F4.copy(s).invert(),Td.copy(e.ray).applyMatrix4(F4),!(r.boundingBox!==null&&Td.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Td)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,m=s.attributes.normal,g=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,x=g.length;y<x;y++){const S=g[y],_=o[S.materialIndex],M=Math.max(S.start,v.start),E=Math.min(a.count,Math.min(S.start+S.count,v.start+v.count));for(let A=M,L=E;A<L;A+=3){const D=a.getX(A),U=a.getX(A+1),O=a.getX(A+2);i=i_(this,_,e,r,u,d,m,D,U,O),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const y=Math.max(0,v.start),x=Math.min(a.count,v.start+v.count);for(let S=y,_=x;S<_;S+=3){const M=a.getX(S),E=a.getX(S+1),A=a.getX(S+2);i=i_(this,o,e,r,u,d,m,M,E,A),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,x=g.length;y<x;y++){const S=g[y],_=o[S.materialIndex],M=Math.max(S.start,v.start),E=Math.min(l.count,Math.min(S.start+S.count,v.start+v.count));for(let A=M,L=E;A<L;A+=3){const D=A,U=A+1,O=A+2;i=i_(this,_,e,r,u,d,m,D,U,O),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const y=Math.max(0,v.start),x=Math.min(l.count,v.start+v.count);for(let S=y,_=x;S<_;S+=3){const M=S,E=S+1,A=S+2;i=i_(this,o,e,r,u,d,m,M,E,A),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}}}function IK(t,e,n,r,i,s,o,a){let l;if(e.side===os?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===ru,a),l===null)return null;r_.copy(a),r_.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(r_);return u<n.near||u>n.far?null:{distance:u,point:r_.clone(),object:t}}function i_(t,e,n,r,i,s,o,a,l,u){t.getVertexPosition(a,Jv),t.getVertexPosition(l,e_),t.getVertexPosition(u,t_);const d=IK(t,e,n,r,Jv,e_,t_,I4);if(d){const m=new re;Ps.getBarycoord(I4,Jv,e_,t_,m),i&&(d.uv=Ps.getInterpolatedAttribute(i,a,l,u,m,new Ge)),s&&(d.uv1=Ps.getInterpolatedAttribute(s,a,l,u,m,new Ge)),o&&(d.normal=Ps.getInterpolatedAttribute(o,a,l,u,m,new re),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const g={a,b:l,c:u,normal:new re,materialIndex:0};Ps.getNormal(Jv,e_,t_,g.normal),d.face=g,d.barycoord=m}return d}class Tf extends Zt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],d=[],m=[];let g=0,v=0;y("z","y","x",-1,-1,r,n,e,o,s,0),y("z","y","x",1,-1,r,n,-e,o,s,1),y("x","z","y",1,1,e,r,n,i,o,2),y("x","z","y",1,-1,e,r,-n,i,o,3),y("x","y","z",1,-1,e,n,r,i,s,4),y("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(m,2));function y(x,S,_,M,E,A,L,D,U,O,B){const T=A/U,z=L/O,W=A/2,K=L/2,Z=D/2,te=U+1,ne=O+1;let de=0,Y=0;const ae=new re;for(let se=0;se<ne;se++){const he=se*z-K;for(let Me=0;Me<te;Me++){const ze=Me*T-W;ae[x]=ze*M,ae[S]=he*E,ae[_]=Z,u.push(ae.x,ae.y,ae.z),ae[x]=0,ae[S]=0,ae[_]=D>0?1:-1,d.push(ae.x,ae.y,ae.z),m.push(Me/U),m.push(1-se/O),de+=1}}for(let se=0;se<O;se++)for(let he=0;he<U;he++){const Me=g+he+te*se,ze=g+he+te*(se+1),ge=g+(he+1)+te*(se+1),De=g+(he+1)+te*se;l.push(Me,ze,De),l.push(ze,ge,De),Y+=6}a.addGroup(v,Y,B),v+=Y,g+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xp(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ns(t){const e={};for(let n=0;n<t.length;n++){const r=Xp(t[n]);for(const i in r)e[i]=r[i]}return e}function UK(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Qk(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const Jk={clone:Xp,merge:ns};var BK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _a extends Xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BK,this.fragmentShader=zK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xp(e.uniforms),this.uniformsGroups=UK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class B1 extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ft,this.projectionMatrix=new Ft,this.projectionMatrixInverse=new Ft,this.coordinateSystem=ca}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const $u=new re,U4=new Ge,B4=new Ge;class ai extends B1{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=jp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(rf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jp*2*Math.atan(Math.tan(rf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){$u.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set($u.x,$u.y).multiplyScalar(-e/$u.z),$u.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set($u.x,$u.y).multiplyScalar(-e/$u.z)}getViewSize(e,n){return this.getViewBounds(e,U4,B4),n.subVectors(B4,U4)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(rf*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const zh=-90,Hh=1;class eF extends _n{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ai(zh,Hh,e,n);i.layers=this.layers,this.add(i);const s=new ai(zh,Hh,e,n);s.layers=this.layers,this.add(s);const o=new ai(zh,Hh,e,n);o.layers=this.layers,this.add(o);const a=new ai(zh,Hh,e,n);a.layers=this.layers,this.add(a);const l=new ai(zh,Hh,e,n);l.layers=this.layers,this.add(l);const u=new ai(zh,Hh,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const u of n)this.remove(u);if(e===ca)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===u1)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,d]=this.children,m=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(n,d),e.setRenderTarget(m,g,v),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class z1 extends gr{constructor(e=[],n=iu,r,i,s,o,a,l,u,d){super(e,n,r,i,s,o,a,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tF extends rl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new z1(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Yr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Tf(5,5,5),s=new _a({name:"CubemapFromEquirect",uniforms:Xp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:os,blending:ql});s.uniforms.tEquirect.value=n;const o=new Nr(i,s),a=n.minFilter;return n.minFilter===Ya&&(n.minFilter=Yr),new eF(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}class mp extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const HK={type:"move"};class oy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const S=n.getJointPose(x,r),_=this._getHandJoint(u,x);S!==null&&(_.matrix.fromArray(S.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=S.radius),_.visible=S!==null}const d=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=d.position.distanceTo(m.position),v=.02,y=.005;u.inputState.pinching&&g>v+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=v-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(HK)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new mp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class SE{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new _t(e),this.density=n}clone(){return new SE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class EE{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new _t(e),this.near=n,this.far=r}clone(){return new EE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class WA extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ao,this.environmentIntensity=1,this.environmentRotation=new ao,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class wE{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=l1,this.updateRanges=[],this.version=0,this.uuid=ro()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ts=new re;class vf{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ts.fromBufferAttribute(this,n),ts.applyMatrix4(e),this.setXYZ(n,ts.x,ts.y,ts.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ts.fromBufferAttribute(this,n),ts.applyNormalMatrix(e),this.setXYZ(n,ts.x,ts.y,ts.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ts.fromBufferAttribute(this,n),ts.transformDirection(e),this.setXYZ(n,ts.x,ts.y,ts.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=is(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Yt(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=is(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=is(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=is(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=is(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),r=Yt(r,this.array),i=Yt(i,this.array),s=Yt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Rn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class jA extends Xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Gh;const Bg=new re,Vh=new re,Wh=new re,jh=new Ge,zg=new Ge,nF=new Ft,s_=new re,Hg=new re,o_=new re,z4=new Ge,_M=new Ge,H4=new Ge;class rF extends _n{constructor(e=new jA){if(super(),this.isSprite=!0,this.type="Sprite",Gh===void 0){Gh=new Zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new wE(n,5);Gh.setIndex([0,1,2,0,2,3]),Gh.setAttribute("position",new vf(r,3,0,!1)),Gh.setAttribute("uv",new vf(r,2,3,!1))}this.geometry=Gh,this.material=e,this.center=new Ge(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vh.setFromMatrixScale(this.matrixWorld),nF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vh.multiplyScalar(-Wh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;a_(s_.set(-.5,-.5,0),Wh,o,Vh,i,s),a_(Hg.set(.5,-.5,0),Wh,o,Vh,i,s),a_(o_.set(.5,.5,0),Wh,o,Vh,i,s),z4.set(0,0),_M.set(1,0),H4.set(1,1);let a=e.ray.intersectTriangle(s_,Hg,o_,!1,Bg);if(a===null&&(a_(Hg.set(-.5,.5,0),Wh,o,Vh,i,s),_M.set(0,1),a=e.ray.intersectTriangle(s_,o_,Hg,!1,Bg),a===null))return;const l=e.ray.origin.distanceTo(Bg);l<e.near||l>e.far||n.push({distance:l,point:Bg.clone(),uv:Ps.getInterpolation(Bg,s_,Hg,o_,z4,_M,H4,new Ge),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function a_(t,e,n,r,i,s){jh.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(zg.x=s*jh.x-i*jh.y,zg.y=i*jh.x+s*jh.y):zg.copy(jh),t.copy(e),t.x+=zg.x,t.y+=zg.y,t.applyMatrix4(nF)}const l_=new re,G4=new re;class iF extends _n{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){l_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(l_);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){l_.setFromMatrixPosition(e.matrixWorld),G4.setFromMatrixPosition(this.matrixWorld);const r=l_.distanceTo(G4)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const V4=new re,W4=new gn,j4=new gn,GK=new re,X4=new Ft,u_=new re,yM=new Vi,Y4=new Ft,xM=new pm;class sF extends Nr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=P2,this.bindMatrix=new Ft,this.bindMatrixInverse=new Ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ls),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,u_),this.boundingBox.expandByPoint(u_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,u_),this.boundingSphere.expandByPoint(u_)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yM.copy(this.boundingSphere),yM.applyMatrix4(i),e.ray.intersectsSphere(yM)!==!1&&(Y4.copy(i).invert(),xM.copy(e.ray).applyMatrix4(Y4),!(this.boundingBox!==null&&xM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,xM)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===P2?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===kk?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;W4.fromBufferAttribute(i.attributes.skinIndex,e),j4.fromBufferAttribute(i.attributes.skinWeight,e),V4.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=j4.getComponent(s);if(o!==0){const a=W4.getComponent(s);X4.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(GK.copy(V4).applyMatrix4(X4),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class XA extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qa extends gr{constructor(e=null,n=1,r=1,i,s,o,a,l,u=yi,d=yi,m,g){super(null,o,a,l,u,d,i,s,m,g),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const q4=new Ft,VK=new Ft;class ME{constructor(e=[],n=[]){this.uuid=ro(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Ft;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:VK;q4.multiplyMatrices(a,n[s]),q4.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new ME(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Qa(n,e,e,Gi,Ts);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new XA),this.bones.push(o),this.boneInverses.push(new Ft().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Yp extends Rn{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xh=new Ft,K4=new Ft,c_=[],$4=new ls,WK=new Ft,Gg=new Nr,Vg=new Vi;class oF extends Nr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Yp(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,WK)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ls),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Xh),$4.copy(e.boundingBox).applyMatrix4(Xh),this.boundingBox.union($4)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Xh),Vg.copy(e.boundingSphere).applyMatrix4(Xh),this.boundingSphere.union(Vg)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Gg.geometry=this.geometry,Gg.material=this.material,Gg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vg.copy(this.boundingSphere),Vg.applyMatrix4(r),e.ray.intersectsSphere(Vg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Xh),K4.multiplyMatrices(r,Xh),Gg.matrixWorld=K4,Gg.raycast(e,c_);for(let o=0,a=c_.length;o<a;o++){const l=c_[o];l.instanceId=s,l.object=this,n.push(l)}c_.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Yp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Qa(new Float32Array(i*this.count),i,this.count,mE,Ts));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<r.length;u++)o+=r[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const SM=new re,jK=new re,XK=new Wt;class nc{constructor(e=new re(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=SM.subVectors(r,n).cross(jK.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(SM),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||XK.getNormalMatrix(e),i=this.coplanarPoint(SM).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ld=new Vi,d_=new re;class H1{constructor(e=new nc,n=new nc,r=new nc,i=new nc,s=new nc,o=new nc){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=ca){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],d=i[5],m=i[6],g=i[7],v=i[8],y=i[9],x=i[10],S=i[11],_=i[12],M=i[13],E=i[14],A=i[15];if(r[0].setComponents(l-s,g-u,S-v,A-_).normalize(),r[1].setComponents(l+s,g+u,S+v,A+_).normalize(),r[2].setComponents(l+o,g+d,S+y,A+M).normalize(),r[3].setComponents(l-o,g-d,S-y,A-M).normalize(),r[4].setComponents(l-a,g-m,S-x,A-E).normalize(),n===ca)r[5].setComponents(l+a,g+m,S+x,A+E).normalize();else if(n===u1)r[5].setComponents(a,m,x,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ld.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ld.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ld)}intersectsSprite(e){return Ld.center.set(0,0,0),Ld.radius=.7071067811865476,Ld.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ld)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(d_.x=i.normal.x>0?e.max.x:e.min.x,d_.y=i.normal.y>0?e.max.y:e.min.y,d_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(d_)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function EM(t,e){return t-e}function YK(t,e){return t.z-e.z}function qK(t,e){return e.z-t.z}class KK{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=n,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Es=new Ft,$K=new _t(1,1,1),wM=new H1,f_=new ls,Nd=new Vi,Wg=new re,Z4=new re,ZK=new re,MM=new KK,zi=new Nr,h_=[];function QK(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function Dd(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class aF extends Nr{constructor(e,n,r=n*2,i){super(new Zt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Qa(n,e,e,Gi,Ts);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new Qa(n,e,e,I1,su);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new Qa(n,e,e,Gi,Ts);r.colorSpace=fn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,d=new a.constructor(r*l),m=new Rn(d,l,u);n.setAttribute(s,m)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new Rn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Es),this.getBoundingBoxAt(s,f_).applyMatrix4(Es),e.union(f_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vi);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Es),this.getBoundingSphereAt(s,Nd).applyMatrix4(Es),e.union(Nd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(EM),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Es.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&($K.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(EM),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const d in r.attributes){const m=n.getAttribute(d),g=r.getAttribute(d);QK(m,g,l);const v=m.itemSize;for(let y=m.count,x=u;y<x;y++){const S=l+y;for(let _=0;_<v;_++)g.setComponent(S,_,0)}g.needsUpdate=!0,g.addUpdateRange(l*v,u*v)}if(i){const d=a.indexStart,m=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let g=0;g<o.count;g++)s.setX(d+g,l+o.getX(g));for(let g=o.count,v=m;g<v;g++)s.setX(d+g,l);s.needsUpdate=!0,s.addUpdateRange(d,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],u=r[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==n){const{indexStart:d,vertexStart:m,reservedIndexCount:g}=u,v=s.index,y=v.array,x=e-m;for(let S=d;S<d+g;S++)y[S]=y[S]+x;v.array.copyWithin(n,d,d+g),v.addUpdateRange(n,g),u.indexStart=n}n+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:d,reservedVertexCount:m}=u,g=s.attributes;for(const v in g){const y=g[v],{array:x,itemSize:S}=y;x.copyWithin(e*S,d*S,(d+m)*S),y.addUpdateRange(e*S,m*S)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new ls,o=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let d=l;o&&(d=o.getX(d)),s.expandByPoint(Wg.fromBufferAttribute(a,d))}i.boundingBox=s}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Vi;this.getBoundingBoxAt(e,f_),f_.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let u=i.start,d=i.start+i.count;u<d;u++){let m=u;o&&(m=o.getX(m)),Wg.fromBufferAttribute(a,m),l=Math.max(l,s.center.distanceToSquared(Wg))}s.radius=Math.sqrt(l),i.boundingSphere=s}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return n.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(EM);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Dd(this._multiDrawCounts,i),Dd(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Dd(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Dd(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Dd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Zt,this._initializeGeometry(s));const o=this.geometry;s.index&&Dd(s.index.array,o.index.array);for(const a in s.attributes)Dd(s.attributes[a].array,o.attributes[a].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;zi.material=this.material,zi.geometry.index=o.index,zi.geometry.attributes=o.attributes,zi.geometry.boundingBox===null&&(zi.geometry.boundingBox=new ls),zi.geometry.boundingSphere===null&&(zi.geometry.boundingSphere=new Vi);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,d=i[u];zi.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(a,zi.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,zi.geometry.boundingBox),this.getBoundingSphereAt(u,zi.geometry.boundingSphere),zi.raycast(e,h_);for(let m=0,g=h_.length;m<g;m++){const v=h_[m];v.object=this,v.batchId=a,n.push(v)}h_.length=0}zi.material=null,zi.geometry.index=null,zi.geometry.attributes={},zi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,g=this.perObjectFrustumCulled,v=this._indirectTexture,y=v.image.data;g&&(Es.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),wM.setFromProjectionMatrix(Es,e.coordinateSystem));let x=0;if(this.sortObjects){Es.copy(this.matrixWorld).invert(),Wg.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Es),Z4.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Es);for(let M=0,E=l.length;M<E;M++)if(l[M].visible&&l[M].active){const A=l[M].geometryIndex;this.getMatrixAt(M,Es),this.getBoundingSphereAt(A,Nd).applyMatrix4(Es);let L=!1;if(g&&(L=!wM.intersectsSphere(Nd)),!L){const D=m[A],U=ZK.subVectors(Nd.center,Wg).dot(Z4);MM.push(D.start,D.count,U,M)}}const S=MM.list,_=this.customSort;_===null?S.sort(s.transparent?qK:YK):_.call(this,S,r);for(let M=0,E=S.length;M<E;M++){const A=S[M];u[x]=A.start*a,d[x]=A.count,y[x]=A.index,x++}MM.reset()}else for(let S=0,_=l.length;S<_;S++)if(l[S].visible&&l[S].active){const M=l[S].geometryIndex;let E=!1;if(g&&(this.getMatrixAt(S,Es),this.getBoundingSphereAt(M,Nd).applyMatrix4(Es),E=!wM.intersectsSphere(Nd)),!E){const A=m[M];u[x]=A.start*a,d[x]=A.count,y[x]=S,x++}}v.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class fs extends Xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _t(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Dx=new re,kx=new re,Q4=new Ft,jg=new pm,p_=new Vi,CM=new re,J4=new re;class bc extends _n{constructor(e=new Zt,n=new fs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)Dx.fromBufferAttribute(n,i-1),kx.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=Dx.distanceTo(kx);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),p_.copy(r.boundingSphere),p_.applyMatrix4(i),p_.radius+=s,e.ray.intersectsSphere(p_)===!1)return;Q4.copy(i).invert(),jg.copy(e.ray).applyMatrix4(Q4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,d=r.index,g=r.attributes.position;if(d!==null){const v=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let x=v,S=y-1;x<S;x+=u){const _=d.getX(x),M=d.getX(x+1),E=m_(this,e,jg,l,_,M,x);E&&n.push(E)}if(this.isLineLoop){const x=d.getX(y-1),S=d.getX(v),_=m_(this,e,jg,l,x,S,y-1);_&&n.push(_)}}else{const v=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let x=v,S=y-1;x<S;x+=u){const _=m_(this,e,jg,l,x,x+1,x);_&&n.push(_)}if(this.isLineLoop){const x=m_(this,e,jg,l,y-1,v,y-1);x&&n.push(x)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function m_(t,e,n,r,i,s,o){const a=t.geometry.attributes.position;if(Dx.fromBufferAttribute(a,i),kx.fromBufferAttribute(a,s),n.distanceSqToSegment(Dx,kx,CM,J4)>r)return;CM.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(CM);if(!(u<e.near||u>e.far))return{distance:u,point:J4.clone().applyMatrix4(t.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:t}}const eT=new re,tT=new re;class ul extends bc{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)eT.fromBufferAttribute(n,i),tT.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+eT.distanceTo(tT);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lF extends bc{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class YA extends Xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const nT=new Ft,L2=new pm,g_=new Vi,v_=new re;class uF extends _n{constructor(e=new Zt,n=new YA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),g_.copy(r.boundingSphere),g_.applyMatrix4(i),g_.radius+=s,e.ray.intersectsSphere(g_)===!1)return;nT.copy(i).invert(),L2.copy(e.ray).applyMatrix4(nT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,m=r.attributes.position;if(u!==null){const g=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let y=g,x=v;y<x;y++){const S=u.getX(y);v_.fromBufferAttribute(m,S),rT(v_,S,l,i,e,n,this)}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let y=g,x=v;y<x;y++)v_.fromBufferAttribute(m,y),rT(v_,y,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function rT(t,e,n,r,i,s,o){const a=L2.distanceSqToPoint(t);if(a<n){const l=new re;L2.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class cF extends gr{constructor(e,n,r,i,s=Yr,o=Yr,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class JK extends cF{constructor(e,n,r,i,s,o,a,l){super({},e,n,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class e$ extends gr{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=yi,this.minFilter=yi,this.generateMipmaps=!1,this.needsUpdate=!0}}class CE extends gr{constructor(e,n,r,i,s,o,a,l,u,d,m,g){super(null,o,a,l,u,d,i,s,m,g),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class t$ extends CE{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ko,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class n$ extends CE{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,iu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class N2 extends gr{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qA extends gr{constructor(e,n,r=su,i,s,o,a=yi,l=yi,u,d=Vp){if(d!==Vp&&d!==Wp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,s,o,a,l,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new uc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class xa{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],g=r[i+1]-d,v=(o-d)/g;return(i+v)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Ge:new re);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new re,i=[],s=[],o=[],a=new re,l=new Ft;for(let v=0;v<=e;v++){const y=v/e;i[v]=this.getTangentAt(y,new re)}s[0]=new re,o[0]=new re;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),m=Math.abs(i[0].y),g=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),m<=u&&(u=m,r.set(0,1,0)),g<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(i[v-1],i[v]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Ht(i[v-1].dot(i[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,y))}o[v].crossVectors(i[v],s[v])}if(n===!0){let v=Math.acos(Ht(s[0].dot(s[e]),-1,1));v/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],v*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class AE extends xa{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Ge){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=l-this.aX,v=u-this.aY;l=g*d-v*m+this.aX,u=g*m+v*d+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class dF extends AE{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function KA(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,d,m){let g=(o-s)/u-(a-s)/(u+d)+(a-o)/d,v=(a-o)/d-(l-o)/(d+m)+(l-a)/m;g*=d,v*=d,i(o,a,g,v)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const __=new re,AM=new KA,bM=new KA,PM=new KA;class fF extends xa{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new re){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,d;this.closed||a>0?u=i[(a-1)%s]:(__.subVectors(i[0],i[1]).add(i[0]),u=__);const m=i[a%s],g=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(__.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=__),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(m),v),x=Math.pow(m.distanceToSquared(g),v),S=Math.pow(g.distanceToSquared(d),v);x<1e-4&&(x=1),y<1e-4&&(y=x),S<1e-4&&(S=x),AM.initNonuniformCatmullRom(u.x,m.x,g.x,d.x,y,x,S),bM.initNonuniformCatmullRom(u.y,m.y,g.y,d.y,y,x,S),PM.initNonuniformCatmullRom(u.z,m.z,g.z,d.z,y,x,S)}else this.curveType==="catmullrom"&&(AM.initCatmullRom(u.x,m.x,g.x,d.x,this.tension),bM.initCatmullRom(u.y,m.y,g.y,d.y,this.tension),PM.initCatmullRom(u.z,m.z,g.z,d.z,this.tension));return r.set(AM.calc(l),bM.calc(l),PM.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new re().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function iT(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function r$(t,e){const n=1-t;return n*n*e}function i$(t,e){return 2*(1-t)*t*e}function s$(t,e){return t*t*e}function M0(t,e,n,r){return r$(t,e)+i$(t,n)+s$(t,r)}function o$(t,e){const n=1-t;return n*n*n*e}function a$(t,e){const n=1-t;return 3*n*n*t*e}function l$(t,e){return 3*(1-t)*t*t*e}function u$(t,e){return t*t*t*e}function C0(t,e,n,r,i){return o$(t,e)+a$(t,n)+l$(t,r)+u$(t,i)}class $A extends xa{constructor(e=new Ge,n=new Ge,r=new Ge,i=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ge){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(C0(e,i.x,s.x,o.x,a.x),C0(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hF extends xa{constructor(e=new re,n=new re,r=new re,i=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new re){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(C0(e,i.x,s.x,o.x,a.x),C0(e,i.y,s.y,o.y,a.y),C0(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ZA extends xa{constructor(e=new Ge,n=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ge){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ge){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pF extends xa{constructor(e=new re,n=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new re){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new re){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QA extends xa{constructor(e=new Ge,n=new Ge,r=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ge){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(M0(e,i.x,s.x,o.x),M0(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JA extends xa{constructor(e=new re,n=new re,r=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new re){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(M0(e,i.x,s.x,o.x),M0(e,i.y,s.y,o.y),M0(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eb extends xa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ge){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],d=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return r.set(iT(a,l.x,u.x,d.x,m.x),iT(a,l.y,u.y,d.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ge().fromArray(i))}return this}}var Fx=Object.freeze({__proto__:null,ArcCurve:dF,CatmullRomCurve3:fF,CubicBezierCurve:$A,CubicBezierCurve3:hF,EllipseCurve:AE,LineCurve:ZA,LineCurve3:pF,QuadraticBezierCurve:QA,QuadraticBezierCurve3:JA,SplineCurve:eb});class mF extends xa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Fx[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const d=l[u];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new Fx[i.type]().fromJSON(i))}return this}}class d1 extends mF{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new ZA(this.currentPoint.clone(),new Ge(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new QA(this.currentPoint.clone(),new Ge(e,n),new Ge(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new $A(this.currentPoint.clone(),new Ge(e,n),new Ge(r,i),new Ge(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new eb(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,n+d,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const u=new AE(e,n,r,i,s,o,a,l);if(this.curves.length>0){const m=u.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class G1 extends Zt{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ht(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],d=1/n,m=new re,g=new Ge,v=new re,y=new re,x=new re;let S=0,_=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:S=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,v.x=_*1,v.y=-S,v.z=_*0,x.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:S=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,v.x=_*1,v.y=-S,v.z=_*0,y.copy(v),v.x+=x.x,v.y+=x.y,v.z+=x.z,v.normalize(),l.push(v.x,v.y,v.z),x.copy(y)}for(let M=0;M<=n;M++){const E=r+M*d*i,A=Math.sin(E),L=Math.cos(E);for(let D=0;D<=e.length-1;D++){m.x=e[D].x*A,m.y=e[D].y,m.z=e[D].x*L,o.push(m.x,m.y,m.z),g.x=M/n,g.y=D/(e.length-1),a.push(g.x,g.y);const U=l[3*D+0]*A,O=l[3*D+1],B=l[3*D+0]*L;u.push(U,O,B)}}for(let M=0;M<n;M++)for(let E=0;E<e.length-1;E++){const A=E+M*e.length,L=A,D=A+e.length,U=A+e.length+1,O=A+1;s.push(L,D,O),s.push(U,O,D)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G1(e.points,e.segments,e.phiStart,e.phiLength)}}class bE extends G1{constructor(e=1,n=1,r=4,i=8){const s=new d1;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new bE(e.radius,e.length,e.capSegments,e.radialSegments)}}class PE extends Zt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new re,d=new Ge;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let m=0,g=3;m<=n;m++,g+=3){const v=r+m/n*i;u.x=e*Math.cos(v),u.y=e*Math.sin(v),o.push(u.x,u.y,u.z),a.push(0,0,1),d.x=(o[g]/e+1)/2,d.y=(o[g+1]/e+1)/2,l.push(d.x,d.y)}for(let m=1;m<=n;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mm extends Zt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],m=[],g=[],v=[];let y=0;const x=[],S=r/2;let _=0;M(),o===!1&&(e>0&&E(!0),n>0&&E(!1)),this.setIndex(d),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(v,2));function M(){const A=new re,L=new re;let D=0;const U=(n-e)/r;for(let O=0;O<=s;O++){const B=[],T=O/s,z=T*(n-e)+e;for(let W=0;W<=i;W++){const K=W/i,Z=K*l+a,te=Math.sin(Z),ne=Math.cos(Z);L.x=z*te,L.y=-T*r+S,L.z=z*ne,m.push(L.x,L.y,L.z),A.set(te,U,ne).normalize(),g.push(A.x,A.y,A.z),v.push(K,1-T),B.push(y++)}x.push(B)}for(let O=0;O<i;O++)for(let B=0;B<s;B++){const T=x[B][O],z=x[B+1][O],W=x[B+1][O+1],K=x[B][O+1];(e>0||B!==0)&&(d.push(T,z,K),D+=3),(n>0||B!==s-1)&&(d.push(z,W,K),D+=3)}u.addGroup(_,D,0),_+=D}function E(A){const L=y,D=new Ge,U=new re;let O=0;const B=A===!0?e:n,T=A===!0?1:-1;for(let W=1;W<=i;W++)m.push(0,S*T,0),g.push(0,T,0),v.push(.5,.5),y++;const z=y;for(let W=0;W<=i;W++){const Z=W/i*l+a,te=Math.cos(Z),ne=Math.sin(Z);U.x=B*ne,U.y=S*T,U.z=B*te,m.push(U.x,U.y,U.z),g.push(0,T,0),D.x=te*.5+.5,D.y=ne*.5*T+.5,v.push(D.x,D.y),y++}for(let W=0;W<i;W++){const K=L+W,Z=z+W;A===!0?d.push(Z,Z+1,K):d.push(Z+1,Z,K),O+=3}u.addGroup(_,O,A===!0?1:2),_+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class RE extends mm{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new RE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vc extends Zt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),u(r),d(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const E=new re,A=new re,L=new re;for(let D=0;D<n.length;D+=3)v(n[D+0],E),v(n[D+1],A),v(n[D+2],L),l(E,A,L,M)}function l(M,E,A,L){const D=L+1,U=[];for(let O=0;O<=D;O++){U[O]=[];const B=M.clone().lerp(A,O/D),T=E.clone().lerp(A,O/D),z=D-O;for(let W=0;W<=z;W++)W===0&&O===D?U[O][W]=B:U[O][W]=B.clone().lerp(T,W/z)}for(let O=0;O<D;O++)for(let B=0;B<2*(D-O)-1;B++){const T=Math.floor(B/2);B%2===0?(g(U[O][T+1]),g(U[O+1][T]),g(U[O][T])):(g(U[O][T+1]),g(U[O+1][T+1]),g(U[O+1][T]))}}function u(M){const E=new re;for(let A=0;A<s.length;A+=3)E.x=s[A+0],E.y=s[A+1],E.z=s[A+2],E.normalize().multiplyScalar(M),s[A+0]=E.x,s[A+1]=E.y,s[A+2]=E.z}function d(){const M=new re;for(let E=0;E<s.length;E+=3){M.x=s[E+0],M.y=s[E+1],M.z=s[E+2];const A=S(M)/2/Math.PI+.5,L=_(M)/Math.PI+.5;o.push(A,1-L)}y(),m()}function m(){for(let M=0;M<o.length;M+=6){const E=o[M+0],A=o[M+2],L=o[M+4],D=Math.max(E,A,L),U=Math.min(E,A,L);D>.9&&U<.1&&(E<.2&&(o[M+0]+=1),A<.2&&(o[M+2]+=1),L<.2&&(o[M+4]+=1))}}function g(M){s.push(M.x,M.y,M.z)}function v(M,E){const A=M*3;E.x=e[A+0],E.y=e[A+1],E.z=e[A+2]}function y(){const M=new re,E=new re,A=new re,L=new re,D=new Ge,U=new Ge,O=new Ge;for(let B=0,T=0;B<s.length;B+=9,T+=6){M.set(s[B+0],s[B+1],s[B+2]),E.set(s[B+3],s[B+4],s[B+5]),A.set(s[B+6],s[B+7],s[B+8]),D.set(o[T+0],o[T+1]),U.set(o[T+2],o[T+3]),O.set(o[T+4],o[T+5]),L.copy(M).add(E).add(A).divideScalar(3);const z=S(L);x(D,T+0,M,z),x(U,T+2,E,z),x(O,T+4,A,z)}}function x(M,E,A,L){L<0&&M.x===1&&(o[E]=M.x-1),A.x===0&&A.z===0&&(o[E]=L/2/Math.PI+.5)}function S(M){return Math.atan2(M.z,-M.x)}function _(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vc(e.vertices,e.indices,e.radius,e.details)}}class TE extends Vc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new TE(e.radius,e.detail)}}const y_=new re,x_=new re,RM=new re,S_=new Ps;class gF extends Zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(rf*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],d=["a","b","c"],m=new Array(3),g={},v=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:x,b:S,c:_}=S_;if(x.fromBufferAttribute(a,u[0]),S.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),S_.getNormal(RM),m[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,m[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,m[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let M=0;M<3;M++){const E=(M+1)%3,A=m[M],L=m[E],D=S_[d[M]],U=S_[d[E]],O=`${A}_${L}`,B=`${L}_${A}`;B in g&&g[B]?(RM.dot(g[B].normal)<=s&&(v.push(D.x,D.y,D.z),v.push(U.x,U.y,U.z)),g[B]=null):O in g||(g[O]={index0:u[M],index1:u[E],normal:RM.clone()})}}for(const y in g)if(g[y]){const{index0:x,index1:S}=g[y];y_.fromBufferAttribute(a,x),x_.fromBufferAttribute(a,S),v.push(y_.x,y_.y,y_.z),v.push(x_.x,x_.y,x_.z)}this.setAttribute("position",new Ct(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class yc extends d1{constructor(e){super(e),this.uuid=ro(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new d1().fromJSON(i))}return this}}function c$(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=vF(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(r&&(s=m$(t,e,s,n)),t.length>80*n){a=1/0,l=1/0;let d=-1/0,m=-1/0;for(let g=n;g<i;g+=n){const v=t[g],y=t[g+1];v<a&&(a=v),y<l&&(l=y),v>d&&(d=v),y>m&&(m=y)}u=Math.max(d-a,m-l),u=u!==0?32767/u:0}return f1(s,o,n,a,l,u,0),o}function vF(t,e,n,r,i){let s;if(i===A$(t,e,n,r)>0)for(let o=e;o<n;o+=r)s=sT(o/r|0,t[o],t[o+1],s);else for(let o=n-r;o>=e;o-=r)s=sT(o/r|0,t[o],t[o+1],s);return s&&qp(s,s.next)&&(p1(s),s=s.next),s}function _f(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(qp(n,n.next)||ar(n.prev,n,n.next)===0)){if(p1(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function f1(t,e,n,r,i,s,o){if(!t)return;!o&&s&&x$(t,r,i,s);let a=t;for(;t.prev!==t.next;){const l=t.prev,u=t.next;if(s?f$(t,r,i,s):d$(t)){e.push(l.i,t.i,u.i),p1(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=h$(_f(t),e),f1(t,e,n,r,i,s,2)):o===2&&p$(t,e,n,r,i,s):f1(_f(t),e,n,r,i,s,1);break}}}function d$(t){const e=t.prev,n=t,r=t.next;if(ar(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,u=r.y,d=Math.min(i,s,o),m=Math.min(a,l,u),g=Math.max(i,s,o),v=Math.max(a,l,u);let y=r.next;for(;y!==e;){if(y.x>=d&&y.x<=g&&y.y>=m&&y.y<=v&&n0(i,a,s,l,o,u,y.x,y.y)&&ar(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function f$(t,e,n,r){const i=t.prev,s=t,o=t.next;if(ar(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,d=i.y,m=s.y,g=o.y,v=Math.min(a,l,u),y=Math.min(d,m,g),x=Math.max(a,l,u),S=Math.max(d,m,g),_=D2(v,y,e,n,r),M=D2(x,S,e,n,r);let E=t.prevZ,A=t.nextZ;for(;E&&E.z>=_&&A&&A.z<=M;){if(E.x>=v&&E.x<=x&&E.y>=y&&E.y<=S&&E!==i&&E!==o&&n0(a,d,l,m,u,g,E.x,E.y)&&ar(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=v&&A.x<=x&&A.y>=y&&A.y<=S&&A!==i&&A!==o&&n0(a,d,l,m,u,g,A.x,A.y)&&ar(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=_;){if(E.x>=v&&E.x<=x&&E.y>=y&&E.y<=S&&E!==i&&E!==o&&n0(a,d,l,m,u,g,E.x,E.y)&&ar(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=M;){if(A.x>=v&&A.x<=x&&A.y>=y&&A.y<=S&&A!==i&&A!==o&&n0(a,d,l,m,u,g,A.x,A.y)&&ar(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function h$(t,e){let n=t;do{const r=n.prev,i=n.next.next;!qp(r,i)&&yF(r,n,n.next,i)&&h1(r,i)&&h1(i,r)&&(e.push(r.i,n.i,i.i),p1(n),p1(n.next),n=t=i),n=n.next}while(n!==t);return _f(n)}function p$(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&w$(o,a)){let l=xF(o,a);o=_f(o,o.next),l=_f(l,l.next),f1(o,e,n,r,i,s,0),f1(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function m$(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,u=vF(t,a,l,r,!1);u===u.next&&(u.steiner=!0),i.push(E$(u))}i.sort(g$);for(let s=0;s<i.length;s++)n=v$(i[s],n);return n}function g$(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function v$(t,e){const n=_$(t,e);if(!n)return e;const r=xF(n,t);return _f(r,r.next),_f(n,n.next)}function _$(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,o;if(qp(t,n))return n;do{if(qp(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const m=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(m<=r&&m>s&&(s=m,o=n.x<n.next.x?n:n.next,m===r))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let d=1/0;n=o;do{if(r>=n.x&&n.x>=l&&r!==n.x&&_F(i<u?r:s,i,l,u,i<u?s:r,i,n.x,n.y)){const m=Math.abs(i-n.y)/(r-n.x);h1(n,t)&&(m<d||m===d&&(n.x>o.x||n.x===o.x&&y$(o,n)))&&(o=n,d=m)}n=n.next}while(n!==a);return o}function y$(t,e){return ar(t.prev,t,e.prev)<0&&ar(e.next,t,t.next)<0}function x$(t,e,n,r){let i=t;do i.z===0&&(i.z=D2(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,S$(i)}function S$(t){let e,n=1;do{let r=t,i;t=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let u=0;u<n&&(a++,o=o.nextZ,!!o);u++);let l=n;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=o}s.nextZ=null,n*=2}while(e>1);return t}function D2(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function E$(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function _F(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function n0(t,e,n,r,i,s,o,a){return!(t===o&&e===a)&&_F(t,e,n,r,i,s,o,a)}function w$(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!M$(t,e)&&(h1(t,e)&&h1(e,t)&&C$(t,e)&&(ar(t.prev,t,e.prev)||ar(t,e.prev,e))||qp(t,e)&&ar(t.prev,t,t.next)>0&&ar(e.prev,e,e.next)>0)}function ar(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function qp(t,e){return t.x===e.x&&t.y===e.y}function yF(t,e,n,r){const i=w_(ar(t,e,n)),s=w_(ar(t,e,r)),o=w_(ar(n,r,t)),a=w_(ar(n,r,e));return!!(i!==s&&o!==a||i===0&&E_(t,n,e)||s===0&&E_(t,r,e)||o===0&&E_(n,t,r)||a===0&&E_(n,e,r))}function E_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w_(t){return t>0?1:t<0?-1:0}function M$(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&yF(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function h1(t,e){return ar(t.prev,t,t.next)<0?ar(t,e,t.next)>=0&&ar(t,t.prev,e)>=0:ar(t,e,t.prev)<0||ar(t,t.next,e)<0}function C$(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function xF(t,e){const n=k2(t.i,t.x,t.y),r=k2(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function sT(t,e,n,r){const i=k2(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function p1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function k2(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function A$(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class b${static triangulate(e,n,r=2){return c$(e,n,r)}}class Ja{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ja.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];oT(e),aT(r,e);let o=e.length;n.forEach(oT);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,aT(r,n[l]);const a=b$.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function oT(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function aT(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class LE extends Zt{constructor(e=new yc([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ct(i,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,m=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:v-.1,x=n.bevelOffset!==void 0?n.bevelOffset:0,S=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,M=n.UVGenerator!==void 0?n.UVGenerator:P$;let E,A=!1,L,D,U,O;_&&(E=_.getSpacedPoints(d),A=!0,g=!1,L=_.computeFrenetFrames(d,!1),D=new re,U=new re,O=new re),g||(S=0,v=0,y=0,x=0);const B=a.extractPoints(u);let T=B.shape;const z=B.holes;if(!Ja.isClockWise(T)){T=T.reverse();for(let Be=0,He=z.length;Be<He;Be++){const ke=z[Be];Ja.isClockWise(ke)&&(z[Be]=ke.reverse())}}function K(Be){const ke=10000000000000001e-36;let nt=Be[0];for(let Fe=1;Fe<=Be.length;Fe++){const ee=Fe%Be.length,X=Be[ee],xe=X.x-nt.x,Le=X.y-nt.y,Ie=xe*xe+Le*Le,Oe=Math.max(Math.abs(X.x),Math.abs(X.y),Math.abs(nt.x),Math.abs(nt.y)),j=ke*Oe*Oe;if(Ie<=j){Be.splice(ee,1),Fe--;continue}nt=X}}K(T),z.forEach(K);const Z=z.length,te=T;for(let Be=0;Be<Z;Be++){const He=z[Be];T=T.concat(He)}function ne(Be,He,ke){return He||console.error("THREE.ExtrudeGeometry: vec does not exist"),Be.clone().addScaledVector(He,ke)}const de=T.length;function Y(Be,He,ke){let nt,Fe,ee;const X=Be.x-He.x,xe=Be.y-He.y,Le=ke.x-Be.x,Ie=ke.y-Be.y,Oe=X*X+xe*xe,j=X*Ie-xe*Le;if(Math.abs(j)>Number.EPSILON){const N=Math.sqrt(Oe),I=Math.sqrt(Le*Le+Ie*Ie),J=He.x-xe/N,ie=He.y+X/N,fe=ke.x-Ie/I,Ce=ke.y+Le/I,tt=((fe-J)*Ie-(Ce-ie)*Le)/(X*Ie-xe*Le);nt=J+X*tt-Be.x,Fe=ie+xe*tt-Be.y;const Ze=nt*nt+Fe*Fe;if(Ze<=2)return new Ge(nt,Fe);ee=Math.sqrt(Ze/2)}else{let N=!1;X>Number.EPSILON?Le>Number.EPSILON&&(N=!0):X<-Number.EPSILON?Le<-Number.EPSILON&&(N=!0):Math.sign(xe)===Math.sign(Ie)&&(N=!0),N?(nt=-xe,Fe=X,ee=Math.sqrt(Oe)):(nt=X,Fe=xe,ee=Math.sqrt(Oe/2))}return new Ge(nt/ee,Fe/ee)}const ae=[];for(let Be=0,He=te.length,ke=He-1,nt=Be+1;Be<He;Be++,ke++,nt++)ke===He&&(ke=0),nt===He&&(nt=0),ae[Be]=Y(te[Be],te[ke],te[nt]);const se=[];let he,Me=ae.concat();for(let Be=0,He=Z;Be<He;Be++){const ke=z[Be];he=[];for(let nt=0,Fe=ke.length,ee=Fe-1,X=nt+1;nt<Fe;nt++,ee++,X++)ee===Fe&&(ee=0),X===Fe&&(X=0),he[nt]=Y(ke[nt],ke[ee],ke[X]);se.push(he),Me=Me.concat(he)}const ze=[],ge=[];for(let Be=0;Be<S;Be++){const He=Be/S,ke=v*Math.cos(He*Math.PI/2),nt=y*Math.sin(He*Math.PI/2)+x;for(let Fe=0,ee=te.length;Fe<ee;Fe++){const X=ne(te[Fe],ae[Fe],nt);Ve(X.x,X.y,-ke),He==0&&ze.push(X)}for(let Fe=0,ee=Z;Fe<ee;Fe++){const X=z[Fe];he=se[Fe];const xe=[];for(let Le=0,Ie=X.length;Le<Ie;Le++){const Oe=ne(X[Le],he[Le],nt);Ve(Oe.x,Oe.y,-ke),He==0&&xe.push(Oe)}He==0&&ge.push(xe)}}const De=Ja.triangulateShape(ze,ge),Xe=De.length,Q=y+x;for(let Be=0;Be<de;Be++){const He=g?ne(T[Be],Me[Be],Q):T[Be];A?(U.copy(L.normals[0]).multiplyScalar(He.x),D.copy(L.binormals[0]).multiplyScalar(He.y),O.copy(E[0]).add(U).add(D),Ve(O.x,O.y,O.z)):Ve(He.x,He.y,0)}for(let Be=1;Be<=d;Be++)for(let He=0;He<de;He++){const ke=g?ne(T[He],Me[He],Q):T[He];A?(U.copy(L.normals[Be]).multiplyScalar(ke.x),D.copy(L.binormals[Be]).multiplyScalar(ke.y),O.copy(E[Be]).add(U).add(D),Ve(O.x,O.y,O.z)):Ve(ke.x,ke.y,m/d*Be)}for(let Be=S-1;Be>=0;Be--){const He=Be/S,ke=v*Math.cos(He*Math.PI/2),nt=y*Math.sin(He*Math.PI/2)+x;for(let Fe=0,ee=te.length;Fe<ee;Fe++){const X=ne(te[Fe],ae[Fe],nt);Ve(X.x,X.y,m+ke)}for(let Fe=0,ee=z.length;Fe<ee;Fe++){const X=z[Fe];he=se[Fe];for(let xe=0,Le=X.length;xe<Le;xe++){const Ie=ne(X[xe],he[xe],nt);A?Ve(Ie.x,Ie.y+E[d-1].y,E[d-1].x+ke):Ve(Ie.x,Ie.y,m+ke)}}}ye(),We();function ye(){const Be=i.length/3;if(g){let He=0,ke=de*He;for(let nt=0;nt<Xe;nt++){const Fe=De[nt];Je(Fe[2]+ke,Fe[1]+ke,Fe[0]+ke)}He=d+S*2,ke=de*He;for(let nt=0;nt<Xe;nt++){const Fe=De[nt];Je(Fe[0]+ke,Fe[1]+ke,Fe[2]+ke)}}else{for(let He=0;He<Xe;He++){const ke=De[He];Je(ke[2],ke[1],ke[0])}for(let He=0;He<Xe;He++){const ke=De[He];Je(ke[0]+de*d,ke[1]+de*d,ke[2]+de*d)}}r.addGroup(Be,i.length/3-Be,0)}function We(){const Be=i.length/3;let He=0;je(te,He),He+=te.length;for(let ke=0,nt=z.length;ke<nt;ke++){const Fe=z[ke];je(Fe,He),He+=Fe.length}r.addGroup(Be,i.length/3-Be,1)}function je(Be,He){let ke=Be.length;for(;--ke>=0;){const nt=ke;let Fe=ke-1;Fe<0&&(Fe=Be.length-1);for(let ee=0,X=d+S*2;ee<X;ee++){const xe=de*ee,Le=de*(ee+1),Ie=He+nt+xe,Oe=He+Fe+xe,j=He+Fe+Le,N=He+nt+Le;$e(Ie,Oe,j,N)}}}function Ve(Be,He,ke){l.push(Be),l.push(He),l.push(ke)}function Je(Be,He,ke){le(Be),le(He),le(ke);const nt=i.length/3,Fe=M.generateTopUV(r,i,nt-3,nt-2,nt-1);At(Fe[0]),At(Fe[1]),At(Fe[2])}function $e(Be,He,ke,nt){le(Be),le(He),le(nt),le(He),le(ke),le(nt);const Fe=i.length/3,ee=M.generateSideWallUV(r,i,Fe-6,Fe-3,Fe-2,Fe-1);At(ee[0]),At(ee[1]),At(ee[3]),At(ee[1]),At(ee[2]),At(ee[3])}function le(Be){i.push(l[Be*3+0]),i.push(l[Be*3+1]),i.push(l[Be*3+2])}function At(Be){s.push(Be.x),s.push(Be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return R$(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Fx[i.type]().fromJSON(i)),new LE(r,e.options)}}const P$={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new Ge(s,o),new Ge(a,l),new Ge(u,d)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[r*3],d=e[r*3+1],m=e[r*3+2],g=e[i*3],v=e[i*3+1],y=e[i*3+2],x=e[s*3],S=e[s*3+1],_=e[s*3+2];return Math.abs(a-d)<Math.abs(o-u)?[new Ge(o,1-l),new Ge(u,1-m),new Ge(g,1-y),new Ge(x,1-_)]:[new Ge(a,1-l),new Ge(d,1-m),new Ge(v,1-y),new Ge(S,1-_)]}};function R$(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class NE extends Vc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new NE(e.radius,e.detail)}}class V1 extends Vc{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new V1(e.radius,e.detail)}}class gm extends Zt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,d=l+1,m=e/a,g=n/l,v=[],y=[],x=[],S=[];for(let _=0;_<d;_++){const M=_*g-o;for(let E=0;E<u;E++){const A=E*m-s;y.push(A,-M,0),x.push(0,0,1),S.push(E/a),S.push(1-_/l)}}for(let _=0;_<l;_++)for(let M=0;M<a;M++){const E=M+u*_,A=M+u*(_+1),L=M+1+u*(_+1),D=M+1+u*_;v.push(E,A,D),v.push(A,L,D)}this.setIndex(v),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(x,3)),this.setAttribute("uv",new Ct(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gm(e.width,e.height,e.widthSegments,e.heightSegments)}}class DE extends Zt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],d=[];let m=e;const g=(n-e)/i,v=new re,y=new Ge;for(let x=0;x<=i;x++){for(let S=0;S<=r;S++){const _=s+S/r*o;v.x=m*Math.cos(_),v.y=m*Math.sin(_),l.push(v.x,v.y,v.z),u.push(0,0,1),y.x=(v.x/n+1)/2,y.y=(v.y/n+1)/2,d.push(y.x,y.y)}m+=g}for(let x=0;x<i;x++){const S=x*(r+1);for(let _=0;_<r;_++){const M=_+S,E=M,A=M+r+1,L=M+r+2,D=M+1;a.push(E,A,D),a.push(A,L,D)}}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class kE extends Zt{constructor(e=new yc([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ct(i,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(d){const m=i.length/3,g=d.extractPoints(n);let v=g.shape;const y=g.holes;Ja.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,_=y.length;S<_;S++){const M=y[S];Ja.isClockWise(M)===!0&&(y[S]=M.reverse())}const x=Ja.triangulateShape(v,y);for(let S=0,_=y.length;S<_;S++){const M=y[S];v=v.concat(M)}for(let S=0,_=v.length;S<_;S++){const M=v[S];i.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let S=0,_=x.length;S<_;S++){const M=x[S],E=M[0]+m,A=M[1]+m,L=M[2]+m;r.push(E,A,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return T$(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new kE(r,e.curveSegments)}}function T$(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class W1 extends Zt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const d=[],m=new re,g=new re,v=[],y=[],x=[],S=[];for(let _=0;_<=r;_++){const M=[],E=_/r;let A=0;_===0&&o===0?A=.5/n:_===r&&l===Math.PI&&(A=-.5/n);for(let L=0;L<=n;L++){const D=L/n;m.x=-e*Math.cos(i+D*s)*Math.sin(o+E*a),m.y=e*Math.cos(o+E*a),m.z=e*Math.sin(i+D*s)*Math.sin(o+E*a),y.push(m.x,m.y,m.z),g.copy(m).normalize(),x.push(g.x,g.y,g.z),S.push(D+A,1-E),M.push(u++)}d.push(M)}for(let _=0;_<r;_++)for(let M=0;M<n;M++){const E=d[_][M+1],A=d[_][M],L=d[_+1][M],D=d[_+1][M+1];(_!==0||o>0)&&v.push(E,A,D),(_!==r-1||l<Math.PI)&&v.push(A,L,D)}this.setIndex(v),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(x,3)),this.setAttribute("uv",new Ct(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class FE extends Vc{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new FE(e.radius,e.detail)}}class OE extends Zt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],d=new re,m=new re,g=new re;for(let v=0;v<=r;v++)for(let y=0;y<=i;y++){const x=y/i*s,S=v/r*Math.PI*2;m.x=(e+n*Math.cos(S))*Math.cos(x),m.y=(e+n*Math.cos(S))*Math.sin(x),m.z=n*Math.sin(S),a.push(m.x,m.y,m.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),g.subVectors(m,d).normalize(),l.push(g.x,g.y,g.z),u.push(y/i),u.push(v/r)}for(let v=1;v<=r;v++)for(let y=1;y<=i;y++){const x=(i+1)*v+y-1,S=(i+1)*(v-1)+y-1,_=(i+1)*(v-1)+y,M=(i+1)*v+y;o.push(x,S,M),o.push(S,_,M)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class IE extends Zt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],d=[],m=new re,g=new re,v=new re,y=new re,x=new re,S=new re,_=new re;for(let E=0;E<=r;++E){const A=E/r*s*Math.PI*2;M(A,s,o,e,v),M(A+.01,s,o,e,y),S.subVectors(y,v),_.addVectors(y,v),x.crossVectors(S,_),_.crossVectors(x,S),x.normalize(),_.normalize();for(let L=0;L<=i;++L){const D=L/i*Math.PI*2,U=-n*Math.cos(D),O=n*Math.sin(D);m.x=v.x+(U*_.x+O*x.x),m.y=v.y+(U*_.y+O*x.y),m.z=v.z+(U*_.z+O*x.z),l.push(m.x,m.y,m.z),g.subVectors(m,v).normalize(),u.push(g.x,g.y,g.z),d.push(E/r),d.push(L/i)}}for(let E=1;E<=r;E++)for(let A=1;A<=i;A++){const L=(i+1)*(E-1)+(A-1),D=(i+1)*E+(A-1),U=(i+1)*E+A,O=(i+1)*(E-1)+A;a.push(L,D,O),a.push(D,U,O)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(d,2));function M(E,A,L,D,U){const O=Math.cos(E),B=Math.sin(E),T=L/A*E,z=Math.cos(T);U.x=D*(2+z)*.5*O,U.y=D*(2+z)*B*.5,U.z=D*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class UE extends Zt{constructor(e=new JA(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new re,l=new re,u=new Ge;let d=new re;const m=[],g=[],v=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(v,2));function x(){for(let E=0;E<n;E++)S(E);S(s===!1?n:0),M(),_()}function S(E){d=e.getPointAt(E/n,d);const A=o.normals[E],L=o.binormals[E];for(let D=0;D<=i;D++){const U=D/i*Math.PI*2,O=Math.sin(U),B=-Math.cos(U);l.x=B*A.x+O*L.x,l.y=B*A.y+O*L.y,l.z=B*A.z+O*L.z,l.normalize(),g.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,m.push(a.x,a.y,a.z)}}function _(){for(let E=1;E<=n;E++)for(let A=1;A<=i;A++){const L=(i+1)*(E-1)+(A-1),D=(i+1)*E+(A-1),U=(i+1)*E+A,O=(i+1)*(E-1)+A;y.push(L,D,O),y.push(D,U,O)}}function M(){for(let E=0;E<=n;E++)for(let A=0;A<=i;A++)u.x=E/n,u.y=A/i,v.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new UE(new Fx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class SF extends Zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new re,s=new re;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const m=l[u],g=m.start,v=m.count;for(let y=g,x=g+v;y<x;y+=3)for(let S=0;S<3;S++){const _=a.getX(y+S),M=a.getX(y+(S+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,M),lT(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const d=3*a+u,m=3*a+(u+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,m),lT(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function lT(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var uT=Object.freeze({__proto__:null,BoxGeometry:Tf,CapsuleGeometry:bE,CircleGeometry:PE,ConeGeometry:RE,CylinderGeometry:mm,DodecahedronGeometry:TE,EdgesGeometry:gF,ExtrudeGeometry:LE,IcosahedronGeometry:NE,LatheGeometry:G1,OctahedronGeometry:V1,PlaneGeometry:gm,PolyhedronGeometry:Vc,RingGeometry:DE,ShapeGeometry:kE,SphereGeometry:W1,TetrahedronGeometry:FE,TorusGeometry:OE,TorusKnotGeometry:IE,TubeGeometry:UE,WireframeGeometry:SF});class EF extends Xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new _t(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class wF extends _a{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class tb extends Xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new _t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MF extends tb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ht(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _t(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class CF extends Xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _t(16777215),this.specular=new _t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AF extends Xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _t(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class bF extends Xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class PF extends Xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nb extends Xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Uk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rb extends Xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class RF extends Xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _t(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TF extends fs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Jd(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function LF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function NF(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function F2(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function ib(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push(...o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function L$(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],d=u.getValueSize(),m=[],g=[];for(let v=0;v<u.times.length;++v){const y=u.times[v]*i;if(!(y<n||y>=r)){m.push(u.times[v]);for(let x=0;x<d;++x)g.push(u.values[v*d+x])}}m.length!==0&&(u.times=Jd(m,u.times.constructor),u.values=Jd(g,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function N$(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let d=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let g=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const y=a.times.length-1;let x;if(s<=a.times[0]){const _=d,M=m-d;x=a.values.slice(_,M)}else if(s>=a.times[y]){const _=y*m+d,M=_+m-d;x=a.values.slice(_,M)}else{const _=a.createInterpolant(),M=d,E=m-d;_.evaluate(s),x=_.resultBuffer.slice(M,E)}l==="quaternion"&&new as().fromArray(x).normalize().conjugate().toArray(x);const S=u.times.length;for(let _=0;_<S;++_){const M=_*v+g;if(l==="quaternion")as.multiplyQuaternionsFlat(u.values,M,x,0,u.values,M);else{const E=v-g*2;for(let A=0;A<E;++A)u.values[M+A]-=x[A]}}}return t.blendMode=BA,t}class D${static convertArray(e,n){return Jd(e,n)}static isTypedArray(e){return LF(e)}static getKeyframeOrder(e){return NF(e)}static sortedArray(e,n,r){return F2(e,n,r)}static flattenJSON(e,n,r,i){ib(e,n,r,i)}static subclip(e,n,r,i,s=30){return L$(e,n,r,i,s)}static makeClipAdditive(e,n=0,r=e,i=30){return N$(e,n,r,i)}}class j1{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class DF extends j1{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zd,endingEnd:Zd}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Qd:s=e,a=2*n-r;break;case o1:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Qd:o=e,l=2*r-n;break;case o1:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const u=(r-n)*.5,d=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,v=this._weightNext,y=(r-n)/(i-n),x=y*y,S=x*y,_=-g*S+2*g*x-g*y,M=(1+g)*S+(-1.5-2*g)*x+(-.5+g)*y+1,E=(-1-v)*S+(1.5+v)*x+.5*y,A=v*S-v*x;for(let L=0;L!==a;++L)s[L]=_*o[d+L]+M*o[u+L]+E*o[l+L]+A*o[m+L];return s}}class sb extends j1{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=(r-n)/(i-n),m=1-d;for(let g=0;g!==a;++g)s[g]=o[u+g]*m+o[l+g]*d;return s}}class kF extends j1{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Uo{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jd(n,this.TimeBufferType),this.values=Jd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Jd(e.times,Array),values:Jd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new kF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new sb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new DF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case s1:n=this.InterpolantFactoryMethodDiscrete;break;case Nx:n=this.InterpolantFactoryMethodLinear;break;case iy:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return s1;case this.InterpolantFactoryMethodLinear:return Nx;case this.InterpolantFactoryMethodSmooth:return iy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&LF(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===iy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],d=e[a+1];if(u!==d&&(a!==1||u!==e[0]))if(i)l=!0;else{const m=a*r,g=m-r,v=m+r;for(let y=0;y!==r;++y){const x=n[m+y];if(x!==n[g+y]||x!==n[v+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const m=a*r,g=o*r;for(let v=0;v!==r;++v)n[g+v]=n[m+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Uo.prototype.ValueTypeName="";Uo.prototype.TimeBufferType=Float32Array;Uo.prototype.ValueBufferType=Float32Array;Uo.prototype.DefaultInterpolation=Nx;class Lf extends Uo{constructor(e,n,r){super(e,n,r)}}Lf.prototype.ValueTypeName="bool";Lf.prototype.ValueBufferType=Array;Lf.prototype.DefaultInterpolation=s1;Lf.prototype.InterpolantFactoryMethodLinear=void 0;Lf.prototype.InterpolantFactoryMethodSmooth=void 0;class ob extends Uo{constructor(e,n,r,i){super(e,n,r,i)}}ob.prototype.ValueTypeName="color";class m1 extends Uo{constructor(e,n,r,i){super(e,n,r,i)}}m1.prototype.ValueTypeName="number";class FF extends j1{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=e*a;for(let d=u+a;u!==d;u+=4)as.slerpFlat(s,0,o,u-a,o,u,l);return s}}class X1 extends Uo{constructor(e,n,r,i){super(e,n,r,i)}InterpolantFactoryMethodLinear(e){return new FF(this.times,this.values,this.getValueSize(),e)}}X1.prototype.ValueTypeName="quaternion";X1.prototype.InterpolantFactoryMethodSmooth=void 0;class Nf extends Uo{constructor(e,n,r){super(e,n,r)}}Nf.prototype.ValueTypeName="string";Nf.prototype.ValueBufferType=Array;Nf.prototype.DefaultInterpolation=s1;Nf.prototype.InterpolantFactoryMethodLinear=void 0;Nf.prototype.InterpolantFactoryMethodSmooth=void 0;class g1 extends Uo{constructor(e,n,r,i){super(e,n,r,i)}}g1.prototype.ValueTypeName="vector";class v1{constructor(e="",n=-1,r=[],i=_E){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ro(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(F$(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Uo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const d=NF(l);l=F2(l,1,d),u=F2(u,1,d),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new m1(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.name.match(s);if(d&&d.length>1){const m=d[1];let g=i[m];g||(i[m]=g=[]),g.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(m,g,v,y,x){if(v.length!==0){const S=[],_=[];ib(v,S,_,y),S.length!==0&&x.push(new m(g,S,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let m=0;m<u.length;m++){const g=u[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let y;for(y=0;y<g.length;y++)if(g[y].morphTargets)for(let x=0;x<g[y].morphTargets.length;x++)v[g[y].morphTargets[x]]=-1;for(const x in v){const S=[],_=[];for(let M=0;M!==g[y].morphTargets.length;++M){const E=g[y];S.push(E.time),_.push(E.morphTarget===x?1:0)}i.push(new m1(".morphTargetInfluence["+x+"]",S,_))}l=v.length*o}else{const v=".bones["+n[m].name+"]";r(g1,v+".position",g,"pos",i),r(X1,v+".quaternion",g,"rot",i),r(g1,v+".scale",g,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function k$(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return m1;case"vector":case"vector2":case"vector3":case"vector4":return g1;case"color":return ob;case"quaternion":return X1;case"bool":case"boolean":return Lf;case"string":return Nf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function F$(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=k$(t.type);if(t.times===void 0){const n=[],r=[];ib(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const jl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ab{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,m){return u.push(d,m),this},this.removeHandler=function(d){const m=u.indexOf(d);return m!==-1&&u.splice(m,2),this},this.getHandler=function(d){for(let m=0,g=u.length;m<g;m+=2){const v=u[m],y=u[m+1];if(v.global&&(v.lastIndex=0),v.test(d))return y}return null}}}const OF=new ab;class ks{constructor(e){this.manager=e!==void 0?e:OF,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ks.DEFAULT_MATERIAL_NAME="__DEFAULT";const Il={};class O$ extends Error{constructor(e,n){super(e),this.response=n}}class ou extends ks{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Il[e]!==void 0){Il[e].push({onLoad:n,onProgress:r,onError:i});return}Il[e]=[],Il[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Il[e],m=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),v=g?parseInt(g):0,y=v!==0;let x=0;const S=new ReadableStream({start(_){M();function M(){m.read().then(({done:E,value:A})=>{if(E)_.close();else{x+=A.byteLength;const L=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:v});for(let D=0,U=d.length;D<U;D++){const O=d[D];O.onProgress&&O.onProgress(L)}_.enqueue(A),M()}},E=>{_.error(E)})}}});return new Response(S)}else throw new O$(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return u.json();default:if(a==="")return u.text();{const m=/charset="?([^;"\s]*)"?/i.exec(a),g=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(g);return u.arrayBuffer().then(y=>v.decode(y))}}}).then(u=>{jl.add(e,u);const d=Il[e];delete Il[e];for(let m=0,g=d.length;m<g;m++){const v=d[m];v.onLoad&&v.onLoad(u)}}).catch(u=>{const d=Il[e];if(d===void 0)throw this.manager.itemError(e),u;delete Il[e];for(let m=0,g=d.length;m<g;m++){const v=d[m];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class I$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ou(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=v1.parse(e[r]);n.push(i)}return n}}class U$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new CE,l=new ou(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function d(m){l.load(e[m],function(g){const v=s.parse(g,!0);o[m]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(a.minFilter=Yr),a.image=o,a.format=v.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let m=0,g=e.length;m<g;++m)d(m);else l.load(e,function(m){const g=s.parse(m,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let y=0;y<v;y++){o[y]={mipmaps:[]};for(let x=0;x<g.mipmapCount;x++)o[y].mipmaps.push(g.mipmaps[y*g.mipmapCount+x]),o[y].format=g.format,o[y].width=g.width,o[y].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Yr),a.format=g.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class _1 extends ks{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=c1("img");function l(){d(),jl.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(m){d(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class B$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=new z1;s.colorSpace=As;const o=new _1(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(d){s.images[u]=d,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class z$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Qa,a=new ou(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:ko,o.wrapT=u.wrapT!==void 0?u.wrapT:ko,o.magFilter=u.magFilter!==void 0?u.magFilter:Yr,o.minFilter=u.minFilter!==void 0?u.minFilter:Yr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Ya),u.mipmapCount===1&&(o.minFilter=Yr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u)},r,i),o}}class H$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=new gr,o=new _1(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Wc extends _n{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new _t(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class IF extends Wc{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new _t(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const TM=new Ft,cT=new re,dT=new re;class lb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new Ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new H1,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;cT.setFromMatrixPosition(e.matrixWorld),n.position.copy(cT),dT.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(dT),n.updateMatrixWorld(),TM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TM),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(TM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class G$ extends lb{constructor(){super(new ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=jp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class UF extends Wc{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new G$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const fT=new Ft,Xg=new re,LM=new re;class V$ extends lb{constructor(){super(new ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new gn(2,1,1,1),new gn(0,1,1,1),new gn(3,1,1,1),new gn(1,1,1,1),new gn(3,0,1,1),new gn(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Xg.setFromMatrixPosition(e.matrixWorld),r.position.copy(Xg),LM.copy(r.position),LM.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(LM),r.updateMatrixWorld(),i.makeTranslation(-Xg.x,-Xg.y,-Xg.z),fT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fT)}}class BF extends Wc{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new V$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Y1 extends B1{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class W$ extends lb{constructor(){super(new Y1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zF extends Wc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new W$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class HF extends Wc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class GF extends Wc{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class VF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class WF extends Wc{constructor(e=new VF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class BE extends ks{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new ou(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new _t().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new _t().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ge().fromArray(o.value);break;case"v3":i.uniforms[s].value=new re().fromArray(o.value);break;case"v4":i.uniforms[s].value=new gn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Wt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ft().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ge().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return BE.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:EF,SpriteMaterial:jA,RawShaderMaterial:wF,ShaderMaterial:_a,PointsMaterial:YA,MeshPhysicalMaterial:MF,MeshStandardMaterial:tb,MeshPhongMaterial:CF,MeshToonMaterial:AF,MeshNormalMaterial:bF,MeshLambertMaterial:PF,MeshDepthMaterial:nb,MeshDistanceMaterial:rb,MeshBasicMaterial:Gc,MeshMatcapMaterial:RF,LineDashedMaterial:TF,LineBasicMaterial:fs,Material:Xi};return new n[e]}}class O2{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class jF extends Zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class XF extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ou(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(v,y){if(n[y]!==void 0)return n[y];const S=v.interleavedBuffers[y],_=s(v,S.buffer),M=pp(S.type,_),E=new wE(M,S.stride);return E.uuid=S.uuid,n[y]=E,E}function s(v,y){if(r[y]!==void 0)return r[y];const S=v.arrayBuffers[y],_=new Uint32Array(S).buffer;return r[y]=_,_}const o=e.isInstancedBufferGeometry?new jF:new Zt,a=e.data.index;if(a!==void 0){const v=pp(a.type,a.array);o.setIndex(new Rn(v,1))}const l=e.data.attributes;for(const v in l){const y=l[v];let x;if(y.isInterleavedBufferAttribute){const S=i(e.data,y.data);x=new vf(S,y.itemSize,y.offset,y.normalized)}else{const S=pp(y.type,y.array),_=y.isInstancedBufferAttribute?Yp:Rn;x=new _(S,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),y.usage!==void 0&&x.setUsage(y.usage),o.setAttribute(v,x)}const u=e.data.morphAttributes;if(u)for(const v in u){const y=u[v],x=[];for(let S=0,_=y.length;S<_;S++){const M=y[S];let E;if(M.isInterleavedBufferAttribute){const A=i(e.data,M.data);E=new vf(A,M.itemSize,M.offset,M.normalized)}else{const A=pp(M.type,M.array);E=new Rn(A,M.itemSize,M.normalized)}M.name!==void 0&&(E.name=M.name),x.push(E)}o.morphAttributes[v]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,y=m.length;v!==y;++v){const x=m[v];o.addGroup(x.start,x.count,x.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new re;g.center!==void 0&&v.fromArray(g.center),o.boundingSphere=new Vi(v,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class j$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?O2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ou(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?O2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ou(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),this.bindLightTargets(u),n!==void 0){let m=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new yc().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new ME().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new XF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in uT?a=uT[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new BE;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=v1.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(d)}else return l.data?{data:pp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ab(n);s=new _1(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const m=e[u],g=m.url;if(Array.isArray(g)){const v=[];for(let y=0,x=g.length;y<x;y++){const S=g[y],_=a(S);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new Qa(_.data,_.width,_.height)))}i[m.uuid]=new uc(v)}else{const v=a(m.url);i[m.uuid]=new uc(v)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:pp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new _1(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const d=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],y=await s(v);y!==null&&(y instanceof HTMLImageElement?d.push(y):d.push(new Qa(y.data,y.width,y.height)))}r[l.uuid]=new uc(d)}else{const d=await s(l.url);r[l.uuid]=new uc(d)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let d;Array.isArray(u)?(d=new z1,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Qa:d=new gr,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,X$)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],hT),d.wrapT=r(a.wrap[1],hT)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,pT)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,pT)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,n,r,i,s){let o;function a(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let y=0,x=g.length;y<x;y++){const S=g[y];r[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(r[S])}return v}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}function u(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let d,m;switch(e.type){case"Scene":o=new WA,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new _t(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new EE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new SE(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ai(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Y1(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new HF(e.color,e.intensity);break;case"DirectionalLight":o=new zF(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new BF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new GF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new UF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new IF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new WF().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),m=l(e.material),o=new sF(d,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),m=l(e.material),o=new Nr(d,m);break;case"InstancedMesh":d=a(e.geometry),m=l(e.material);const g=e.count,v=e.instanceMatrix,y=e.instanceColor;o=new oF(d,m,g),o.instanceMatrix=new Yp(new Float32Array(v.array),16),y!==void 0&&(o.instanceColor=new Yp(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":d=a(e.geometry),m=l(e.material),o=new aF(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const S=new ls;S.min.fromArray(x.boxMin),S.max.fromArray(x.boxMax);const _=new Vi;return _.radius=x.sphereRadius,_.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:S,sphereInitialized:x.sphereInitialized,sphere:_}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new iF;break;case"Line":o=new bc(a(e.geometry),l(e.material));break;case"LineLoop":o=new lF(a(e.geometry),l(e.material));break;case"LineSegments":o=new ul(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new uF(a(e.geometry),l(e.material));break;case"Sprite":o=new rF(l(e.material));break;case"Group":o=new mp;break;case"Bone":o=new XA;break;default:o=new _n}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)o.add(this.parseObject(g[v],n,r,i,s))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const y=g[v];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const y=g[v],x=o.getObjectByProperty("uuid",y.object);x!==void 0&&o.addLevel(x,y.distance,y.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new _n}})}}const X$={UVMapping:dE,CubeReflectionMapping:iu,CubeRefractionMapping:Ac,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:n1,CubeUVReflectionMapping:fm},hT={RepeatWrapping:r1,ClampToEdgeWrapping:ko,MirroredRepeatWrapping:i1},pT={NearestFilter:yi,NearestMipmapNearestFilter:RA,NearestMipmapLinearFilter:hp,LinearFilter:Yr,LinearMipmapNearestFilter:v0,LinearMipmapLinearFilter:Ya};class Y$ extends ks{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jl.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{n&&n(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return jl.add(e,u),n&&n(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),jl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});jl.add(e,l),s.manager.itemStart(e)}}let M_;class ub{static getContext(){return M_===void 0&&(M_=new(window.AudioContext||window.webkitAudioContext)),M_}static setContext(e){M_=e}}class q$ extends ks{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ou(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);ub.getContext().decodeAudioData(u,function(m){n(m)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const mT=new Ft,gT=new Ft,kd=new Ft;class K${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ai,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ai,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,kd.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(rf*n.fov*.5)/n.zoom;let a,l;gT.elements[12]=-i,mT.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,kd.elements[0]=2*n.near/(l-a),kd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(kd),a=-o*n.aspect-s,l=o*n.aspect-s,kd.elements[0]=2*n.near/(l-a),kd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(kd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(gT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(mT)}}class YF extends ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class cb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=vT();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function vT(){return performance.now()}const Fd=new re,_T=new as,$$=new re,Od=new re;class Z$ extends _n{constructor(){super(),this.type="AudioListener",this.context=ub.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fd,_T,$$),Od.set(0,0,-1).applyQuaternion(_T),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Fd.x,i),n.positionY.linearRampToValueAtTime(Fd.y,i),n.positionZ.linearRampToValueAtTime(Fd.z,i),n.forwardX.linearRampToValueAtTime(Od.x,i),n.forwardY.linearRampToValueAtTime(Od.y,i),n.forwardZ.linearRampToValueAtTime(Od.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Fd.x,Fd.y,Fd.z),n.setOrientation(Od.x,Od.y,Od.z,r.x,r.y,r.z)}}class qF extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Id=new re,yT=new as,Q$=new re,Ud=new re;class J$ extends qF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Id,yT,Q$),Ud.set(0,0,1).applyQuaternion(yT);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Id.x,r),n.positionY.linearRampToValueAtTime(Id.y,r),n.positionZ.linearRampToValueAtTime(Id.z,r),n.orientationX.linearRampToValueAtTime(Ud.x,r),n.orientationY.linearRampToValueAtTime(Ud.y,r),n.orientationZ.linearRampToValueAtTime(Ud.z,r)}else n.setPosition(Id.x,Id.y,Id.z),n.setOrientation(Ud.x,Ud.y,Ud.z)}}class eZ{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class KF{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){as.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;as.multiplyQuaternionsFlat(e,o,e,n,e,r),as.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const db="\\[\\]\\.:\\/",tZ=new RegExp("["+db+"]","g"),fb="[^"+db+"]",nZ="[^"+db.replace("\\.","")+"]",rZ=/((?:WC+[\/:])*)/.source.replace("WC",fb),iZ=/(WCOD+)?/.source.replace("WCOD",nZ),sZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fb),oZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fb),aZ=new RegExp("^"+rZ+iZ+sZ+oZ+"$"),lZ=["material","materials","bones","map"];class uZ{constructor(e,n,r){const i=r||pn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class pn{constructor(e,n,r){this.path=n,this.parsedPath=r||pn.parseTrackName(n),this.node=pn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new pn.Composite(e,n,r):new pn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(tZ,"")}static parseTrackName(e){const n=aZ.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);lZ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=pn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pn.Composite=uZ;pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pn.prototype.GetterByBindingType=[pn.prototype._getValue_direct,pn.prototype._getValue_array,pn.prototype._getValue_arrayElement,pn.prototype._getValue_toArray];pn.prototype.SetterByBindingTypeAndVersioning=[[pn.prototype._setValue_direct,pn.prototype._setValue_direct_setNeedsUpdate,pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_array,pn.prototype._setValue_array_setNeedsUpdate,pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_arrayElement,pn.prototype._setValue_arrayElement_setNeedsUpdate,pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_fromArray,pn.prototype._setValue_fromArray_setNeedsUpdate,pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class cZ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ro(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){const g=arguments[d],v=g.uuid;let y=n[v];if(y===void 0){y=l++,n[v]=y,e.push(g);for(let x=0,S=o;x!==S;++x)s[x].push(new pn(g,r[x],i[x]))}else if(y<u){a=e[y];const x=--u,S=e[x];n[S.uuid]=y,e[y]=S,n[v]=x,e[x]=g;for(let _=0,M=o;_!==M;++_){const E=s[_],A=E[x];let L=E[y];E[y]=A,L===void 0&&(L=new pn(g,r[_],i[_])),E[x]=L}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,d=n[u];if(d!==void 0&&d>=s){const m=s++,g=e[m];n[g.uuid]=d,e[d]=g,n[u]=m,e[m]=l;for(let v=0,y=i;v!==y;++v){const x=r[v],S=x[m],_=x[d];x[d]=S,x[m]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],d=u.uuid,m=n[d];if(m!==void 0)if(delete n[d],m<s){const g=--s,v=e[g],y=--o,x=e[y];n[v.uuid]=m,e[m]=v,n[x.uuid]=g,e[g]=x,e.pop();for(let S=0,_=i;S!==_;++S){const M=r[S],E=M[g],A=M[y];M[m]=E,M[g]=A,M.pop()}}else{const g=--o,v=e[g];g>0&&(n[v.uuid]=m),e[m]=v,e.pop();for(let y=0,x=i;y!==x;++y){const S=r[y];S[m]=S[g],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,m=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(m);for(let g=d,v=l.length;g!==v;++g){const y=l[g];m[g]=new pn(y,e,n)}return m}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class $F{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Zd,endingEnd:Zd};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);a[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ok,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r=!1){if(e.fadeOut(n),this.fadeIn(n),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r=!1){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case BA:for(let d=0,m=l.length;d!==m;++d)l[d].evaluate(o),u[d].accumulateAdditive(a);break;case _E:default:for(let d=0,m=l.length;d!==m;++d)l[d].evaluate(o),u[d].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Ik;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===Fk){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Qd,i.endingEnd=Qd):(e?i.endingStart=this.zeroSlopeAtStart?Qd:Zd:i.endingStart=o1,n?i.endingEnd=this.zeroSlopeAtEnd?Qd:Zd:i.endingEnd=o1)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const dZ=new Float32Array(1);class fZ extends ll{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let m=0;m!==s;++m){const g=i[m],v=g.name;let y=d[v];if(y!==void 0)++y.referenceCount,o[m]=y;else{if(y=o[m],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,v));continue}const x=n&&n._propertyBindings[m].binding.parsedPath;y=new KF(pn.create(r,v,x),g.ValueTypeName,g.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,v),o[m]=y}a[m].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new sb(new Float32Array(2),new Float32Array(2),1,dZ),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?v1.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=_E),l!==void 0){const m=l.actionByRoot[s];if(m!==void 0&&m.blendMode===r)return m;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new $F(this,o,n,r);return this._bindAction(d,u),this._addInactiveAction(d,a,s),d}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?v1.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const d=u._cacheIndex,m=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,m._cacheIndex=d,n[d]=m,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class hZ extends yE{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new xE(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class pZ extends yE{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new U1(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class hb{constructor(e){this.value=e}clone(){return new hb(this.value.clone===void 0?this.value:this.value.clone())}}let mZ=0;class gZ extends ll{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mZ++}),this.name="",this.usage=l1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class vZ extends wE{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class _Z{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const xT=new Ft;class ZF{constructor(e,n,r=0,i=1/0){this.ray=new pm(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new sf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return xT.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(xT),this}intersectObject(e,n=!0,r=[]){return I2(e,this,r,n),r.sort(ST),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)I2(e[i],this,r,n);return r.sort(ST),r}}function ST(t,e){return t.distance-e.distance}function I2(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)I2(s[o],e,n,!0)}}class yZ{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ht(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ht(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class xZ{constructor(e=1,n=0,r=0){this.radius=e,this.theta=n,this.y=r}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class pb{constructor(e,n,r,i){pb.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=i,this}}const ET=new Ge;class SZ{constructor(e=new Ge(1/0,1/0),n=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ET.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ET).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wT=new re,C_=new re;class EZ{constructor(e=new re,n=new re){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){wT.subVectors(e,this.start),C_.subVectors(this.end,this.start);const r=C_.dot(C_);let s=C_.dot(wT)/r;return n&&(s=Ht(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const MT=new re;class wZ extends _n{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Zt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new Ct(i,3));const s=new fs({fog:!1,toneMapped:!1});this.cone=new ul(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),MT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(MT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Zu=new re,A_=new Ft,NM=new Ft;class MZ extends ul{constructor(e){const n=QF(e),r=new Zt,i=[],s=[],o=new _t(0,0,1),a=new _t(0,1,0);for(let u=0;u<n.length;u++){const d=n[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ct(i,3)),r.setAttribute("color",new Ct(s,3));const l=new fs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");NM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(A_.multiplyMatrices(NM,a.matrixWorld),Zu.setFromMatrixPosition(A_),i.setXYZ(o,Zu.x,Zu.y,Zu.z),A_.multiplyMatrices(NM,a.parent.matrixWorld),Zu.setFromMatrixPosition(A_),i.setXYZ(o+1,Zu.x,Zu.y,Zu.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function QF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...QF(t.children[n]));return e}class CZ extends Nr{constructor(e,n,r){const i=new W1(n,4,2),s=new Gc({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const AZ=new re,CT=new _t,AT=new _t;class bZ extends _n{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new V1(n);i.rotateY(Math.PI*.5),this.material=new Gc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Rn(o,3)),this.add(new Nr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");CT.copy(this.light.color),AT.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?CT:AT;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(AZ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class PZ extends ul{constructor(e=10,n=10,r=4473924,i=8947848){r=new _t(r),i=new _t(i);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let g=0,v=0,y=-a;g<=n;g++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const x=g===s?r:i;x.toArray(u,v),v+=3,x.toArray(u,v),v+=3,x.toArray(u,v),v+=3,x.toArray(u,v),v+=3}const d=new Zt;d.setAttribute("position",new Ct(l,3)),d.setAttribute("color",new Ct(u,3));const m=new fs({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class RZ extends ul{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new _t(s),o=new _t(o);const a=[],l=[];if(n>1)for(let m=0;m<n;m++){const g=m/n*(Math.PI*2),v=Math.sin(g)*e,y=Math.cos(g)*e;a.push(0,0,0),a.push(v,0,y);const x=m&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let m=0;m<r;m++){const g=m&1?s:o,v=e-e/r*m;for(let y=0;y<i;y++){let x=y/i*(Math.PI*2),S=Math.sin(x)*v,_=Math.cos(x)*v;a.push(S,0,_),l.push(g.r,g.g,g.b),x=(y+1)/i*(Math.PI*2),S=Math.sin(x)*v,_=Math.cos(x)*v,a.push(S,0,_),l.push(g.r,g.g,g.b)}}const u=new Zt;u.setAttribute("position",new Ct(a,3)),u.setAttribute("color",new Ct(l,3));const d=new fs({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const bT=new re,b_=new re,PT=new re;class TZ extends _n{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Zt;i.setAttribute("position",new Ct([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new fs({fog:!1,toneMapped:!1});this.lightPlane=new bc(i,s),this.add(this.lightPlane),i=new Zt,i.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new bc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bT.setFromMatrixPosition(this.light.matrixWorld),b_.setFromMatrixPosition(this.light.target.matrixWorld),PT.subVectors(b_,bT),this.lightPlane.lookAt(b_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(b_),this.targetLine.scale.z=PT.length()}}const P_=new re,hr=new B1;class LZ extends ul{constructor(e){const n=new Zt,r=new fs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,x){l(y),l(x)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}n.setAttribute("position",new Ct(i,3)),n.setAttribute("color",new Ct(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new _t(16755200),d=new _t(16711680),m=new _t(43775),g=new _t(16777215),v=new _t(3355443);this.setColors(u,d,m,g,v)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;hr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ca?-1:0;wr("c",n,e,hr,0,0,s),wr("t",n,e,hr,0,0,1),wr("n1",n,e,hr,-1,-1,s),wr("n2",n,e,hr,r,-1,s),wr("n3",n,e,hr,-1,i,s),wr("n4",n,e,hr,r,i,s),wr("f1",n,e,hr,-1,-1,1),wr("f2",n,e,hr,r,-1,1),wr("f3",n,e,hr,-1,i,1),wr("f4",n,e,hr,r,i,1),wr("u1",n,e,hr,r*.7,i*1.1,s),wr("u2",n,e,hr,-1*.7,i*1.1,s),wr("u3",n,e,hr,0,i*2,s),wr("cf1",n,e,hr,-1,0,1),wr("cf2",n,e,hr,r,0,1),wr("cf3",n,e,hr,0,-1,1),wr("cf4",n,e,hr,0,i,1),wr("cn1",n,e,hr,-1,0,s),wr("cn2",n,e,hr,r,0,s),wr("cn3",n,e,hr,0,-1,s),wr("cn4",n,e,hr,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wr(t,e,n,r,i,s,o){P_.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,d=a.length;u<d;u++)l.setXYZ(a[u],P_.x,P_.y,P_.z)}}const R_=new ls;class NZ extends ul{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Zt;s.setIndex(new Rn(r,1)),s.setAttribute("position",new Rn(i,3)),super(s,new fs({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&R_.setFromObject(this.object),R_.isEmpty())return;const e=R_.min,n=R_.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class DZ extends ul{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Zt;s.setIndex(new Rn(r,1)),s.setAttribute("position",new Ct(i,3)),super(s,new fs({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class kZ extends bc{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Zt;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new fs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Zt;l.setAttribute("position",new Ct(a,3)),l.computeBoundingSphere(),this.add(new Nr(l,new Gc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const RT=new re;let T_,DM;class FZ extends _n{constructor(e=new re(0,0,1),n=new re(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",T_===void 0&&(T_=new Zt,T_.setAttribute("position",new Ct([0,0,0,0,1,0],3)),DM=new mm(0,.5,1,5,1),DM.translate(0,-.5,0)),this.position.copy(n),this.line=new bc(T_,new fs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Nr(DM,new Gc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{RT.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(RT,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class OZ extends ul{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Zt;i.setAttribute("position",new Ct(n,3)),i.setAttribute("color",new Ct(r,3));const s=new fs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new _t,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class IZ{constructor(){this.type="ShapePath",this.color=new _t,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new d1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(_){const M=[];for(let E=0,A=_.length;E<A;E++){const L=_[E],D=new yc;D.curves=L.curves,M.push(D)}return M}function r(_,M){const E=M.length;let A=!1;for(let L=E-1,D=0;D<E;L=D++){let U=M[L],O=M[D],B=O.x-U.x,T=O.y-U.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(U=M[D],B=-B,O=M[L],T=-T),_.y<U.y||_.y>O.y)continue;if(_.y===U.y){if(_.x===U.x)return!0}else{const z=T*(_.x-U.x)-B*(_.y-U.y);if(z===0)return!0;if(z<0)continue;A=!A}}else{if(_.y!==U.y)continue;if(O.x<=_.x&&_.x<=U.x||U.x<=_.x&&_.x<=O.x)return!0}}return A}const i=Ja.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new yc,l.curves=a.curves,u.push(l),u;let d=!i(s[0].getPoints());d=e?!d:d;const m=[],g=[];let v=[],y=0,x;g[y]=void 0,v[y]=[];for(let _=0,M=s.length;_<M;_++)a=s[_],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!d&&g[y]&&y++,g[y]={s:new yc,p:x},g[y].s.curves=a.curves,d&&y++,v[y]=[]):v[y].push({h:a,p:x[0]});if(!g[0])return n(s);if(g.length>1){let _=!1,M=0;for(let E=0,A=g.length;E<A;E++)m[E]=[];for(let E=0,A=g.length;E<A;E++){const L=v[E];for(let D=0;D<L.length;D++){const U=L[D];let O=!0;for(let B=0;B<g.length;B++)r(U.p,g[B].p)&&(E!==B&&M++,O?(O=!1,m[B].push(U)):_=!0);O&&m[E].push(U)}}M>0&&_===!1&&(v=m)}let S;for(let _=0,M=g.length;_<M;_++){l=g[_].s,u.push(l),S=v[_];for(let E=0,A=S.length;E<A;E++)l.holes.push(S[E].h)}return u}}class UZ extends ll{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function BZ(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function zZ(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function HZ(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function U2(t,e,n,r){const i=GZ(r);switch(n){case DA:return t*e;case FA:return t*e;case OA:return t*e*2;case mE:return t*e/i.components*i.byteLength;case I1:return t*e/i.components*i.byteLength;case IA:return t*e*2/i.components*i.byteLength;case gE:return t*e*2/i.components*i.byteLength;case kA:return t*e*3/i.components*i.byteLength;case Gi:return t*e*4/i.components*i.byteLength;case vE:return t*e*4/i.components*i.byteLength;case _0:case y0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case x0:case S0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case ax:case ux:return Math.max(t,16)*Math.max(e,8)/4;case ox:case lx:return Math.max(t,8)*Math.max(e,8)/2;case cx:case dx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case fx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case hx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case px:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case mx:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case gx:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case vx:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case _x:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case yx:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case xx:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Sx:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Ex:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case wx:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Mx:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Cx:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Ax:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case E0:case bx:case Px:return Math.ceil(t/4)*Math.ceil(e/4)*16;case UA:case Rx:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Tx:case Lx:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function GZ(t){switch(t){case va:case TA:return{byteLength:1,components:1};case Hp:case LA:case hm:return{byteLength:2,components:1};case hE:case pE:return{byteLength:2,components:4};case su:case fE:case Ts:return{byteLength:4,components:1};case NA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class VZ{static contain(e,n){return BZ(e,n)}static cover(e,n){return zZ(e,n)}static fill(e){return HZ(e)}static getByteLength(e,n,r,i){return U2(e,n,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uE);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function JF(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function WZ(t){const e=new WeakMap;function n(a,l){const u=a.array,d=a.usage,m=u.byteLength,g=t.createBuffer();t.bindBuffer(l,g),t.bufferData(l,u,d),a.onUploadCallback();let v;if(u instanceof Float32Array)v=t.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?v=t.HALF_FLOAT:v=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)v=t.SHORT;else if(u instanceof Uint32Array)v=t.UNSIGNED_INT;else if(u instanceof Int32Array)v=t.INT;else if(u instanceof Int8Array)v=t.BYTE;else if(u instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:m}}function r(a,l,u){const d=l.array,m=l.updateRanges;if(t.bindBuffer(u,a),m.length===0)t.bufferSubData(u,0,d);else{m.sort((v,y)=>v.start-y.start);let g=0;for(let v=1;v<m.length;v++){const y=m[g],x=m[v];x.start<=y.start+y.count+1?y.count=Math.max(y.count,x.start+x.count-y.start):(++g,m[g]=x)}m.length=g+1;for(let v=0,y=m.length;v<y;v++){const x=m[v];t.bufferSubData(u,x.start*d.BYTES_PER_ELEMENT,d,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,n(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:s,update:o}}var jZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,XZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,YZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,$Z=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,QZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JZ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,eQ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,tQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,nQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rQ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,sQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,aQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,fQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,hQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,pQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,mQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,vQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_Q=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,yQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,xQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",EQ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,wQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,MQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,CQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,AQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,RQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,DQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,kQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,FQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,OQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,UQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,BQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,HQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,GQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,VQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,YQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$Q=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ZQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,QQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,eJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,nJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,iJ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,sJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,oJ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,aJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,uJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,hJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,pJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,mJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,gJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,vJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_J=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,yJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,xJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,EJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,MJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,CJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,AJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,bJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,PJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,RJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,NJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,kJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,FJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,IJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,BJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,zJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,HJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,GJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,VJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,jJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$J=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ZJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,QJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,JJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,eee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tee=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nee=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ree=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iee=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,see=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oee=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aee=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lee=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,uee=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cee=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dee=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fee=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pee=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,mee=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gee=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_ee=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xee=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,See=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Eee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$t={alphahash_fragment:jZ,alphahash_pars_fragment:XZ,alphamap_fragment:YZ,alphamap_pars_fragment:qZ,alphatest_fragment:KZ,alphatest_pars_fragment:$Z,aomap_fragment:ZZ,aomap_pars_fragment:QZ,batching_pars_vertex:JZ,batching_vertex:eQ,begin_vertex:tQ,beginnormal_vertex:nQ,bsdfs:rQ,iridescence_fragment:iQ,bumpmap_pars_fragment:sQ,clipping_planes_fragment:oQ,clipping_planes_pars_fragment:aQ,clipping_planes_pars_vertex:lQ,clipping_planes_vertex:uQ,color_fragment:cQ,color_pars_fragment:dQ,color_pars_vertex:fQ,color_vertex:hQ,common:pQ,cube_uv_reflection_fragment:mQ,defaultnormal_vertex:gQ,displacementmap_pars_vertex:vQ,displacementmap_vertex:_Q,emissivemap_fragment:yQ,emissivemap_pars_fragment:xQ,colorspace_fragment:SQ,colorspace_pars_fragment:EQ,envmap_fragment:wQ,envmap_common_pars_fragment:MQ,envmap_pars_fragment:CQ,envmap_pars_vertex:AQ,envmap_physical_pars_fragment:IQ,envmap_vertex:bQ,fog_vertex:PQ,fog_pars_vertex:RQ,fog_fragment:TQ,fog_pars_fragment:LQ,gradientmap_pars_fragment:NQ,lightmap_pars_fragment:DQ,lights_lambert_fragment:kQ,lights_lambert_pars_fragment:FQ,lights_pars_begin:OQ,lights_toon_fragment:UQ,lights_toon_pars_fragment:BQ,lights_phong_fragment:zQ,lights_phong_pars_fragment:HQ,lights_physical_fragment:GQ,lights_physical_pars_fragment:VQ,lights_fragment_begin:WQ,lights_fragment_maps:jQ,lights_fragment_end:XQ,logdepthbuf_fragment:YQ,logdepthbuf_pars_fragment:qQ,logdepthbuf_pars_vertex:KQ,logdepthbuf_vertex:$Q,map_fragment:ZQ,map_pars_fragment:QQ,map_particle_fragment:JQ,map_particle_pars_fragment:eJ,metalnessmap_fragment:tJ,metalnessmap_pars_fragment:nJ,morphinstance_vertex:rJ,morphcolor_vertex:iJ,morphnormal_vertex:sJ,morphtarget_pars_vertex:oJ,morphtarget_vertex:aJ,normal_fragment_begin:lJ,normal_fragment_maps:uJ,normal_pars_fragment:cJ,normal_pars_vertex:dJ,normal_vertex:fJ,normalmap_pars_fragment:hJ,clearcoat_normal_fragment_begin:pJ,clearcoat_normal_fragment_maps:mJ,clearcoat_pars_fragment:gJ,iridescence_pars_fragment:vJ,opaque_fragment:_J,packing:yJ,premultiplied_alpha_fragment:xJ,project_vertex:SJ,dithering_fragment:EJ,dithering_pars_fragment:wJ,roughnessmap_fragment:MJ,roughnessmap_pars_fragment:CJ,shadowmap_pars_fragment:AJ,shadowmap_pars_vertex:bJ,shadowmap_vertex:PJ,shadowmask_pars_fragment:RJ,skinbase_vertex:TJ,skinning_pars_vertex:LJ,skinning_vertex:NJ,skinnormal_vertex:DJ,specularmap_fragment:kJ,specularmap_pars_fragment:FJ,tonemapping_fragment:OJ,tonemapping_pars_fragment:IJ,transmission_fragment:UJ,transmission_pars_fragment:BJ,uv_pars_fragment:zJ,uv_pars_vertex:HJ,uv_vertex:GJ,worldpos_vertex:VJ,background_vert:WJ,background_frag:jJ,backgroundCube_vert:XJ,backgroundCube_frag:YJ,cube_vert:qJ,cube_frag:KJ,depth_vert:$J,depth_frag:ZJ,distanceRGBA_vert:QJ,distanceRGBA_frag:JJ,equirect_vert:eee,equirect_frag:tee,linedashed_vert:nee,linedashed_frag:ree,meshbasic_vert:iee,meshbasic_frag:see,meshlambert_vert:oee,meshlambert_frag:aee,meshmatcap_vert:lee,meshmatcap_frag:uee,meshnormal_vert:cee,meshnormal_frag:dee,meshphong_vert:fee,meshphong_frag:hee,meshphysical_vert:pee,meshphysical_frag:mee,meshtoon_vert:gee,meshtoon_frag:vee,points_vert:_ee,points_frag:yee,shadow_vert:xee,shadow_frag:See,sprite_vert:Eee,sprite_frag:wee},ct={common:{diffuse:{value:new _t(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new _t(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},la={basic:{uniforms:ns([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:ns([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new _t(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:ns([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new _t(0)},specular:{value:new _t(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:ns([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new _t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:ns([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new _t(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:ns([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:ns([ct.points,ct.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:ns([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:ns([ct.common,ct.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:ns([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:ns([ct.sprite,ct.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distanceRGBA:{uniforms:ns([ct.common,ct.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distanceRGBA_vert,fragmentShader:$t.distanceRGBA_frag},shadow:{uniforms:ns([ct.lights,ct.fog,{color:{value:new _t(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};la.physical={uniforms:ns([la.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new _t(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new _t(0)},specularColor:{value:new _t(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};const L_={r:0,b:0,g:0},Bd=new ao,Mee=new Ft;function Cee(t,e,n,r,i,s,o){const a=new _t(0);let l=s===!0?0:1,u,d,m=null,g=0,v=null;function y(E){let A=E.isScene===!0?E.background:null;return A&&A.isTexture&&(A=(E.backgroundBlurriness>0?n:e).get(A)),A}function x(E){let A=!1;const L=y(E);L===null?_(a,l):L&&L.isColor&&(_(L,1),A=!0);const D=t.xr.getEnvironmentBlendMode();D==="additive"?r.buffers.color.setClear(0,0,0,1,o):D==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function S(E,A){const L=y(A);L&&(L.isCubeTexture||L.mapping===fm)?(d===void 0&&(d=new Nr(new Tf(1,1,1),new _a({name:"BackgroundCubeMaterial",uniforms:Xp(la.backgroundCube.uniforms),vertexShader:la.backgroundCube.vertexShader,fragmentShader:la.backgroundCube.fragmentShader,side:os,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(D,U,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),Bd.copy(A.backgroundRotation),Bd.x*=-1,Bd.y*=-1,Bd.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(Bd.y*=-1,Bd.z*=-1),d.material.uniforms.envMap.value=L,d.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Mee.makeRotationFromEuler(Bd)),d.material.toneMapped=fn.getTransfer(L.colorSpace)!==Cn,(m!==L||g!==L.version||v!==t.toneMapping)&&(d.material.needsUpdate=!0,m=L,g=L.version,v=t.toneMapping),d.layers.enableAll(),E.unshift(d,d.geometry,d.material,0,0,null)):L&&L.isTexture&&(u===void 0&&(u=new Nr(new gm(2,2),new _a({name:"BackgroundMaterial",uniforms:Xp(la.background.uniforms),vertexShader:la.background.vertexShader,fragmentShader:la.background.fragmentShader,side:ru,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=L,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=fn.getTransfer(L.colorSpace)!==Cn,L.matrixAutoUpdate===!0&&L.updateMatrix(),u.material.uniforms.uvTransform.value.copy(L.matrix),(m!==L||g!==L.version||v!==t.toneMapping)&&(u.material.needsUpdate=!0,m=L,g=L.version,v=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function _(E,A){E.getRGB(L_,Qk(t)),r.buffers.color.setClear(L_.r,L_.g,L_.b,A,o)}function M(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,A=1){a.set(E),l=A,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,_(a,l)},render:x,addToRenderList:S,dispose:M}}function Aee(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=g(null);let s=i,o=!1;function a(T,z,W,K,Z){let te=!1;const ne=m(K,W,z);s!==ne&&(s=ne,u(s.object)),te=v(T,K,W,Z),te&&y(T,K,W,Z),Z!==null&&e.update(Z,t.ELEMENT_ARRAY_BUFFER),(te||o)&&(o=!1,A(T,z,W,K),Z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Z).buffer))}function l(){return t.createVertexArray()}function u(T){return t.bindVertexArray(T)}function d(T){return t.deleteVertexArray(T)}function m(T,z,W){const K=W.wireframe===!0;let Z=r[T.id];Z===void 0&&(Z={},r[T.id]=Z);let te=Z[z.id];te===void 0&&(te={},Z[z.id]=te);let ne=te[K];return ne===void 0&&(ne=g(l()),te[K]=ne),ne}function g(T){const z=[],W=[],K=[];for(let Z=0;Z<n;Z++)z[Z]=0,W[Z]=0,K[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:W,attributeDivisors:K,object:T,attributes:{},index:null}}function v(T,z,W,K){const Z=s.attributes,te=z.attributes;let ne=0;const de=W.getAttributes();for(const Y in de)if(de[Y].location>=0){const se=Z[Y];let he=te[Y];if(he===void 0&&(Y==="instanceMatrix"&&T.instanceMatrix&&(he=T.instanceMatrix),Y==="instanceColor"&&T.instanceColor&&(he=T.instanceColor)),se===void 0||se.attribute!==he||he&&se.data!==he.data)return!0;ne++}return s.attributesNum!==ne||s.index!==K}function y(T,z,W,K){const Z={},te=z.attributes;let ne=0;const de=W.getAttributes();for(const Y in de)if(de[Y].location>=0){let se=te[Y];se===void 0&&(Y==="instanceMatrix"&&T.instanceMatrix&&(se=T.instanceMatrix),Y==="instanceColor"&&T.instanceColor&&(se=T.instanceColor));const he={};he.attribute=se,se&&se.data&&(he.data=se.data),Z[Y]=he,ne++}s.attributes=Z,s.attributesNum=ne,s.index=K}function x(){const T=s.newAttributes;for(let z=0,W=T.length;z<W;z++)T[z]=0}function S(T){_(T,0)}function _(T,z){const W=s.newAttributes,K=s.enabledAttributes,Z=s.attributeDivisors;W[T]=1,K[T]===0&&(t.enableVertexAttribArray(T),K[T]=1),Z[T]!==z&&(t.vertexAttribDivisor(T,z),Z[T]=z)}function M(){const T=s.newAttributes,z=s.enabledAttributes;for(let W=0,K=z.length;W<K;W++)z[W]!==T[W]&&(t.disableVertexAttribArray(W),z[W]=0)}function E(T,z,W,K,Z,te,ne){ne===!0?t.vertexAttribIPointer(T,z,W,Z,te):t.vertexAttribPointer(T,z,W,K,Z,te)}function A(T,z,W,K){x();const Z=K.attributes,te=W.getAttributes(),ne=z.defaultAttributeValues;for(const de in te){const Y=te[de];if(Y.location>=0){let ae=Z[de];if(ae===void 0&&(de==="instanceMatrix"&&T.instanceMatrix&&(ae=T.instanceMatrix),de==="instanceColor"&&T.instanceColor&&(ae=T.instanceColor)),ae!==void 0){const se=ae.normalized,he=ae.itemSize,Me=e.get(ae);if(Me===void 0)continue;const ze=Me.buffer,ge=Me.type,De=Me.bytesPerElement,Xe=ge===t.INT||ge===t.UNSIGNED_INT||ae.gpuType===fE;if(ae.isInterleavedBufferAttribute){const Q=ae.data,ye=Q.stride,We=ae.offset;if(Q.isInstancedInterleavedBuffer){for(let je=0;je<Y.locationSize;je++)_(Y.location+je,Q.meshPerAttribute);T.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let je=0;je<Y.locationSize;je++)S(Y.location+je);t.bindBuffer(t.ARRAY_BUFFER,ze);for(let je=0;je<Y.locationSize;je++)E(Y.location+je,he/Y.locationSize,ge,se,ye*De,(We+he/Y.locationSize*je)*De,Xe)}else{if(ae.isInstancedBufferAttribute){for(let Q=0;Q<Y.locationSize;Q++)_(Y.location+Q,ae.meshPerAttribute);T.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Q=0;Q<Y.locationSize;Q++)S(Y.location+Q);t.bindBuffer(t.ARRAY_BUFFER,ze);for(let Q=0;Q<Y.locationSize;Q++)E(Y.location+Q,he/Y.locationSize,ge,se,he*De,he/Y.locationSize*Q*De,Xe)}}else if(ne!==void 0){const se=ne[de];if(se!==void 0)switch(se.length){case 2:t.vertexAttrib2fv(Y.location,se);break;case 3:t.vertexAttrib3fv(Y.location,se);break;case 4:t.vertexAttrib4fv(Y.location,se);break;default:t.vertexAttrib1fv(Y.location,se)}}}}M()}function L(){O();for(const T in r){const z=r[T];for(const W in z){const K=z[W];for(const Z in K)d(K[Z].object),delete K[Z];delete z[W]}delete r[T]}}function D(T){if(r[T.id]===void 0)return;const z=r[T.id];for(const W in z){const K=z[W];for(const Z in K)d(K[Z].object),delete K[Z];delete z[W]}delete r[T.id]}function U(T){for(const z in r){const W=r[z];if(W[T.id]===void 0)continue;const K=W[T.id];for(const Z in K)d(K[Z].object),delete K[Z];delete W[T.id]}}function O(){B(),o=!0,s!==i&&(s=i,u(s.object))}function B(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:O,resetDefaultState:B,dispose:L,releaseStatesOfGeometry:D,releaseStatesOfProgram:U,initAttributes:x,enableAttribute:S,disableUnusedAttributes:M}}function bee(t,e,n){let r;function i(u){r=u}function s(u,d){t.drawArrays(r,u,d),n.update(d,r,1)}function o(u,d,m){m!==0&&(t.drawArraysInstanced(r,u,d,m),n.update(d,r,m))}function a(u,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,d,0,m);let v=0;for(let y=0;y<m;y++)v+=d[y];n.update(v,r,1)}function l(u,d,m,g){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<u.length;y++)o(u[y],d[y],g[y]);else{v.multiDrawArraysInstancedWEBGL(r,u,0,d,0,g,0,m);let y=0;for(let x=0;x<m;x++)y+=d[x]*g[x];n.update(y,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Pee(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(U){return!(U!==Gi&&r.convert(U)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(U){const O=U===hm&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(U!==va&&r.convert(U)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&U!==Ts&&!O)}function l(U){if(U==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const d=l(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const m=n.logarithmicDepthBuffer===!0,g=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),v=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_TEXTURE_SIZE),S=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),_=t.getParameter(t.MAX_VERTEX_ATTRIBS),M=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),A=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),L=y>0,D=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:m,reverseDepthBuffer:g,maxTextures:v,maxVertexTextures:y,maxTextureSize:x,maxCubemapSize:S,maxAttributes:_,maxVertexUniforms:M,maxVaryings:E,maxFragmentUniforms:A,vertexTextures:L,maxSamples:D}}function Ree(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new nc,a=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const v=m.length!==0||g||r!==0||i;return i=g,r=m.length,v},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){n=d(m,g,0)},this.setState=function(m,g,v){const y=m.clippingPlanes,x=m.clipIntersection,S=m.clipShadows,_=t.get(m);if(!i||y===null||y.length===0||s&&!S)s?d(null):u();else{const M=s?0:r,E=M*4;let A=_.clippingState||null;l.value=A,A=d(y,g,E,v);for(let L=0;L!==E;++L)A[L]=n[L];_.clippingState=A,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(m,g,v,y){const x=m!==null?m.length:0;let S=null;if(x!==0){if(S=l.value,y!==!0||S===null){const _=v+x*4,M=g.matrixWorldInverse;a.getNormalMatrix(M),(S===null||S.length<_)&&(S=new Float32Array(_));for(let E=0,A=v;E!==x;++E,A+=4)o.copy(m[E]).applyMatrix4(M,a),o.normal.toArray(S,A),S[A+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,S}}function Tee(t){let e=new WeakMap;function n(o,a){return a===t1?o.mapping=iu:a===n1&&(o.mapping=Ac),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===t1||a===n1)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new tF(l.height);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",i),n(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const gp=4,TT=[.125,.215,.35,.446,.526,.582],Yd=20,kM=new Y1,LT=new _t;let FM=null,OM=0,IM=0,UM=!1;const Xd=(1+Math.sqrt(5))/2,Yh=1/Xd,NT=[new re(-Xd,Yh,0),new re(Xd,Yh,0),new re(-Yh,0,Xd),new re(Yh,0,Xd),new re(0,Xd,-Yh),new re(0,Xd,Yh),new re(-1,1,-1),new re(1,1,-1),new re(-1,1,1),new re(1,1,1)],Lee=new re;class B2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,s={}){const{size:o=256,position:a=Lee}=s;FM=this._renderer.getRenderTarget(),OM=this._renderer.getActiveCubeFace(),IM=this._renderer.getActiveMipmapLevel(),UM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=FT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(FM,OM,IM),this._renderer.xr.enabled=UM,e.scissorTest=!1,N_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===iu||e.mapping===Ac?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),FM=this._renderer.getRenderTarget(),OM=this._renderer.getActiveCubeFace(),IM=this._renderer.getActiveMipmapLevel(),UM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Yr,minFilter:Yr,generateMipmaps:!1,type:hm,format:Gi,colorSpace:gf,depthBuffer:!1},i=DT(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DT(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Nee(s)),this._blurMaterial=Dee(s,e,n)}return i}_compileMaterial(e){const n=new Nr(this._lodPlanes[0],e);this._renderer.compile(n,kM)}_sceneToCubeUV(e,n,r,i,s){const l=new ai(90,1,n,r),u=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,v=m.toneMapping;m.getClearColor(LT),m.toneMapping=Za,m.autoClear=!1;const y=new Gc({name:"PMREM.Background",side:os,depthWrite:!1,depthTest:!1}),x=new Nr(new Tf,y);let S=!1;const _=e.background;_?_.isColor&&(y.color.copy(_),e.background=null,S=!0):(y.color.copy(LT),S=!0);for(let M=0;M<6;M++){const E=M%3;E===0?(l.up.set(0,u[M],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+d[M],s.y,s.z)):E===1?(l.up.set(0,0,u[M]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+d[M],s.z)):(l.up.set(0,u[M],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+d[M]));const A=this._cubeSize;N_(i,E*A,M>2?A:0,A,A),m.setRenderTarget(i),S&&m.render(x,l),m.render(e,l)}x.geometry.dispose(),x.material.dispose(),m.toneMapping=v,m.autoClear=g,e.background=_}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===iu||e.mapping===Ac;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=FT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Nr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;N_(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,kM)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=NT[(i-s-1)%NT.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new Nr(this._lodPlanes[i],u),g=u.uniforms,v=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Yd-1),x=s/y,S=isFinite(s)?1+Math.floor(d*x):Yd;S>Yd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Yd}`);const _=[];let M=0;for(let U=0;U<Yd;++U){const O=U/x,B=Math.exp(-O*O/2);_.push(B),U===0?M+=B:U<S&&(M+=2*B)}for(let U=0;U<_.length;U++)_[U]=_[U]/M;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=_,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:E}=this;g.dTheta.value=y,g.mipInt.value=E-r;const A=this._sizeLods[i],L=3*A*(i>E-gp?i-E+gp:0),D=4*(this._cubeSize-A);N_(n,L,D,3*A,2*A),l.setRenderTarget(n),l.render(m,kM)}}function Nee(t){const e=[],n=[],r=[];let i=t;const s=t-gp+1+TT.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-gp?l=TT[o-t+gp-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),d=-u,m=1+u,g=[d,d,m,d,m,m,d,d,m,m,d,m],v=6,y=6,x=3,S=2,_=1,M=new Float32Array(x*y*v),E=new Float32Array(S*y*v),A=new Float32Array(_*y*v);for(let D=0;D<v;D++){const U=D%3*2/3-1,O=D>2?0:-1,B=[U,O,0,U+2/3,O,0,U+2/3,O+1,0,U,O,0,U+2/3,O+1,0,U,O+1,0];M.set(B,x*y*D),E.set(g,S*y*D);const T=[D,D,D,D,D,D];A.set(T,_*y*D)}const L=new Zt;L.setAttribute("position",new Rn(M,x)),L.setAttribute("uv",new Rn(E,S)),L.setAttribute("faceIndex",new Rn(A,_)),e.push(L),i>gp&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function DT(t,e,n){const r=new rl(t,e,n);return r.texture.mapping=fm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function N_(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Dee(t,e,n){const r=new Float32Array(Yd),i=new re(0,1,0);return new _a({name:"SphericalGaussianBlur",defines:{n:Yd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function kT(){return new _a({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function FT(){return new _a({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function mb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kee(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===t1||l===n1,d=l===iu||l===Ac;if(u||d){let m=e.get(a);const g=m!==void 0?m.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==g)return n===null&&(n=new B2(t)),m=u?n.fromEquirectangular(a,m):n.fromCubemap(a,m),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),m.texture;if(m!==void 0)return m.texture;{const v=a.image;return u&&v&&v.height>0||d&&v&&i(v)?(n===null&&(n=new B2(t)),m=u?n.fromEquirectangular(a):n.fromCubemap(a),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),a.addEventListener("dispose",s),m.texture):null}}}return a}function i(a){let l=0;const u=6;for(let d=0;d<u;d++)a[d]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Fee(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&sy("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Oee(t,e,n,r){const i={},s=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const y in g.attributes)e.remove(g.attributes[y]);g.removeEventListener("dispose",o),delete i[g.id];const v=s.get(g);v&&(e.remove(v),s.delete(g)),r.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function a(m,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,n.memory.geometries++),g}function l(m){const g=m.attributes;for(const v in g)e.update(g[v],t.ARRAY_BUFFER)}function u(m){const g=[],v=m.index,y=m.attributes.position;let x=0;if(v!==null){const M=v.array;x=v.version;for(let E=0,A=M.length;E<A;E+=3){const L=M[E+0],D=M[E+1],U=M[E+2];g.push(L,D,D,U,U,L)}}else if(y!==void 0){const M=y.array;x=y.version;for(let E=0,A=M.length/3-1;E<A;E+=3){const L=E+0,D=E+1,U=E+2;g.push(L,D,D,U,U,L)}}else return;const S=new(qk(g)?VA:GA)(g,1);S.version=x;const _=s.get(m);_&&e.remove(_),s.set(m,S)}function d(m){const g=s.get(m);if(g){const v=m.index;v!==null&&g.version<v.version&&u(m)}else u(m);return s.get(m)}return{get:a,update:l,getWireframeAttribute:d}}function Iee(t,e,n){let r;function i(g){r=g}let s,o;function a(g){s=g.type,o=g.bytesPerElement}function l(g,v){t.drawElements(r,v,s,g*o),n.update(v,r,1)}function u(g,v,y){y!==0&&(t.drawElementsInstanced(r,v,s,g*o,y),n.update(v,r,y))}function d(g,v,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,v,0,s,g,0,y);let S=0;for(let _=0;_<y;_++)S+=v[_];n.update(S,r,1)}function m(g,v,y,x){if(y===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let _=0;_<g.length;_++)u(g[_]/o,v[_],x[_]);else{S.multiDrawElementsInstancedWEBGL(r,v,0,s,g,0,x,0,y);let _=0;for(let M=0;M<y;M++)_+=v[M]*x[M];n.update(_,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=m}function Uee(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Bee(t,e,n){const r=new WeakMap,i=new gn;function s(o,a,l){const u=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,m=d!==void 0?d.length:0;let g=r.get(a);if(g===void 0||g.count!==m){let T=function(){O.dispose(),r.delete(a),a.removeEventListener("dispose",T)};var v=T;g!==void 0&&g.texture.dispose();const y=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,S=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],M=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let A=0;y===!0&&(A=1),x===!0&&(A=2),S===!0&&(A=3);let L=a.attributes.position.count*A,D=1;L>e.maxTextureSize&&(D=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const U=new Float32Array(L*D*4*m),O=new U1(U,L,D,m);O.type=Ts,O.needsUpdate=!0;const B=A*4;for(let z=0;z<m;z++){const W=_[z],K=M[z],Z=E[z],te=L*D*4*z;for(let ne=0;ne<W.count;ne++){const de=ne*B;y===!0&&(i.fromBufferAttribute(W,ne),U[te+de+0]=i.x,U[te+de+1]=i.y,U[te+de+2]=i.z,U[te+de+3]=0),x===!0&&(i.fromBufferAttribute(K,ne),U[te+de+4]=i.x,U[te+de+5]=i.y,U[te+de+6]=i.z,U[te+de+7]=0),S===!0&&(i.fromBufferAttribute(Z,ne),U[te+de+8]=i.x,U[te+de+9]=i.y,U[te+de+10]=i.z,U[te+de+11]=Z.itemSize===4?i.w:1)}}g={count:m,texture:O,size:new Ge(L,D)},r.set(a,g),a.addEventListener("dispose",T)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let y=0;for(let S=0;S<u.length;S++)y+=u[S];const x=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(t,"morphTargetBaseInfluence",x),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}return{update:s}}function zee(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,d=l.geometry,m=e.get(l,d);if(i.get(m)!==u&&(e.update(m),i.set(m,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const g=l.skeleton;i.get(g)!==u&&(g.update(),i.set(g,u))}return m}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const eO=new gr,OT=new qA(1,1),tO=new U1,nO=new xE,rO=new z1,IT=[],UT=[],BT=new Float32Array(16),zT=new Float32Array(9),HT=new Float32Array(4);function vm(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=IT[i];if(s===void 0&&(s=new Float32Array(i),IT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function qr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Kr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function zE(t,e){let n=UT[e];n===void 0&&(n=new Int32Array(e),UT[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Hee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Gee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qr(n,e))return;t.uniform2fv(this.addr,e),Kr(n,e)}}function Vee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(qr(n,e))return;t.uniform3fv(this.addr,e),Kr(n,e)}}function Wee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qr(n,e))return;t.uniform4fv(this.addr,e),Kr(n,e)}}function jee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Kr(n,e)}else{if(qr(n,r))return;HT.set(r),t.uniformMatrix2fv(this.addr,!1,HT),Kr(n,r)}}function Xee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Kr(n,e)}else{if(qr(n,r))return;zT.set(r),t.uniformMatrix3fv(this.addr,!1,zT),Kr(n,r)}}function Yee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Kr(n,e)}else{if(qr(n,r))return;BT.set(r),t.uniformMatrix4fv(this.addr,!1,BT),Kr(n,r)}}function qee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Kee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qr(n,e))return;t.uniform2iv(this.addr,e),Kr(n,e)}}function $ee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qr(n,e))return;t.uniform3iv(this.addr,e),Kr(n,e)}}function Zee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qr(n,e))return;t.uniform4iv(this.addr,e),Kr(n,e)}}function Qee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Jee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qr(n,e))return;t.uniform2uiv(this.addr,e),Kr(n,e)}}function ete(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qr(n,e))return;t.uniform3uiv(this.addr,e),Kr(n,e)}}function tte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qr(n,e))return;t.uniform4uiv(this.addr,e),Kr(n,e)}}function nte(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(OT.compareFunction=zA,s=OT):s=eO,n.setTexture2D(e||s,i)}function rte(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||nO,i)}function ite(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||rO,i)}function ste(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||tO,i)}function ote(t){switch(t){case 5126:return Hee;case 35664:return Gee;case 35665:return Vee;case 35666:return Wee;case 35674:return jee;case 35675:return Xee;case 35676:return Yee;case 5124:case 35670:return qee;case 35667:case 35671:return Kee;case 35668:case 35672:return $ee;case 35669:case 35673:return Zee;case 5125:return Qee;case 36294:return Jee;case 36295:return ete;case 36296:return tte;case 35678:case 36198:case 36298:case 36306:case 35682:return nte;case 35679:case 36299:case 36307:return rte;case 35680:case 36300:case 36308:case 36293:return ite;case 36289:case 36303:case 36311:case 36292:return ste}}function ate(t,e){t.uniform1fv(this.addr,e)}function lte(t,e){const n=vm(e,this.size,2);t.uniform2fv(this.addr,n)}function ute(t,e){const n=vm(e,this.size,3);t.uniform3fv(this.addr,n)}function cte(t,e){const n=vm(e,this.size,4);t.uniform4fv(this.addr,n)}function dte(t,e){const n=vm(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function fte(t,e){const n=vm(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function hte(t,e){const n=vm(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function pte(t,e){t.uniform1iv(this.addr,e)}function mte(t,e){t.uniform2iv(this.addr,e)}function gte(t,e){t.uniform3iv(this.addr,e)}function vte(t,e){t.uniform4iv(this.addr,e)}function _te(t,e){t.uniform1uiv(this.addr,e)}function yte(t,e){t.uniform2uiv(this.addr,e)}function xte(t,e){t.uniform3uiv(this.addr,e)}function Ste(t,e){t.uniform4uiv(this.addr,e)}function Ete(t,e,n){const r=this.cache,i=e.length,s=zE(n,i);qr(r,s)||(t.uniform1iv(this.addr,s),Kr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||eO,s[o])}function wte(t,e,n){const r=this.cache,i=e.length,s=zE(n,i);qr(r,s)||(t.uniform1iv(this.addr,s),Kr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||nO,s[o])}function Mte(t,e,n){const r=this.cache,i=e.length,s=zE(n,i);qr(r,s)||(t.uniform1iv(this.addr,s),Kr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||rO,s[o])}function Cte(t,e,n){const r=this.cache,i=e.length,s=zE(n,i);qr(r,s)||(t.uniform1iv(this.addr,s),Kr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||tO,s[o])}function Ate(t){switch(t){case 5126:return ate;case 35664:return lte;case 35665:return ute;case 35666:return cte;case 35674:return dte;case 35675:return fte;case 35676:return hte;case 5124:case 35670:return pte;case 35667:case 35671:return mte;case 35668:case 35672:return gte;case 35669:case 35673:return vte;case 5125:return _te;case 36294:return yte;case 36295:return xte;case 36296:return Ste;case 35678:case 36198:case 36298:case 36306:case 35682:return Ete;case 35679:case 36299:case 36307:return wte;case 35680:case 36300:case 36308:case 36293:return Mte;case 36289:case 36303:case 36311:case 36292:return Cte}}class bte{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=ote(n.type)}}class Pte{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Ate(n.type)}}class Rte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const BM=/(\w+)(\])?(\[|\.)?/g;function GT(t,e){t.seq.push(e),t.map[e.id]=e}function Tte(t,e,n){const r=t.name,i=r.length;for(BM.lastIndex=0;;){const s=BM.exec(r),o=BM.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){GT(n,u===void 0?new bte(a,t,e):new Pte(a,t,e));break}else{let m=n.map[a];m===void 0&&(m=new Rte(a),GT(n,m)),n=m}}}class ay{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);Tte(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function VT(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Lte=37297;let Nte=0;function Dte(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const WT=new Wt;function kte(t){fn._getMatrix(WT,fn.workingColorSpace,t);const e=`mat3( ${WT.elements.map(n=>n.toFixed(4))} )`;switch(fn.getTransfer(t)){case a1:return[e,"LinearTransferOETF"];case Cn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function jT(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+Dte(t.getShaderSource(e),o)}else return i}function Fte(t,e){const n=kte(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function Ote(t,e){let n;switch(e){case Pk:n="Linear";break;case Rk:n="Reinhard";break;case Tk:n="Cineon";break;case PA:n="ACESFilmic";break;case Nk:n="AgX";break;case Dk:n="Neutral";break;case Lk:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const D_=new re;function Ite(){fn.getLuminanceCoefficients(D_);const t=D_.x.toFixed(4),e=D_.y.toFixed(4),n=D_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ute(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(r0).join(`
`)}function Bte(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function zte(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function r0(t){return t!==""}function XT(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function YT(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hte=/^[ \t]*#include +<([\w\d./]+)>/gm;function z2(t){return t.replace(Hte,Vte)}const Gte=new Map;function Vte(t,e){let n=$t[e];if(n===void 0){const r=Gte.get(e);if(r!==void 0)n=$t[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return z2(n)}const Wte=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qT(t){return t.replace(Wte,jte)}function jte(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function KT(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Xte(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===cE?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===g0?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===sa&&(e="SHADOWMAP_TYPE_VSM"),e}function Yte(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case iu:case Ac:e="ENVMAP_TYPE_CUBE";break;case fm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qte(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ac:e="ENVMAP_MODE_REFRACTION";break}return e}function Kte(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case O1:e="ENVMAP_BLENDING_MULTIPLY";break;case Ak:e="ENVMAP_BLENDING_MIX";break;case bk:e="ENVMAP_BLENDING_ADD";break}return e}function $te(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Zte(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Xte(n),u=Yte(n),d=qte(n),m=Kte(n),g=$te(n),v=Ute(n),y=Bte(s),x=i.createProgram();let S,_,M=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(r0).join(`
`),S.length>0&&(S+=`
`),_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(r0).join(`
`),_.length>0&&(_+=`
`)):(S=[KT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(r0).join(`
`),_=[KT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Za?"#define TONE_MAPPING":"",n.toneMapping!==Za?$t.tonemapping_pars_fragment:"",n.toneMapping!==Za?Ote("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",$t.colorspace_pars_fragment,Fte("linearToOutputTexel",n.outputColorSpace),Ite(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(r0).join(`
`)),o=z2(o),o=XT(o,n),o=YT(o,n),a=z2(a),a=XT(a,n),a=YT(a,n),o=qT(o),a=qT(a),n.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,S=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,_=["#define varying in",n.glslVersion===T2?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===T2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=M+S+o,A=M+_+a,L=VT(i,i.VERTEX_SHADER,E),D=VT(i,i.FRAGMENT_SHADER,A);i.attachShader(x,L),i.attachShader(x,D),n.index0AttributeName!==void 0?i.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function U(z){if(t.debug.checkShaderErrors){const W=i.getProgramInfoLog(x).trim(),K=i.getShaderInfoLog(L).trim(),Z=i.getShaderInfoLog(D).trim();let te=!0,ne=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(te=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,x,L,D);else{const de=jT(i,L,"vertex"),Y=jT(i,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+W+`
`+de+`
`+Y)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(K===""||Z==="")&&(ne=!1);ne&&(z.diagnostics={runnable:te,programLog:W,vertexShader:{log:K,prefix:S},fragmentShader:{log:Z,prefix:_}})}i.deleteShader(L),i.deleteShader(D),O=new ay(i,x),B=zte(i,x)}let O;this.getUniforms=function(){return O===void 0&&U(this),O};let B;this.getAttributes=function(){return B===void 0&&U(this),B};let T=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=i.getProgramParameter(x,Lte)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Nte++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=L,this.fragmentShader=D,this}let Qte=0;class Jte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new ene(e),n.set(e,r)),r}}class ene{constructor(e){this.id=Qte++,this.code=e,this.usedTimes=0}}function tne(t,e,n,r,i,s,o){const a=new sf,l=new Jte,u=new Set,d=[],m=i.logarithmicDepthBuffer,g=i.vertexTextures;let v=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(B){return u.add(B),B===0?"uv":`uv${B}`}function S(B,T,z,W,K){const Z=W.fog,te=K.geometry,ne=B.isMeshStandardMaterial?W.environment:null,de=(B.isMeshStandardMaterial?n:e).get(B.envMap||ne),Y=de&&de.mapping===fm?de.image.height:null,ae=y[B.type];B.precision!==null&&(v=i.getMaxPrecision(B.precision),v!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",v,"instead."));const se=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,he=se!==void 0?se.length:0;let Me=0;te.morphAttributes.position!==void 0&&(Me=1),te.morphAttributes.normal!==void 0&&(Me=2),te.morphAttributes.color!==void 0&&(Me=3);let ze,ge,De,Xe;if(ae){const un=la[ae];ze=un.vertexShader,ge=un.fragmentShader}else ze=B.vertexShader,ge=B.fragmentShader,l.update(B),De=l.getVertexShaderID(B),Xe=l.getFragmentShaderID(B);const Q=t.getRenderTarget(),ye=t.state.buffers.depth.getReversed(),We=K.isInstancedMesh===!0,je=K.isBatchedMesh===!0,Ve=!!B.map,Je=!!B.matcap,$e=!!de,le=!!B.aoMap,At=!!B.lightMap,Be=!!B.bumpMap,He=!!B.normalMap,ke=!!B.displacementMap,nt=!!B.emissiveMap,Fe=!!B.metalnessMap,ee=!!B.roughnessMap,X=B.anisotropy>0,xe=B.clearcoat>0,Le=B.dispersion>0,Ie=B.iridescence>0,Oe=B.sheen>0,j=B.transmission>0,N=X&&!!B.anisotropyMap,I=xe&&!!B.clearcoatMap,J=xe&&!!B.clearcoatNormalMap,ie=xe&&!!B.clearcoatRoughnessMap,fe=Ie&&!!B.iridescenceMap,Ce=Ie&&!!B.iridescenceThicknessMap,tt=Oe&&!!B.sheenColorMap,Ze=Oe&&!!B.sheenRoughnessMap,wt=!!B.specularMap,gt=!!B.specularColorMap,bt=!!B.specularIntensityMap,_e=j&&!!B.transmissionMap,dt=j&&!!B.thicknessMap,Ue=!!B.gradientMap,Ye=!!B.alphaMap,ft=B.alphaTest>0,ut=!!B.alphaHash,Ot=!!B.extensions;let kn=Za;B.toneMapped&&(Q===null||Q.isXRRenderTarget===!0)&&(kn=t.toneMapping);const Qn={shaderID:ae,shaderType:B.type,shaderName:B.name,vertexShader:ze,fragmentShader:ge,defines:B.defines,customVertexShaderID:De,customFragmentShaderID:Xe,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:v,batching:je,batchingColor:je&&K._colorsTexture!==null,instancing:We,instancingColor:We&&K.instanceColor!==null,instancingMorph:We&&K.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:Q===null?t.outputColorSpace:Q.isXRRenderTarget===!0?Q.texture.colorSpace:gf,alphaToCoverage:!!B.alphaToCoverage,map:Ve,matcap:Je,envMap:$e,envMapMode:$e&&de.mapping,envMapCubeUVHeight:Y,aoMap:le,lightMap:At,bumpMap:Be,normalMap:He,displacementMap:g&&ke,emissiveMap:nt,normalMapObjectSpace:He&&B.normalMapType===zk,normalMapTangentSpace:He&&B.normalMapType===Hc,metalnessMap:Fe,roughnessMap:ee,anisotropy:X,anisotropyMap:N,clearcoat:xe,clearcoatMap:I,clearcoatNormalMap:J,clearcoatRoughnessMap:ie,dispersion:Le,iridescence:Ie,iridescenceMap:fe,iridescenceThicknessMap:Ce,sheen:Oe,sheenColorMap:tt,sheenRoughnessMap:Ze,specularMap:wt,specularColorMap:gt,specularIntensityMap:bt,transmission:j,transmissionMap:_e,thicknessMap:dt,gradientMap:Ue,opaque:B.transparent===!1&&B.blending===nf&&B.alphaToCoverage===!1,alphaMap:Ye,alphaTest:ft,alphaHash:ut,combine:B.combine,mapUv:Ve&&x(B.map.channel),aoMapUv:le&&x(B.aoMap.channel),lightMapUv:At&&x(B.lightMap.channel),bumpMapUv:Be&&x(B.bumpMap.channel),normalMapUv:He&&x(B.normalMap.channel),displacementMapUv:ke&&x(B.displacementMap.channel),emissiveMapUv:nt&&x(B.emissiveMap.channel),metalnessMapUv:Fe&&x(B.metalnessMap.channel),roughnessMapUv:ee&&x(B.roughnessMap.channel),anisotropyMapUv:N&&x(B.anisotropyMap.channel),clearcoatMapUv:I&&x(B.clearcoatMap.channel),clearcoatNormalMapUv:J&&x(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ie&&x(B.clearcoatRoughnessMap.channel),iridescenceMapUv:fe&&x(B.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&x(B.iridescenceThicknessMap.channel),sheenColorMapUv:tt&&x(B.sheenColorMap.channel),sheenRoughnessMapUv:Ze&&x(B.sheenRoughnessMap.channel),specularMapUv:wt&&x(B.specularMap.channel),specularColorMapUv:gt&&x(B.specularColorMap.channel),specularIntensityMapUv:bt&&x(B.specularIntensityMap.channel),transmissionMapUv:_e&&x(B.transmissionMap.channel),thicknessMapUv:dt&&x(B.thicknessMap.channel),alphaMapUv:Ye&&x(B.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(He||X),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!te.attributes.uv&&(Ve||Ye),fog:!!Z,useFog:B.fog===!0,fogExp2:!!Z&&Z.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:ye,skinning:K.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:Me,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:t.shadowMap.enabled&&z.length>0,shadowMapType:t.shadowMap.type,toneMapping:kn,decodeVideoTexture:Ve&&B.map.isVideoTexture===!0&&fn.getTransfer(B.map.colorSpace)===Cn,decodeVideoTextureEmissive:nt&&B.emissiveMap.isVideoTexture===!0&&fn.getTransfer(B.emissiveMap.colorSpace)===Cn,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===No,flipSided:B.side===os,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:Ot&&B.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ot&&B.extensions.multiDraw===!0||je)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return Qn.vertexUv1s=u.has(1),Qn.vertexUv2s=u.has(2),Qn.vertexUv3s=u.has(3),u.clear(),Qn}function _(B){const T=[];if(B.shaderID?T.push(B.shaderID):(T.push(B.customVertexShaderID),T.push(B.customFragmentShaderID)),B.defines!==void 0)for(const z in B.defines)T.push(z),T.push(B.defines[z]);return B.isRawShaderMaterial===!1&&(M(T,B),E(T,B),T.push(t.outputColorSpace)),T.push(B.customProgramCacheKey),T.join()}function M(B,T){B.push(T.precision),B.push(T.outputColorSpace),B.push(T.envMapMode),B.push(T.envMapCubeUVHeight),B.push(T.mapUv),B.push(T.alphaMapUv),B.push(T.lightMapUv),B.push(T.aoMapUv),B.push(T.bumpMapUv),B.push(T.normalMapUv),B.push(T.displacementMapUv),B.push(T.emissiveMapUv),B.push(T.metalnessMapUv),B.push(T.roughnessMapUv),B.push(T.anisotropyMapUv),B.push(T.clearcoatMapUv),B.push(T.clearcoatNormalMapUv),B.push(T.clearcoatRoughnessMapUv),B.push(T.iridescenceMapUv),B.push(T.iridescenceThicknessMapUv),B.push(T.sheenColorMapUv),B.push(T.sheenRoughnessMapUv),B.push(T.specularMapUv),B.push(T.specularColorMapUv),B.push(T.specularIntensityMapUv),B.push(T.transmissionMapUv),B.push(T.thicknessMapUv),B.push(T.combine),B.push(T.fogExp2),B.push(T.sizeAttenuation),B.push(T.morphTargetsCount),B.push(T.morphAttributeCount),B.push(T.numDirLights),B.push(T.numPointLights),B.push(T.numSpotLights),B.push(T.numSpotLightMaps),B.push(T.numHemiLights),B.push(T.numRectAreaLights),B.push(T.numDirLightShadows),B.push(T.numPointLightShadows),B.push(T.numSpotLightShadows),B.push(T.numSpotLightShadowsWithMaps),B.push(T.numLightProbes),B.push(T.shadowMapType),B.push(T.toneMapping),B.push(T.numClippingPlanes),B.push(T.numClipIntersection),B.push(T.depthPacking)}function E(B,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),B.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.reverseDepthBuffer&&a.enable(4),T.skinning&&a.enable(5),T.morphTargets&&a.enable(6),T.morphNormals&&a.enable(7),T.morphColors&&a.enable(8),T.premultipliedAlpha&&a.enable(9),T.shadowMapEnabled&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.decodeVideoTextureEmissive&&a.enable(20),T.alphaToCoverage&&a.enable(21),B.push(a.mask)}function A(B){const T=y[B.type];let z;if(T){const W=la[T];z=Jk.clone(W.uniforms)}else z=B.uniforms;return z}function L(B,T){let z;for(let W=0,K=d.length;W<K;W++){const Z=d[W];if(Z.cacheKey===T){z=Z,++z.usedTimes;break}}return z===void 0&&(z=new Zte(t,T,B,s),d.push(z)),z}function D(B){if(--B.usedTimes===0){const T=d.indexOf(B);d[T]=d[d.length-1],d.pop(),B.destroy()}}function U(B){l.remove(B)}function O(){l.dispose()}return{getParameters:S,getProgramCacheKey:_,getUniforms:A,acquireProgram:L,releaseProgram:D,releaseShaderCache:U,programs:d,dispose:O}}function nne(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function rne(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function $T(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ZT(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(m,g,v,y,x,S){let _=t[e];return _===void 0?(_={id:m.id,object:m,geometry:g,material:v,groupOrder:y,renderOrder:m.renderOrder,z:x,group:S},t[e]=_):(_.id=m.id,_.object=m,_.geometry=g,_.material=v,_.groupOrder=y,_.renderOrder=m.renderOrder,_.z=x,_.group=S),e++,_}function a(m,g,v,y,x,S){const _=o(m,g,v,y,x,S);v.transmission>0?r.push(_):v.transparent===!0?i.push(_):n.push(_)}function l(m,g,v,y,x,S){const _=o(m,g,v,y,x,S);v.transmission>0?r.unshift(_):v.transparent===!0?i.unshift(_):n.unshift(_)}function u(m,g){n.length>1&&n.sort(m||rne),r.length>1&&r.sort(g||$T),i.length>1&&i.sort(g||$T)}function d(){for(let m=e,g=t.length;m<g;m++){const v=t[m];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:u}}function ine(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new ZT,t.set(r,[o])):i>=s.length?(o=new ZT,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function sne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new re,color:new _t};break;case"SpotLight":n={position:new re,direction:new re,color:new _t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new re,color:new _t,distance:0,decay:0};break;case"HemisphereLight":n={direction:new re,skyColor:new _t,groundColor:new _t};break;case"RectAreaLight":n={color:new _t,position:new re,halfWidth:new re,halfHeight:new re};break}return t[e.id]=n,n}}}function one(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let ane=0;function lne(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function une(t){const e=new sne,n=one(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new re);const i=new re,s=new Ft,o=new Ft;function a(u){let d=0,m=0,g=0;for(let B=0;B<9;B++)r.probe[B].set(0,0,0);let v=0,y=0,x=0,S=0,_=0,M=0,E=0,A=0,L=0,D=0,U=0;u.sort(lne);for(let B=0,T=u.length;B<T;B++){const z=u[B],W=z.color,K=z.intensity,Z=z.distance,te=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=W.r*K,m+=W.g*K,g+=W.b*K;else if(z.isLightProbe){for(let ne=0;ne<9;ne++)r.probe[ne].addScaledVector(z.sh.coefficients[ne],K);U++}else if(z.isDirectionalLight){const ne=e.get(z);if(ne.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const de=z.shadow,Y=n.get(z);Y.shadowIntensity=de.intensity,Y.shadowBias=de.bias,Y.shadowNormalBias=de.normalBias,Y.shadowRadius=de.radius,Y.shadowMapSize=de.mapSize,r.directionalShadow[v]=Y,r.directionalShadowMap[v]=te,r.directionalShadowMatrix[v]=z.shadow.matrix,M++}r.directional[v]=ne,v++}else if(z.isSpotLight){const ne=e.get(z);ne.position.setFromMatrixPosition(z.matrixWorld),ne.color.copy(W).multiplyScalar(K),ne.distance=Z,ne.coneCos=Math.cos(z.angle),ne.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),ne.decay=z.decay,r.spot[x]=ne;const de=z.shadow;if(z.map&&(r.spotLightMap[L]=z.map,L++,de.updateMatrices(z),z.castShadow&&D++),r.spotLightMatrix[x]=de.matrix,z.castShadow){const Y=n.get(z);Y.shadowIntensity=de.intensity,Y.shadowBias=de.bias,Y.shadowNormalBias=de.normalBias,Y.shadowRadius=de.radius,Y.shadowMapSize=de.mapSize,r.spotShadow[x]=Y,r.spotShadowMap[x]=te,A++}x++}else if(z.isRectAreaLight){const ne=e.get(z);ne.color.copy(W).multiplyScalar(K),ne.halfWidth.set(z.width*.5,0,0),ne.halfHeight.set(0,z.height*.5,0),r.rectArea[S]=ne,S++}else if(z.isPointLight){const ne=e.get(z);if(ne.color.copy(z.color).multiplyScalar(z.intensity),ne.distance=z.distance,ne.decay=z.decay,z.castShadow){const de=z.shadow,Y=n.get(z);Y.shadowIntensity=de.intensity,Y.shadowBias=de.bias,Y.shadowNormalBias=de.normalBias,Y.shadowRadius=de.radius,Y.shadowMapSize=de.mapSize,Y.shadowCameraNear=de.camera.near,Y.shadowCameraFar=de.camera.far,r.pointShadow[y]=Y,r.pointShadowMap[y]=te,r.pointShadowMatrix[y]=z.shadow.matrix,E++}r.point[y]=ne,y++}else if(z.isHemisphereLight){const ne=e.get(z);ne.skyColor.copy(z.color).multiplyScalar(K),ne.groundColor.copy(z.groundColor).multiplyScalar(K),r.hemi[_]=ne,_++}}S>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ct.LTC_FLOAT_1,r.rectAreaLTC2=ct.LTC_FLOAT_2):(r.rectAreaLTC1=ct.LTC_HALF_1,r.rectAreaLTC2=ct.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=m,r.ambient[2]=g;const O=r.hash;(O.directionalLength!==v||O.pointLength!==y||O.spotLength!==x||O.rectAreaLength!==S||O.hemiLength!==_||O.numDirectionalShadows!==M||O.numPointShadows!==E||O.numSpotShadows!==A||O.numSpotMaps!==L||O.numLightProbes!==U)&&(r.directional.length=v,r.spot.length=x,r.rectArea.length=S,r.point.length=y,r.hemi.length=_,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=A+L-D,r.spotLightMap.length=L,r.numSpotLightShadowsWithMaps=D,r.numLightProbes=U,O.directionalLength=v,O.pointLength=y,O.spotLength=x,O.rectAreaLength=S,O.hemiLength=_,O.numDirectionalShadows=M,O.numPointShadows=E,O.numSpotShadows=A,O.numSpotMaps=L,O.numLightProbes=U,r.version=ane++)}function l(u,d){let m=0,g=0,v=0,y=0,x=0;const S=d.matrixWorldInverse;for(let _=0,M=u.length;_<M;_++){const E=u[_];if(E.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(S),m++}else if(E.isSpotLight){const A=r.spot[v];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(S),A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(S),v++}else if(E.isRectAreaLight){const A=r.rectArea[y];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(S),o.identity(),s.copy(E.matrixWorld),s.premultiply(S),o.extractRotation(s),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),y++}else if(E.isPointLight){const A=r.point[g];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(S),g++}else if(E.isHemisphereLight){const A=r.hemi[x];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(S),x++}}}return{setup:a,setupView:l,state:r}}function QT(t){const e=new une(t),n=[],r=[];function i(d){u.camera=d,n.length=0,r.length=0}function s(d){n.push(d)}function o(d){r.push(d)}function a(){e.setup(n)}function l(d){e.setupView(n,d)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function cne(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new QT(t),e.set(i,[a])):s>=o.length?(a=new QT(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const dne=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fne=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hne(t,e,n){let r=new H1;const i=new Ge,s=new Ge,o=new gn,a=new nb({depthPacking:Bk}),l=new rb,u={},d=n.maxTextureSize,m={[ru]:os,[os]:ru,[No]:No},g=new _a({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:dne,fragmentShader:fne}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const y=new Zt;y.setAttribute("position",new Rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Nr(y,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=cE;let _=this.type;this.render=function(D,U,O){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||D.length===0)return;const B=t.getRenderTarget(),T=t.getActiveCubeFace(),z=t.getActiveMipmapLevel(),W=t.state;W.setBlending(ql),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const K=_!==sa&&this.type===sa,Z=_===sa&&this.type!==sa;for(let te=0,ne=D.length;te<ne;te++){const de=D[te],Y=de.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;i.copy(Y.mapSize);const ae=Y.getFrameExtents();if(i.multiply(ae),s.copy(Y.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/ae.x),i.x=s.x*ae.x,Y.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/ae.y),i.y=s.y*ae.y,Y.mapSize.y=s.y)),Y.map===null||K===!0||Z===!0){const he=this.type!==sa?{minFilter:yi,magFilter:yi}:{};Y.map!==null&&Y.map.dispose(),Y.map=new rl(i.x,i.y,he),Y.map.texture.name=de.name+".shadowMap",Y.camera.updateProjectionMatrix()}t.setRenderTarget(Y.map),t.clear();const se=Y.getViewportCount();for(let he=0;he<se;he++){const Me=Y.getViewport(he);o.set(s.x*Me.x,s.y*Me.y,s.x*Me.z,s.y*Me.w),W.viewport(o),Y.updateMatrices(de,he),r=Y.getFrustum(),A(U,O,Y.camera,de,this.type)}Y.isPointLightShadow!==!0&&this.type===sa&&M(Y,O),Y.needsUpdate=!1}_=this.type,S.needsUpdate=!1,t.setRenderTarget(B,T,z)};function M(D,U){const O=e.update(x);g.defines.VSM_SAMPLES!==D.blurSamples&&(g.defines.VSM_SAMPLES=D.blurSamples,v.defines.VSM_SAMPLES=D.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new rl(i.x,i.y)),g.uniforms.shadow_pass.value=D.map.texture,g.uniforms.resolution.value=D.mapSize,g.uniforms.radius.value=D.radius,t.setRenderTarget(D.mapPass),t.clear(),t.renderBufferDirect(U,null,O,g,x,null),v.uniforms.shadow_pass.value=D.mapPass.texture,v.uniforms.resolution.value=D.mapSize,v.uniforms.radius.value=D.radius,t.setRenderTarget(D.map),t.clear(),t.renderBufferDirect(U,null,O,v,x,null)}function E(D,U,O,B){let T=null;const z=O.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(z!==void 0)T=z;else if(T=O.isPointLight===!0?l:a,t.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0){const W=T.uuid,K=U.uuid;let Z=u[W];Z===void 0&&(Z={},u[W]=Z);let te=Z[K];te===void 0&&(te=T.clone(),Z[K]=te,U.addEventListener("dispose",L)),T=te}if(T.visible=U.visible,T.wireframe=U.wireframe,B===sa?T.side=U.shadowSide!==null?U.shadowSide:U.side:T.side=U.shadowSide!==null?U.shadowSide:m[U.side],T.alphaMap=U.alphaMap,T.alphaTest=U.alphaTest,T.map=U.map,T.clipShadows=U.clipShadows,T.clippingPlanes=U.clippingPlanes,T.clipIntersection=U.clipIntersection,T.displacementMap=U.displacementMap,T.displacementScale=U.displacementScale,T.displacementBias=U.displacementBias,T.wireframeLinewidth=U.wireframeLinewidth,T.linewidth=U.linewidth,O.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const W=t.properties.get(T);W.light=O}return T}function A(D,U,O,B,T){if(D.visible===!1)return;if(D.layers.test(U.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&T===sa)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,D.matrixWorld);const K=e.update(D),Z=D.material;if(Array.isArray(Z)){const te=K.groups;for(let ne=0,de=te.length;ne<de;ne++){const Y=te[ne],ae=Z[Y.materialIndex];if(ae&&ae.visible){const se=E(D,ae,B,T);D.onBeforeShadow(t,D,U,O,K,se,Y),t.renderBufferDirect(O,null,K,se,D,Y),D.onAfterShadow(t,D,U,O,K,se,Y)}}}else if(Z.visible){const te=E(D,Z,B,T);D.onBeforeShadow(t,D,U,O,K,te,null),t.renderBufferDirect(O,null,K,te,D,null),D.onAfterShadow(t,D,U,O,K,te,null)}}const W=D.children;for(let K=0,Z=W.length;K<Z;K++)A(W[K],U,O,B,T)}function L(D){D.target.removeEventListener("dispose",L);for(const O in u){const B=u[O],T=D.target.uuid;T in B&&(B[T].dispose(),delete B[T])}}}const pne={[Jy]:ex,[tx]:ix,[nx]:sx,[mf]:rx,[ex]:Jy,[ix]:tx,[sx]:nx,[rx]:mf};function mne(t,e){function n(){let _e=!1;const dt=new gn;let Ue=null;const Ye=new gn(0,0,0,0);return{setMask:function(ft){Ue!==ft&&!_e&&(t.colorMask(ft,ft,ft,ft),Ue=ft)},setLocked:function(ft){_e=ft},setClear:function(ft,ut,Ot,kn,Qn){Qn===!0&&(ft*=kn,ut*=kn,Ot*=kn),dt.set(ft,ut,Ot,kn),Ye.equals(dt)===!1&&(t.clearColor(ft,ut,Ot,kn),Ye.copy(dt))},reset:function(){_e=!1,Ue=null,Ye.set(-1,0,0,0)}}}function r(){let _e=!1,dt=!1,Ue=null,Ye=null,ft=null;return{setReversed:function(ut){if(dt!==ut){const Ot=e.get("EXT_clip_control");ut?Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.ZERO_TO_ONE_EXT):Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.NEGATIVE_ONE_TO_ONE_EXT),dt=ut;const kn=ft;ft=null,this.setClear(kn)}},getReversed:function(){return dt},setTest:function(ut){ut?Q(t.DEPTH_TEST):ye(t.DEPTH_TEST)},setMask:function(ut){Ue!==ut&&!_e&&(t.depthMask(ut),Ue=ut)},setFunc:function(ut){if(dt&&(ut=pne[ut]),Ye!==ut){switch(ut){case Jy:t.depthFunc(t.NEVER);break;case ex:t.depthFunc(t.ALWAYS);break;case tx:t.depthFunc(t.LESS);break;case mf:t.depthFunc(t.LEQUAL);break;case nx:t.depthFunc(t.EQUAL);break;case rx:t.depthFunc(t.GEQUAL);break;case ix:t.depthFunc(t.GREATER);break;case sx:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ye=ut}},setLocked:function(ut){_e=ut},setClear:function(ut){ft!==ut&&(dt&&(ut=1-ut),t.clearDepth(ut),ft=ut)},reset:function(){_e=!1,Ue=null,Ye=null,ft=null,dt=!1}}}function i(){let _e=!1,dt=null,Ue=null,Ye=null,ft=null,ut=null,Ot=null,kn=null,Qn=null;return{setTest:function(un){_e||(un?Q(t.STENCIL_TEST):ye(t.STENCIL_TEST))},setMask:function(un){dt!==un&&!_e&&(t.stencilMask(un),dt=un)},setFunc:function(un,ci,Fs){(Ue!==un||Ye!==ci||ft!==Fs)&&(t.stencilFunc(un,ci,Fs),Ue=un,Ye=ci,ft=Fs)},setOp:function(un,ci,Fs){(ut!==un||Ot!==ci||kn!==Fs)&&(t.stencilOp(un,ci,Fs),ut=un,Ot=ci,kn=Fs)},setLocked:function(un){_e=un},setClear:function(un){Qn!==un&&(t.clearStencil(un),Qn=un)},reset:function(){_e=!1,dt=null,Ue=null,Ye=null,ft=null,ut=null,Ot=null,kn=null,Qn=null}}}const s=new n,o=new r,a=new i,l=new WeakMap,u=new WeakMap;let d={},m={},g=new WeakMap,v=[],y=null,x=!1,S=null,_=null,M=null,E=null,A=null,L=null,D=null,U=new _t(0,0,0),O=0,B=!1,T=null,z=null,W=null,K=null,Z=null;const te=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,de=0;const Y=t.getParameter(t.VERSION);Y.indexOf("WebGL")!==-1?(de=parseFloat(/^WebGL (\d)/.exec(Y)[1]),ne=de>=1):Y.indexOf("OpenGL ES")!==-1&&(de=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),ne=de>=2);let ae=null,se={};const he=t.getParameter(t.SCISSOR_BOX),Me=t.getParameter(t.VIEWPORT),ze=new gn().fromArray(he),ge=new gn().fromArray(Me);function De(_e,dt,Ue,Ye){const ft=new Uint8Array(4),ut=t.createTexture();t.bindTexture(_e,ut),t.texParameteri(_e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(_e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ot=0;Ot<Ue;Ot++)_e===t.TEXTURE_3D||_e===t.TEXTURE_2D_ARRAY?t.texImage3D(dt,0,t.RGBA,1,1,Ye,0,t.RGBA,t.UNSIGNED_BYTE,ft):t.texImage2D(dt+Ot,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ft);return ut}const Xe={};Xe[t.TEXTURE_2D]=De(t.TEXTURE_2D,t.TEXTURE_2D,1),Xe[t.TEXTURE_CUBE_MAP]=De(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Xe[t.TEXTURE_2D_ARRAY]=De(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Xe[t.TEXTURE_3D]=De(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Q(t.DEPTH_TEST),o.setFunc(mf),Be(!1),He(M2),Q(t.CULL_FACE),le(ql);function Q(_e){d[_e]!==!0&&(t.enable(_e),d[_e]=!0)}function ye(_e){d[_e]!==!1&&(t.disable(_e),d[_e]=!1)}function We(_e,dt){return m[_e]!==dt?(t.bindFramebuffer(_e,dt),m[_e]=dt,_e===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=dt),_e===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=dt),!0):!1}function je(_e,dt){let Ue=v,Ye=!1;if(_e){Ue=g.get(dt),Ue===void 0&&(Ue=[],g.set(dt,Ue));const ft=_e.textures;if(Ue.length!==ft.length||Ue[0]!==t.COLOR_ATTACHMENT0){for(let ut=0,Ot=ft.length;ut<Ot;ut++)Ue[ut]=t.COLOR_ATTACHMENT0+ut;Ue.length=ft.length,Ye=!0}}else Ue[0]!==t.BACK&&(Ue[0]=t.BACK,Ye=!0);Ye&&t.drawBuffers(Ue)}function Ve(_e){return y!==_e?(t.useProgram(_e),y=_e,!0):!1}const Je={[sc]:t.FUNC_ADD,[uk]:t.FUNC_SUBTRACT,[ck]:t.FUNC_REVERSE_SUBTRACT};Je[dk]=t.MIN,Je[fk]=t.MAX;const $e={[hk]:t.ZERO,[pk]:t.ONE,[mk]:t.SRC_COLOR,[Zy]:t.SRC_ALPHA,[Sk]:t.SRC_ALPHA_SATURATE,[yk]:t.DST_COLOR,[vk]:t.DST_ALPHA,[gk]:t.ONE_MINUS_SRC_COLOR,[Qy]:t.ONE_MINUS_SRC_ALPHA,[xk]:t.ONE_MINUS_DST_COLOR,[_k]:t.ONE_MINUS_DST_ALPHA,[Ek]:t.CONSTANT_COLOR,[wk]:t.ONE_MINUS_CONSTANT_COLOR,[Mk]:t.CONSTANT_ALPHA,[Ck]:t.ONE_MINUS_CONSTANT_ALPHA};function le(_e,dt,Ue,Ye,ft,ut,Ot,kn,Qn,un){if(_e===ql){x===!0&&(ye(t.BLEND),x=!1);return}if(x===!1&&(Q(t.BLEND),x=!0),_e!==lk){if(_e!==S||un!==B){if((_!==sc||A!==sc)&&(t.blendEquation(t.FUNC_ADD),_=sc,A=sc),un)switch(_e){case nf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case C2:t.blendFunc(t.ONE,t.ONE);break;case A2:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case b2:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}else switch(_e){case nf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case C2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case A2:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case b2:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}M=null,E=null,L=null,D=null,U.set(0,0,0),O=0,S=_e,B=un}return}ft=ft||dt,ut=ut||Ue,Ot=Ot||Ye,(dt!==_||ft!==A)&&(t.blendEquationSeparate(Je[dt],Je[ft]),_=dt,A=ft),(Ue!==M||Ye!==E||ut!==L||Ot!==D)&&(t.blendFuncSeparate($e[Ue],$e[Ye],$e[ut],$e[Ot]),M=Ue,E=Ye,L=ut,D=Ot),(kn.equals(U)===!1||Qn!==O)&&(t.blendColor(kn.r,kn.g,kn.b,Qn),U.copy(kn),O=Qn),S=_e,B=!1}function At(_e,dt){_e.side===No?ye(t.CULL_FACE):Q(t.CULL_FACE);let Ue=_e.side===os;dt&&(Ue=!Ue),Be(Ue),_e.blending===nf&&_e.transparent===!1?le(ql):le(_e.blending,_e.blendEquation,_e.blendSrc,_e.blendDst,_e.blendEquationAlpha,_e.blendSrcAlpha,_e.blendDstAlpha,_e.blendColor,_e.blendAlpha,_e.premultipliedAlpha),o.setFunc(_e.depthFunc),o.setTest(_e.depthTest),o.setMask(_e.depthWrite),s.setMask(_e.colorWrite);const Ye=_e.stencilWrite;a.setTest(Ye),Ye&&(a.setMask(_e.stencilWriteMask),a.setFunc(_e.stencilFunc,_e.stencilRef,_e.stencilFuncMask),a.setOp(_e.stencilFail,_e.stencilZFail,_e.stencilZPass)),nt(_e.polygonOffset,_e.polygonOffsetFactor,_e.polygonOffsetUnits),_e.alphaToCoverage===!0?Q(t.SAMPLE_ALPHA_TO_COVERAGE):ye(t.SAMPLE_ALPHA_TO_COVERAGE)}function Be(_e){T!==_e&&(_e?t.frontFace(t.CW):t.frontFace(t.CCW),T=_e)}function He(_e){_e!==sk?(Q(t.CULL_FACE),_e!==z&&(_e===M2?t.cullFace(t.BACK):_e===ok?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ye(t.CULL_FACE),z=_e}function ke(_e){_e!==W&&(ne&&t.lineWidth(_e),W=_e)}function nt(_e,dt,Ue){_e?(Q(t.POLYGON_OFFSET_FILL),(K!==dt||Z!==Ue)&&(t.polygonOffset(dt,Ue),K=dt,Z=Ue)):ye(t.POLYGON_OFFSET_FILL)}function Fe(_e){_e?Q(t.SCISSOR_TEST):ye(t.SCISSOR_TEST)}function ee(_e){_e===void 0&&(_e=t.TEXTURE0+te-1),ae!==_e&&(t.activeTexture(_e),ae=_e)}function X(_e,dt,Ue){Ue===void 0&&(ae===null?Ue=t.TEXTURE0+te-1:Ue=ae);let Ye=se[Ue];Ye===void 0&&(Ye={type:void 0,texture:void 0},se[Ue]=Ye),(Ye.type!==_e||Ye.texture!==dt)&&(ae!==Ue&&(t.activeTexture(Ue),ae=Ue),t.bindTexture(_e,dt||Xe[_e]),Ye.type=_e,Ye.texture=dt)}function xe(){const _e=se[ae];_e!==void 0&&_e.type!==void 0&&(t.bindTexture(_e.type,null),_e.type=void 0,_e.texture=void 0)}function Le(){try{t.compressedTexImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Ie(){try{t.compressedTexImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Oe(){try{t.texSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function j(){try{t.texSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function N(){try{t.compressedTexSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function I(){try{t.compressedTexSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function J(){try{t.texStorage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function ie(){try{t.texStorage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function fe(){try{t.texImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Ce(){try{t.texImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function tt(_e){ze.equals(_e)===!1&&(t.scissor(_e.x,_e.y,_e.z,_e.w),ze.copy(_e))}function Ze(_e){ge.equals(_e)===!1&&(t.viewport(_e.x,_e.y,_e.z,_e.w),ge.copy(_e))}function wt(_e,dt){let Ue=u.get(dt);Ue===void 0&&(Ue=new WeakMap,u.set(dt,Ue));let Ye=Ue.get(_e);Ye===void 0&&(Ye=t.getUniformBlockIndex(dt,_e.name),Ue.set(_e,Ye))}function gt(_e,dt){const Ye=u.get(dt).get(_e);l.get(dt)!==Ye&&(t.uniformBlockBinding(dt,Ye,_e.__bindingPointIndex),l.set(dt,Ye))}function bt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},ae=null,se={},m={},g=new WeakMap,v=[],y=null,x=!1,S=null,_=null,M=null,E=null,A=null,L=null,D=null,U=new _t(0,0,0),O=0,B=!1,T=null,z=null,W=null,K=null,Z=null,ze.set(0,0,t.canvas.width,t.canvas.height),ge.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Q,disable:ye,bindFramebuffer:We,drawBuffers:je,useProgram:Ve,setBlending:le,setMaterial:At,setFlipSided:Be,setCullFace:He,setLineWidth:ke,setPolygonOffset:nt,setScissorTest:Fe,activeTexture:ee,bindTexture:X,unbindTexture:xe,compressedTexImage2D:Le,compressedTexImage3D:Ie,texImage2D:fe,texImage3D:Ce,updateUBOMapping:wt,uniformBlockBinding:gt,texStorage2D:J,texStorage3D:ie,texSubImage2D:Oe,texSubImage3D:j,compressedTexSubImage2D:N,compressedTexSubImage3D:I,scissor:tt,viewport:Ze,reset:bt}}function gne(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ge,d=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(ee,X){return v?new OffscreenCanvas(ee,X):c1("canvas")}function x(ee,X,xe){let Le=1;const Ie=Fe(ee);if((Ie.width>xe||Ie.height>xe)&&(Le=xe/Math.max(Ie.width,Ie.height)),Le<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Oe=Math.floor(Le*Ie.width),j=Math.floor(Le*Ie.height);m===void 0&&(m=y(Oe,j));const N=X?y(Oe,j):m;return N.width=Oe,N.height=j,N.getContext("2d").drawImage(ee,0,0,Oe,j),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ie.width+"x"+Ie.height+") to ("+Oe+"x"+j+")."),N}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ie.width+"x"+Ie.height+")."),ee;return ee}function S(ee){return ee.generateMipmaps}function _(ee){t.generateMipmap(ee)}function M(ee){return ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?t.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(ee,X,xe,Le,Ie=!1){if(ee!==null){if(t[ee]!==void 0)return t[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Oe=X;if(X===t.RED&&(xe===t.FLOAT&&(Oe=t.R32F),xe===t.HALF_FLOAT&&(Oe=t.R16F),xe===t.UNSIGNED_BYTE&&(Oe=t.R8)),X===t.RED_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Oe=t.R8UI),xe===t.UNSIGNED_SHORT&&(Oe=t.R16UI),xe===t.UNSIGNED_INT&&(Oe=t.R32UI),xe===t.BYTE&&(Oe=t.R8I),xe===t.SHORT&&(Oe=t.R16I),xe===t.INT&&(Oe=t.R32I)),X===t.RG&&(xe===t.FLOAT&&(Oe=t.RG32F),xe===t.HALF_FLOAT&&(Oe=t.RG16F),xe===t.UNSIGNED_BYTE&&(Oe=t.RG8)),X===t.RG_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Oe=t.RG8UI),xe===t.UNSIGNED_SHORT&&(Oe=t.RG16UI),xe===t.UNSIGNED_INT&&(Oe=t.RG32UI),xe===t.BYTE&&(Oe=t.RG8I),xe===t.SHORT&&(Oe=t.RG16I),xe===t.INT&&(Oe=t.RG32I)),X===t.RGB_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Oe=t.RGB8UI),xe===t.UNSIGNED_SHORT&&(Oe=t.RGB16UI),xe===t.UNSIGNED_INT&&(Oe=t.RGB32UI),xe===t.BYTE&&(Oe=t.RGB8I),xe===t.SHORT&&(Oe=t.RGB16I),xe===t.INT&&(Oe=t.RGB32I)),X===t.RGBA_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Oe=t.RGBA8UI),xe===t.UNSIGNED_SHORT&&(Oe=t.RGBA16UI),xe===t.UNSIGNED_INT&&(Oe=t.RGBA32UI),xe===t.BYTE&&(Oe=t.RGBA8I),xe===t.SHORT&&(Oe=t.RGBA16I),xe===t.INT&&(Oe=t.RGBA32I)),X===t.RGB&&xe===t.UNSIGNED_INT_5_9_9_9_REV&&(Oe=t.RGB9_E5),X===t.RGBA){const j=Ie?a1:fn.getTransfer(Le);xe===t.FLOAT&&(Oe=t.RGBA32F),xe===t.HALF_FLOAT&&(Oe=t.RGBA16F),xe===t.UNSIGNED_BYTE&&(Oe=j===Cn?t.SRGB8_ALPHA8:t.RGBA8),xe===t.UNSIGNED_SHORT_4_4_4_4&&(Oe=t.RGBA4),xe===t.UNSIGNED_SHORT_5_5_5_1&&(Oe=t.RGB5_A1)}return(Oe===t.R16F||Oe===t.R32F||Oe===t.RG16F||Oe===t.RG32F||Oe===t.RGBA16F||Oe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function A(ee,X){let xe;return ee?X===null||X===su||X===Gp?xe=t.DEPTH24_STENCIL8:X===Ts?xe=t.DEPTH32F_STENCIL8:X===Hp&&(xe=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===su||X===Gp?xe=t.DEPTH_COMPONENT24:X===Ts?xe=t.DEPTH_COMPONENT32F:X===Hp&&(xe=t.DEPTH_COMPONENT16),xe}function L(ee,X){return S(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==yi&&ee.minFilter!==Yr?Math.log2(Math.max(X.width,X.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?X.mipmaps.length:1}function D(ee){const X=ee.target;X.removeEventListener("dispose",D),O(X),X.isVideoTexture&&d.delete(X)}function U(ee){const X=ee.target;X.removeEventListener("dispose",U),T(X)}function O(ee){const X=r.get(ee);if(X.__webglInit===void 0)return;const xe=ee.source,Le=g.get(xe);if(Le){const Ie=Le[X.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&B(ee),Object.keys(Le).length===0&&g.delete(xe)}r.remove(ee)}function B(ee){const X=r.get(ee);t.deleteTexture(X.__webglTexture);const xe=ee.source,Le=g.get(xe);delete Le[X.__cacheKey],o.memory.textures--}function T(ee){const X=r.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),r.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(X.__webglFramebuffer[Le]))for(let Ie=0;Ie<X.__webglFramebuffer[Le].length;Ie++)t.deleteFramebuffer(X.__webglFramebuffer[Le][Ie]);else t.deleteFramebuffer(X.__webglFramebuffer[Le]);X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer[Le])}else{if(Array.isArray(X.__webglFramebuffer))for(let Le=0;Le<X.__webglFramebuffer.length;Le++)t.deleteFramebuffer(X.__webglFramebuffer[Le]);else t.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&t.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Le=0;Le<X.__webglColorRenderbuffer.length;Le++)X.__webglColorRenderbuffer[Le]&&t.deleteRenderbuffer(X.__webglColorRenderbuffer[Le]);X.__webglDepthRenderbuffer&&t.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const xe=ee.textures;for(let Le=0,Ie=xe.length;Le<Ie;Le++){const Oe=r.get(xe[Le]);Oe.__webglTexture&&(t.deleteTexture(Oe.__webglTexture),o.memory.textures--),r.remove(xe[Le])}r.remove(ee)}let z=0;function W(){z=0}function K(){const ee=z;return ee>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+i.maxTextures),z+=1,ee}function Z(ee){const X=[];return X.push(ee.wrapS),X.push(ee.wrapT),X.push(ee.wrapR||0),X.push(ee.magFilter),X.push(ee.minFilter),X.push(ee.anisotropy),X.push(ee.internalFormat),X.push(ee.format),X.push(ee.type),X.push(ee.generateMipmaps),X.push(ee.premultiplyAlpha),X.push(ee.flipY),X.push(ee.unpackAlignment),X.push(ee.colorSpace),X.join()}function te(ee,X){const xe=r.get(ee);if(ee.isVideoTexture&&ke(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&xe.__version!==ee.version){const Le=ee.image;if(Le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(xe,ee,X);return}}n.bindTexture(t.TEXTURE_2D,xe.__webglTexture,t.TEXTURE0+X)}function ne(ee,X){const xe=r.get(ee);if(ee.version>0&&xe.__version!==ee.version){ge(xe,ee,X);return}n.bindTexture(t.TEXTURE_2D_ARRAY,xe.__webglTexture,t.TEXTURE0+X)}function de(ee,X){const xe=r.get(ee);if(ee.version>0&&xe.__version!==ee.version){ge(xe,ee,X);return}n.bindTexture(t.TEXTURE_3D,xe.__webglTexture,t.TEXTURE0+X)}function Y(ee,X){const xe=r.get(ee);if(ee.version>0&&xe.__version!==ee.version){De(xe,ee,X);return}n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture,t.TEXTURE0+X)}const ae={[r1]:t.REPEAT,[ko]:t.CLAMP_TO_EDGE,[i1]:t.MIRRORED_REPEAT},se={[yi]:t.NEAREST,[RA]:t.NEAREST_MIPMAP_NEAREST,[hp]:t.NEAREST_MIPMAP_LINEAR,[Yr]:t.LINEAR,[v0]:t.LINEAR_MIPMAP_NEAREST,[Ya]:t.LINEAR_MIPMAP_LINEAR},he={[Hk]:t.NEVER,[Yk]:t.ALWAYS,[Gk]:t.LESS,[zA]:t.LEQUAL,[Vk]:t.EQUAL,[Xk]:t.GEQUAL,[Wk]:t.GREATER,[jk]:t.NOTEQUAL};function Me(ee,X){if(X.type===Ts&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===Yr||X.magFilter===v0||X.magFilter===hp||X.magFilter===Ya||X.minFilter===Yr||X.minFilter===v0||X.minFilter===hp||X.minFilter===Ya)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ee,t.TEXTURE_WRAP_S,ae[X.wrapS]),t.texParameteri(ee,t.TEXTURE_WRAP_T,ae[X.wrapT]),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,ae[X.wrapR]),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,se[X.magFilter]),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,se[X.minFilter]),X.compareFunction&&(t.texParameteri(ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ee,t.TEXTURE_COMPARE_FUNC,he[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===yi||X.minFilter!==hp&&X.minFilter!==Ya||X.type===Ts&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||r.get(X).__currentAnisotropy){const xe=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ee,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,i.getMaxAnisotropy())),r.get(X).__currentAnisotropy=X.anisotropy}}}function ze(ee,X){let xe=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,X.addEventListener("dispose",D));const Le=X.source;let Ie=g.get(Le);Ie===void 0&&(Ie={},g.set(Le,Ie));const Oe=Z(X);if(Oe!==ee.__cacheKey){Ie[Oe]===void 0&&(Ie[Oe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,xe=!0),Ie[Oe].usedTimes++;const j=Ie[ee.__cacheKey];j!==void 0&&(Ie[ee.__cacheKey].usedTimes--,j.usedTimes===0&&B(X)),ee.__cacheKey=Oe,ee.__webglTexture=Ie[Oe].texture}return xe}function ge(ee,X,xe){let Le=t.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Le=t.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Le=t.TEXTURE_3D);const Ie=ze(ee,X),Oe=X.source;n.bindTexture(Le,ee.__webglTexture,t.TEXTURE0+xe);const j=r.get(Oe);if(Oe.version!==j.__version||Ie===!0){n.activeTexture(t.TEXTURE0+xe);const N=fn.getPrimaries(fn.workingColorSpace),I=X.colorSpace===Hl?null:fn.getPrimaries(X.colorSpace),J=X.colorSpace===Hl||N===I?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,J);let ie=x(X.image,!1,i.maxTextureSize);ie=nt(X,ie);const fe=s.convert(X.format,X.colorSpace),Ce=s.convert(X.type);let tt=E(X.internalFormat,fe,Ce,X.colorSpace,X.isVideoTexture);Me(Le,X);let Ze;const wt=X.mipmaps,gt=X.isVideoTexture!==!0,bt=j.__version===void 0||Ie===!0,_e=Oe.dataReady,dt=L(X,ie);if(X.isDepthTexture)tt=A(X.format===Wp,X.type),bt&&(gt?n.texStorage2D(t.TEXTURE_2D,1,tt,ie.width,ie.height):n.texImage2D(t.TEXTURE_2D,0,tt,ie.width,ie.height,0,fe,Ce,null));else if(X.isDataTexture)if(wt.length>0){gt&&bt&&n.texStorage2D(t.TEXTURE_2D,dt,tt,wt[0].width,wt[0].height);for(let Ue=0,Ye=wt.length;Ue<Ye;Ue++)Ze=wt[Ue],gt?_e&&n.texSubImage2D(t.TEXTURE_2D,Ue,0,0,Ze.width,Ze.height,fe,Ce,Ze.data):n.texImage2D(t.TEXTURE_2D,Ue,tt,Ze.width,Ze.height,0,fe,Ce,Ze.data);X.generateMipmaps=!1}else gt?(bt&&n.texStorage2D(t.TEXTURE_2D,dt,tt,ie.width,ie.height),_e&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ie.width,ie.height,fe,Ce,ie.data)):n.texImage2D(t.TEXTURE_2D,0,tt,ie.width,ie.height,0,fe,Ce,ie.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){gt&&bt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,dt,tt,wt[0].width,wt[0].height,ie.depth);for(let Ue=0,Ye=wt.length;Ue<Ye;Ue++)if(Ze=wt[Ue],X.format!==Gi)if(fe!==null)if(gt){if(_e)if(X.layerUpdates.size>0){const ft=U2(Ze.width,Ze.height,X.format,X.type);for(const ut of X.layerUpdates){const Ot=Ze.data.subarray(ut*ft/Ze.data.BYTES_PER_ELEMENT,(ut+1)*ft/Ze.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ue,0,0,ut,Ze.width,Ze.height,1,fe,Ot)}X.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ue,0,0,0,Ze.width,Ze.height,ie.depth,fe,Ze.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ue,tt,Ze.width,Ze.height,ie.depth,0,Ze.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else gt?_e&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ue,0,0,0,Ze.width,Ze.height,ie.depth,fe,Ce,Ze.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ue,tt,Ze.width,Ze.height,ie.depth,0,fe,Ce,Ze.data)}else{gt&&bt&&n.texStorage2D(t.TEXTURE_2D,dt,tt,wt[0].width,wt[0].height);for(let Ue=0,Ye=wt.length;Ue<Ye;Ue++)Ze=wt[Ue],X.format!==Gi?fe!==null?gt?_e&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ue,0,0,Ze.width,Ze.height,fe,Ze.data):n.compressedTexImage2D(t.TEXTURE_2D,Ue,tt,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gt?_e&&n.texSubImage2D(t.TEXTURE_2D,Ue,0,0,Ze.width,Ze.height,fe,Ce,Ze.data):n.texImage2D(t.TEXTURE_2D,Ue,tt,Ze.width,Ze.height,0,fe,Ce,Ze.data)}else if(X.isDataArrayTexture)if(gt){if(bt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,dt,tt,ie.width,ie.height,ie.depth),_e)if(X.layerUpdates.size>0){const Ue=U2(ie.width,ie.height,X.format,X.type);for(const Ye of X.layerUpdates){const ft=ie.data.subarray(Ye*Ue/ie.data.BYTES_PER_ELEMENT,(Ye+1)*Ue/ie.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ye,ie.width,ie.height,1,fe,Ce,ft)}X.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ie.width,ie.height,ie.depth,fe,Ce,ie.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,tt,ie.width,ie.height,ie.depth,0,fe,Ce,ie.data);else if(X.isData3DTexture)gt?(bt&&n.texStorage3D(t.TEXTURE_3D,dt,tt,ie.width,ie.height,ie.depth),_e&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ie.width,ie.height,ie.depth,fe,Ce,ie.data)):n.texImage3D(t.TEXTURE_3D,0,tt,ie.width,ie.height,ie.depth,0,fe,Ce,ie.data);else if(X.isFramebufferTexture){if(bt)if(gt)n.texStorage2D(t.TEXTURE_2D,dt,tt,ie.width,ie.height);else{let Ue=ie.width,Ye=ie.height;for(let ft=0;ft<dt;ft++)n.texImage2D(t.TEXTURE_2D,ft,tt,Ue,Ye,0,fe,Ce,null),Ue>>=1,Ye>>=1}}else if(wt.length>0){if(gt&&bt){const Ue=Fe(wt[0]);n.texStorage2D(t.TEXTURE_2D,dt,tt,Ue.width,Ue.height)}for(let Ue=0,Ye=wt.length;Ue<Ye;Ue++)Ze=wt[Ue],gt?_e&&n.texSubImage2D(t.TEXTURE_2D,Ue,0,0,fe,Ce,Ze):n.texImage2D(t.TEXTURE_2D,Ue,tt,fe,Ce,Ze);X.generateMipmaps=!1}else if(gt){if(bt){const Ue=Fe(ie);n.texStorage2D(t.TEXTURE_2D,dt,tt,Ue.width,Ue.height)}_e&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,fe,Ce,ie)}else n.texImage2D(t.TEXTURE_2D,0,tt,fe,Ce,ie);S(X)&&_(Le),j.__version=Oe.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function De(ee,X,xe){if(X.image.length!==6)return;const Le=ze(ee,X),Ie=X.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ee.__webglTexture,t.TEXTURE0+xe);const Oe=r.get(Ie);if(Ie.version!==Oe.__version||Le===!0){n.activeTexture(t.TEXTURE0+xe);const j=fn.getPrimaries(fn.workingColorSpace),N=X.colorSpace===Hl?null:fn.getPrimaries(X.colorSpace),I=X.colorSpace===Hl||j===N?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,I);const J=X.isCompressedTexture||X.image[0].isCompressedTexture,ie=X.image[0]&&X.image[0].isDataTexture,fe=[];for(let Ye=0;Ye<6;Ye++)!J&&!ie?fe[Ye]=x(X.image[Ye],!0,i.maxCubemapSize):fe[Ye]=ie?X.image[Ye].image:X.image[Ye],fe[Ye]=nt(X,fe[Ye]);const Ce=fe[0],tt=s.convert(X.format,X.colorSpace),Ze=s.convert(X.type),wt=E(X.internalFormat,tt,Ze,X.colorSpace),gt=X.isVideoTexture!==!0,bt=Oe.__version===void 0||Le===!0,_e=Ie.dataReady;let dt=L(X,Ce);Me(t.TEXTURE_CUBE_MAP,X);let Ue;if(J){gt&&bt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,dt,wt,Ce.width,Ce.height);for(let Ye=0;Ye<6;Ye++){Ue=fe[Ye].mipmaps;for(let ft=0;ft<Ue.length;ft++){const ut=Ue[ft];X.format!==Gi?tt!==null?gt?_e&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft,0,0,ut.width,ut.height,tt,ut.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft,wt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):gt?_e&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft,0,0,ut.width,ut.height,tt,Ze,ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft,wt,ut.width,ut.height,0,tt,Ze,ut.data)}}}else{if(Ue=X.mipmaps,gt&&bt){Ue.length>0&&dt++;const Ye=Fe(fe[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,dt,wt,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(ie){gt?_e&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,fe[Ye].width,fe[Ye].height,tt,Ze,fe[Ye].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,wt,fe[Ye].width,fe[Ye].height,0,tt,Ze,fe[Ye].data);for(let ft=0;ft<Ue.length;ft++){const Ot=Ue[ft].image[Ye].image;gt?_e&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft+1,0,0,Ot.width,Ot.height,tt,Ze,Ot.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft+1,wt,Ot.width,Ot.height,0,tt,Ze,Ot.data)}}else{gt?_e&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,tt,Ze,fe[Ye]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,wt,tt,Ze,fe[Ye]);for(let ft=0;ft<Ue.length;ft++){const ut=Ue[ft];gt?_e&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft+1,0,0,tt,Ze,ut.image[Ye]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,ft+1,wt,tt,Ze,ut.image[Ye])}}}S(X)&&_(t.TEXTURE_CUBE_MAP),Oe.__version=Ie.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function Xe(ee,X,xe,Le,Ie,Oe){const j=s.convert(xe.format,xe.colorSpace),N=s.convert(xe.type),I=E(xe.internalFormat,j,N,xe.colorSpace),J=r.get(X),ie=r.get(xe);if(ie.__renderTarget=X,!J.__hasExternalTextures){const fe=Math.max(1,X.width>>Oe),Ce=Math.max(1,X.height>>Oe);Ie===t.TEXTURE_3D||Ie===t.TEXTURE_2D_ARRAY?n.texImage3D(Ie,Oe,I,fe,Ce,X.depth,0,j,N,null):n.texImage2D(Ie,Oe,I,fe,Ce,0,j,N,null)}n.bindFramebuffer(t.FRAMEBUFFER,ee),He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Le,Ie,ie.__webglTexture,0,Be(X)):(Ie===t.TEXTURE_2D||Ie>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ie<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Le,Ie,ie.__webglTexture,Oe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Q(ee,X,xe){if(t.bindRenderbuffer(t.RENDERBUFFER,ee),X.depthBuffer){const Le=X.depthTexture,Ie=Le&&Le.isDepthTexture?Le.type:null,Oe=A(X.stencilBuffer,Ie),j=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,N=Be(X);He(X)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,N,Oe,X.width,X.height):xe?t.renderbufferStorageMultisample(t.RENDERBUFFER,N,Oe,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,Oe,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,j,t.RENDERBUFFER,ee)}else{const Le=X.textures;for(let Ie=0;Ie<Le.length;Ie++){const Oe=Le[Ie],j=s.convert(Oe.format,Oe.colorSpace),N=s.convert(Oe.type),I=E(Oe.internalFormat,j,N,Oe.colorSpace),J=Be(X);xe&&He(X)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,J,I,X.width,X.height):He(X)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,J,I,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,I,X.width,X.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ye(ee,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ee),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Le=r.get(X.depthTexture);Le.__renderTarget=X,(!Le.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),te(X.depthTexture,0);const Ie=Le.__webglTexture,Oe=Be(X);if(X.depthTexture.format===Vp)He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ie,0,Oe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ie,0);else if(X.depthTexture.format===Wp)He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ie,0,Oe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ie,0);else throw new Error("Unknown depthTexture format")}function We(ee){const X=r.get(ee),xe=ee.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==ee.depthTexture){const Le=ee.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Le){const Ie=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Le.removeEventListener("dispose",Ie)};Le.addEventListener("dispose",Ie),X.__depthDisposeCallback=Ie}X.__boundDepthTexture=Le}if(ee.depthTexture&&!X.__autoAllocateDepthBuffer){if(xe)throw new Error("target.depthTexture not supported in Cube render targets");ye(X.__webglFramebuffer,ee)}else if(xe){X.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer[Le]),X.__webglDepthbuffer[Le]===void 0)X.__webglDepthbuffer[Le]=t.createRenderbuffer(),Q(X.__webglDepthbuffer[Le],ee,!1);else{const Ie=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Oe=X.__webglDepthbuffer[Le];t.bindRenderbuffer(t.RENDERBUFFER,Oe),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ie,t.RENDERBUFFER,Oe)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=t.createRenderbuffer(),Q(X.__webglDepthbuffer,ee,!1);else{const Le=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ie=X.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Ie),t.framebufferRenderbuffer(t.FRAMEBUFFER,Le,t.RENDERBUFFER,Ie)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function je(ee,X,xe){const Le=r.get(ee);X!==void 0&&Xe(Le.__webglFramebuffer,ee,ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),xe!==void 0&&We(ee)}function Ve(ee){const X=ee.texture,xe=r.get(ee),Le=r.get(X);ee.addEventListener("dispose",U);const Ie=ee.textures,Oe=ee.isWebGLCubeRenderTarget===!0,j=Ie.length>1;if(j||(Le.__webglTexture===void 0&&(Le.__webglTexture=t.createTexture()),Le.__version=X.version,o.memory.textures++),Oe){xe.__webglFramebuffer=[];for(let N=0;N<6;N++)if(X.mipmaps&&X.mipmaps.length>0){xe.__webglFramebuffer[N]=[];for(let I=0;I<X.mipmaps.length;I++)xe.__webglFramebuffer[N][I]=t.createFramebuffer()}else xe.__webglFramebuffer[N]=t.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){xe.__webglFramebuffer=[];for(let N=0;N<X.mipmaps.length;N++)xe.__webglFramebuffer[N]=t.createFramebuffer()}else xe.__webglFramebuffer=t.createFramebuffer();if(j)for(let N=0,I=Ie.length;N<I;N++){const J=r.get(Ie[N]);J.__webglTexture===void 0&&(J.__webglTexture=t.createTexture(),o.memory.textures++)}if(ee.samples>0&&He(ee)===!1){xe.__webglMultisampledFramebuffer=t.createFramebuffer(),xe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let N=0;N<Ie.length;N++){const I=Ie[N];xe.__webglColorRenderbuffer[N]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,xe.__webglColorRenderbuffer[N]);const J=s.convert(I.format,I.colorSpace),ie=s.convert(I.type),fe=E(I.internalFormat,J,ie,I.colorSpace,ee.isXRRenderTarget===!0),Ce=Be(ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ce,fe,ee.width,ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+N,t.RENDERBUFFER,xe.__webglColorRenderbuffer[N])}t.bindRenderbuffer(t.RENDERBUFFER,null),ee.depthBuffer&&(xe.__webglDepthRenderbuffer=t.createRenderbuffer(),Q(xe.__webglDepthRenderbuffer,ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Oe){n.bindTexture(t.TEXTURE_CUBE_MAP,Le.__webglTexture),Me(t.TEXTURE_CUBE_MAP,X);for(let N=0;N<6;N++)if(X.mipmaps&&X.mipmaps.length>0)for(let I=0;I<X.mipmaps.length;I++)Xe(xe.__webglFramebuffer[N][I],ee,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+N,I);else Xe(xe.__webglFramebuffer[N],ee,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+N,0);S(X)&&_(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(j){for(let N=0,I=Ie.length;N<I;N++){const J=Ie[N],ie=r.get(J);n.bindTexture(t.TEXTURE_2D,ie.__webglTexture),Me(t.TEXTURE_2D,J),Xe(xe.__webglFramebuffer,ee,J,t.COLOR_ATTACHMENT0+N,t.TEXTURE_2D,0),S(J)&&_(t.TEXTURE_2D)}n.unbindTexture()}else{let N=t.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(N=ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(N,Le.__webglTexture),Me(N,X),X.mipmaps&&X.mipmaps.length>0)for(let I=0;I<X.mipmaps.length;I++)Xe(xe.__webglFramebuffer[I],ee,X,t.COLOR_ATTACHMENT0,N,I);else Xe(xe.__webglFramebuffer,ee,X,t.COLOR_ATTACHMENT0,N,0);S(X)&&_(N),n.unbindTexture()}ee.depthBuffer&&We(ee)}function Je(ee){const X=ee.textures;for(let xe=0,Le=X.length;xe<Le;xe++){const Ie=X[xe];if(S(Ie)){const Oe=M(ee),j=r.get(Ie).__webglTexture;n.bindTexture(Oe,j),_(Oe),n.unbindTexture()}}}const $e=[],le=[];function At(ee){if(ee.samples>0){if(He(ee)===!1){const X=ee.textures,xe=ee.width,Le=ee.height;let Ie=t.COLOR_BUFFER_BIT;const Oe=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,j=r.get(ee),N=X.length>1;if(N)for(let I=0;I<X.length;I++)n.bindFramebuffer(t.FRAMEBUFFER,j.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+I,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+I,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,j.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,j.__webglFramebuffer);for(let I=0;I<X.length;I++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(Ie|=t.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(Ie|=t.STENCIL_BUFFER_BIT)),N){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,j.__webglColorRenderbuffer[I]);const J=r.get(X[I]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,J,0)}t.blitFramebuffer(0,0,xe,Le,0,0,xe,Le,Ie,t.NEAREST),l===!0&&($e.length=0,le.length=0,$e.push(t.COLOR_ATTACHMENT0+I),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&($e.push(Oe),le.push(Oe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,le)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,$e))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),N)for(let I=0;I<X.length;I++){n.bindFramebuffer(t.FRAMEBUFFER,j.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+I,t.RENDERBUFFER,j.__webglColorRenderbuffer[I]);const J=r.get(X[I]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+I,t.TEXTURE_2D,J,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,j.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&l){const X=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[X])}}}function Be(ee){return Math.min(i.maxSamples,ee.samples)}function He(ee){const X=r.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function ke(ee){const X=o.render.frame;d.get(ee)!==X&&(d.set(ee,X),ee.update())}function nt(ee,X){const xe=ee.colorSpace,Le=ee.format,Ie=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||xe!==gf&&xe!==Hl&&(fn.getTransfer(xe)===Cn?(Le!==Gi||Ie!==va)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",xe)),X}function Fe(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(u.width=ee.naturalWidth||ee.width,u.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(u.width=ee.displayWidth,u.height=ee.displayHeight):(u.width=ee.width,u.height=ee.height),u}this.allocateTextureUnit=K,this.resetTextureUnits=W,this.setTexture2D=te,this.setTexture2DArray=ne,this.setTexture3D=de,this.setTextureCube=Y,this.rebindTextures=je,this.setupRenderTarget=Ve,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=At,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=He}function iO(t,e){function n(r,i=Hl){let s;const o=fn.getTransfer(i);if(r===va)return t.UNSIGNED_BYTE;if(r===hE)return t.UNSIGNED_SHORT_4_4_4_4;if(r===pE)return t.UNSIGNED_SHORT_5_5_5_1;if(r===NA)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===TA)return t.BYTE;if(r===LA)return t.SHORT;if(r===Hp)return t.UNSIGNED_SHORT;if(r===fE)return t.INT;if(r===su)return t.UNSIGNED_INT;if(r===Ts)return t.FLOAT;if(r===hm)return t.HALF_FLOAT;if(r===DA)return t.ALPHA;if(r===kA)return t.RGB;if(r===Gi)return t.RGBA;if(r===FA)return t.LUMINANCE;if(r===OA)return t.LUMINANCE_ALPHA;if(r===Vp)return t.DEPTH_COMPONENT;if(r===Wp)return t.DEPTH_STENCIL;if(r===mE)return t.RED;if(r===I1)return t.RED_INTEGER;if(r===IA)return t.RG;if(r===gE)return t.RG_INTEGER;if(r===vE)return t.RGBA_INTEGER;if(r===_0||r===y0||r===x0||r===S0)if(o===Cn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===_0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===y0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===x0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===S0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===_0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===y0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===x0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===S0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===ox||r===ax||r===lx||r===ux)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===ox)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ax)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===lx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===ux)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===cx||r===dx||r===fx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===cx||r===dx)return o===Cn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===fx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===hx||r===px||r===mx||r===gx||r===vx||r===_x||r===yx||r===xx||r===Sx||r===Ex||r===wx||r===Mx||r===Cx||r===Ax)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===hx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===px)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===mx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===gx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===vx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===_x)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===yx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===xx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Sx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Ex)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===wx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Mx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Cx)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Ax)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===E0||r===bx||r===Px)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===E0)return o===Cn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===bx)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Px)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===UA||r===Rx||r===Tx||r===Lx)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===E0)return s.COMPRESSED_RED_RGTC1_EXT;if(r===Rx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Tx)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Lx)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Gp?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const vne=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_ne=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class yne{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new gr,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new _a({vertexShader:vne,fragmentShader:_ne,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Nr(new gm(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class xne extends ll{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,d=null,m=null,g=null,v=null,y=null;const x=new yne,S=n.getContextAttributes();let _=null,M=null;const E=[],A=[],L=new Ge;let D=null;const U=new ai;U.viewport=new gn;const O=new ai;O.viewport=new gn;const B=[U,O],T=new YF;let z=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let De=E[ge];return De===void 0&&(De=new oy,E[ge]=De),De.getTargetRaySpace()},this.getControllerGrip=function(ge){let De=E[ge];return De===void 0&&(De=new oy,E[ge]=De),De.getGripSpace()},this.getHand=function(ge){let De=E[ge];return De===void 0&&(De=new oy,E[ge]=De),De.getHandSpace()};function K(ge){const De=A.indexOf(ge.inputSource);if(De===-1)return;const Xe=E[De];Xe!==void 0&&(Xe.update(ge.inputSource,ge.frame,u||o),Xe.dispatchEvent({type:ge.type,data:ge.inputSource}))}function Z(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",Z),i.removeEventListener("inputsourceschange",te);for(let ge=0;ge<E.length;ge++){const De=A[ge];De!==null&&(A[ge]=null,E[ge].disconnect(De))}z=null,W=null,x.reset(),e.setRenderTarget(_),v=null,g=null,m=null,i=null,M=null,ze.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(L.width,L.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){s=ge,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){a=ge,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ge){u=ge},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return m},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(ge){if(i=ge,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",Z),i.addEventListener("inputsourceschange",te),S.xrCompatible!==!0&&await n.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(L),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Xe=null,Q=null,ye=null;S.depth&&(ye=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Xe=S.stencil?Wp:Vp,Q=S.stencil?Gp:su);const We={colorFormat:n.RGBA8,depthFormat:ye,scaleFactor:s};m=new XRWebGLBinding(i,n),g=m.createProjectionLayer(We),i.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),M=new rl(g.textureWidth,g.textureHeight,{format:Gi,type:va,depthTexture:new qA(g.textureWidth,g.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,Xe),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const Xe={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(i,n,Xe),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),M=new rl(v.framebufferWidth,v.framebufferHeight,{format:Gi,type:va,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),ze.setContext(i),ze.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function te(ge){for(let De=0;De<ge.removed.length;De++){const Xe=ge.removed[De],Q=A.indexOf(Xe);Q>=0&&(A[Q]=null,E[Q].disconnect(Xe))}for(let De=0;De<ge.added.length;De++){const Xe=ge.added[De];let Q=A.indexOf(Xe);if(Q===-1){for(let We=0;We<E.length;We++)if(We>=A.length){A.push(Xe),Q=We;break}else if(A[We]===null){A[We]=Xe,Q=We;break}if(Q===-1)break}const ye=E[Q];ye&&ye.connect(Xe)}}const ne=new re,de=new re;function Y(ge,De,Xe){ne.setFromMatrixPosition(De.matrixWorld),de.setFromMatrixPosition(Xe.matrixWorld);const Q=ne.distanceTo(de),ye=De.projectionMatrix.elements,We=Xe.projectionMatrix.elements,je=ye[14]/(ye[10]-1),Ve=ye[14]/(ye[10]+1),Je=(ye[9]+1)/ye[5],$e=(ye[9]-1)/ye[5],le=(ye[8]-1)/ye[0],At=(We[8]+1)/We[0],Be=je*le,He=je*At,ke=Q/(-le+At),nt=ke*-le;if(De.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(nt),ge.translateZ(ke),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),ye[10]===-1)ge.projectionMatrix.copy(De.projectionMatrix),ge.projectionMatrixInverse.copy(De.projectionMatrixInverse);else{const Fe=je+ke,ee=Ve+ke,X=Be-nt,xe=He+(Q-nt),Le=Je*Ve/ee*Fe,Ie=$e*Ve/ee*Fe;ge.projectionMatrix.makePerspective(X,xe,Le,Ie,Fe,ee),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function ae(ge,De){De===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(De.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(i===null)return;let De=ge.near,Xe=ge.far;x.texture!==null&&(x.depthNear>0&&(De=x.depthNear),x.depthFar>0&&(Xe=x.depthFar)),T.near=O.near=U.near=De,T.far=O.far=U.far=Xe,(z!==T.near||W!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),z=T.near,W=T.far),U.layers.mask=ge.layers.mask|2,O.layers.mask=ge.layers.mask|4,T.layers.mask=U.layers.mask|O.layers.mask;const Q=ge.parent,ye=T.cameras;ae(T,Q);for(let We=0;We<ye.length;We++)ae(ye[We],Q);ye.length===2?Y(T,U,O):T.projectionMatrix.copy(U.projectionMatrix),se(ge,T,Q)};function se(ge,De,Xe){Xe===null?ge.matrix.copy(De.matrixWorld):(ge.matrix.copy(Xe.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(De.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(De.projectionMatrix),ge.projectionMatrixInverse.copy(De.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=jp*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(g===null&&v===null))return l},this.setFoveation=function(ge){l=ge,g!==null&&(g.fixedFoveation=ge),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ge)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(T)};let he=null;function Me(ge,De){if(d=De.getViewerPose(u||o),y=De,d!==null){const Xe=d.views;v!==null&&(e.setRenderTargetFramebuffer(M,v.framebuffer),e.setRenderTarget(M));let Q=!1;Xe.length!==T.cameras.length&&(T.cameras.length=0,Q=!0);for(let je=0;je<Xe.length;je++){const Ve=Xe[je];let Je=null;if(v!==null)Je=v.getViewport(Ve);else{const le=m.getViewSubImage(g,Ve);Je=le.viewport,je===0&&(e.setRenderTargetTextures(M,le.colorTexture,le.depthStencilTexture),e.setRenderTarget(M))}let $e=B[je];$e===void 0&&($e=new ai,$e.layers.enable(je),$e.viewport=new gn,B[je]=$e),$e.matrix.fromArray(Ve.transform.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.projectionMatrix.fromArray(Ve.projectionMatrix),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert(),$e.viewport.set(Je.x,Je.y,Je.width,Je.height),je===0&&(T.matrix.copy($e.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Q===!0&&T.cameras.push($e)}const ye=i.enabledFeatures;if(ye&&ye.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&m){const je=m.getDepthInformation(Xe[0]);je&&je.isValid&&je.texture&&x.init(e,je,i.renderState)}}for(let Xe=0;Xe<E.length;Xe++){const Q=A[Xe],ye=E[Xe];Q!==null&&ye!==void 0&&ye.update(Q,De,u||o)}he&&he(ge,De),De.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:De}),y=null}const ze=new JF;ze.setAnimationLoop(Me),this.setAnimationLoop=function(ge){he=ge},this.dispose=function(){}}}const zd=new ao,Sne=new Ft;function Ene(t,e){function n(S,_){S.matrixAutoUpdate===!0&&S.updateMatrix(),_.value.copy(S.matrix)}function r(S,_){_.color.getRGB(S.fogColor.value,Qk(t)),_.isFog?(S.fogNear.value=_.near,S.fogFar.value=_.far):_.isFogExp2&&(S.fogDensity.value=_.density)}function i(S,_,M,E,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(S,_):_.isMeshToonMaterial?(s(S,_),m(S,_)):_.isMeshPhongMaterial?(s(S,_),d(S,_)):_.isMeshStandardMaterial?(s(S,_),g(S,_),_.isMeshPhysicalMaterial&&v(S,_,A)):_.isMeshMatcapMaterial?(s(S,_),y(S,_)):_.isMeshDepthMaterial?s(S,_):_.isMeshDistanceMaterial?(s(S,_),x(S,_)):_.isMeshNormalMaterial?s(S,_):_.isLineBasicMaterial?(o(S,_),_.isLineDashedMaterial&&a(S,_)):_.isPointsMaterial?l(S,_,M,E):_.isSpriteMaterial?u(S,_):_.isShadowMaterial?(S.color.value.copy(_.color),S.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(S,_){S.opacity.value=_.opacity,_.color&&S.diffuse.value.copy(_.color),_.emissive&&S.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(S.map.value=_.map,n(_.map,S.mapTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,n(_.alphaMap,S.alphaMapTransform)),_.bumpMap&&(S.bumpMap.value=_.bumpMap,n(_.bumpMap,S.bumpMapTransform),S.bumpScale.value=_.bumpScale,_.side===os&&(S.bumpScale.value*=-1)),_.normalMap&&(S.normalMap.value=_.normalMap,n(_.normalMap,S.normalMapTransform),S.normalScale.value.copy(_.normalScale),_.side===os&&S.normalScale.value.negate()),_.displacementMap&&(S.displacementMap.value=_.displacementMap,n(_.displacementMap,S.displacementMapTransform),S.displacementScale.value=_.displacementScale,S.displacementBias.value=_.displacementBias),_.emissiveMap&&(S.emissiveMap.value=_.emissiveMap,n(_.emissiveMap,S.emissiveMapTransform)),_.specularMap&&(S.specularMap.value=_.specularMap,n(_.specularMap,S.specularMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest);const M=e.get(_),E=M.envMap,A=M.envMapRotation;E&&(S.envMap.value=E,zd.copy(A),zd.x*=-1,zd.y*=-1,zd.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(zd.y*=-1,zd.z*=-1),S.envMapRotation.value.setFromMatrix4(Sne.makeRotationFromEuler(zd)),S.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=_.reflectivity,S.ior.value=_.ior,S.refractionRatio.value=_.refractionRatio),_.lightMap&&(S.lightMap.value=_.lightMap,S.lightMapIntensity.value=_.lightMapIntensity,n(_.lightMap,S.lightMapTransform)),_.aoMap&&(S.aoMap.value=_.aoMap,S.aoMapIntensity.value=_.aoMapIntensity,n(_.aoMap,S.aoMapTransform))}function o(S,_){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,_.map&&(S.map.value=_.map,n(_.map,S.mapTransform))}function a(S,_){S.dashSize.value=_.dashSize,S.totalSize.value=_.dashSize+_.gapSize,S.scale.value=_.scale}function l(S,_,M,E){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,S.size.value=_.size*M,S.scale.value=E*.5,_.map&&(S.map.value=_.map,n(_.map,S.uvTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,n(_.alphaMap,S.alphaMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest)}function u(S,_){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,S.rotation.value=_.rotation,_.map&&(S.map.value=_.map,n(_.map,S.mapTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,n(_.alphaMap,S.alphaMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest)}function d(S,_){S.specular.value.copy(_.specular),S.shininess.value=Math.max(_.shininess,1e-4)}function m(S,_){_.gradientMap&&(S.gradientMap.value=_.gradientMap)}function g(S,_){S.metalness.value=_.metalness,_.metalnessMap&&(S.metalnessMap.value=_.metalnessMap,n(_.metalnessMap,S.metalnessMapTransform)),S.roughness.value=_.roughness,_.roughnessMap&&(S.roughnessMap.value=_.roughnessMap,n(_.roughnessMap,S.roughnessMapTransform)),_.envMap&&(S.envMapIntensity.value=_.envMapIntensity)}function v(S,_,M){S.ior.value=_.ior,_.sheen>0&&(S.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),S.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(S.sheenColorMap.value=_.sheenColorMap,n(_.sheenColorMap,S.sheenColorMapTransform)),_.sheenRoughnessMap&&(S.sheenRoughnessMap.value=_.sheenRoughnessMap,n(_.sheenRoughnessMap,S.sheenRoughnessMapTransform))),_.clearcoat>0&&(S.clearcoat.value=_.clearcoat,S.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(S.clearcoatMap.value=_.clearcoatMap,n(_.clearcoatMap,S.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,n(_.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(S.clearcoatNormalMap.value=_.clearcoatNormalMap,n(_.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===os&&S.clearcoatNormalScale.value.negate())),_.dispersion>0&&(S.dispersion.value=_.dispersion),_.iridescence>0&&(S.iridescence.value=_.iridescence,S.iridescenceIOR.value=_.iridescenceIOR,S.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(S.iridescenceMap.value=_.iridescenceMap,n(_.iridescenceMap,S.iridescenceMapTransform)),_.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=_.iridescenceThicknessMap,n(_.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),_.transmission>0&&(S.transmission.value=_.transmission,S.transmissionSamplerMap.value=M.texture,S.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(S.transmissionMap.value=_.transmissionMap,n(_.transmissionMap,S.transmissionMapTransform)),S.thickness.value=_.thickness,_.thicknessMap&&(S.thicknessMap.value=_.thicknessMap,n(_.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=_.attenuationDistance,S.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(S.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(S.anisotropyMap.value=_.anisotropyMap,n(_.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=_.specularIntensity,S.specularColor.value.copy(_.specularColor),_.specularColorMap&&(S.specularColorMap.value=_.specularColorMap,n(_.specularColorMap,S.specularColorMapTransform)),_.specularIntensityMap&&(S.specularIntensityMap.value=_.specularIntensityMap,n(_.specularIntensityMap,S.specularIntensityMapTransform))}function y(S,_){_.matcap&&(S.matcap.value=_.matcap)}function x(S,_){const M=e.get(_).light;S.referencePosition.value.setFromMatrixPosition(M.matrixWorld),S.nearDistance.value=M.shadow.camera.near,S.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function wne(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,E){const A=E.program;r.uniformBlockBinding(M,A)}function u(M,E){let A=i[M.id];A===void 0&&(y(M),A=d(M),i[M.id]=A,M.addEventListener("dispose",S));const L=E.program;r.updateUBOMapping(M,L);const D=e.render.frame;s[M.id]!==D&&(g(M),s[M.id]=D)}function d(M){const E=m();M.__bindingPointIndex=E;const A=t.createBuffer(),L=M.__size,D=M.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,L,D),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,A),A}function m(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(M){const E=i[M.id],A=M.uniforms,L=M.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let D=0,U=A.length;D<U;D++){const O=Array.isArray(A[D])?A[D]:[A[D]];for(let B=0,T=O.length;B<T;B++){const z=O[B];if(v(z,D,B,L)===!0){const W=z.__offset,K=Array.isArray(z.value)?z.value:[z.value];let Z=0;for(let te=0;te<K.length;te++){const ne=K[te],de=x(ne);typeof ne=="number"||typeof ne=="boolean"?(z.__data[0]=ne,t.bufferSubData(t.UNIFORM_BUFFER,W+Z,z.__data)):ne.isMatrix3?(z.__data[0]=ne.elements[0],z.__data[1]=ne.elements[1],z.__data[2]=ne.elements[2],z.__data[3]=0,z.__data[4]=ne.elements[3],z.__data[5]=ne.elements[4],z.__data[6]=ne.elements[5],z.__data[7]=0,z.__data[8]=ne.elements[6],z.__data[9]=ne.elements[7],z.__data[10]=ne.elements[8],z.__data[11]=0):(ne.toArray(z.__data,Z),Z+=de.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,W,z.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(M,E,A,L){const D=M.value,U=E+"_"+A;if(L[U]===void 0)return typeof D=="number"||typeof D=="boolean"?L[U]=D:L[U]=D.clone(),!0;{const O=L[U];if(typeof D=="number"||typeof D=="boolean"){if(O!==D)return L[U]=D,!0}else if(O.equals(D)===!1)return O.copy(D),!0}return!1}function y(M){const E=M.uniforms;let A=0;const L=16;for(let U=0,O=E.length;U<O;U++){const B=Array.isArray(E[U])?E[U]:[E[U]];for(let T=0,z=B.length;T<z;T++){const W=B[T],K=Array.isArray(W.value)?W.value:[W.value];for(let Z=0,te=K.length;Z<te;Z++){const ne=K[Z],de=x(ne),Y=A%L,ae=Y%de.boundary,se=Y+ae;A+=ae,se!==0&&L-se<de.storage&&(A+=L-se),W.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=A,A+=de.storage}}}const D=A%L;return D>0&&(A+=L-D),M.__size=A,M.__cache={},this}function x(M){const E={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(E.boundary=4,E.storage=4):M.isVector2?(E.boundary=8,E.storage=8):M.isVector3||M.isColor?(E.boundary=16,E.storage=12):M.isVector4?(E.boundary=16,E.storage=16):M.isMatrix3?(E.boundary=48,E.storage=48):M.isMatrix4?(E.boundary=64,E.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),E}function S(M){const E=M.target;E.removeEventListener("dispose",S);const A=o.indexOf(E.__bindingPointIndex);o.splice(A,1),t.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function _(){for(const M in i)t.deleteBuffer(i[M]);o=[],i={},s={}}return{bind:l,update:u,dispose:_}}class sO{constructor(e={}){const{canvas:n=Kk(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let v;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=r.getContextAttributes().alpha}else v=o;const y=new Uint32Array(4),x=new Int32Array(4);let S=null,_=null;const M=[],E=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Za,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let L=!1;this._outputColorSpace=As;let D=0,U=0,O=null,B=-1,T=null;const z=new gn,W=new gn;let K=null;const Z=new _t(0);let te=0,ne=n.width,de=n.height,Y=1,ae=null,se=null;const he=new gn(0,0,ne,de),Me=new gn(0,0,ne,de);let ze=!1;const ge=new H1;let De=!1,Xe=!1;const Q=new Ft,ye=new Ft,We=new re,je=new gn,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function $e(){return O===null?Y:1}let le=r;function At($,we){return n.getContext($,we)}try{const $={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:m};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${uE}`),n.addEventListener("webglcontextlost",Ye,!1),n.addEventListener("webglcontextrestored",ft,!1),n.addEventListener("webglcontextcreationerror",ut,!1),le===null){const we="webgl2";if(le=At(we,$),le===null)throw At(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let Be,He,ke,nt,Fe,ee,X,xe,Le,Ie,Oe,j,N,I,J,ie,fe,Ce,tt,Ze,wt,gt,bt,_e;function dt(){Be=new Fee(le),Be.init(),gt=new iO(le,Be),He=new Pee(le,Be,e,gt),ke=new mne(le,Be),He.reverseDepthBuffer&&g&&ke.buffers.depth.setReversed(!0),nt=new Uee(le),Fe=new nne,ee=new gne(le,Be,ke,Fe,He,gt,nt),X=new Tee(A),xe=new kee(A),Le=new WZ(le),bt=new Aee(le,Le),Ie=new Oee(le,Le,nt,bt),Oe=new zee(le,Ie,Le,nt),tt=new Bee(le,He,ee),ie=new Ree(Fe),j=new tne(A,X,xe,Be,He,bt,ie),N=new Ene(A,Fe),I=new ine,J=new cne(Be),Ce=new Cee(A,X,xe,ke,Oe,v,l),fe=new hne(A,Oe,He),_e=new wne(le,nt,He,ke),Ze=new bee(le,Be,nt),wt=new Iee(le,Be,nt),nt.programs=j.programs,A.capabilities=He,A.extensions=Be,A.properties=Fe,A.renderLists=I,A.shadowMap=fe,A.state=ke,A.info=nt}dt();const Ue=new xne(A,le);this.xr=Ue,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const $=Be.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Be.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function($){$!==void 0&&(Y=$,this.setSize(ne,de,!1))},this.getSize=function($){return $.set(ne,de)},this.setSize=function($,we,Pe=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=$,de=we,n.width=Math.floor($*Y),n.height=Math.floor(we*Y),Pe===!0&&(n.style.width=$+"px",n.style.height=we+"px"),this.setViewport(0,0,$,we)},this.getDrawingBufferSize=function($){return $.set(ne*Y,de*Y).floor()},this.setDrawingBufferSize=function($,we,Pe){ne=$,de=we,Y=Pe,n.width=Math.floor($*Pe),n.height=Math.floor(we*Pe),this.setViewport(0,0,$,we)},this.getCurrentViewport=function($){return $.copy(z)},this.getViewport=function($){return $.copy(he)},this.setViewport=function($,we,Pe,Re){$.isVector4?he.set($.x,$.y,$.z,$.w):he.set($,we,Pe,Re),ke.viewport(z.copy(he).multiplyScalar(Y).round())},this.getScissor=function($){return $.copy(Me)},this.setScissor=function($,we,Pe,Re){$.isVector4?Me.set($.x,$.y,$.z,$.w):Me.set($,we,Pe,Re),ke.scissor(W.copy(Me).multiplyScalar(Y).round())},this.getScissorTest=function(){return ze},this.setScissorTest=function($){ke.setScissorTest(ze=$)},this.setOpaqueSort=function($){ae=$},this.setTransparentSort=function($){se=$},this.getClearColor=function($){return $.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor(...arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha(...arguments)},this.clear=function($=!0,we=!0,Pe=!0){let Re=0;if($){let Se=!1;if(O!==null){const Ke=O.texture.format;Se=Ke===vE||Ke===gE||Ke===I1}if(Se){const Ke=O.texture.type,at=Ke===va||Ke===su||Ke===Hp||Ke===Gp||Ke===hE||Ke===pE,pt=Ce.getClearColor(),vt=Ce.getClearAlpha(),Rt=pt.r,Mt=pt.g,rt=pt.b;at?(y[0]=Rt,y[1]=Mt,y[2]=rt,y[3]=vt,le.clearBufferuiv(le.COLOR,0,y)):(x[0]=Rt,x[1]=Mt,x[2]=rt,x[3]=vt,le.clearBufferiv(le.COLOR,0,x))}else Re|=le.COLOR_BUFFER_BIT}we&&(Re|=le.DEPTH_BUFFER_BIT),Pe&&(Re|=le.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),le.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ye,!1),n.removeEventListener("webglcontextrestored",ft,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),Ce.dispose(),I.dispose(),J.dispose(),Fe.dispose(),X.dispose(),xe.dispose(),Oe.dispose(),bt.dispose(),_e.dispose(),j.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",kf),Ue.removeEventListener("sessionend",Ff),Os.stop()};function Ye($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const $=nt.autoReset,we=fe.enabled,Pe=fe.autoUpdate,Re=fe.needsUpdate,Se=fe.type;dt(),nt.autoReset=$,fe.enabled=we,fe.autoUpdate=Pe,fe.needsUpdate=Re,fe.type=Se}function ut($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function Ot($){const we=$.target;we.removeEventListener("dispose",Ot),kn(we)}function kn($){Qn($),Fe.remove($)}function Qn($){const we=Fe.get($).programs;we!==void 0&&(we.forEach(function(Pe){j.releaseProgram(Pe)}),$.isShaderMaterial&&j.releaseShaderCache($))}this.renderBufferDirect=function($,we,Pe,Re,Se,Ke){we===null&&(we=Ve);const at=Se.isMesh&&Se.matrixWorld.determinant()<0,pt=_m($,we,Pe,Re,Se);ke.setMaterial(Re,at);let vt=Pe.index,Rt=1;if(Re.wireframe===!0){if(vt=Ie.getWireframeAttribute(Pe),vt===void 0)return;Rt=2}const Mt=Pe.drawRange,rt=Pe.attributes.position;let it=Mt.start*Rt,xt=(Mt.start+Mt.count)*Rt;Ke!==null&&(it=Math.max(it,Ke.start*Rt),xt=Math.min(xt,(Ke.start+Ke.count)*Rt)),vt!==null?(it=Math.max(it,0),xt=Math.min(xt,vt.count)):rt!=null&&(it=Math.max(it,0),xt=Math.min(xt,rt.count));const Ut=xt-it;if(Ut<0||Ut===1/0)return;bt.setup(Se,Re,pt,Pe,vt);let Lt,Tt=Ze;if(vt!==null&&(Lt=Le.get(vt),Tt=wt,Tt.setIndex(Lt)),Se.isMesh)Re.wireframe===!0?(ke.setLineWidth(Re.wireframeLinewidth*$e()),Tt.setMode(le.LINES)):Tt.setMode(le.TRIANGLES);else if(Se.isLine){let St=Re.linewidth;St===void 0&&(St=1),ke.setLineWidth(St*$e()),Se.isLineSegments?Tt.setMode(le.LINES):Se.isLineLoop?Tt.setMode(le.LINE_LOOP):Tt.setMode(le.LINE_STRIP)}else Se.isPoints?Tt.setMode(le.POINTS):Se.isSprite&&Tt.setMode(le.TRIANGLES);if(Se.isBatchedMesh)if(Se._multiDrawInstances!==null)sy("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Tt.renderMultiDrawInstances(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount,Se._multiDrawInstances);else if(Be.get("WEBGL_multi_draw"))Tt.renderMultiDraw(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount);else{const St=Se._multiDrawStarts,en=Se._multiDrawCounts,Dt=Se._multiDrawCount,Fr=vt?Le.get(vt).bytesPerElement:1,co=Fe.get(Re).currentProgram.getUniforms();for(let _r=0;_r<Dt;_r++)co.setValue(le,"_gl_DrawID",_r),Tt.render(St[_r]/Fr,en[_r])}else if(Se.isInstancedMesh)Tt.renderInstances(it,Ut,Se.count);else if(Pe.isInstancedBufferGeometry){const St=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,en=Math.min(Pe.instanceCount,St);Tt.renderInstances(it,Ut,en)}else Tt.render(it,Ut)};function un($,we,Pe){$.transparent===!0&&$.side===No&&$.forceSinglePass===!1?($.side=os,$.needsUpdate=!0,fu($,we,Pe),$.side=ru,$.needsUpdate=!0,fu($,we,Pe),$.side=No):fu($,we,Pe)}this.compile=function($,we,Pe=null){Pe===null&&(Pe=$),_=J.get(Pe),_.init(we),E.push(_),Pe.traverseVisible(function(Se){Se.isLight&&Se.layers.test(we.layers)&&(_.pushLight(Se),Se.castShadow&&_.pushShadow(Se))}),$!==Pe&&$.traverseVisible(function(Se){Se.isLight&&Se.layers.test(we.layers)&&(_.pushLight(Se),Se.castShadow&&_.pushShadow(Se))}),_.setupLights();const Re=new Set;return $.traverse(function(Se){if(!(Se.isMesh||Se.isPoints||Se.isLine||Se.isSprite))return;const Ke=Se.material;if(Ke)if(Array.isArray(Ke))for(let at=0;at<Ke.length;at++){const pt=Ke[at];un(pt,Pe,Se),Re.add(pt)}else un(Ke,Pe,Se),Re.add(Ke)}),_=E.pop(),Re},this.compileAsync=function($,we,Pe=null){const Re=this.compile($,we,Pe);return new Promise(Se=>{function Ke(){if(Re.forEach(function(at){Fe.get(at).currentProgram.isReady()&&Re.delete(at)}),Re.size===0){Se($);return}setTimeout(Ke,10)}Be.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let ci=null;function Fs($){ci&&ci($)}function kf(){Os.stop()}function Ff(){Os.start()}const Os=new JF;Os.setAnimationLoop(Fs),typeof self<"u"&&Os.setContext(self),this.setAnimationLoop=function($){ci=$,Ue.setAnimationLoop($),$===null?Os.stop():Os.start()},Ue.addEventListener("sessionstart",kf),Ue.addEventListener("sessionend",Ff),this.render=function($,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(we),we=Ue.getCamera()),$.isScene===!0&&$.onBeforeRender(A,$,we,O),_=J.get($,E.length),_.init(we),E.push(_),ye.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),ge.setFromProjectionMatrix(ye),Xe=this.localClippingEnabled,De=ie.init(this.clippingPlanes,Xe),S=I.get($,M.length),S.init(),M.push(S),Ue.enabled===!0&&Ue.isPresenting===!0){const Ke=A.xr.getDepthSensingMesh();Ke!==null&&Bo(Ke,we,-1/0,A.sortObjects)}Bo($,we,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(ae,se),Je=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,Je&&Ce.addToRenderList(S,$),this.info.render.frame++,De===!0&&ie.beginShadows();const Pe=_.state.shadowsArray;fe.render(Pe,$,we),De===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset();const Re=S.opaque,Se=S.transmissive;if(_.setupLights(),we.isArrayCamera){const Ke=we.cameras;if(Se.length>0)for(let at=0,pt=Ke.length;at<pt;at++){const vt=Ke[at];Sa(Re,Se,$,vt)}Je&&Ce.render($);for(let at=0,pt=Ke.length;at<pt;at++){const vt=Ke[at];Of(S,$,vt,vt.viewport)}}else Se.length>0&&Sa(Re,Se,$,we),Je&&Ce.render($),Of(S,$,we);O!==null&&U===0&&(ee.updateMultisampleRenderTarget(O),ee.updateRenderTargetMipmap(O)),$.isScene===!0&&$.onAfterRender(A,$,we),bt.resetDefaultState(),B=-1,T=null,E.pop(),E.length>0?(_=E[E.length-1],De===!0&&ie.setGlobalState(A.clippingPlanes,_.state.camera)):_=null,M.pop(),M.length>0?S=M[M.length-1]:S=null};function Bo($,we,Pe,Re){if($.visible===!1)return;if($.layers.test(we.layers)){if($.isGroup)Pe=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(we);else if($.isLight)_.pushLight($),$.castShadow&&_.pushShadow($);else if($.isSprite){if(!$.frustumCulled||ge.intersectsSprite($)){Re&&je.setFromMatrixPosition($.matrixWorld).applyMatrix4(ye);const at=Oe.update($),pt=$.material;pt.visible&&S.push($,at,pt,Pe,je.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||ge.intersectsObject($))){const at=Oe.update($),pt=$.material;if(Re&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),je.copy($.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),je.copy(at.boundingSphere.center)),je.applyMatrix4($.matrixWorld).applyMatrix4(ye)),Array.isArray(pt)){const vt=at.groups;for(let Rt=0,Mt=vt.length;Rt<Mt;Rt++){const rt=vt[Rt],it=pt[rt.materialIndex];it&&it.visible&&S.push($,at,it,Pe,je.z,rt)}}else pt.visible&&S.push($,at,pt,Pe,je.z,null)}}const Ke=$.children;for(let at=0,pt=Ke.length;at<pt;at++)Bo(Ke[at],we,Pe,Re)}function Of($,we,Pe,Re){const Se=$.opaque,Ke=$.transmissive,at=$.transparent;_.setupLightsView(Pe),De===!0&&ie.setGlobalState(A.clippingPlanes,Pe),Re&&ke.viewport(z.copy(Re)),Se.length>0&&zo(Se,we,Pe),Ke.length>0&&zo(Ke,we,Pe),at.length>0&&zo(at,we,Pe),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function Sa($,we,Pe,Re){if((Pe.isScene===!0?Pe.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Re.id]===void 0&&(_.state.transmissionRenderTarget[Re.id]=new rl(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")||Be.has("EXT_color_buffer_float")?hm:va,minFilter:Ya,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fn.workingColorSpace}));const Ke=_.state.transmissionRenderTarget[Re.id],at=Re.viewport||z;Ke.setSize(at.z*A.transmissionResolutionScale,at.w*A.transmissionResolutionScale);const pt=A.getRenderTarget();A.setRenderTarget(Ke),A.getClearColor(Z),te=A.getClearAlpha(),te<1&&A.setClearColor(16777215,.5),A.clear(),Je&&Ce.render(Pe);const vt=A.toneMapping;A.toneMapping=Za;const Rt=Re.viewport;if(Re.viewport!==void 0&&(Re.viewport=void 0),_.setupLightsView(Re),De===!0&&ie.setGlobalState(A.clippingPlanes,Re),zo($,Pe,Re),ee.updateMultisampleRenderTarget(Ke),ee.updateRenderTargetMipmap(Ke),Be.has("WEBGL_multisampled_render_to_texture")===!1){let Mt=!1;for(let rt=0,it=we.length;rt<it;rt++){const xt=we[rt],Ut=xt.object,Lt=xt.geometry,Tt=xt.material,St=xt.group;if(Tt.side===No&&Ut.layers.test(Re.layers)){const en=Tt.side;Tt.side=os,Tt.needsUpdate=!0,If(Ut,Pe,Re,Lt,Tt,St),Tt.side=en,Tt.needsUpdate=!0,Mt=!0}}Mt===!0&&(ee.updateMultisampleRenderTarget(Ke),ee.updateRenderTargetMipmap(Ke))}A.setRenderTarget(pt),A.setClearColor(Z,te),Rt!==void 0&&(Re.viewport=Rt),A.toneMapping=vt}function zo($,we,Pe){const Re=we.isScene===!0?we.overrideMaterial:null;for(let Se=0,Ke=$.length;Se<Ke;Se++){const at=$[Se],pt=at.object,vt=at.geometry,Rt=at.group;let Mt=at.material;Mt.allowOverride===!0&&Re!==null&&(Mt=Re),pt.layers.test(Pe.layers)&&If(pt,we,Pe,vt,Mt,Rt)}}function If($,we,Pe,Re,Se,Ke){$.onBeforeRender(A,we,Pe,Re,Se,Ke),$.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),Se.onBeforeRender(A,we,Pe,Re,$,Ke),Se.transparent===!0&&Se.side===No&&Se.forceSinglePass===!1?(Se.side=os,Se.needsUpdate=!0,A.renderBufferDirect(Pe,we,Re,Se,$,Ke),Se.side=ru,Se.needsUpdate=!0,A.renderBufferDirect(Pe,we,Re,Se,$,Ke),Se.side=No):A.renderBufferDirect(Pe,we,Re,Se,$,Ke),$.onAfterRender(A,we,Pe,Re,Se,Ke)}function fu($,we,Pe){we.isScene!==!0&&(we=Ve);const Re=Fe.get($),Se=_.state.lights,Ke=_.state.shadowsArray,at=Se.state.version,pt=j.getParameters($,Se.state,Ke,we,Pe),vt=j.getProgramCacheKey(pt);let Rt=Re.programs;Re.environment=$.isMeshStandardMaterial?we.environment:null,Re.fog=we.fog,Re.envMap=($.isMeshStandardMaterial?xe:X).get($.envMap||Re.environment),Re.envMapRotation=Re.environment!==null&&$.envMap===null?we.environmentRotation:$.envMapRotation,Rt===void 0&&($.addEventListener("dispose",Ot),Rt=new Map,Re.programs=Rt);let Mt=Rt.get(vt);if(Mt!==void 0){if(Re.currentProgram===Mt&&Re.lightsStateVersion===at)return Bf($,pt),Mt}else pt.uniforms=j.getUniforms($),$.onBeforeCompile(pt,A),Mt=j.acquireProgram(pt,vt),Rt.set(vt,Mt),Re.uniforms=pt.uniforms;const rt=Re.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(rt.clippingPlanes=ie.uniform),Bf($,pt),Re.needsLights=zf($),Re.lightsStateVersion=at,Re.needsLights&&(rt.ambientLightColor.value=Se.state.ambient,rt.lightProbe.value=Se.state.probe,rt.directionalLights.value=Se.state.directional,rt.directionalLightShadows.value=Se.state.directionalShadow,rt.spotLights.value=Se.state.spot,rt.spotLightShadows.value=Se.state.spotShadow,rt.rectAreaLights.value=Se.state.rectArea,rt.ltc_1.value=Se.state.rectAreaLTC1,rt.ltc_2.value=Se.state.rectAreaLTC2,rt.pointLights.value=Se.state.point,rt.pointLightShadows.value=Se.state.pointShadow,rt.hemisphereLights.value=Se.state.hemi,rt.directionalShadowMap.value=Se.state.directionalShadowMap,rt.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,rt.spotShadowMap.value=Se.state.spotShadowMap,rt.spotLightMatrix.value=Se.state.spotLightMatrix,rt.spotLightMap.value=Se.state.spotLightMap,rt.pointShadowMap.value=Se.state.pointShadowMap,rt.pointShadowMatrix.value=Se.state.pointShadowMatrix),Re.currentProgram=Mt,Re.uniformsList=null,Mt}function Uf($){if($.uniformsList===null){const we=$.currentProgram.getUniforms();$.uniformsList=ay.seqWithValue(we.seq,$.uniforms)}return $.uniformsList}function Bf($,we){const Pe=Fe.get($);Pe.outputColorSpace=we.outputColorSpace,Pe.batching=we.batching,Pe.batchingColor=we.batchingColor,Pe.instancing=we.instancing,Pe.instancingColor=we.instancingColor,Pe.instancingMorph=we.instancingMorph,Pe.skinning=we.skinning,Pe.morphTargets=we.morphTargets,Pe.morphNormals=we.morphNormals,Pe.morphColors=we.morphColors,Pe.morphTargetsCount=we.morphTargetsCount,Pe.numClippingPlanes=we.numClippingPlanes,Pe.numIntersection=we.numClipIntersection,Pe.vertexAlphas=we.vertexAlphas,Pe.vertexTangents=we.vertexTangents,Pe.toneMapping=we.toneMapping}function _m($,we,Pe,Re,Se){we.isScene!==!0&&(we=Ve),ee.resetTextureUnits();const Ke=we.fog,at=Re.isMeshStandardMaterial?we.environment:null,pt=O===null?A.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:gf,vt=(Re.isMeshStandardMaterial?xe:X).get(Re.envMap||at),Rt=Re.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,Mt=!!Pe.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),rt=!!Pe.morphAttributes.position,it=!!Pe.morphAttributes.normal,xt=!!Pe.morphAttributes.color;let Ut=Za;Re.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(Ut=A.toneMapping);const Lt=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,Tt=Lt!==void 0?Lt.length:0,St=Fe.get(Re),en=_.state.lights;if(De===!0&&(Xe===!0||$!==T)){const Or=$===T&&Re.id===B;ie.setState(Re,$,Or)}let Dt=!1;Re.version===St.__version?(St.needsLights&&St.lightsStateVersion!==en.state.version||St.outputColorSpace!==pt||Se.isBatchedMesh&&St.batching===!1||!Se.isBatchedMesh&&St.batching===!0||Se.isBatchedMesh&&St.batchingColor===!0&&Se.colorTexture===null||Se.isBatchedMesh&&St.batchingColor===!1&&Se.colorTexture!==null||Se.isInstancedMesh&&St.instancing===!1||!Se.isInstancedMesh&&St.instancing===!0||Se.isSkinnedMesh&&St.skinning===!1||!Se.isSkinnedMesh&&St.skinning===!0||Se.isInstancedMesh&&St.instancingColor===!0&&Se.instanceColor===null||Se.isInstancedMesh&&St.instancingColor===!1&&Se.instanceColor!==null||Se.isInstancedMesh&&St.instancingMorph===!0&&Se.morphTexture===null||Se.isInstancedMesh&&St.instancingMorph===!1&&Se.morphTexture!==null||St.envMap!==vt||Re.fog===!0&&St.fog!==Ke||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==ie.numPlanes||St.numIntersection!==ie.numIntersection)||St.vertexAlphas!==Rt||St.vertexTangents!==Mt||St.morphTargets!==rt||St.morphNormals!==it||St.morphColors!==xt||St.toneMapping!==Ut||St.morphTargetsCount!==Tt)&&(Dt=!0):(Dt=!0,St.__version=Re.version);let Fr=St.currentProgram;Dt===!0&&(Fr=fu(Re,we,Se));let co=!1,_r=!1,Is=!1;const tn=Fr.getUniforms(),Fn=St.uniforms;if(ke.useProgram(Fr.program)&&(co=!0,_r=!0,Is=!0),Re.id!==B&&(B=Re.id,_r=!0),co||T!==$){ke.buffers.depth.getReversed()?(Q.copy($.projectionMatrix),fK(Q),hK(Q),tn.setValue(le,"projectionMatrix",Q)):tn.setValue(le,"projectionMatrix",$.projectionMatrix),tn.setValue(le,"viewMatrix",$.matrixWorldInverse);const yr=tn.map.cameraPosition;yr!==void 0&&yr.setValue(le,We.setFromMatrixPosition($.matrixWorld)),He.logarithmicDepthBuffer&&tn.setValue(le,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&tn.setValue(le,"isOrthographic",$.isOrthographicCamera===!0),T!==$&&(T=$,_r=!0,Is=!0)}if(Se.isSkinnedMesh){tn.setOptional(le,Se,"bindMatrix"),tn.setOptional(le,Se,"bindMatrixInverse");const Or=Se.skeleton;Or&&(Or.boneTexture===null&&Or.computeBoneTexture(),tn.setValue(le,"boneTexture",Or.boneTexture,ee))}Se.isBatchedMesh&&(tn.setOptional(le,Se,"batchingTexture"),tn.setValue(le,"batchingTexture",Se._matricesTexture,ee),tn.setOptional(le,Se,"batchingIdTexture"),tn.setValue(le,"batchingIdTexture",Se._indirectTexture,ee),tn.setOptional(le,Se,"batchingColorTexture"),Se._colorsTexture!==null&&tn.setValue(le,"batchingColorTexture",Se._colorsTexture,ee));const Mi=Pe.morphAttributes;if((Mi.position!==void 0||Mi.normal!==void 0||Mi.color!==void 0)&&tt.update(Se,Pe,Fr),(_r||St.receiveShadow!==Se.receiveShadow)&&(St.receiveShadow=Se.receiveShadow,tn.setValue(le,"receiveShadow",Se.receiveShadow)),Re.isMeshGouraudMaterial&&Re.envMap!==null&&(Fn.envMap.value=vt,Fn.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1),Re.isMeshStandardMaterial&&Re.envMap===null&&we.environment!==null&&(Fn.envMapIntensity.value=we.environmentIntensity),_r&&(tn.setValue(le,"toneMappingExposure",A.toneMappingExposure),St.needsLights&&ym(Fn,Is),Ke&&Re.fog===!0&&N.refreshFogUniforms(Fn,Ke),N.refreshMaterialUniforms(Fn,Re,Y,de,_.state.transmissionRenderTarget[$.id]),ay.upload(le,Uf(St),Fn,ee)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&(ay.upload(le,Uf(St),Fn,ee),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&tn.setValue(le,"center",Se.center),tn.setValue(le,"modelViewMatrix",Se.modelViewMatrix),tn.setValue(le,"normalMatrix",Se.normalMatrix),tn.setValue(le,"modelMatrix",Se.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const Or=Re.uniformsGroups;for(let yr=0,Us=Or.length;yr<Us;yr++){const Qr=Or[yr];_e.update(Qr,Fr),_e.bind(Qr,Fr)}}return Fr}function ym($,we){$.ambientLightColor.needsUpdate=we,$.lightProbe.needsUpdate=we,$.directionalLights.needsUpdate=we,$.directionalLightShadows.needsUpdate=we,$.pointLights.needsUpdate=we,$.pointLightShadows.needsUpdate=we,$.spotLights.needsUpdate=we,$.spotLightShadows.needsUpdate=we,$.rectAreaLights.needsUpdate=we,$.hemisphereLights.needsUpdate=we}function zf($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return U},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function($,we,Pe){const Re=Fe.get($);Re.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,Re.__autoAllocateDepthBuffer===!1&&(Re.__useRenderToTexture=!1),Fe.get($.texture).__webglTexture=we,Fe.get($.depthTexture).__webglTexture=Re.__autoAllocateDepthBuffer?void 0:Pe,Re.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,we){const Pe=Fe.get($);Pe.__webglFramebuffer=we,Pe.__useDefaultFramebuffer=we===void 0};const xm=le.createFramebuffer();this.setRenderTarget=function($,we=0,Pe=0){O=$,D=we,U=Pe;let Re=!0,Se=null,Ke=!1,at=!1;if($){const vt=Fe.get($);if(vt.__useDefaultFramebuffer!==void 0)ke.bindFramebuffer(le.FRAMEBUFFER,null),Re=!1;else if(vt.__webglFramebuffer===void 0)ee.setupRenderTarget($);else if(vt.__hasExternalTextures)ee.rebindTextures($,Fe.get($.texture).__webglTexture,Fe.get($.depthTexture).__webglTexture);else if($.depthBuffer){const rt=$.depthTexture;if(vt.__boundDepthTexture!==rt){if(rt!==null&&Fe.has(rt)&&($.width!==rt.image.width||$.height!==rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer($)}}const Rt=$.texture;(Rt.isData3DTexture||Rt.isDataArrayTexture||Rt.isCompressedArrayTexture)&&(at=!0);const Mt=Fe.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Mt[we])?Se=Mt[we][Pe]:Se=Mt[we],Ke=!0):$.samples>0&&ee.useMultisampledRTT($)===!1?Se=Fe.get($).__webglMultisampledFramebuffer:Array.isArray(Mt)?Se=Mt[Pe]:Se=Mt,z.copy($.viewport),W.copy($.scissor),K=$.scissorTest}else z.copy(he).multiplyScalar(Y).floor(),W.copy(Me).multiplyScalar(Y).floor(),K=ze;if(Pe!==0&&(Se=xm),ke.bindFramebuffer(le.FRAMEBUFFER,Se)&&Re&&ke.drawBuffers($,Se),ke.viewport(z),ke.scissor(W),ke.setScissorTest(K),Ke){const vt=Fe.get($.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_CUBE_MAP_POSITIVE_X+we,vt.__webglTexture,Pe)}else if(at){const vt=Fe.get($.texture),Rt=we;le.framebufferTextureLayer(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,vt.__webglTexture,Pe,Rt)}else if($!==null&&Pe!==0){const vt=Fe.get($.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,vt.__webglTexture,Pe)}B=-1},this.readRenderTargetPixels=function($,we,Pe,Re,Se,Ke,at){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(pt=pt[at]),pt){ke.bindFramebuffer(le.FRAMEBUFFER,pt);try{const vt=$.texture,Rt=vt.format,Mt=vt.type;if(!He.textureFormatReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(Mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=$.width-Re&&Pe>=0&&Pe<=$.height-Se&&le.readPixels(we,Pe,Re,Se,gt.convert(Rt),gt.convert(Mt),Ke)}finally{const vt=O!==null?Fe.get(O).__webglFramebuffer:null;ke.bindFramebuffer(le.FRAMEBUFFER,vt)}}},this.readRenderTargetPixelsAsync=async function($,we,Pe,Re,Se,Ke,at){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pt=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(pt=pt[at]),pt)if(we>=0&&we<=$.width-Re&&Pe>=0&&Pe<=$.height-Se){ke.bindFramebuffer(le.FRAMEBUFFER,pt);const vt=$.texture,Rt=vt.format,Mt=vt.type;if(!He.textureFormatReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const rt=le.createBuffer();le.bindBuffer(le.PIXEL_PACK_BUFFER,rt),le.bufferData(le.PIXEL_PACK_BUFFER,Ke.byteLength,le.STREAM_READ),le.readPixels(we,Pe,Re,Se,gt.convert(Rt),gt.convert(Mt),0);const it=O!==null?Fe.get(O).__webglFramebuffer:null;ke.bindFramebuffer(le.FRAMEBUFFER,it);const xt=le.fenceSync(le.SYNC_GPU_COMMANDS_COMPLETE,0);return le.flush(),await dK(le,xt,4),le.bindBuffer(le.PIXEL_PACK_BUFFER,rt),le.getBufferSubData(le.PIXEL_PACK_BUFFER,0,Ke),le.deleteBuffer(rt),le.deleteSync(xt),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,we=null,Pe=0){const Re=Math.pow(2,-Pe),Se=Math.floor($.image.width*Re),Ke=Math.floor($.image.height*Re),at=we!==null?we.x:0,pt=we!==null?we.y:0;ee.setTexture2D($,0),le.copyTexSubImage2D(le.TEXTURE_2D,Pe,0,0,at,pt,Se,Ke),ke.unbindTexture()};const Sm=le.createFramebuffer(),Em=le.createFramebuffer();this.copyTextureToTexture=function($,we,Pe=null,Re=null,Se=0,Ke=null){Ke===null&&(Se!==0?(sy("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=Se,Se=0):Ke=0);let at,pt,vt,Rt,Mt,rt,it,xt,Ut;const Lt=$.isCompressedTexture?$.mipmaps[Ke]:$.image;if(Pe!==null)at=Pe.max.x-Pe.min.x,pt=Pe.max.y-Pe.min.y,vt=Pe.isBox3?Pe.max.z-Pe.min.z:1,Rt=Pe.min.x,Mt=Pe.min.y,rt=Pe.isBox3?Pe.min.z:0;else{const Mi=Math.pow(2,-Se);at=Math.floor(Lt.width*Mi),pt=Math.floor(Lt.height*Mi),$.isDataArrayTexture?vt=Lt.depth:$.isData3DTexture?vt=Math.floor(Lt.depth*Mi):vt=1,Rt=0,Mt=0,rt=0}Re!==null?(it=Re.x,xt=Re.y,Ut=Re.z):(it=0,xt=0,Ut=0);const Tt=gt.convert(we.format),St=gt.convert(we.type);let en;we.isData3DTexture?(ee.setTexture3D(we,0),en=le.TEXTURE_3D):we.isDataArrayTexture||we.isCompressedArrayTexture?(ee.setTexture2DArray(we,0),en=le.TEXTURE_2D_ARRAY):(ee.setTexture2D(we,0),en=le.TEXTURE_2D),le.pixelStorei(le.UNPACK_FLIP_Y_WEBGL,we.flipY),le.pixelStorei(le.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),le.pixelStorei(le.UNPACK_ALIGNMENT,we.unpackAlignment);const Dt=le.getParameter(le.UNPACK_ROW_LENGTH),Fr=le.getParameter(le.UNPACK_IMAGE_HEIGHT),co=le.getParameter(le.UNPACK_SKIP_PIXELS),_r=le.getParameter(le.UNPACK_SKIP_ROWS),Is=le.getParameter(le.UNPACK_SKIP_IMAGES);le.pixelStorei(le.UNPACK_ROW_LENGTH,Lt.width),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,Lt.height),le.pixelStorei(le.UNPACK_SKIP_PIXELS,Rt),le.pixelStorei(le.UNPACK_SKIP_ROWS,Mt),le.pixelStorei(le.UNPACK_SKIP_IMAGES,rt);const tn=$.isDataArrayTexture||$.isData3DTexture,Fn=we.isDataArrayTexture||we.isData3DTexture;if($.isDepthTexture){const Mi=Fe.get($),Or=Fe.get(we),yr=Fe.get(Mi.__renderTarget),Us=Fe.get(Or.__renderTarget);ke.bindFramebuffer(le.READ_FRAMEBUFFER,yr.__webglFramebuffer),ke.bindFramebuffer(le.DRAW_FRAMEBUFFER,Us.__webglFramebuffer);for(let Qr=0;Qr<vt;Qr++)tn&&(le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Fe.get($).__webglTexture,Se,rt+Qr),le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Fe.get(we).__webglTexture,Ke,Ut+Qr)),le.blitFramebuffer(Rt,Mt,at,pt,it,xt,at,pt,le.DEPTH_BUFFER_BIT,le.NEAREST);ke.bindFramebuffer(le.READ_FRAMEBUFFER,null),ke.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else if(Se!==0||$.isRenderTargetTexture||Fe.has($)){const Mi=Fe.get($),Or=Fe.get(we);ke.bindFramebuffer(le.READ_FRAMEBUFFER,Sm),ke.bindFramebuffer(le.DRAW_FRAMEBUFFER,Em);for(let yr=0;yr<vt;yr++)tn?le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Mi.__webglTexture,Se,rt+yr):le.framebufferTexture2D(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Mi.__webglTexture,Se),Fn?le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Or.__webglTexture,Ke,Ut+yr):le.framebufferTexture2D(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Or.__webglTexture,Ke),Se!==0?le.blitFramebuffer(Rt,Mt,at,pt,it,xt,at,pt,le.COLOR_BUFFER_BIT,le.NEAREST):Fn?le.copyTexSubImage3D(en,Ke,it,xt,Ut+yr,Rt,Mt,at,pt):le.copyTexSubImage2D(en,Ke,it,xt,Rt,Mt,at,pt);ke.bindFramebuffer(le.READ_FRAMEBUFFER,null),ke.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else Fn?$.isDataTexture||$.isData3DTexture?le.texSubImage3D(en,Ke,it,xt,Ut,at,pt,vt,Tt,St,Lt.data):we.isCompressedArrayTexture?le.compressedTexSubImage3D(en,Ke,it,xt,Ut,at,pt,vt,Tt,Lt.data):le.texSubImage3D(en,Ke,it,xt,Ut,at,pt,vt,Tt,St,Lt):$.isDataTexture?le.texSubImage2D(le.TEXTURE_2D,Ke,it,xt,at,pt,Tt,St,Lt.data):$.isCompressedTexture?le.compressedTexSubImage2D(le.TEXTURE_2D,Ke,it,xt,Lt.width,Lt.height,Tt,Lt.data):le.texSubImage2D(le.TEXTURE_2D,Ke,it,xt,at,pt,Tt,St,Lt);le.pixelStorei(le.UNPACK_ROW_LENGTH,Dt),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,Fr),le.pixelStorei(le.UNPACK_SKIP_PIXELS,co),le.pixelStorei(le.UNPACK_SKIP_ROWS,_r),le.pixelStorei(le.UNPACK_SKIP_IMAGES,Is),Ke===0&&we.generateMipmaps&&le.generateMipmap(en),ke.unbindTexture()},this.copyTextureToTexture3D=function($,we,Pe=null,Re=null,Se=0){return sy('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,we,Pe,Re,Se)},this.initRenderTarget=function($){Fe.get($).__webglFramebuffer===void 0&&ee.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?ee.setTextureCube($,0):$.isData3DTexture?ee.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?ee.setTexture2DArray($,0):ee.setTexture2D($,0),ke.unbindTexture()},this.resetState=function(){D=0,U=0,O=null,ke.reset(),bt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ca}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=fn._getDrawingBufferColorSpace(e),n.unpackColorSpace=fn._getUnpackColorSpace()}}const Mne=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:PA,AddEquation:sc,AddOperation:bk,AdditiveAnimationBlendMode:BA,AdditiveBlending:C2,AgXToneMapping:Nk,AlphaFormat:DA,AlwaysCompare:Yk,AlwaysDepth:ex,AlwaysStencilFunc:R2,AmbientLight:HF,AnimationAction:$F,AnimationClip:v1,AnimationLoader:I$,AnimationMixer:fZ,AnimationObjectGroup:cZ,AnimationUtils:D$,ArcCurve:dF,ArrayCamera:YF,ArrowHelper:FZ,AttachedBindMode:P2,Audio:qF,AudioAnalyser:eZ,AudioContext:ub,AudioListener:Z$,AudioLoader:q$,AxesHelper:OZ,BackSide:os,BasicDepthPacking:Uk,BasicShadowMap:ak,BatchedMesh:aF,Bone:XA,BooleanKeyframeTrack:Lf,Box2:SZ,Box3:ls,Box3Helper:DZ,BoxGeometry:Tf,BoxHelper:NZ,BufferAttribute:Rn,BufferGeometry:Zt,BufferGeometryLoader:XF,ByteType:TA,Cache:jl,Camera:B1,CameraHelper:LZ,CanvasTexture:N2,CapsuleGeometry:bE,CatmullRomCurve3:fF,CineonToneMapping:Tk,CircleGeometry:PE,ClampToEdgeWrapping:ko,Clock:cb,Color:_t,ColorKeyframeTrack:ob,ColorManagement:fn,CompressedArrayTexture:t$,CompressedCubeTexture:n$,CompressedTexture:CE,CompressedTextureLoader:U$,ConeGeometry:RE,ConstantAlphaFactor:Mk,ConstantColorFactor:Ek,Controls:UZ,CubeCamera:eF,CubeReflectionMapping:iu,CubeRefractionMapping:Ac,CubeTexture:z1,CubeTextureLoader:B$,CubeUVReflectionMapping:fm,CubicBezierCurve:$A,CubicBezierCurve3:hF,CubicInterpolant:DF,CullFaceBack:M2,CullFaceFront:ok,CullFaceFrontBack:fq,CullFaceNone:sk,Curve:xa,CurvePath:mF,CustomBlending:lk,CustomToneMapping:Lk,CylinderGeometry:mm,Cylindrical:xZ,Data3DTexture:xE,DataArrayTexture:U1,DataTexture:Qa,DataTextureLoader:z$,DataUtils:PK,DecrementStencilOp:Aq,DecrementWrapStencilOp:Pq,DefaultLoadingManager:OF,DepthFormat:Vp,DepthStencilFormat:Wp,DepthTexture:qA,DetachedBindMode:kk,DirectionalLight:zF,DirectionalLightHelper:TZ,DiscreteInterpolant:kF,DodecahedronGeometry:TE,DoubleSide:No,DstAlphaFactor:vk,DstColorFactor:yk,DynamicCopyUsage:Vq,DynamicDrawUsage:Iq,DynamicReadUsage:zq,EdgesGeometry:gF,EllipseCurve:AE,EqualCompare:Vk,EqualDepth:nx,EqualStencilFunc:Nq,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:n1,Euler:ao,EventDispatcher:ll,ExtrudeGeometry:LE,FileLoader:ou,Float16BufferAttribute:FK,Float32BufferAttribute:Ct,FloatType:Ts,Fog:EE,FogExp2:SE,FramebufferTexture:e$,FrontSide:ru,Frustum:H1,GLBufferAttribute:_Z,GLSL1:jq,GLSL3:T2,GreaterCompare:Wk,GreaterDepth:ix,GreaterEqualCompare:Xk,GreaterEqualDepth:rx,GreaterEqualStencilFunc:Oq,GreaterStencilFunc:kq,GridHelper:PZ,Group:mp,HalfFloatType:hm,HemisphereLight:IF,HemisphereLightHelper:bZ,IcosahedronGeometry:NE,ImageBitmapLoader:Y$,ImageLoader:_1,ImageUtils:$k,IncrementStencilOp:Cq,IncrementWrapStencilOp:bq,InstancedBufferAttribute:Yp,InstancedBufferGeometry:jF,InstancedInterleavedBuffer:vZ,InstancedMesh:oF,Int16BufferAttribute:DK,Int32BufferAttribute:kK,Int8BufferAttribute:TK,IntType:fE,InterleavedBuffer:wE,InterleavedBufferAttribute:vf,Interpolant:j1,InterpolateDiscrete:s1,InterpolateLinear:Nx,InterpolateSmooth:iy,InvertStencilOp:Rq,KeepStencilOp:jd,KeyframeTrack:Uo,LOD:iF,LatheGeometry:G1,Layers:sf,LessCompare:Gk,LessDepth:tx,LessEqualCompare:zA,LessEqualDepth:mf,LessEqualStencilFunc:Dq,LessStencilFunc:Lq,Light:Wc,LightProbe:WF,Line:bc,Line3:EZ,LineBasicMaterial:fs,LineCurve:ZA,LineCurve3:pF,LineDashedMaterial:TF,LineLoop:lF,LineSegments:ul,LinearFilter:Yr,LinearInterpolant:sb,LinearMipMapLinearFilter:gq,LinearMipMapNearestFilter:mq,LinearMipmapLinearFilter:Ya,LinearMipmapNearestFilter:v0,LinearSRGBColorSpace:gf,LinearToneMapping:Pk,LinearTransfer:a1,Loader:ks,LoaderUtils:O2,LoadingManager:ab,LoopOnce:Fk,LoopPingPong:Ik,LoopRepeat:Ok,LuminanceAlphaFormat:OA,LuminanceFormat:FA,MOUSE:ry,Material:Xi,MaterialLoader:BE,MathUtils:uK,Matrix2:pb,Matrix3:Wt,Matrix4:Ft,MaxEquation:fk,Mesh:Nr,MeshBasicMaterial:Gc,MeshDepthMaterial:nb,MeshDistanceMaterial:rb,MeshLambertMaterial:PF,MeshMatcapMaterial:RF,MeshNormalMaterial:bF,MeshPhongMaterial:CF,MeshPhysicalMaterial:MF,MeshStandardMaterial:tb,MeshToonMaterial:AF,MinEquation:dk,MirroredRepeatWrapping:i1,MixOperation:Ak,MultiplyBlending:b2,MultiplyOperation:O1,NearestFilter:yi,NearestMipMapLinearFilter:pq,NearestMipMapNearestFilter:hq,NearestMipmapLinearFilter:hp,NearestMipmapNearestFilter:RA,NeutralToneMapping:Dk,NeverCompare:Hk,NeverDepth:Jy,NeverStencilFunc:Tq,NoBlending:ql,NoColorSpace:Hl,NoToneMapping:Za,NormalAnimationBlendMode:_E,NormalBlending:nf,NotEqualCompare:jk,NotEqualDepth:sx,NotEqualStencilFunc:Fq,NumberKeyframeTrack:m1,Object3D:_n,ObjectLoader:j$,ObjectSpaceNormalMap:zk,OctahedronGeometry:V1,OneFactor:pk,OneMinusConstantAlphaFactor:Ck,OneMinusConstantColorFactor:wk,OneMinusDstAlphaFactor:_k,OneMinusDstColorFactor:xk,OneMinusSrcAlphaFactor:Qy,OneMinusSrcColorFactor:gk,OrthographicCamera:Y1,PCFShadowMap:cE,PCFSoftShadowMap:g0,PMREMGenerator:B2,Path:d1,PerspectiveCamera:ai,Plane:nc,PlaneGeometry:gm,PlaneHelper:kZ,PointLight:BF,PointLightHelper:CZ,Points:uF,PointsMaterial:YA,PolarGridHelper:RZ,PolyhedronGeometry:Vc,PositionalAudio:J$,PropertyBinding:pn,PropertyMixer:KF,QuadraticBezierCurve:QA,QuadraticBezierCurve3:JA,Quaternion:as,QuaternionKeyframeTrack:X1,QuaternionLinearInterpolant:FF,RED_GREEN_RGTC2_Format:Tx,RED_RGTC1_Format:UA,REVISION:uE,RGBADepthPacking:Bk,RGBAFormat:Gi,RGBAIntegerFormat:vE,RGBA_ASTC_10x10_Format:Mx,RGBA_ASTC_10x5_Format:Sx,RGBA_ASTC_10x6_Format:Ex,RGBA_ASTC_10x8_Format:wx,RGBA_ASTC_12x10_Format:Cx,RGBA_ASTC_12x12_Format:Ax,RGBA_ASTC_4x4_Format:hx,RGBA_ASTC_5x4_Format:px,RGBA_ASTC_5x5_Format:mx,RGBA_ASTC_6x5_Format:gx,RGBA_ASTC_6x6_Format:vx,RGBA_ASTC_8x5_Format:_x,RGBA_ASTC_8x6_Format:yx,RGBA_ASTC_8x8_Format:xx,RGBA_BPTC_Format:E0,RGBA_ETC2_EAC_Format:fx,RGBA_PVRTC_2BPPV1_Format:ux,RGBA_PVRTC_4BPPV1_Format:lx,RGBA_S3TC_DXT1_Format:y0,RGBA_S3TC_DXT3_Format:x0,RGBA_S3TC_DXT5_Format:S0,RGBDepthPacking:Sq,RGBFormat:kA,RGBIntegerFormat:vq,RGB_BPTC_SIGNED_Format:bx,RGB_BPTC_UNSIGNED_Format:Px,RGB_ETC1_Format:cx,RGB_ETC2_Format:dx,RGB_PVRTC_2BPPV1_Format:ax,RGB_PVRTC_4BPPV1_Format:ox,RGB_S3TC_DXT1_Format:_0,RGDepthPacking:Eq,RGFormat:IA,RGIntegerFormat:gE,RawShaderMaterial:wF,Ray:pm,Raycaster:ZF,RectAreaLight:GF,RedFormat:mE,RedIntegerFormat:I1,ReinhardToneMapping:Rk,RenderTarget:yE,RenderTarget3D:hZ,RenderTargetArray:pZ,RepeatWrapping:r1,ReplaceStencilOp:Mq,ReverseSubtractEquation:ck,RingGeometry:DE,SIGNED_RED_GREEN_RGTC2_Format:Lx,SIGNED_RED_RGTC1_Format:Rx,SRGBColorSpace:As,SRGBTransfer:Cn,Scene:WA,ShaderChunk:$t,ShaderLib:la,ShaderMaterial:_a,ShadowMaterial:EF,Shape:yc,ShapeGeometry:kE,ShapePath:IZ,ShapeUtils:Ja,ShortType:LA,Skeleton:ME,SkeletonHelper:MZ,SkinnedMesh:sF,Source:uc,Sphere:Vi,SphereGeometry:W1,Spherical:yZ,SphericalHarmonics3:VF,SplineCurve:eb,SpotLight:UF,SpotLightHelper:wZ,Sprite:rF,SpriteMaterial:jA,SrcAlphaFactor:Zy,SrcAlphaSaturateFactor:Sk,SrcColorFactor:mk,StaticCopyUsage:Gq,StaticDrawUsage:l1,StaticReadUsage:Bq,StereoCamera:K$,StreamCopyUsage:Wq,StreamDrawUsage:Uq,StreamReadUsage:Hq,StringKeyframeTrack:Nf,SubtractEquation:uk,SubtractiveBlending:A2,TOUCH:dq,TangentSpaceNormalMap:Hc,TetrahedronGeometry:FE,Texture:gr,TextureLoader:H$,TextureUtils:VZ,TimestampQuery:Xq,TorusGeometry:OE,TorusKnotGeometry:IE,Triangle:Ps,TriangleFanDrawMode:xq,TriangleStripDrawMode:yq,TrianglesDrawMode:_q,TubeGeometry:UE,UVMapping:dE,Uint16BufferAttribute:GA,Uint32BufferAttribute:VA,Uint8BufferAttribute:LK,Uint8ClampedBufferAttribute:NK,Uniform:hb,UniformsGroup:gZ,UniformsLib:ct,UniformsUtils:Jk,UnsignedByteType:va,UnsignedInt248Type:Gp,UnsignedInt5999Type:NA,UnsignedIntType:su,UnsignedShort4444Type:hE,UnsignedShort5551Type:pE,UnsignedShortType:Hp,VSMShadowMap:sa,Vector2:Ge,Vector3:re,Vector4:gn,VectorKeyframeTrack:g1,VideoFrameTexture:JK,VideoTexture:cF,WebGL3DRenderTarget:_K,WebGLArrayRenderTarget:vK,WebGLCoordinateSystem:ca,WebGLCubeRenderTarget:tF,WebGLRenderTarget:rl,WebGLRenderer:sO,WebGLUtils:iO,WebGPUCoordinateSystem:u1,WebXRController:oy,WireframeGeometry:SF,WrapAroundEnding:o1,ZeroCurvatureEnding:Zd,ZeroFactor:hk,ZeroSlopeEnding:Qd,ZeroStencilOp:wq,createCanvasElement:Kk},Symbol.toStringTag,{value:"Module"}));var oO={exports:{}},Df={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Df.ConcurrentRoot=1;Df.ContinuousEventPriority=4;Df.DefaultEventPriority=16;Df.DiscreteEventPriority=1;Df.IdleEventPriority=536870912;Df.LegacyRoot=0;oO.exports=Df;var i0=oO.exports;function Cne(t){let e;const n=new Set,r=(u,d)=>{const m=typeof u=="function"?u(e):u;if(m!==e){const g=e;e=d?m:Object.assign({},e,m),n.forEach(v=>v(e,g))}},i=()=>e,s=(u,d=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=d(e);function v(){const y=d(e);if(!m(g,y)){const x=g;u(g=y,x)}}return n.add(v),()=>n.delete(v)},l={setState:r,getState:i,subscribe:(u,d,m)=>d||m?s(u,d,m):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Ane=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),JT=Ane?V.useEffect:V.useLayoutEffect;function bne(t){const e=typeof t=="function"?Cne(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=V.useReducer(S=>S+1,0),o=e.getState(),a=V.useRef(o),l=V.useRef(r),u=V.useRef(i),d=V.useRef(!1),m=V.useRef();m.current===void 0&&(m.current=r(o));let g,v=!1;(a.current!==o||l.current!==r||u.current!==i||d.current)&&(g=r(o),v=!i(m.current,g)),JT(()=>{v&&(m.current=g),a.current=o,l.current=r,u.current=i,d.current=!1});const y=V.useRef(o);JT(()=>{const S=()=>{try{const M=e.getState(),E=l.current(M);u.current(m.current,E)||(a.current=M,m.current=E,s())}catch{d.current=!0,s()}},_=e.subscribe(S);return e.getState()!==y.current&&S(),_},[]);const x=v?g:m.current;return V.useDebugValue(x),x};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var aO={exports:{}},lO={exports:{}},uO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ae){var se=Y.length;Y.push(ae);e:for(;0<se;){var he=se-1>>>1,Me=Y[he];if(0<i(Me,ae))Y[he]=ae,Y[se]=Me,se=he;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ae=Y[0],se=Y.pop();if(se!==ae){Y[0]=se;e:for(var he=0,Me=Y.length,ze=Me>>>1;he<ze;){var ge=2*(he+1)-1,De=Y[ge],Xe=ge+1,Q=Y[Xe];if(0>i(De,se))Xe<Me&&0>i(Q,De)?(Y[he]=Q,Y[Xe]=se,he=Xe):(Y[he]=De,Y[ge]=se,he=ge);else if(Xe<Me&&0>i(Q,se))Y[he]=Q,Y[Xe]=se,he=Xe;else break e}}return ae}function i(Y,ae){var se=Y.sortIndex-ae.sortIndex;return se!==0?se:Y.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,m=null,g=3,v=!1,y=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=Y)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function A(Y){if(x=!1,E(Y),!y)if(n(l)!==null)y=!0,ne(L);else{var ae=n(u);ae!==null&&de(A,ae.startTime-Y)}}function L(Y,ae){y=!1,x&&(x=!1,_(O),O=-1),v=!0;var se=g;try{for(E(ae),m=n(l);m!==null&&(!(m.expirationTime>ae)||Y&&!z());){var he=m.callback;if(typeof he=="function"){m.callback=null,g=m.priorityLevel;var Me=he(m.expirationTime<=ae);ae=t.unstable_now(),typeof Me=="function"?m.callback=Me:m===n(l)&&r(l),E(ae)}else r(l);m=n(l)}if(m!==null)var ze=!0;else{var ge=n(u);ge!==null&&de(A,ge.startTime-ae),ze=!1}return ze}finally{m=null,g=se,v=!1}}var D=!1,U=null,O=-1,B=5,T=-1;function z(){return!(t.unstable_now()-T<B)}function W(){if(U!==null){var Y=t.unstable_now();T=Y;var ae=!0;try{ae=U(!0,Y)}finally{ae?K():(D=!1,U=null)}}else D=!1}var K;if(typeof M=="function")K=function(){M(W)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,te=Z.port2;Z.port1.onmessage=W,K=function(){te.postMessage(null)}}else K=function(){S(W,0)};function ne(Y){U=Y,D||(D=!0,K())}function de(Y,ae){O=S(function(){Y(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,ne(L))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var se=g;g=ae;try{return Y()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=g;g=Y;try{return ae()}finally{g=se}},t.unstable_scheduleCallback=function(Y,ae,se){var he=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?he+se:he):se=he,Y){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=se+Me,Y={id:d++,callback:ae,priorityLevel:Y,startTime:se,expirationTime:Me,sortIndex:-1},se>he?(Y.sortIndex=se,e(u,Y),n(l)===null&&Y===n(u)&&(x?(_(O),O=-1):x=!0,de(A,se-he))):(Y.sortIndex=Me,e(l,Y),y||v||(y=!0,ne(L))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var ae=g;return function(){var se=g;g=ae;try{return Y.apply(this,arguments)}finally{g=se}}}})(uO);lO.exports=uO;var H2=lO.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pne=function(e){var n={},r=V,i=H2,s=Object.assign;function o(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,C=1;C<arguments.length;C++)p+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),L=Symbol.iterator;function D(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}function U(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case d:return"Fragment";case u:return"Portal";case g:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case y:return(f.displayName||"Context")+".Consumer";case v:return(f._context.displayName||"Context")+".Provider";case x:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case M:return p=f.displayName||null,p!==null?p:U(f.type)||"Memo";case E:p=f._payload,f=f._init;try{return U(f(p))}catch{}}return null}function O(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(p);case 8:return p===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function B(f){var p=f,C=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,p.flags&4098&&(C=p.return),f=p.return;while(f)}return p.tag===3?C:null}function T(f){if(B(f)!==f)throw Error(o(188))}function z(f){var p=f.alternate;if(!p){if(p=B(f),p===null)throw Error(o(188));return p!==f?null:f}for(var C=f,P=p;;){var F=C.return;if(F===null)break;var G=F.alternate;if(G===null){if(P=F.return,P!==null){C=P;continue}break}if(F.child===G.child){for(G=F.child;G;){if(G===C)return T(F),f;if(G===P)return T(F),p;G=G.sibling}throw Error(o(188))}if(C.return!==P.return)C=F,P=G;else{for(var oe=!1,ve=F.child;ve;){if(ve===C){oe=!0,C=F,P=G;break}if(ve===P){oe=!0,P=F,C=G;break}ve=ve.sibling}if(!oe){for(ve=G.child;ve;){if(ve===C){oe=!0,C=G,P=F;break}if(ve===P){oe=!0,P=G,C=F;break}ve=ve.sibling}if(!oe)throw Error(o(189))}}if(C.alternate!==P)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?f:p}function W(f){return f=z(f),f!==null?K(f):null}function K(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=K(f);if(p!==null)return p;f=f.sibling}return null}function Z(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var p=Z(f);if(p!==null)return p}f=f.sibling}return null}var te=Array.isArray,ne=e.getPublicInstance,de=e.getRootHostContext,Y=e.getChildHostContext,ae=e.prepareForCommit,se=e.resetAfterCommit,he=e.createInstance,Me=e.appendInitialChild,ze=e.finalizeInitialChildren,ge=e.prepareUpdate,De=e.shouldSetTextContent,Xe=e.createTextInstance,Q=e.scheduleTimeout,ye=e.cancelTimeout,We=e.noTimeout,je=e.isPrimaryRenderer,Ve=e.supportsMutation,Je=e.supportsPersistence,$e=e.supportsHydration,le=e.getInstanceFromNode,At=e.preparePortalMount,Be=e.getCurrentEventPriority,He=e.detachDeletedInstance,ke=e.supportsMicrotasks,nt=e.scheduleMicrotask,Fe=e.supportsTestSelectors,ee=e.findFiberRoot,X=e.getBoundingRect,xe=e.getTextContent,Le=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,j=e.setupIntersectionObserver,N=e.appendChild,I=e.appendChildToContainer,J=e.commitTextUpdate,ie=e.commitMount,fe=e.commitUpdate,Ce=e.insertBefore,tt=e.insertInContainerBefore,Ze=e.removeChild,wt=e.removeChildFromContainer,gt=e.resetTextContent,bt=e.hideInstance,_e=e.hideTextInstance,dt=e.unhideInstance,Ue=e.unhideTextInstance,Ye=e.clearContainer,ft=e.cloneInstance,ut=e.createContainerChildSet,Ot=e.appendChildToContainerChildSet,kn=e.finalizeContainerChildren,Qn=e.replaceContainerChildren,un=e.cloneHiddenInstance,ci=e.cloneHiddenTextInstance,Fs=e.canHydrateInstance,kf=e.canHydrateTextInstance,Ff=e.canHydrateSuspenseInstance,Os=e.isSuspenseInstancePending,Bo=e.isSuspenseInstanceFallback,Of=e.registerSuspenseInstanceRetry,Sa=e.getNextHydratableSibling,zo=e.getFirstHydratableChild,If=e.getFirstHydratableChildWithinContainer,fu=e.getFirstHydratableChildWithinSuspenseInstance,Uf=e.hydrateInstance,Bf=e.hydrateTextInstance,_m=e.hydrateSuspenseInstance,ym=e.getNextHydratableInstanceAfterSuspenseInstance,zf=e.commitHydratedContainer,xm=e.commitHydratedSuspenseInstance,Sm=e.clearSuspenseBoundary,Em=e.clearSuspenseBoundaryFromContainer,$=e.shouldDeleteUnhydratedTailInstances,we=e.didNotMatchHydratedContainerTextInstance,Pe=e.didNotMatchHydratedTextInstance,Re;function Se(f){if(Re===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);Re=p&&p[1]||""}return`
`+Re+f}var Ke=!1;function at(f,p){if(!f||Ke)return"";Ke=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var P=h}Reflect.construct(f,[],p)}else{try{p.call()}catch(h){P=h}f.call(p.prototype)}else{try{throw Error()}catch(h){P=h}f()}}catch(h){if(h&&P&&typeof h.stack=="string"){for(var F=h.stack.split(`
`),G=P.stack.split(`
`),oe=F.length-1,ve=G.length-1;1<=oe&&0<=ve&&F[oe]!==G[ve];)ve--;for(;1<=oe&&0<=ve;oe--,ve--)if(F[oe]!==G[ve]){if(oe!==1||ve!==1)do if(oe--,ve--,0>ve||F[oe]!==G[ve]){var c=`
`+F[oe].replace(" at new "," at ");return f.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",f.displayName)),c}while(1<=oe&&0<=ve);break}}}finally{Ke=!1,Error.prepareStackTrace=C}return(f=f?f.displayName||f.name:"")?Se(f):""}var pt=Object.prototype.hasOwnProperty,vt=[],Rt=-1;function Mt(f){return{current:f}}function rt(f){0>Rt||(f.current=vt[Rt],vt[Rt]=null,Rt--)}function it(f,p){Rt++,vt[Rt]=f.current,f.current=p}var xt={},Ut=Mt(xt),Lt=Mt(!1),Tt=xt;function St(f,p){var C=f.type.contextTypes;if(!C)return xt;var P=f.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var F={},G;for(G in C)F[G]=p[G];return P&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=F),F}function en(f){return f=f.childContextTypes,f!=null}function Dt(){rt(Lt),rt(Ut)}function Fr(f,p,C){if(Ut.current!==xt)throw Error(o(168));it(Ut,p),it(Lt,C)}function co(f,p,C){var P=f.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return C;P=P.getChildContext();for(var F in P)if(!(F in p))throw Error(o(108,O(f)||"Unknown",F));return s({},C,P)}function _r(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||xt,Tt=Ut.current,it(Ut,f),it(Lt,Lt.current),!0}function Is(f,p,C){var P=f.stateNode;if(!P)throw Error(o(169));C?(f=co(f,p,Tt),P.__reactInternalMemoizedMergedChildContext=f,rt(Lt),rt(Ut),it(Ut,f)):rt(Lt),it(Lt,C)}var tn=Math.clz32?Math.clz32:Or,Fn=Math.log,Mi=Math.LN2;function Or(f){return f>>>=0,f===0?32:31-(Fn(f)/Mi|0)|0}var yr=64,Us=4194304;function Qr(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Ea(f,p){var C=f.pendingLanes;if(C===0)return 0;var P=0,F=f.suspendedLanes,G=f.pingedLanes,oe=C&268435455;if(oe!==0){var ve=oe&~F;ve!==0?P=Qr(ve):(G&=oe,G!==0&&(P=Qr(G)))}else oe=C&~F,oe!==0?P=Qr(oe):G!==0&&(P=Qr(G));if(P===0)return 0;if(p!==0&&p!==P&&!(p&F)&&(F=P&-P,G=p&-p,F>=G||F===16&&(G&4194240)!==0))return p;if(P&4&&(P|=C&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=P;0<p;)C=31-tn(p),F=1<<C,P|=f[C],p&=~F;return P}function Hf(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(f,p){for(var C=f.suspendedLanes,P=f.pingedLanes,F=f.expirationTimes,G=f.pendingLanes;0<G;){var oe=31-tn(G),ve=1<<oe,c=F[oe];c===-1?(!(ve&C)||ve&P)&&(F[oe]=Hf(ve,p)):c<=p&&(f.expiredLanes|=ve),G&=~ve}}function wm(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function jc(f){for(var p=[],C=0;31>C;C++)p.push(f);return p}function hu(f,p,C){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-tn(p),f[p]=C}function Mm(f,p){var C=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var P=f.eventTimes;for(f=f.expirationTimes;0<C;){var F=31-tn(C),G=1<<F;p[F]=0,P[F]=-1,f[F]=-1,C&=~G}}function dl(f,p){var C=f.entangledLanes|=p;for(f=f.entanglements;C;){var P=31-tn(C),F=1<<P;F&p|f[P]&p&&(f[P]|=p),C&=~F}}var dn=0;function Gf(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var on=i.unstable_scheduleCallback,Cm=i.unstable_cancelCallback,Am=i.unstable_shouldYield,K1=i.unstable_requestPaint,Ar=i.unstable_now,bm=i.unstable_ImmediatePriority,br=i.unstable_UserBlockingPriority,Xc=i.unstable_NormalPriority,WE=i.unstable_IdlePriority,pu=null,fo=null;function Vf(f){if(fo&&typeof fo.onCommitFiberRoot=="function")try{fo.onCommitFiberRoot(pu,f,void 0,(f.current.flags&128)===128)}catch{}}function ho(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var po=typeof Object.is=="function"?Object.is:ho,Ho=null,Ci=!1,Bs=!1;function Yc(f){Ho===null?Ho=[f]:Ho.push(f)}function Pm(f){Ci=!0,Yc(f)}function zs(){if(!Bs&&Ho!==null){Bs=!0;var f=0,p=dn;try{var C=Ho;for(dn=1;f<C.length;f++){var P=C[f];do P=P(!0);while(P!==null)}Ho=null,Ci=!1}catch(F){throw Ho!==null&&(Ho=Ho.slice(f+1)),on(bm,zs),F}finally{dn=p,Bs=!1}}return null}var jE=a.ReactCurrentBatchConfig;function Yi(f,p){if(po(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var C=Object.keys(f),P=Object.keys(p);if(C.length!==P.length)return!1;for(P=0;P<C.length;P++){var F=C[P];if(!pt.call(p,F)||!po(f[F],p[F]))return!1}return!0}function mu(f){switch(f.tag){case 5:return Se(f.type);case 16:return Se("Lazy");case 13:return Se("Suspense");case 19:return Se("SuspenseList");case 0:case 2:case 15:return f=at(f.type,!1),f;case 11:return f=at(f.type.render,!1),f;case 1:return f=at(f.type,!0),f;default:return""}}function Jr(f,p){if(f&&f.defaultProps){p=s({},p),f=f.defaultProps;for(var C in f)p[C]===void 0&&(p[C]=f[C]);return p}return p}var fl=Mt(null),hl=null,Ir=null,Ai=null;function Go(){Ai=Ir=hl=null}function mo(f,p,C){je?(it(fl,p._currentValue),p._currentValue=C):(it(fl,p._currentValue2),p._currentValue2=C)}function Hs(f){var p=fl.current;rt(fl),je?f._currentValue=p:f._currentValue2=p}function Vo(f,p,C){for(;f!==null;){var P=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),f===C)break;f=f.return}}function pl(f,p){hl=f,Ai=Ir=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&p&&(Ni=!0),f.firstContext=null)}function bi(f){var p=je?f._currentValue:f._currentValue2;if(Ai!==f)if(f={context:f,memoizedValue:p,next:null},Ir===null){if(hl===null)throw Error(o(308));Ir=f,hl.dependencies={lanes:0,firstContext:f}}else Ir=Ir.next=f;return p}var hs=null,dr=!1;function Pi(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tn(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function qi(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function Pr(f,p){var C=f.updateQueue;C!==null&&(C=C.shared,Yn!==null&&f.mode&1&&!(Gt&2)?(f=C.interleaved,f===null?(p.next=p,hs===null?hs=[C]:hs.push(C)):(p.next=f.next,f.next=p),C.interleaved=p):(f=C.pending,f===null?p.next=p:(p.next=f.next,f.next=p),C.pending=p))}function qc(f,p,C){if(p=p.updateQueue,p!==null&&(p=p.shared,(C&4194240)!==0)){var P=p.lanes;P&=f.pendingLanes,C|=P,p.lanes=C,dl(f,C)}}function Rm(f,p){var C=f.updateQueue,P=f.alternate;if(P!==null&&(P=P.updateQueue,C===P)){var F=null,G=null;if(C=C.firstBaseUpdate,C!==null){do{var oe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};G===null?F=G=oe:G=G.next=oe,C=C.next}while(C!==null);G===null?F=G=p:G=G.next=p}else F=G=p;C={baseState:P.baseState,firstBaseUpdate:F,lastBaseUpdate:G,shared:P.shared,effects:P.effects},f.updateQueue=C;return}f=C.lastBaseUpdate,f===null?C.firstBaseUpdate=p:f.next=p,C.lastBaseUpdate=p}function gu(f,p,C,P){var F=f.updateQueue;dr=!1;var G=F.firstBaseUpdate,oe=F.lastBaseUpdate,ve=F.shared.pending;if(ve!==null){F.shared.pending=null;var c=ve,h=c.next;c.next=null,oe===null?G=h:oe.next=h,oe=c;var w=f.alternate;w!==null&&(w=w.updateQueue,ve=w.lastBaseUpdate,ve!==oe&&(ve===null?w.firstBaseUpdate=h:ve.next=h,w.lastBaseUpdate=c))}if(G!==null){var b=F.baseState;oe=0,w=h=c=null,ve=G;do{var R=ve.lane,H=ve.eventTime;if((P&R)===R){w!==null&&(w=w.next={eventTime:H,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var q=f,me=ve;switch(R=p,H=C,me.tag){case 1:if(q=me.payload,typeof q=="function"){b=q.call(H,b,R);break e}b=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=me.payload,R=typeof q=="function"?q.call(H,b,R):q,R==null)break e;b=s({},b,R);break e;case 2:dr=!0}}ve.callback!==null&&ve.lane!==0&&(f.flags|=64,R=F.effects,R===null?F.effects=[ve]:R.push(ve))}else H={eventTime:H,lane:R,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},w===null?(h=w=H,c=b):w=w.next=H,oe|=R;if(ve=ve.next,ve===null){if(ve=F.shared.pending,ve===null)break;R=ve,ve=R.next,R.next=null,F.lastBaseUpdate=R,F.shared.pending=null}}while(!0);if(w===null&&(c=b),F.baseState=c,F.firstBaseUpdate=h,F.lastBaseUpdate=w,p=F.shared.interleaved,p!==null){F=p;do oe|=F.lane,F=F.next;while(F!==p)}else G===null&&(F.shared.lanes=0);Bt|=oe,f.lanes=oe,f.memoizedState=b}}function Wf(f,p,C){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var P=f[p],F=P.callback;if(F!==null){if(P.callback=null,P=C,typeof F!="function")throw Error(o(191,F));F.call(P)}}}var Tm=new r.Component().refs;function vu(f,p,C,P){p=f.memoizedState,C=C(P,p),C=C==null?p:s({},p,C),f.memoizedState=C,f.lanes===0&&(f.updateQueue.baseState=C)}var Kc={isMounted:function(f){return(f=f._reactInternals)?B(f)===f:!1},enqueueSetState:function(f,p,C){f=f._reactInternals;var P=Gr(),F=mi(f),G=qi(P,F);G.payload=p,C!=null&&(G.callback=C),Pr(f,G),p=gi(f,F,P),p!==null&&qc(p,f,F)},enqueueReplaceState:function(f,p,C){f=f._reactInternals;var P=Gr(),F=mi(f),G=qi(P,F);G.tag=1,G.payload=p,C!=null&&(G.callback=C),Pr(f,G),p=gi(f,F,P),p!==null&&qc(p,f,F)},enqueueForceUpdate:function(f,p){f=f._reactInternals;var C=Gr(),P=mi(f),F=qi(C,P);F.tag=2,p!=null&&(F.callback=p),Pr(f,F),p=gi(f,P,C),p!==null&&qc(p,f,P)}};function ml(f,p,C,P,F,G,oe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(P,G,oe):p.prototype&&p.prototype.isPureReactComponent?!Yi(C,P)||!Yi(F,G):!0}function jf(f,p,C){var P=!1,F=xt,G=p.contextType;return typeof G=="object"&&G!==null?G=bi(G):(F=en(p)?Tt:Ut.current,P=p.contextTypes,G=(P=P!=null)?St(f,F):xt),p=new p(C,G),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kc,f.stateNode=p,p._reactInternals=f,P&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=F,f.__reactInternalMemoizedMaskedChildContext=G),p}function $1(f,p,C,P){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(C,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(C,P),p.state!==f&&Kc.enqueueReplaceState(p,p.state,null)}function _u(f,p,C,P){var F=f.stateNode;F.props=C,F.state=f.memoizedState,F.refs=Tm,Pi(f);var G=p.contextType;typeof G=="object"&&G!==null?F.context=bi(G):(G=en(p)?Tt:Ut.current,F.context=St(f,G)),F.state=f.memoizedState,G=p.getDerivedStateFromProps,typeof G=="function"&&(vu(f,p,G,C),F.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(p=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),p!==F.state&&Kc.enqueueReplaceState(F,F.state,null),gu(f,C,F,P),F.state=f.memoizedState),typeof F.componentDidMount=="function"&&(f.flags|=4194308)}var yu=[],go=0,gl=null,$c=0,Ki=[],Ur=0,wa=null,ps=1,ms="";function gs(f,p){yu[go++]=$c,yu[go++]=gl,gl=f,$c=p}function Xf(f,p,C){Ki[Ur++]=ps,Ki[Ur++]=ms,Ki[Ur++]=wa,wa=f;var P=ps;f=ms;var F=32-tn(P)-1;P&=~(1<<F),C+=1;var G=32-tn(p)+F;if(30<G){var oe=F-F%5;G=(P&(1<<oe)-1).toString(32),P>>=oe,F-=oe,ps=1<<32-tn(p)+F|C<<F|P,ms=G+f}else ps=1<<G|C<<F|P,ms=f}function Zc(f){f.return!==null&&(gs(f,1),Xf(f,1,0))}function Yf(f){for(;f===gl;)gl=yu[--go],yu[go]=null,$c=yu[--go],yu[go]=null;for(;f===wa;)wa=Ki[--Ur],Ki[Ur]=null,ms=Ki[--Ur],Ki[Ur]=null,ps=Ki[--Ur],Ki[Ur]=null}var di=null,fi=null,En=!1,ei=!1,Br=null;function qf(f,p){var C=rn(5,null,null,0);C.elementType="DELETED",C.stateNode=p,C.return=f,p=f.deletions,p===null?(f.deletions=[C],f.flags|=16):p.push(C)}function Lm(f,p){switch(f.tag){case 5:return p=Fs(p,f.type,f.pendingProps),p!==null?(f.stateNode=p,di=f,fi=zo(p),!0):!1;case 6:return p=kf(p,f.pendingProps),p!==null?(f.stateNode=p,di=f,fi=null,!0):!1;case 13:if(p=Ff(p),p!==null){var C=wa!==null?{id:ps,overflow:ms}:null;return f.memoizedState={dehydrated:p,treeContext:C,retryLane:1073741824},C=rn(18,null,null,0),C.stateNode=p,C.return=f,f.child=C,di=f,fi=null,!0}return!1;default:return!1}}function vs(f){return(f.mode&1)!==0&&(f.flags&128)===0}function vo(f){if(En){var p=fi;if(p){var C=p;if(!Lm(f,p)){if(vs(f))throw Error(o(418));p=Sa(C);var P=di;p&&Lm(f,p)?qf(P,C):(f.flags=f.flags&-4097|2,En=!1,di=f)}}else{if(vs(f))throw Error(o(418));f.flags=f.flags&-4097|2,En=!1,di=f}}}function Kf(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;di=f}function xu(f){if(!$e||f!==di)return!1;if(!En)return Kf(f),En=!0,!1;if(f.tag!==3&&(f.tag!==5||$(f.type)&&!De(f.type,f.memoizedProps))){var p=fi;if(p){if(vs(f)){for(f=fi;f;)f=Sa(f);throw Error(o(418))}for(;p;)qf(f,p),p=Sa(p)}}if(Kf(f),f.tag===13){if(!$e)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));fi=ym(f)}else fi=di?Sa(f.stateNode):null;return!0}function Ri(){$e&&(fi=di=null,ei=En=!1)}function _o(f){Br===null?Br=[f]:Br.push(f)}function Ma(f,p,C){if(f=C.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var P=C.stateNode}if(!P)throw Error(o(147,f));var F=P,G=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===G?p.ref:(p=function(oe){var ve=F.refs;ve===Tm&&(ve=F.refs={}),oe===null?delete ve[G]:ve[G]=oe},p._stringRef=G,p)}if(typeof f!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,f))}return f}function Qc(f,p){throw f=Object.prototype.toString.call(p),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function Jc(f){var p=f._init;return p(f._payload)}function Nm(f){function p(ce,ue){if(f){var Ee=ce.deletions;Ee===null?(ce.deletions=[ue],ce.flags|=16):Ee.push(ue)}}function C(ce,ue){if(!f)return null;for(;ue!==null;)p(ce,ue),ue=ue.sibling;return null}function P(ce,ue){for(ce=new Map;ue!==null;)ue.key!==null?ce.set(ue.key,ue):ce.set(ue.index,ue),ue=ue.sibling;return ce}function F(ce,ue){return ce=ka(ce,ue),ce.index=0,ce.sibling=null,ce}function G(ce,ue,Ee){return ce.index=Ee,f?(Ee=ce.alternate,Ee!==null?(Ee=Ee.index,Ee<ue?(ce.flags|=2,ue):Ee):(ce.flags|=2,ue)):(ce.flags|=1048576,ue)}function oe(ce){return f&&ce.alternate===null&&(ce.flags|=2),ce}function ve(ce,ue,Ee,Te){return ue===null||ue.tag!==6?(ue=hg(Ee,ce.mode,Te),ue.return=ce,ue):(ue=F(ue,Ee),ue.return=ce,ue)}function c(ce,ue,Ee,Te){var st=Ee.type;return st===d?w(ce,ue,Ee.props.children,Te,Ee.key):ue!==null&&(ue.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===E&&Jc(st)===ue.type)?(Te=F(ue,Ee.props),Te.ref=Ma(ce,ue,Ee),Te.return=ce,Te):(Te=Sh(Ee.type,Ee.key,Ee.props,null,ce.mode,Te),Te.ref=Ma(ce,ue,Ee),Te.return=ce,Te)}function h(ce,ue,Ee,Te){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Ee.containerInfo||ue.stateNode.implementation!==Ee.implementation?(ue=Fi(Ee,ce.mode,Te),ue.return=ce,ue):(ue=F(ue,Ee.children||[]),ue.return=ce,ue)}function w(ce,ue,Ee,Te,st){return ue===null||ue.tag!==7?(ue=Fa(Ee,ce.mode,Te,st),ue.return=ce,ue):(ue=F(ue,Ee),ue.return=ce,ue)}function b(ce,ue,Ee){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=hg(""+ue,ce.mode,Ee),ue.return=ce,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return Ee=Sh(ue.type,ue.key,ue.props,null,ce.mode,Ee),Ee.ref=Ma(ce,null,ue),Ee.return=ce,Ee;case u:return ue=Fi(ue,ce.mode,Ee),ue.return=ce,ue;case E:var Te=ue._init;return b(ce,Te(ue._payload),Ee)}if(te(ue)||D(ue))return ue=Fa(ue,ce.mode,Ee,null),ue.return=ce,ue;Qc(ce,ue)}return null}function R(ce,ue,Ee,Te){var st=ue!==null?ue.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return st!==null?null:ve(ce,ue,""+Ee,Te);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return Ee.key===st?c(ce,ue,Ee,Te):null;case u:return Ee.key===st?h(ce,ue,Ee,Te):null;case E:return st=Ee._init,R(ce,ue,st(Ee._payload),Te)}if(te(Ee)||D(Ee))return st!==null?null:w(ce,ue,Ee,Te,null);Qc(ce,Ee)}return null}function H(ce,ue,Ee,Te,st){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ce=ce.get(Ee)||null,ve(ue,ce,""+Te,st);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return ce=ce.get(Te.key===null?Ee:Te.key)||null,c(ue,ce,Te,st);case u:return ce=ce.get(Te.key===null?Ee:Te.key)||null,h(ue,ce,Te,st);case E:var yt=Te._init;return H(ce,ue,Ee,yt(Te._payload),st)}if(te(Te)||D(Te))return ce=ce.get(Ee)||null,w(ue,ce,Te,st,null);Qc(ue,Te)}return null}function q(ce,ue,Ee,Te){for(var st=null,yt=null,Pt=ue,Xt=ue=0,Ae=null;Pt!==null&&Xt<Ee.length;Xt++){Pt.index>Xt?(Ae=Pt,Pt=null):Ae=Pt.sibling;var pe=R(ce,Pt,Ee[Xt],Te);if(pe===null){Pt===null&&(Pt=Ae);break}f&&Pt&&pe.alternate===null&&p(ce,Pt),ue=G(pe,ue,Xt),yt===null?st=pe:yt.sibling=pe,yt=pe,Pt=Ae}if(Xt===Ee.length)return C(ce,Pt),En&&gs(ce,Xt),st;if(Pt===null){for(;Xt<Ee.length;Xt++)Pt=b(ce,Ee[Xt],Te),Pt!==null&&(ue=G(Pt,ue,Xt),yt===null?st=Pt:yt.sibling=Pt,yt=Pt);return En&&gs(ce,Xt),st}for(Pt=P(ce,Pt);Xt<Ee.length;Xt++)Ae=H(Pt,ce,Xt,Ee[Xt],Te),Ae!==null&&(f&&Ae.alternate!==null&&Pt.delete(Ae.key===null?Xt:Ae.key),ue=G(Ae,ue,Xt),yt===null?st=Ae:yt.sibling=Ae,yt=Ae);return f&&Pt.forEach(function(Ne){return p(ce,Ne)}),En&&gs(ce,Xt),st}function me(ce,ue,Ee,Te){var st=D(Ee);if(typeof st!="function")throw Error(o(150));if(Ee=st.call(Ee),Ee==null)throw Error(o(151));for(var yt=st=null,Pt=ue,Xt=ue=0,Ae=null,pe=Ee.next();Pt!==null&&!pe.done;Xt++,pe=Ee.next()){Pt.index>Xt?(Ae=Pt,Pt=null):Ae=Pt.sibling;var Ne=R(ce,Pt,pe.value,Te);if(Ne===null){Pt===null&&(Pt=Ae);break}f&&Pt&&Ne.alternate===null&&p(ce,Pt),ue=G(Ne,ue,Xt),yt===null?st=Ne:yt.sibling=Ne,yt=Ne,Pt=Ae}if(pe.done)return C(ce,Pt),En&&gs(ce,Xt),st;if(Pt===null){for(;!pe.done;Xt++,pe=Ee.next())pe=b(ce,pe.value,Te),pe!==null&&(ue=G(pe,ue,Xt),yt===null?st=pe:yt.sibling=pe,yt=pe);return En&&gs(ce,Xt),st}for(Pt=P(ce,Pt);!pe.done;Xt++,pe=Ee.next())pe=H(Pt,ce,Xt,pe.value,Te),pe!==null&&(f&&pe.alternate!==null&&Pt.delete(pe.key===null?Xt:pe.key),ue=G(pe,ue,Xt),yt===null?st=pe:yt.sibling=pe,yt=pe);return f&&Pt.forEach(function(ht){return p(ce,ht)}),En&&gs(ce,Xt),st}function be(ce,ue,Ee,Te){if(typeof Ee=="object"&&Ee!==null&&Ee.type===d&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:e:{for(var st=Ee.key,yt=ue;yt!==null;){if(yt.key===st){if(st=Ee.type,st===d){if(yt.tag===7){C(ce,yt.sibling),ue=F(yt,Ee.props.children),ue.return=ce,ce=ue;break e}}else if(yt.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===E&&Jc(st)===yt.type){C(ce,yt.sibling),ue=F(yt,Ee.props),ue.ref=Ma(ce,yt,Ee),ue.return=ce,ce=ue;break e}C(ce,yt);break}else p(ce,yt);yt=yt.sibling}Ee.type===d?(ue=Fa(Ee.props.children,ce.mode,Te,Ee.key),ue.return=ce,ce=ue):(Te=Sh(Ee.type,Ee.key,Ee.props,null,ce.mode,Te),Te.ref=Ma(ce,ue,Ee),Te.return=ce,ce=Te)}return oe(ce);case u:e:{for(yt=Ee.key;ue!==null;){if(ue.key===yt)if(ue.tag===4&&ue.stateNode.containerInfo===Ee.containerInfo&&ue.stateNode.implementation===Ee.implementation){C(ce,ue.sibling),ue=F(ue,Ee.children||[]),ue.return=ce,ce=ue;break e}else{C(ce,ue);break}else p(ce,ue);ue=ue.sibling}ue=Fi(Ee,ce.mode,Te),ue.return=ce,ce=ue}return oe(ce);case E:return yt=Ee._init,be(ce,ue,yt(Ee._payload),Te)}if(te(Ee))return q(ce,ue,Ee,Te);if(D(Ee))return me(ce,ue,Ee,Te);Qc(ce,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ue!==null&&ue.tag===6?(C(ce,ue.sibling),ue=F(ue,Ee),ue.return=ce,ce=ue):(C(ce,ue),ue=hg(Ee,ce.mode,Te),ue.return=ce,ce=ue),oe(ce)):C(ce,ue)}return be}var yo=Nm(!0),$i=Nm(!1),Wo={},zr=Mt(Wo),Ti=Mt(Wo),Ca=Mt(Wo);function hi(f){if(f===Wo)throw Error(o(174));return f}function $f(f,p){it(Ca,p),it(Ti,f),it(zr,Wo),f=de(p),rt(zr),it(zr,f)}function Aa(){rt(zr),rt(Ti),rt(Ca)}function On(f){var p=hi(Ca.current),C=hi(zr.current);p=Y(C,f.type,p),C!==p&&(it(Ti,f),it(zr,p))}function Su(f){Ti.current===f&&(rt(zr),rt(Ti))}var Ln=Mt(0);function Eu(f){for(var p=f;p!==null;){if(p.tag===13){var C=p.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Os(C)||Bo(C)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var wu=[];function ed(){for(var f=0;f<wu.length;f++){var p=wu[f];je?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}wu.length=0}var xo=a.ReactCurrentDispatcher,an=a.ReactCurrentBatchConfig,In=0,qt=null,xr=null,jn=null,ba=!1,td=!1,fr=0,Dm=0;function Rr(){throw Error(o(321))}function nd(f,p){if(p===null)return!1;for(var C=0;C<p.length&&C<f.length;C++)if(!po(f[C],p[C]))return!1;return!0}function _s(f,p,C,P,F,G){if(In=G,qt=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,xo.current=f===null||f.memoizedState===null?KE:$E,f=C(P,F),td){G=0;do{if(td=!1,fr=0,25<=G)throw Error(o(301));G+=1,jn=xr=null,p.updateQueue=null,xo.current=Gs,f=C(P,F)}while(td)}if(xo.current=Jf,p=xr!==null&&xr.next!==null,In=0,jn=xr=qt=null,ba=!1,p)throw Error(o(300));return f}function Li(){var f=fr!==0;return fr=0,f}function Zi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?qt.memoizedState=jn=f:jn=jn.next=f,jn}function ys(){if(xr===null){var f=qt.alternate;f=f!==null?f.memoizedState:null}else f=xr.next;var p=jn===null?qt.memoizedState:jn.next;if(p!==null)jn=p,xr=f;else{if(f===null)throw Error(o(310));xr=f,f={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},jn===null?qt.memoizedState=jn=f:jn=jn.next=f}return jn}function jo(f,p){return typeof p=="function"?p(f):p}function rd(f){var p=ys(),C=p.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=f;var P=xr,F=P.baseQueue,G=C.pending;if(G!==null){if(F!==null){var oe=F.next;F.next=G.next,G.next=oe}P.baseQueue=F=G,C.pending=null}if(F!==null){G=F.next,P=P.baseState;var ve=oe=null,c=null,h=G;do{var w=h.lane;if((In&w)===w)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),P=h.hasEagerState?h.eagerState:f(P,h.action);else{var b={lane:w,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(ve=c=b,oe=P):c=c.next=b,qt.lanes|=w,Bt|=w}h=h.next}while(h!==null&&h!==G);c===null?oe=P:c.next=ve,po(P,p.memoizedState)||(Ni=!0),p.memoizedState=P,p.baseState=oe,p.baseQueue=c,C.lastRenderedState=P}if(f=C.interleaved,f!==null){F=f;do G=F.lane,qt.lanes|=G,Bt|=G,F=F.next;while(F!==f)}else F===null&&(C.lanes=0);return[p.memoizedState,C.dispatch]}function id(f){var p=ys(),C=p.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=f;var P=C.dispatch,F=C.pending,G=p.memoizedState;if(F!==null){C.pending=null;var oe=F=F.next;do G=f(G,oe.action),oe=oe.next;while(oe!==F);po(G,p.memoizedState)||(Ni=!0),p.memoizedState=G,p.baseQueue===null&&(p.baseState=G),C.lastRenderedState=G}return[G,P]}function km(){}function Fm(f,p){var C=qt,P=ys(),F=p(),G=!po(P.memoizedState,F);if(G&&(P.memoizedState=F,Ni=!0),P=P.queue,Cu(Um.bind(null,C,P,f),[f]),P.getSnapshot!==p||G||jn!==null&&jn.memoizedState.tag&1){if(C.flags|=2048,Mu(9,Im.bind(null,C,P,F,p),void 0,null),Yn===null)throw Error(o(349));In&30||Om(C,p,F)}return F}function Om(f,p,C){f.flags|=16384,f={getSnapshot:p,value:C},p=qt.updateQueue,p===null?(p={lastEffect:null,stores:null},qt.updateQueue=p,p.stores=[f]):(C=p.stores,C===null?p.stores=[f]:C.push(f))}function Im(f,p,C,P){p.value=C,p.getSnapshot=P,Bm(p)&&gi(f,1,-1)}function Um(f,p,C){return C(function(){Bm(p)&&gi(f,1,-1)})}function Bm(f){var p=f.getSnapshot;f=f.value;try{var C=p();return!po(f,C)}catch{return!0}}function vl(f){var p=Zi();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:f},p.queue=f,f=f.dispatch=qE.bind(null,qt,f),[p.memoizedState,f]}function Mu(f,p,C,P){return f={tag:f,create:p,destroy:C,deps:P,next:null},p=qt.updateQueue,p===null?(p={lastEffect:null,stores:null},qt.updateQueue=p,p.lastEffect=f.next=f):(C=p.lastEffect,C===null?p.lastEffect=f.next=f:(P=C.next,C.next=f,f.next=P,p.lastEffect=f)),f}function sd(){return ys().memoizedState}function _l(f,p,C,P){var F=Zi();qt.flags|=f,F.memoizedState=Mu(1|p,C,void 0,P===void 0?null:P)}function od(f,p,C,P){var F=ys();P=P===void 0?null:P;var G=void 0;if(xr!==null){var oe=xr.memoizedState;if(G=oe.destroy,P!==null&&nd(P,oe.deps)){F.memoizedState=Mu(p,C,G,P);return}}qt.flags|=f,F.memoizedState=Mu(1|p,C,G,P)}function ad(f,p){return _l(8390656,8,f,p)}function Cu(f,p){return od(2048,8,f,p)}function zm(f,p){return od(4,2,f,p)}function Hm(f,p){return od(4,4,f,p)}function Gm(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Zf(f,p,C){return C=C!=null?C.concat([f]):null,od(4,4,Gm.bind(null,p,f),C)}function Qf(){}function Vm(f,p){var C=ys();p=p===void 0?null:p;var P=C.memoizedState;return P!==null&&p!==null&&nd(p,P[1])?P[0]:(C.memoizedState=[f,p],f)}function Wm(f,p){var C=ys();p=p===void 0?null:p;var P=C.memoizedState;return P!==null&&p!==null&&nd(p,P[1])?P[0]:(f=f(),C.memoizedState=[f,p],f)}function XE(f,p){var C=dn;dn=C!==0&&4>C?C:4,f(!0);var P=an.transition;an.transition={};try{f(!1),p()}finally{dn=C,an.transition=P}}function jm(){return ys().memoizedState}function YE(f,p,C){var P=mi(f);C={lane:P,action:C,hasEagerState:!1,eagerState:null,next:null},Xm(f)?Ym(p,C):(qm(f,p,C),C=Gr(),f=gi(f,P,C),f!==null&&ld(f,p,P))}function qE(f,p,C){var P=mi(f),F={lane:P,action:C,hasEagerState:!1,eagerState:null,next:null};if(Xm(f))Ym(p,F);else{qm(f,p,F);var G=f.alternate;if(f.lanes===0&&(G===null||G.lanes===0)&&(G=p.lastRenderedReducer,G!==null))try{var oe=p.lastRenderedState,ve=G(oe,C);if(F.hasEagerState=!0,F.eagerState=ve,po(ve,oe))return}catch{}finally{}C=Gr(),f=gi(f,P,C),f!==null&&ld(f,p,P)}}function Xm(f){var p=f.alternate;return f===qt||p!==null&&p===qt}function Ym(f,p){td=ba=!0;var C=f.pending;C===null?p.next=p:(p.next=C.next,C.next=p),f.pending=p}function qm(f,p,C){Yn!==null&&f.mode&1&&!(Gt&2)?(f=p.interleaved,f===null?(C.next=C,hs===null?hs=[p]:hs.push(p)):(C.next=f.next,f.next=C),p.interleaved=C):(f=p.pending,f===null?C.next=C:(C.next=f.next,f.next=C),p.pending=C)}function ld(f,p,C){if(C&4194240){var P=p.lanes;P&=f.pendingLanes,C|=P,p.lanes=C,dl(f,C)}}var Jf={readContext:bi,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},KE={readContext:bi,useCallback:function(f,p){return Zi().memoizedState=[f,p===void 0?null:p],f},useContext:bi,useEffect:ad,useImperativeHandle:function(f,p,C){return C=C!=null?C.concat([f]):null,_l(4194308,4,Gm.bind(null,p,f),C)},useLayoutEffect:function(f,p){return _l(4194308,4,f,p)},useInsertionEffect:function(f,p){return _l(4,2,f,p)},useMemo:function(f,p){var C=Zi();return p=p===void 0?null:p,f=f(),C.memoizedState=[f,p],f},useReducer:function(f,p,C){var P=Zi();return p=C!==void 0?C(p):p,P.memoizedState=P.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},P.queue=f,f=f.dispatch=YE.bind(null,qt,f),[P.memoizedState,f]},useRef:function(f){var p=Zi();return f={current:f},p.memoizedState=f},useState:vl,useDebugValue:Qf,useDeferredValue:function(f){var p=vl(f),C=p[0],P=p[1];return ad(function(){var F=an.transition;an.transition={};try{P(f)}finally{an.transition=F}},[f]),C},useTransition:function(){var f=vl(!1),p=f[0];return f=XE.bind(null,f[1]),Zi().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,C){var P=qt,F=Zi();if(En){if(C===void 0)throw Error(o(407));C=C()}else{if(C=p(),Yn===null)throw Error(o(349));In&30||Om(P,p,C)}F.memoizedState=C;var G={value:C,getSnapshot:p};return F.queue=G,ad(Um.bind(null,P,G,f),[f]),P.flags|=2048,Mu(9,Im.bind(null,P,G,C,p),void 0,null),C},useId:function(){var f=Zi(),p=Yn.identifierPrefix;if(En){var C=ms,P=ps;C=(P&~(1<<32-tn(P)-1)).toString(32)+C,p=":"+p+"R"+C,C=fr++,0<C&&(p+="H"+C.toString(32)),p+=":"}else C=Dm++,p=":"+p+"r"+C.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},$E={readContext:bi,useCallback:Vm,useContext:bi,useEffect:Cu,useImperativeHandle:Zf,useInsertionEffect:zm,useLayoutEffect:Hm,useMemo:Wm,useReducer:rd,useRef:sd,useState:function(){return rd(jo)},useDebugValue:Qf,useDeferredValue:function(f){var p=rd(jo),C=p[0],P=p[1];return Cu(function(){var F=an.transition;an.transition={};try{P(f)}finally{an.transition=F}},[f]),C},useTransition:function(){var f=rd(jo)[0],p=ys().memoizedState;return[f,p]},useMutableSource:km,useSyncExternalStore:Fm,useId:jm,unstable_isNewReconciler:!1},Gs={readContext:bi,useCallback:Vm,useContext:bi,useEffect:Cu,useImperativeHandle:Zf,useInsertionEffect:zm,useLayoutEffect:Hm,useMemo:Wm,useReducer:id,useRef:sd,useState:function(){return id(jo)},useDebugValue:Qf,useDeferredValue:function(f){var p=id(jo),C=p[0],P=p[1];return Cu(function(){var F=an.transition;an.transition={};try{P(f)}finally{an.transition=F}},[f]),C},useTransition:function(){var f=id(jo)[0],p=ys().memoizedState;return[f,p]},useMutableSource:km,useSyncExternalStore:Fm,useId:jm,unstable_isNewReconciler:!1};function ud(f,p){try{var C="",P=p;do C+=mu(P),P=P.return;while(P);var F=C}catch(G){F=`
Error generating stack: `+G.message+`
`+G.stack}return{value:f,source:p,stack:F}}function Au(f,p){try{console.error(p.value)}catch(C){setTimeout(function(){throw C})}}var Z1=typeof WeakMap=="function"?WeakMap:Map;function Km(f,p,C){C=qi(-1,C),C.tag=3,C.payload={element:null};var P=p.value;return C.callback=function(){Co||(Co=!0,Fu=P),Au(f,p)},C}function $m(f,p,C){C=qi(-1,C),C.tag=3;var P=f.type.getDerivedStateFromError;if(typeof P=="function"){var F=p.value;C.payload=function(){return P(F)},C.callback=function(){Au(f,p)}}var G=f.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(C.callback=function(){Au(f,p),typeof P!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),C}function eh(f,p,C){var P=f.pingCache;if(P===null){P=f.pingCache=new Z1;var F=new Set;P.set(p,F)}else F=P.get(p),F===void 0&&(F=new Set,P.set(p,F));F.has(C)||(F.add(C),f=ZE.bind(null,f,p,C),p.then(f,f))}function yl(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function th(f,p,C,P,F){return f.mode&1?(f.flags|=65536,f.lanes=F,f):(f===p?f.flags|=65536:(f.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(p=qi(-1,1),p.tag=2,Pr(C,p))),C.lanes|=1),f)}function xs(f){f.flags|=4}function Q1(f,p){if(f!==null&&f.child===p.child)return!0;if(p.flags&16)return!1;for(f=p.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var bu,Pu,cd,dd;if(Ve)bu=function(f,p){for(var C=p.child;C!==null;){if(C.tag===5||C.tag===6)Me(f,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Pu=function(){},cd=function(f,p,C,P,F){if(f=f.memoizedProps,f!==P){var G=p.stateNode,oe=hi(zr.current);C=ge(G,C,f,P,F,oe),(p.updateQueue=C)&&xs(p)}},dd=function(f,p,C,P){C!==P&&xs(p)};else if(Je){bu=function(f,p,C,P){for(var F=p.child;F!==null;){if(F.tag===5){var G=F.stateNode;C&&P&&(G=un(G,F.type,F.memoizedProps,F)),Me(f,G)}else if(F.tag===6)G=F.stateNode,C&&P&&(G=ci(G,F.memoizedProps,F)),Me(f,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),bu(f,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===p)break;for(;F.sibling===null;){if(F.return===null||F.return===p)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};var Zm=function(f,p,C,P){for(var F=p.child;F!==null;){if(F.tag===5){var G=F.stateNode;C&&P&&(G=un(G,F.type,F.memoizedProps,F)),Ot(f,G)}else if(F.tag===6)G=F.stateNode,C&&P&&(G=ci(G,F.memoizedProps,F)),Ot(f,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),Zm(f,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===p)break;for(;F.sibling===null;){if(F.return===null||F.return===p)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};Pu=function(f,p){var C=p.stateNode;if(!Q1(f,p)){f=C.containerInfo;var P=ut(f);Zm(P,p,!1,!1),C.pendingChildren=P,xs(p),kn(f,P)}},cd=function(f,p,C,P,F){var G=f.stateNode,oe=f.memoizedProps;if((f=Q1(f,p))&&oe===P)p.stateNode=G;else{var ve=p.stateNode,c=hi(zr.current),h=null;oe!==P&&(h=ge(ve,C,oe,P,F,c)),f&&h===null?p.stateNode=G:(G=ft(G,h,C,oe,P,p,f,ve),ze(G,C,P,F,c)&&xs(p),p.stateNode=G,f?xs(p):bu(G,p,!1,!1))}},dd=function(f,p,C,P){C!==P?(f=hi(Ca.current),C=hi(zr.current),p.stateNode=Xe(P,f,C,p),xs(p)):p.stateNode=f.stateNode}}else Pu=function(){},cd=function(){},dd=function(){};function fd(f,p){if(!En)switch(f.tailMode){case"hidden":p=f.tail;for(var C=null;p!==null;)p.alternate!==null&&(C=p),p=p.sibling;C===null?f.tail=null:C.sibling=null;break;case"collapsed":C=f.tail;for(var P=null;C!==null;)C.alternate!==null&&(P=C),C=C.sibling;P===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:P.sibling=null}}function wn(f){var p=f.alternate!==null&&f.alternate.child===f.child,C=0,P=0;if(p)for(var F=f.child;F!==null;)C|=F.lanes|F.childLanes,P|=F.subtreeFlags&14680064,P|=F.flags&14680064,F.return=f,F=F.sibling;else for(F=f.child;F!==null;)C|=F.lanes|F.childLanes,P|=F.subtreeFlags,P|=F.flags,F.return=f,F=F.sibling;return f.subtreeFlags|=P,f.childLanes=C,p}function pi(f,p,C){var P=p.pendingProps;switch(Yf(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(p),null;case 1:return en(p.type)&&Dt(),wn(p),null;case 3:return P=p.stateNode,Aa(),rt(Lt),rt(Ut),ed(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(f===null||f.child===null)&&(xu(p)?xs(p):f===null||f.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Br!==null&&(Uu(Br),Br=null))),Pu(f,p),wn(p),null;case 5:Su(p),C=hi(Ca.current);var F=p.type;if(f!==null&&p.stateNode!=null)cd(f,p,F,P,C),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(o(166));return wn(p),null}if(f=hi(zr.current),xu(p)){if(!$e)throw Error(o(175));f=Uf(p.stateNode,p.type,p.memoizedProps,C,f,p,!ei),p.updateQueue=f,f!==null&&xs(p)}else{var G=he(F,P,C,f,p);bu(G,p,!1,!1),p.stateNode=G,ze(G,F,P,C,f)&&xs(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return wn(p),null;case 6:if(f&&p.stateNode!=null)dd(f,p,f.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(o(166));if(f=hi(Ca.current),C=hi(zr.current),xu(p)){if(!$e)throw Error(o(176));if(f=p.stateNode,P=p.memoizedProps,(C=Bf(f,P,p,!ei))&&(F=di,F!==null))switch(G=(F.mode&1)!==0,F.tag){case 3:we(F.stateNode.containerInfo,f,P,G);break;case 5:Pe(F.type,F.memoizedProps,F.stateNode,f,P,G)}C&&xs(p)}else p.stateNode=Xe(P,f,C,p)}return wn(p),null;case 13:if(rt(Ln),P=p.memoizedState,En&&fi!==null&&p.mode&1&&!(p.flags&128)){for(f=fi;f;)f=Sa(f);return Ri(),p.flags|=98560,p}if(P!==null&&P.dehydrated!==null){if(P=xu(p),f===null){if(!P)throw Error(o(318));if(!$e)throw Error(o(344));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));_m(f,p)}else Ri(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return wn(p),null}return Br!==null&&(Uu(Br),Br=null),p.flags&128?(p.lanes=C,p):(P=P!==null,C=!1,f===null?xu(p):C=f.memoizedState!==null,P&&!C&&(p.child.flags|=8192,p.mode&1&&(f===null||Ln.current&1?er===0&&(er=3):cg())),p.updateQueue!==null&&(p.flags|=4),wn(p),null);case 4:return Aa(),Pu(f,p),f===null&&At(p.stateNode.containerInfo),wn(p),null;case 10:return Hs(p.type._context),wn(p),null;case 17:return en(p.type)&&Dt(),wn(p),null;case 19:if(rt(Ln),F=p.memoizedState,F===null)return wn(p),null;if(P=(p.flags&128)!==0,G=F.rendering,G===null)if(P)fd(F,!1);else{if(er!==0||f!==null&&f.flags&128)for(f=p.child;f!==null;){if(G=Eu(f),G!==null){for(p.flags|=128,fd(F,!1),f=G.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),p.subtreeFlags=0,f=C,P=p.child;P!==null;)C=P,F=f,C.flags&=14680066,G=C.alternate,G===null?(C.childLanes=0,C.lanes=F,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=G.childLanes,C.lanes=G.lanes,C.child=G.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=G.memoizedProps,C.memoizedState=G.memoizedState,C.updateQueue=G.updateQueue,C.type=G.type,F=G.dependencies,C.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext}),P=P.sibling;return it(Ln,Ln.current&1|2),p.child}f=f.sibling}F.tail!==null&&Ar()>rr&&(p.flags|=128,P=!0,fd(F,!1),p.lanes=4194304)}else{if(!P)if(f=Eu(G),f!==null){if(p.flags|=128,P=!0,f=f.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),fd(F,!0),F.tail===null&&F.tailMode==="hidden"&&!G.alternate&&!En)return wn(p),null}else 2*Ar()-F.renderingStartTime>rr&&C!==1073741824&&(p.flags|=128,P=!0,fd(F,!1),p.lanes=4194304);F.isBackwards?(G.sibling=p.child,p.child=G):(f=F.last,f!==null?f.sibling=G:p.child=G,F.last=G)}return F.tail!==null?(p=F.tail,F.rendering=p,F.tail=p.sibling,F.renderingStartTime=Ar(),p.sibling=null,f=Ln.current,it(Ln,P?f&1|2:f&1),p):(wn(p),null);case 22:case 23:return ni(),P=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==P&&(p.flags|=8192),P&&p.mode&1?Ji&1073741824&&(wn(p),Ve&&p.subtreeFlags&6&&(p.flags|=8192)):wn(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var J1=a.ReactCurrentOwner,Ni=!1;function ti(f,p,C,P){p.child=f===null?$i(p,null,C,P):yo(p,f.child,C,P)}function Qm(f,p,C,P,F){C=C.render;var G=p.ref;return pl(p,F),P=_s(f,p,C,P,G,F),C=Li(),f!==null&&!Ni?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~F,Eo(f,p,F)):(En&&C&&Zc(p),p.flags|=1,ti(f,p,P,F),p.child)}function Jm(f,p,C,P,F){if(f===null){var G=C.type;return typeof G=="function"&&!fg(G)&&G.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(p.tag=15,p.type=G,nh(f,p,G,P,F)):(f=Sh(C.type,null,P,p,p.mode,F),f.ref=p.ref,f.return=p,p.child=f)}if(G=f.child,!(f.lanes&F)){var oe=G.memoizedProps;if(C=C.compare,C=C!==null?C:Yi,C(oe,P)&&f.ref===p.ref)return Eo(f,p,F)}return p.flags|=1,f=ka(G,P),f.ref=p.ref,f.return=p,p.child=f}function nh(f,p,C,P,F){if(f!==null&&Yi(f.memoizedProps,P)&&f.ref===p.ref)if(Ni=!1,(f.lanes&F)!==0)f.flags&131072&&(Ni=!0);else return p.lanes=f.lanes,Eo(f,p,F);return ih(f,p,C,P,F)}function eg(f,p,C){var P=p.pendingProps,F=P.children,G=f!==null?f.memoizedState:null;if(P.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},it(Xo,Ji),Ji|=C;else if(C&1073741824)p.memoizedState={baseLanes:0,cachePool:null},P=G!==null?G.baseLanes:C,it(Xo,Ji),Ji|=P;else return f=G!==null?G.baseLanes|C:C,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null},p.updateQueue=null,it(Xo,Ji),Ji|=f,null;else G!==null?(P=G.baseLanes|C,p.memoizedState=null):P=C,it(Xo,Ji),Ji|=P;return ti(f,p,F,C),p.child}function rh(f,p){var C=p.ref;(f===null&&C!==null||f!==null&&f.ref!==C)&&(p.flags|=512,p.flags|=2097152)}function ih(f,p,C,P,F){var G=en(C)?Tt:Ut.current;return G=St(p,G),pl(p,F),C=_s(f,p,C,P,G,F),P=Li(),f!==null&&!Ni?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~F,Eo(f,p,F)):(En&&P&&Zc(p),p.flags|=1,ti(f,p,C,F),p.child)}function tg(f,p,C,P,F){if(en(C)){var G=!0;_r(p)}else G=!1;if(pl(p,F),p.stateNode===null)f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),jf(p,C,P),_u(p,C,P,F),P=!0;else if(f===null){var oe=p.stateNode,ve=p.memoizedProps;oe.props=ve;var c=oe.context,h=C.contextType;typeof h=="object"&&h!==null?h=bi(h):(h=en(C)?Tt:Ut.current,h=St(p,h));var w=C.getDerivedStateFromProps,b=typeof w=="function"||typeof oe.getSnapshotBeforeUpdate=="function";b||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ve!==P||c!==h)&&$1(p,oe,P,h),dr=!1;var R=p.memoizedState;oe.state=R,gu(p,P,oe,F),c=p.memoizedState,ve!==P||R!==c||Lt.current||dr?(typeof w=="function"&&(vu(p,C,w,P),c=p.memoizedState),(ve=dr||ml(p,C,ve,P,R,c,h))?(b||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=c),oe.props=P,oe.state=c,oe.context=h,P=ve):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{oe=p.stateNode,Tn(f,p),ve=p.memoizedProps,h=p.type===p.elementType?ve:Jr(p.type,ve),oe.props=h,b=p.pendingProps,R=oe.context,c=C.contextType,typeof c=="object"&&c!==null?c=bi(c):(c=en(C)?Tt:Ut.current,c=St(p,c));var H=C.getDerivedStateFromProps;(w=typeof H=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ve!==b||R!==c)&&$1(p,oe,P,c),dr=!1,R=p.memoizedState,oe.state=R,gu(p,P,oe,F);var q=p.memoizedState;ve!==b||R!==q||Lt.current||dr?(typeof H=="function"&&(vu(p,C,H,P),q=p.memoizedState),(h=dr||ml(p,C,h,P,R,q,c)||!1)?(w||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(P,q,c),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(P,q,c)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||ve===f.memoizedProps&&R===f.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&R===f.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=q),oe.props=P,oe.state=q,oe.context=c,P=h):(typeof oe.componentDidUpdate!="function"||ve===f.memoizedProps&&R===f.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&R===f.memoizedState||(p.flags|=1024),P=!1)}return hd(f,p,C,P,G,F)}function hd(f,p,C,P,F,G){rh(f,p);var oe=(p.flags&128)!==0;if(!P&&!oe)return F&&Is(p,C,!1),Eo(f,p,G);P=p.stateNode,J1.current=p;var ve=oe&&typeof C.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,f!==null&&oe?(p.child=yo(p,f.child,null,G),p.child=yo(p,null,ve,G)):ti(f,p,ve,G),p.memoizedState=P.state,F&&Is(p,C,!0),p.child}function sh(f){var p=f.stateNode;p.pendingContext?Fr(f,p.pendingContext,p.pendingContext!==p.context):p.context&&Fr(f,p.context,!1),$f(f,p.containerInfo)}function ng(f,p,C,P,F){return Ri(),_o(F),p.flags|=256,ti(f,p,C,P),p.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function xl(f){return{baseLanes:f,cachePool:null}}function ev(f,p,C){var P=p.pendingProps,F=Ln.current,G=!1,oe=(p.flags&128)!==0,ve;if((ve=oe)||(ve=f!==null&&f.memoizedState===null?!1:(F&2)!==0),ve?(G=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(F|=1),it(Ln,F&1),f===null)return vo(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(p.mode&1?Bo(f)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(F=P.children,f=P.fallback,G?(P=p.mode,G=p.child,F={mode:"hidden",children:F},!(P&1)&&G!==null?(G.childLanes=0,G.pendingProps=F):G=Md(F,P,0,null),f=Fa(f,P,C,null),G.return=p,f.return=p,G.sibling=f,p.child=G,p.child.memoizedState=xl(C),p.memoizedState=Ru,f):oh(p,F));if(F=f.memoizedState,F!==null){if(ve=F.dehydrated,ve!==null){if(oe)return p.flags&256?(p.flags&=-257,Sl(f,p,C,Error(o(422)))):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(G=P.fallback,F=p.mode,P=Md({mode:"visible",children:P.children},F,0,null),G=Fa(G,F,C,null),G.flags|=2,P.return=p,G.return=p,P.sibling=G,p.child=P,p.mode&1&&yo(p,f.child,null,C),p.child.memoizedState=xl(C),p.memoizedState=Ru,G);if(!(p.mode&1))p=Sl(f,p,C,null);else if(Bo(ve))p=Sl(f,p,C,Error(o(419)));else if(P=(C&f.childLanes)!==0,Ni||P){if(P=Yn,P!==null){switch(C&-C){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}P=G&(P.suspendedLanes|C)?0:G,P!==0&&P!==F.retryLane&&(F.retryLane=P,gi(f,P,-1))}cg(),p=Sl(f,p,C,Error(o(421)))}else Os(ve)?(p.flags|=128,p.child=f.child,p=av.bind(null,f),Of(ve,p),p=null):(C=F.treeContext,$e&&(fi=fu(ve),di=p,En=!0,Br=null,ei=!1,C!==null&&(Ki[Ur++]=ps,Ki[Ur++]=ms,Ki[Ur++]=wa,ps=C.id,ms=C.overflow,wa=p)),p=oh(p,p.pendingProps.children),p.flags|=4096);return p}return G?(P=rg(f,p,P.children,P.fallback,C),G=p.child,F=f.child.memoizedState,G.memoizedState=F===null?xl(C):{baseLanes:F.baseLanes|C,cachePool:null},G.childLanes=f.childLanes&~C,p.memoizedState=Ru,P):(C=ah(f,p,P.children,C),p.memoizedState=null,C)}return G?(P=rg(f,p,P.children,P.fallback,C),G=p.child,F=f.child.memoizedState,G.memoizedState=F===null?xl(C):{baseLanes:F.baseLanes|C,cachePool:null},G.childLanes=f.childLanes&~C,p.memoizedState=Ru,P):(C=ah(f,p,P.children,C),p.memoizedState=null,C)}function oh(f,p){return p=Md({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function ah(f,p,C,P){var F=f.child;return f=F.sibling,C=ka(F,{mode:"visible",children:C}),!(p.mode&1)&&(C.lanes=P),C.return=p,C.sibling=null,f!==null&&(P=p.deletions,P===null?(p.deletions=[f],p.flags|=16):P.push(f)),p.child=C}function rg(f,p,C,P,F){var G=p.mode;f=f.child;var oe=f.sibling,ve={mode:"hidden",children:C};return!(G&1)&&p.child!==f?(C=p.child,C.childLanes=0,C.pendingProps=ve,p.deletions=null):(C=ka(f,ve),C.subtreeFlags=f.subtreeFlags&14680064),oe!==null?P=ka(oe,P):(P=Fa(P,G,F,null),P.flags|=2),P.return=p,C.return=p,C.sibling=P,p.child=C,P}function Sl(f,p,C,P){return P!==null&&_o(P),yo(p,f.child,null,C),f=oh(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function So(f,p,C){f.lanes|=p;var P=f.alternate;P!==null&&(P.lanes|=p),Vo(f.return,p,C)}function ig(f,p,C,P,F){var G=f.memoizedState;G===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:C,tailMode:F}:(G.isBackwards=p,G.rendering=null,G.renderingStartTime=0,G.last=P,G.tail=C,G.tailMode=F)}function Vs(f,p,C){var P=p.pendingProps,F=P.revealOrder,G=P.tail;if(ti(f,p,P.children,C),P=Ln.current,P&2)P=P&1|2,p.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&So(f,C,p);else if(f.tag===19)So(f,C,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}P&=1}if(it(Ln,P),!(p.mode&1))p.memoizedState=null;else switch(F){case"forwards":for(C=p.child,F=null;C!==null;)f=C.alternate,f!==null&&Eu(f)===null&&(F=C),C=C.sibling;C=F,C===null?(F=p.child,p.child=null):(F=C.sibling,C.sibling=null),ig(p,!1,F,C,G);break;case"backwards":for(C=null,F=p.child,p.child=null;F!==null;){if(f=F.alternate,f!==null&&Eu(f)===null){p.child=F;break}f=F.sibling,F.sibling=C,C=F,F=f}ig(p,!0,C,null,G);break;case"together":ig(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Eo(f,p,C){if(f!==null&&(p.dependencies=f.dependencies),Bt|=p.lanes,!(C&p.childLanes))return null;if(f!==null&&p.child!==f.child)throw Error(o(153));if(p.child!==null){for(f=p.child,C=ka(f,f.pendingProps),p.child=C,C.return=p;f.sibling!==null;)f=f.sibling,C=C.sibling=ka(f,f.pendingProps),C.return=p;C.sibling=null}return p.child}function pd(f,p,C){switch(p.tag){case 3:sh(p),Ri();break;case 5:On(p);break;case 1:en(p.type)&&_r(p);break;case 4:$f(p,p.stateNode.containerInfo);break;case 10:mo(p,p.type._context,p.memoizedProps.value);break;case 13:var P=p.memoizedState;if(P!==null)return P.dehydrated!==null?(it(Ln,Ln.current&1),p.flags|=128,null):C&p.child.childLanes?ev(f,p,C):(it(Ln,Ln.current&1),f=Eo(f,p,C),f!==null?f.sibling:null);it(Ln,Ln.current&1);break;case 19:if(P=(C&p.childLanes)!==0,f.flags&128){if(P)return Vs(f,p,C);p.flags|=128}var F=p.memoizedState;if(F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),it(Ln,Ln.current),P)break;return null;case 22:case 23:return p.lanes=0,eg(f,p,C)}return Eo(f,p,C)}function md(f,p){switch(Yf(p),p.tag){case 1:return en(p.type)&&Dt(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Aa(),rt(Lt),rt(Ut),ed(),f=p.flags,f&65536&&!(f&128)?(p.flags=f&-65537|128,p):null;case 5:return Su(p),null;case 13:if(rt(Ln),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Ri()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return rt(Ln),null;case 4:return Aa(),null;case 10:return Hs(p.type._context),null;case 22:case 23:return ni(),null;case 24:return null;default:return null}}var El=!1,wo=!1,tv=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Sr(f,p){var C=f.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(P){ki(f,p,P)}else C.current=null}function sg(f,p,C){try{C()}catch(P){ki(f,p,P)}}var nv=!1;function lh(f,p){for(ae(f.containerInfo),lt=p;lt!==null;)if(f=lt,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,lt=p;else for(;lt!==null;){f=lt;try{var C=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var P=C.memoizedProps,F=C.memoizedState,G=f.stateNode,oe=G.getSnapshotBeforeUpdate(f.elementType===f.type?P:Jr(f.type,P),F);G.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Ve&&Ye(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ve){ki(f,f.return,ve)}if(p=f.sibling,p!==null){p.return=f.return,lt=p;break}lt=f.return}return C=nv,nv=!1,C}function Xn(f,p,C){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var F=P=P.next;do{if((F.tag&f)===f){var G=F.destroy;F.destroy=void 0,G!==void 0&&sg(p,C,G)}F=F.next}while(F!==P)}}function gd(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var C=p=p.next;do{if((C.tag&f)===f){var P=C.create;C.destroy=P()}C=C.next}while(C!==p)}}function mt(f){var p=f.ref;if(p!==null){var C=f.stateNode;switch(f.tag){case 5:f=ne(C);break;default:f=C}typeof p=="function"?p(f):p.current=f}}function wl(f,p,C){if(fo&&typeof fo.onCommitFiberUnmount=="function")try{fo.onCommitFiberUnmount(pu,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(f=p.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var P=f=f.next;do{var F=P,G=F.destroy;F=F.tag,G!==void 0&&(F&2||F&4)&&sg(p,C,G),P=P.next}while(P!==f)}break;case 1:if(Sr(p,C),f=p.stateNode,typeof f.componentWillUnmount=="function")try{f.props=p.memoizedProps,f.state=p.memoizedState,f.componentWillUnmount()}catch(oe){ki(p,C,oe)}break;case 5:Sr(p,C);break;case 4:Ve?ag(f,p,C):Je&&Je&&(p=p.stateNode.containerInfo,C=ut(p),Qn(p,C))}}function uh(f,p,C){for(var P=p;;)if(wl(f,P,C),P.child===null||Ve&&P.tag===4){if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function og(f){var p=f.alternate;p!==null&&(f.alternate=null,og(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&He(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function rv(f){return f.tag===5||f.tag===3||f.tag===4}function Tu(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||rv(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function vd(f){if(Ve){e:{for(var p=f.return;p!==null;){if(rv(p))break e;p=p.return}throw Error(o(160))}var C=p;switch(C.tag){case 5:p=C.stateNode,C.flags&32&&(gt(p),C.flags&=-33),C=Tu(f),ch(f,C,p);break;case 3:case 4:p=C.stateNode.containerInfo,C=Tu(f),_d(f,C,p);break;default:throw Error(o(161))}}}function _d(f,p,C){var P=f.tag;if(P===5||P===6)f=f.stateNode,p?tt(C,f,p):I(C,f);else if(P!==4&&(f=f.child,f!==null))for(_d(f,p,C),f=f.sibling;f!==null;)_d(f,p,C),f=f.sibling}function ch(f,p,C){var P=f.tag;if(P===5||P===6)f=f.stateNode,p?Ce(C,f,p):N(C,f);else if(P!==4&&(f=f.child,f!==null))for(ch(f,p,C),f=f.sibling;f!==null;)ch(f,p,C),f=f.sibling}function ag(f,p,C){for(var P=p,F=!1,G,oe;;){if(!F){F=P.return;e:for(;;){if(F===null)throw Error(o(160));switch(G=F.stateNode,F.tag){case 5:oe=!1;break e;case 3:G=G.containerInfo,oe=!0;break e;case 4:G=G.containerInfo,oe=!0;break e}F=F.return}F=!0}if(P.tag===5||P.tag===6)uh(f,P,C),oe?wt(G,P.stateNode):Ze(G,P.stateNode);else if(P.tag===18)oe?Em(G,P.stateNode):Sm(G,P.stateNode);else if(P.tag===4){if(P.child!==null){G=P.stateNode.containerInfo,oe=!0,P.child.return=P,P=P.child;continue}}else if(wl(f,P,C),P.child!==null){P.child.return=P,P=P.child;continue}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return,P.tag===4&&(F=!1)}P.sibling.return=P.return,P=P.sibling}}function dh(f,p){if(Ve){switch(p.tag){case 0:case 11:case 14:case 15:Xn(3,p,p.return),gd(3,p),Xn(5,p,p.return);return;case 1:return;case 5:var C=p.stateNode;if(C!=null){var P=p.memoizedProps;f=f!==null?f.memoizedProps:P;var F=p.type,G=p.updateQueue;p.updateQueue=null,G!==null&&fe(C,G,F,f,P,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));C=p.memoizedProps,J(p.stateNode,f!==null?f.memoizedProps:C,C);return;case 3:$e&&f!==null&&f.memoizedState.isDehydrated&&zf(p.stateNode.containerInfo);return;case 12:return;case 13:Lu(p);return;case 19:Lu(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Xn(3,p,p.return),gd(3,p),Xn(5,p,p.return);return;case 12:return;case 13:Lu(p);return;case 19:Lu(p);return;case 3:$e&&f!==null&&f.memoizedState.isDehydrated&&zf(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(Je){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Qn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function Lu(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var C=f.stateNode;C===null&&(C=f.stateNode=new tv),p.forEach(function(P){var F=Pl.bind(null,f,P);C.has(P)||(C.add(P),P.then(F,F))})}}function lg(f,p){for(lt=p;lt!==null;){p=lt;var C=p.deletions;if(C!==null)for(var P=0;P<C.length;P++){var F=C[P];try{var G=f;Ve?ag(G,F,p):uh(G,F,p);var oe=F.alternate;oe!==null&&(oe.return=null),F.return=null}catch(st){ki(F,p,st)}}if(C=p.child,p.subtreeFlags&12854&&C!==null)C.return=p,lt=C;else for(;lt!==null;){p=lt;try{var ve=p.flags;if(ve&32&&Ve&&gt(p.stateNode),ve&512){var c=p.alternate;if(c!==null){var h=c.ref;h!==null&&(typeof h=="function"?h(null):h.current=null)}}if(ve&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var w=p.alternate;(w===null||w.memoizedState===null)&&(Pa=Ar())}break;case 22:var b=p.memoizedState!==null,R=p.alternate,H=R!==null&&R.memoizedState!==null;if(C=p,Ve){e:if(P=C,F=b,G=null,Ve)for(var q=P;;){if(q.tag===5){if(G===null){G=q;var me=q.stateNode;F?bt(me):dt(q.stateNode,q.memoizedProps)}}else if(q.tag===6){if(G===null){var be=q.stateNode;F?_e(be):Ue(be,q.memoizedProps)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===P)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===P)break;for(;q.sibling===null;){if(q.return===null||q.return===P)break e;G===q&&(G=null),q=q.return}G===q&&(G=null),q.sibling.return=q.return,q=q.sibling}}if(b&&!H&&C.mode&1){lt=C;for(var ce=C.child;ce!==null;){for(C=lt=ce;lt!==null;){P=lt;var ue=P.child;switch(P.tag){case 0:case 11:case 14:case 15:Xn(4,P,P.return);break;case 1:Sr(P,P.return);var Ee=P.stateNode;if(typeof Ee.componentWillUnmount=="function"){var Te=P.return;try{Ee.props=P.memoizedProps,Ee.state=P.memoizedState,Ee.componentWillUnmount()}catch(st){ki(P,Te,st)}}break;case 5:Sr(P,P.return);break;case 22:if(P.memoizedState!==null){fh(C);continue}}ue!==null?(ue.return=P,lt=ue):fh(C)}ce=ce.sibling}}}switch(ve&4102){case 2:vd(p),p.flags&=-3;break;case 6:vd(p),p.flags&=-3,dh(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,dh(p.alternate,p);break;case 4:dh(p.alternate,p)}}catch(st){ki(p,p.return,st)}if(C=p.sibling,C!==null){C.return=p.return,lt=C;break}lt=p.return}}}function Hr(f,p,C){lt=f,Ss(f)}function Ss(f,p,C){for(var P=(f.mode&1)!==0;lt!==null;){var F=lt,G=F.child;if(F.tag===22&&P){var oe=F.memoizedState!==null||El;if(!oe){var ve=F.alternate,c=ve!==null&&ve.memoizedState!==null||wo;ve=El;var h=wo;if(El=oe,(wo=c)&&!h)for(lt=F;lt!==null;)oe=lt,c=oe.child,oe.tag===22&&oe.memoizedState!==null?ug(F):c!==null?(c.return=oe,lt=c):ug(F);for(;G!==null;)lt=G,Ss(G),G=G.sibling;lt=F,El=ve,wo=h}Ws(f)}else F.subtreeFlags&8772&&G!==null?(G.return=F,lt=G):Ws(f)}}function Ws(f){for(;lt!==null;){var p=lt;if(p.flags&8772){var C=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:wo||gd(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!wo)if(C===null)P.componentDidMount();else{var F=p.elementType===p.type?C.memoizedProps:Jr(p.type,C.memoizedProps);P.componentDidUpdate(F,C.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var G=p.updateQueue;G!==null&&Wf(p,G,P);break;case 3:var oe=p.updateQueue;if(oe!==null){if(C=null,p.child!==null)switch(p.child.tag){case 5:C=ne(p.child.stateNode);break;case 1:C=p.child.stateNode}Wf(p,oe,C)}break;case 5:var ve=p.stateNode;C===null&&p.flags&4&&ie(ve,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if($e&&p.memoizedState===null){var c=p.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var w=h.dehydrated;w!==null&&xm(w)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}wo||p.flags&512&&mt(p)}catch(b){ki(p,p.return,b)}}if(p===f){lt=null;break}if(C=p.sibling,C!==null){C.return=p.return,lt=C;break}lt=p.return}}function fh(f){for(;lt!==null;){var p=lt;if(p===f){lt=null;break}var C=p.sibling;if(C!==null){C.return=p.return,lt=C;break}lt=p.return}}function ug(f){for(;lt!==null;){var p=lt;try{switch(p.tag){case 0:case 11:case 15:var C=p.return;try{gd(4,p)}catch(c){ki(p,C,c)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var F=p.return;try{P.componentDidMount()}catch(c){ki(p,F,c)}}var G=p.return;try{mt(p)}catch(c){ki(p,G,c)}break;case 5:var oe=p.return;try{mt(p)}catch(c){ki(p,oe,c)}}}catch(c){ki(p,p.return,c)}if(p===f){lt=null;break}var ve=p.sibling;if(ve!==null){ve.return=p.return,lt=ve;break}lt=p.return}}var Di=0,yd=1,Qi=2,hh=3,xd=4;if(typeof Symbol=="function"&&Symbol.for){var Nu=Symbol.for;Di=Nu("selector.component"),yd=Nu("selector.has_pseudo_class"),Qi=Nu("selector.role"),hh=Nu("selector.test_id"),xd=Nu("selector.text")}function ph(f){var p=le(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(f=ee(f),f===null)throw Error(o(362));return f.stateNode.current}function mh(f,p){switch(p.$$typeof){case Di:if(f.type===p.value)return!0;break;case yd:e:{p=p.value,f=[f,0];for(var C=0;C<f.length;){var P=f[C++],F=f[C++],G=p[F];if(P.tag!==5||!Le(P)){for(;G!=null&&mh(P,G);)F++,G=p[F];if(F===p.length){p=!0;break e}else for(P=P.child;P!==null;)f.push(P,F),P=P.sibling}}p=!1}return p;case Qi:if(f.tag===5&&Ie(f.stateNode,p.value))return!0;break;case xd:if((f.tag===5||f.tag===6)&&(f=xe(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case hh:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Du(f){switch(f.$$typeof){case Di:return"<"+(U(f.value)||"Unknown")+">";case yd:return":has("+(Du(f)||"")+")";case Qi:return'[role="'+f.value+'"]';case xd:return'"'+f.value+'"';case hh:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function Sd(f,p){var C=[];f=[f,0];for(var P=0;P<f.length;){var F=f[P++],G=f[P++],oe=p[G];if(F.tag!==5||!Le(F)){for(;oe!=null&&mh(F,oe);)G++,oe=p[G];if(G===p.length)C.push(F);else for(F=F.child;F!==null;)f.push(F,G),F=F.sibling}}return C}function ku(f,p){if(!Fe)throw Error(o(363));f=ph(f),f=Sd(f,p),p=[],f=Array.from(f);for(var C=0;C<f.length;){var P=f[C++];if(P.tag===5)Le(P)||p.push(P.stateNode);else for(P=P.child;P!==null;)f.push(P),P=P.sibling}return p}var gh=Math.ceil,Ml=a.ReactCurrentDispatcher,Cl=a.ReactCurrentOwner,Bn=a.ReactCurrentBatchConfig,Gt=0,Yn=null,Jn=null,Er=0,Ji=0,Xo=Mt(0),er=0,Nn=null,Bt=0,tr=0,qn=0,nr=null,bn=null,Pa=0,rr=1/0;function Mo(){rr=Ar()+500}var Co=!1,Fu=null,Ao=null,Ra=!1,ir=null,Ou=0,Al=0,js=null,Yo=-1,bl=0;function Gr(){return Gt&6?Ar():Yo!==-1?Yo:Yo=Ar()}function mi(f){return f.mode&1?Gt&2&&Er!==0?Er&-Er:jE.transition!==null?(bl===0&&(f=yr,yr<<=1,!(yr&4194240)&&(yr=64),bl=f),bl):(f=dn,f!==0?f:Be()):1}function gi(f,p,C){if(50<Al)throw Al=0,js=null,Error(o(185));var P=Xs(f,p);return P===null?null:(hu(P,p,C),(!(Gt&2)||P!==Yn)&&(P===Yn&&(!(Gt&2)&&(tr|=p),er===4&&zn(P,Er)),Vr(P,C),p===1&&Gt===0&&!(f.mode&1)&&(Mo(),Ci&&zs())),P)}function Xs(f,p){f.lanes|=p;var C=f.alternate;for(C!==null&&(C.lanes|=p),C=f,f=f.return;f!==null;)f.childLanes|=p,C=f.alternate,C!==null&&(C.childLanes|=p),C=f,f=f.return;return C.tag===3?C.stateNode:null}function Vr(f,p){var C=f.callbackNode;VE(f,p);var P=Ea(f,f===Yn?Er:0);if(P===0)C!==null&&Cm(C),f.callbackNode=null,f.callbackPriority=0;else if(p=P&-P,f.callbackPriority!==p){if(C!=null&&Cm(C),p===1)f.tag===0?Pm(qo.bind(null,f)):Yc(qo.bind(null,f)),ke?nt(function(){Gt===0&&zs()}):on(bm,zs),C=null;else{switch(Gf(P)){case 1:C=bm;break;case 4:C=br;break;case 16:C=Xc;break;case 536870912:C=WE;break;default:C=Xc}C=Da(C,Iu.bind(null,f))}f.callbackPriority=p,f.callbackNode=C}}function Iu(f,p){if(Yo=-1,bl=0,Gt&6)throw Error(o(327));var C=f.callbackNode;if(Ko()&&f.callbackNode!==C)return null;var P=Ea(f,f===Yn?Er:0);if(P===0)return null;if(P&30||P&f.expiredLanes||p)p=Ys(f,P);else{p=P;var F=Gt;Gt|=2;var G=yh();(Yn!==f||Er!==p)&&(Mo(),Ta(f,p));do try{sv();break}catch(ve){_h(f,ve)}while(!0);Go(),Ml.current=G,Gt=F,Jn!==null?p=0:(Yn=null,Er=0,p=er)}if(p!==0){if(p===2&&(F=wm(f),F!==0&&(P=F,p=Ed(f,F))),p===1)throw C=Nn,Ta(f,0),zn(f,P),Vr(f,Ar()),C;if(p===6)zn(f,P);else{if(F=f.current.alternate,!(P&30)&&!vh(F)&&(p=Ys(f,P),p===2&&(G=wm(f),G!==0&&(P=G,p=Ed(f,G))),p===1))throw C=Nn,Ta(f,0),zn(f,P),Vr(f,Ar()),C;switch(f.finishedWork=F,f.finishedLanes=P,p){case 0:case 1:throw Error(o(345));case 2:Na(f,bn);break;case 3:if(zn(f,P),(P&130023424)===P&&(p=Pa+500-Ar(),10<p)){if(Ea(f,0)!==0)break;if(F=f.suspendedLanes,(F&P)!==P){Gr(),f.pingedLanes|=f.suspendedLanes&F;break}f.timeoutHandle=Q(Na.bind(null,f,bn),p);break}Na(f,bn);break;case 4:if(zn(f,P),(P&4194240)===P)break;for(p=f.eventTimes,F=-1;0<P;){var oe=31-tn(P);G=1<<oe,oe=p[oe],oe>F&&(F=oe),P&=~G}if(P=F,P=Ar()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*gh(P/1960))-P,10<P){f.timeoutHandle=Q(Na.bind(null,f,bn),P);break}Na(f,bn);break;case 5:Na(f,bn);break;default:throw Error(o(329))}}}return Vr(f,Ar()),f.callbackNode===C?Iu.bind(null,f):null}function Ed(f,p){var C=nr;return f.current.memoizedState.isDehydrated&&(Ta(f,p).flags|=256),f=Ys(f,p),f!==2&&(p=bn,bn=C,p!==null&&Uu(p)),f}function Uu(f){bn===null?bn=f:bn.push.apply(bn,f)}function vh(f){for(var p=f;;){if(p.flags&16384){var C=p.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var P=0;P<C.length;P++){var F=C[P],G=F.getSnapshot;F=F.value;try{if(!po(G(),F))return!1}catch{return!1}}}if(C=p.child,p.subtreeFlags&16384&&C!==null)C.return=p,p=C;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function zn(f,p){for(p&=~qn,p&=~tr,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var C=31-tn(p),P=1<<C;f[C]=-1,p&=~P}}function qo(f){if(Gt&6)throw Error(o(327));Ko();var p=Ea(f,0);if(!(p&1))return Vr(f,Ar()),null;var C=Ys(f,p);if(f.tag!==0&&C===2){var P=wm(f);P!==0&&(p=P,C=Ed(f,P))}if(C===1)throw C=Nn,Ta(f,0),zn(f,p),Vr(f,Ar()),C;if(C===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,Na(f,bn),Vr(f,Ar()),null}function es(f){ir!==null&&ir.tag===0&&!(Gt&6)&&Ko();var p=Gt;Gt|=1;var C=Bn.transition,P=dn;try{if(Bn.transition=null,dn=1,f)return f()}finally{dn=P,Bn.transition=C,Gt=p,!(Gt&6)&&zs()}}function ni(){Ji=Xo.current,rt(Xo)}function Ta(f,p){f.finishedWork=null,f.finishedLanes=0;var C=f.timeoutHandle;if(C!==We&&(f.timeoutHandle=We,ye(C)),Jn!==null)for(C=Jn.return;C!==null;){var P=C;switch(Yf(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&Dt();break;case 3:Aa(),rt(Lt),rt(Ut),ed();break;case 5:Su(P);break;case 4:Aa();break;case 13:rt(Ln);break;case 19:rt(Ln);break;case 10:Hs(P.type._context);break;case 22:case 23:ni()}C=C.return}if(Yn=f,Jn=f=ka(f.current,null),Er=Ji=p,er=0,Nn=null,qn=tr=Bt=0,bn=nr=null,hs!==null){for(p=0;p<hs.length;p++)if(C=hs[p],P=C.interleaved,P!==null){C.interleaved=null;var F=P.next,G=C.pending;if(G!==null){var oe=G.next;G.next=F,P.next=oe}C.pending=P}hs=null}return f}function _h(f,p){do{var C=Jn;try{if(Go(),xo.current=Jf,ba){for(var P=qt.memoizedState;P!==null;){var F=P.queue;F!==null&&(F.pending=null),P=P.next}ba=!1}if(In=0,jn=xr=qt=null,td=!1,fr=0,Cl.current=null,C===null||C.return===null){er=1,Nn=p,Jn=null;break}e:{var G=f,oe=C.return,ve=C,c=p;if(p=Er,ve.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,w=ve,b=w.tag;if(!(w.mode&1)&&(b===0||b===11||b===15)){var R=w.alternate;R?(w.updateQueue=R.updateQueue,w.memoizedState=R.memoizedState,w.lanes=R.lanes):(w.updateQueue=null,w.memoizedState=null)}var H=yl(oe);if(H!==null){H.flags&=-257,th(H,oe,ve,G,p),H.mode&1&&eh(G,h,p),p=H,c=h;var q=p.updateQueue;if(q===null){var me=new Set;me.add(c),p.updateQueue=me}else q.add(c);break e}else{if(!(p&1)){eh(G,h,p),cg();break e}c=Error(o(426))}}else if(En&&ve.mode&1){var be=yl(oe);if(be!==null){!(be.flags&65536)&&(be.flags|=256),th(be,oe,ve,G,p),_o(c);break e}}G=c,er!==4&&(er=2),nr===null?nr=[G]:nr.push(G),c=ud(c,ve),ve=oe;do{switch(ve.tag){case 3:ve.flags|=65536,p&=-p,ve.lanes|=p;var ce=Km(ve,c,p);Rm(ve,ce);break e;case 1:G=c;var ue=ve.type,Ee=ve.stateNode;if(!(ve.flags&128)&&(typeof ue.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Ao===null||!Ao.has(Ee)))){ve.flags|=65536,p&=-p,ve.lanes|=p;var Te=$m(ve,G,p);Rm(ve,Te);break e}}ve=ve.return}while(ve!==null)}La(C)}catch(st){p=st,Jn===C&&C!==null&&(Jn=C=C.return);continue}break}while(!0)}function yh(){var f=Ml.current;return Ml.current=Jf,f===null?Jf:f}function cg(){(er===0||er===3||er===2)&&(er=4),Yn===null||!(Bt&268435455)&&!(tr&268435455)||zn(Yn,Er)}function Ys(f,p){var C=Gt;Gt|=2;var P=yh();Yn===f&&Er===p||Ta(f,p);do try{iv();break}catch(F){_h(f,F)}while(!0);if(Go(),Gt=C,Ml.current=P,Jn!==null)throw Error(o(261));return Yn=null,Er=0,er}function iv(){for(;Jn!==null;)xh(Jn)}function sv(){for(;Jn!==null&&!Am();)xh(Jn)}function xh(f){var p=lv(f.alternate,f,Ji);f.memoizedProps=f.pendingProps,p===null?La(f):Jn=p,Cl.current=null}function La(f){var p=f;do{var C=p.alternate;if(f=p.return,p.flags&32768){if(C=md(C,p),C!==null){C.flags&=32767,Jn=C;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{er=6,Jn=null;return}}else if(C=pi(C,p,Ji),C!==null){Jn=C;return}if(p=p.sibling,p!==null){Jn=p;return}Jn=p=f}while(p!==null);er===0&&(er=5)}function Na(f,p){var C=dn,P=Bn.transition;try{Bn.transition=null,dn=1,ov(f,p,C)}finally{Bn.transition=P,dn=C}return null}function ov(f,p,C){do Ko();while(ir!==null);if(Gt&6)throw Error(o(327));var P=f.finishedWork,F=f.finishedLanes;if(P===null)return null;if(f.finishedWork=null,f.finishedLanes=0,P===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var G=P.lanes|P.childLanes;if(Mm(f,G),f===Yn&&(Jn=Yn=null,Er=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||Ra||(Ra=!0,Da(Xc,function(){return Ko(),null})),G=(P.flags&15990)!==0,P.subtreeFlags&15990||G){G=Bn.transition,Bn.transition=null;var oe=dn;dn=1;var ve=Gt;Gt|=4,Cl.current=null,lh(f,P),lg(f,P),se(f.containerInfo),f.current=P,Hr(P),K1(),Gt=ve,dn=oe,Bn.transition=G}else f.current=P;if(Ra&&(Ra=!1,ir=f,Ou=F),G=f.pendingLanes,G===0&&(Ao=null),Vf(P.stateNode),Vr(f,Ar()),p!==null)for(C=f.onRecoverableError,P=0;P<p.length;P++)C(p[P]);if(Co)throw Co=!1,f=Fu,Fu=null,f;return Ou&1&&f.tag!==0&&Ko(),G=f.pendingLanes,G&1?f===js?Al++:(Al=0,js=f):Al=0,zs(),null}function Ko(){if(ir!==null){var f=Gf(Ou),p=Bn.transition,C=dn;try{if(Bn.transition=null,dn=16>f?16:f,ir===null)var P=!1;else{if(f=ir,ir=null,Ou=0,Gt&6)throw Error(o(331));var F=Gt;for(Gt|=4,lt=f.current;lt!==null;){var G=lt,oe=G.child;if(lt.flags&16){var ve=G.deletions;if(ve!==null){for(var c=0;c<ve.length;c++){var h=ve[c];for(lt=h;lt!==null;){var w=lt;switch(w.tag){case 0:case 11:case 15:Xn(8,w,G)}var b=w.child;if(b!==null)b.return=w,lt=b;else for(;lt!==null;){w=lt;var R=w.sibling,H=w.return;if(og(w),w===h){lt=null;break}if(R!==null){R.return=H,lt=R;break}lt=H}}}var q=G.alternate;if(q!==null){var me=q.child;if(me!==null){q.child=null;do{var be=me.sibling;me.sibling=null,me=be}while(me!==null)}}lt=G}}if(G.subtreeFlags&2064&&oe!==null)oe.return=G,lt=oe;else e:for(;lt!==null;){if(G=lt,G.flags&2048)switch(G.tag){case 0:case 11:case 15:Xn(9,G,G.return)}var ce=G.sibling;if(ce!==null){ce.return=G.return,lt=ce;break e}lt=G.return}}var ue=f.current;for(lt=ue;lt!==null;){oe=lt;var Ee=oe.child;if(oe.subtreeFlags&2064&&Ee!==null)Ee.return=oe,lt=Ee;else e:for(oe=ue;lt!==null;){if(ve=lt,ve.flags&2048)try{switch(ve.tag){case 0:case 11:case 15:gd(9,ve)}}catch(st){ki(ve,ve.return,st)}if(ve===oe){lt=null;break e}var Te=ve.sibling;if(Te!==null){Te.return=ve.return,lt=Te;break e}lt=ve.return}}if(Gt=F,zs(),fo&&typeof fo.onPostCommitFiberRoot=="function")try{fo.onPostCommitFiberRoot(pu,f)}catch{}P=!0}return P}finally{dn=C,Bn.transition=p}}return!1}function wd(f,p,C){p=ud(C,p),p=Km(f,p,1),Pr(f,p),p=Gr(),f=Xs(f,1),f!==null&&(hu(f,1,p),Vr(f,p))}function ki(f,p,C){if(f.tag===3)wd(f,f,C);else for(;p!==null;){if(p.tag===3){wd(p,f,C);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Ao===null||!Ao.has(P))){f=ud(C,f),f=$m(p,f,1),Pr(p,f),f=Gr(),p=Xs(p,1),p!==null&&(hu(p,1,f),Vr(p,f));break}}p=p.return}}function ZE(f,p,C){var P=f.pingCache;P!==null&&P.delete(p),p=Gr(),f.pingedLanes|=f.suspendedLanes&C,Yn===f&&(Er&C)===C&&(er===4||er===3&&(Er&130023424)===Er&&500>Ar()-Pa?Ta(f,0):qn|=C),Vr(f,p)}function dg(f,p){p===0&&(f.mode&1?(p=Us,Us<<=1,!(Us&130023424)&&(Us=4194304)):p=1);var C=Gr();f=Xs(f,p),f!==null&&(hu(f,p,C),Vr(f,C))}function av(f){var p=f.memoizedState,C=0;p!==null&&(C=p.retryLane),dg(f,C)}function Pl(f,p){var C=0;switch(f.tag){case 13:var P=f.stateNode,F=f.memoizedState;F!==null&&(C=F.retryLane);break;case 19:P=f.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(p),dg(f,C)}var lv;lv=function(f,p,C){if(f!==null)if(f.memoizedProps!==p.pendingProps||Lt.current)Ni=!0;else{if(!(f.lanes&C)&&!(p.flags&128))return Ni=!1,pd(f,p,C);Ni=!!(f.flags&131072)}else Ni=!1,En&&p.flags&1048576&&Xf(p,$c,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps;var F=St(p,Ut.current);pl(p,C),F=_s(null,p,P,f,F,C);var G=Li();return p.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,en(P)?(G=!0,_r(p)):G=!1,p.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,Pi(p),F.updater=Kc,p.stateNode=F,F._reactInternals=p,_u(p,P,f,C),p=hd(null,p,P,!0,G,C)):(p.tag=0,En&&G&&Zc(p),ti(null,p,F,C),p=p.child),p;case 16:P=p.elementType;e:{switch(f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps,F=P._init,P=F(P._payload),p.type=P,F=p.tag=cv(P),f=Jr(P,f),F){case 0:p=ih(null,p,P,f,C);break e;case 1:p=tg(null,p,P,f,C);break e;case 11:p=Qm(null,p,P,f,C);break e;case 14:p=Jm(null,p,P,Jr(P.type,f),C);break e}throw Error(o(306,P,""))}return p;case 0:return P=p.type,F=p.pendingProps,F=p.elementType===P?F:Jr(P,F),ih(f,p,P,F,C);case 1:return P=p.type,F=p.pendingProps,F=p.elementType===P?F:Jr(P,F),tg(f,p,P,F,C);case 3:e:{if(sh(p),f===null)throw Error(o(387));P=p.pendingProps,G=p.memoizedState,F=G.element,Tn(f,p),gu(p,P,null,C);var oe=p.memoizedState;if(P=oe.element,$e&&G.isDehydrated)if(G={element:P,isDehydrated:!1,cache:oe.cache,transitions:oe.transitions},p.updateQueue.baseState=G,p.memoizedState=G,p.flags&256){F=Error(o(423)),p=ng(f,p,P,C,F);break e}else if(P!==F){F=Error(o(424)),p=ng(f,p,P,C,F);break e}else for($e&&(fi=If(p.stateNode.containerInfo),di=p,En=!0,Br=null,ei=!1),C=$i(p,null,P,C),p.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Ri(),P===F){p=Eo(f,p,C);break e}ti(f,p,P,C)}p=p.child}return p;case 5:return On(p),f===null&&vo(p),P=p.type,F=p.pendingProps,G=f!==null?f.memoizedProps:null,oe=F.children,De(P,F)?oe=null:G!==null&&De(P,G)&&(p.flags|=32),rh(f,p),ti(f,p,oe,C),p.child;case 6:return f===null&&vo(p),null;case 13:return ev(f,p,C);case 4:return $f(p,p.stateNode.containerInfo),P=p.pendingProps,f===null?p.child=yo(p,null,P,C):ti(f,p,P,C),p.child;case 11:return P=p.type,F=p.pendingProps,F=p.elementType===P?F:Jr(P,F),Qm(f,p,P,F,C);case 7:return ti(f,p,p.pendingProps,C),p.child;case 8:return ti(f,p,p.pendingProps.children,C),p.child;case 12:return ti(f,p,p.pendingProps.children,C),p.child;case 10:e:{if(P=p.type._context,F=p.pendingProps,G=p.memoizedProps,oe=F.value,mo(p,P,oe),G!==null)if(po(G.value,oe)){if(G.children===F.children&&!Lt.current){p=Eo(f,p,C);break e}}else for(G=p.child,G!==null&&(G.return=p);G!==null;){var ve=G.dependencies;if(ve!==null){oe=G.child;for(var c=ve.firstContext;c!==null;){if(c.context===P){if(G.tag===1){c=qi(-1,C&-C),c.tag=2;var h=G.updateQueue;if(h!==null){h=h.shared;var w=h.pending;w===null?c.next=c:(c.next=w.next,w.next=c),h.pending=c}}G.lanes|=C,c=G.alternate,c!==null&&(c.lanes|=C),Vo(G.return,C,p),ve.lanes|=C;break}c=c.next}}else if(G.tag===10)oe=G.type===p.type?null:G.child;else if(G.tag===18){if(oe=G.return,oe===null)throw Error(o(341));oe.lanes|=C,ve=oe.alternate,ve!==null&&(ve.lanes|=C),Vo(oe,C,p),oe=G.sibling}else oe=G.child;if(oe!==null)oe.return=G;else for(oe=G;oe!==null;){if(oe===p){oe=null;break}if(G=oe.sibling,G!==null){G.return=oe.return,oe=G;break}oe=oe.return}G=oe}ti(f,p,F.children,C),p=p.child}return p;case 9:return F=p.type,P=p.pendingProps.children,pl(p,C),F=bi(F),P=P(F),p.flags|=1,ti(f,p,P,C),p.child;case 14:return P=p.type,F=Jr(P,p.pendingProps),F=Jr(P.type,F),Jm(f,p,P,F,C);case 15:return nh(f,p,p.type,p.pendingProps,C);case 17:return P=p.type,F=p.pendingProps,F=p.elementType===P?F:Jr(P,F),f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,en(P)?(f=!0,_r(p)):f=!1,pl(p,C),jf(p,P,F),_u(p,P,F,C),hd(null,p,P,!0,f,C);case 19:return Vs(f,p,C);case 22:return eg(f,p,C)}throw Error(o(156,p.tag))};function Da(f,p){return on(f,p)}function uv(f,p,C,P){this.tag=f,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(f,p,C,P){return new uv(f,p,C,P)}function fg(f){return f=f.prototype,!(!f||!f.isReactComponent)}function cv(f){if(typeof f=="function")return fg(f)?1:0;if(f!=null){if(f=f.$$typeof,f===x)return 11;if(f===M)return 14}return 2}function ka(f,p){var C=f.alternate;return C===null?(C=rn(f.tag,p,f.key,f.mode),C.elementType=f.elementType,C.type=f.type,C.stateNode=f.stateNode,C.alternate=f,f.alternate=C):(C.pendingProps=p,C.type=f.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=f.flags&14680064,C.childLanes=f.childLanes,C.lanes=f.lanes,C.child=f.child,C.memoizedProps=f.memoizedProps,C.memoizedState=f.memoizedState,C.updateQueue=f.updateQueue,p=f.dependencies,C.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},C.sibling=f.sibling,C.index=f.index,C.ref=f.ref,C}function Sh(f,p,C,P,F,G){var oe=2;if(P=f,typeof f=="function")fg(f)&&(oe=1);else if(typeof f=="string")oe=5;else e:switch(f){case d:return Fa(C.children,F,G,p);case m:oe=8,F|=8;break;case g:return f=rn(12,C,p,F|2),f.elementType=g,f.lanes=G,f;case S:return f=rn(13,C,p,F),f.elementType=S,f.lanes=G,f;case _:return f=rn(19,C,p,F),f.elementType=_,f.lanes=G,f;case A:return Md(C,F,G,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case v:oe=10;break e;case y:oe=9;break e;case x:oe=11;break e;case M:oe=14;break e;case E:oe=16,P=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return p=rn(oe,C,p,F),p.elementType=f,p.type=P,p.lanes=G,p}function Fa(f,p,C,P){return f=rn(7,f,P,p),f.lanes=C,f}function Md(f,p,C,P){return f=rn(22,f,P,p),f.elementType=A,f.lanes=C,f.stateNode={},f}function hg(f,p,C){return f=rn(6,f,null,p),f.lanes=C,f}function Fi(f,p,C){return p=rn(4,f.children!==null?f.children:[],f.key,p),p.lanes=C,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function pg(f,p,C,P,F){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=P,this.onRecoverableError=F,$e&&(this.mutableSourceEagerHydrationData=null)}function dv(f,p,C,P,F,G,oe,ve,c){return f=new pg(f,p,C,ve,c),p===1?(p=1,G===!0&&(p|=8)):p=0,G=rn(3,null,null,p),f.current=G,G.stateNode=f,G.memoizedState={element:P,isDehydrated:C,cache:null,transitions:null},Pi(G),f}function $o(f){if(!f)return xt;f=f._reactInternals;e:{if(B(f)!==f||f.tag!==1)throw Error(o(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(en(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(f.tag===1){var C=f.type;if(en(C))return co(f,C,p)}return p}function Cd(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=W(p),f===null?null:f.stateNode}function Oa(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var C=f.retryLane;f.retryLane=C!==0&&C<p?C:p}}function Bu(f,p){Oa(f,p),(f=f.alternate)&&Oa(f,p)}function mg(f){return f=W(f),f===null?null:f.stateNode}function gg(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var p=Gr();gi(f,134217728,p),Bu(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=Gr(),C=mi(f);gi(f,C,p),Bu(f,C)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var C=Qr(p.pendingLanes);C!==0&&(dl(p,C|1),Vr(p,Ar()),!(Gt&6)&&(Mo(),zs()))}break;case 13:var P=Gr();es(function(){return gi(f,1,P)}),Bu(f,1)}},n.batchedUpdates=function(f,p){var C=Gt;Gt|=1;try{return f(p)}finally{Gt=C,Gt===0&&(Mo(),Ci&&zs())}},n.createComponentSelector=function(f){return{$$typeof:Di,value:f}},n.createContainer=function(f,p,C,P,F,G,oe){return dv(f,p,!1,null,C,P,F,G,oe)},n.createHasPseudoClassSelector=function(f){return{$$typeof:yd,value:f}},n.createHydrationContainer=function(f,p,C,P,F,G,oe,ve,c){return f=dv(C,P,!0,f,F,G,oe,ve,c),f.context=$o(null),C=f.current,P=Gr(),F=mi(C),G=qi(P,F),G.callback=p??null,Pr(C,G),f.current.lanes=F,hu(f,F,P),Vr(f,P),f},n.createPortal=function(f,p,C){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:P==null?null:""+P,children:f,containerInfo:p,implementation:C}},n.createRoleSelector=function(f){return{$$typeof:Qi,value:f}},n.createTestNameSelector=function(f){return{$$typeof:hh,value:f}},n.createTextSelector=function(f){return{$$typeof:xd,value:f}},n.deferredUpdates=function(f){var p=dn,C=Bn.transition;try{return Bn.transition=null,dn=16,f()}finally{dn=p,Bn.transition=C}},n.discreteUpdates=function(f,p,C,P,F){var G=dn,oe=Bn.transition;try{return Bn.transition=null,dn=1,f(p,C,P,F)}finally{dn=G,Bn.transition=oe,Gt===0&&Mo()}},n.findAllNodes=ku,n.findBoundingRects=function(f,p){if(!Fe)throw Error(o(363));p=ku(f,p),f=[];for(var C=0;C<p.length;C++)f.push(X(p[C]));for(p=f.length-1;0<p;p--){C=f[p];for(var P=C.x,F=P+C.width,G=C.y,oe=G+C.height,ve=p-1;0<=ve;ve--)if(p!==ve){var c=f[ve],h=c.x,w=h+c.width,b=c.y,R=b+c.height;if(P>=h&&G>=b&&F<=w&&oe<=R){f.splice(p,1);break}else if(P!==h||C.width!==c.width||R<G||b>oe){if(!(G!==b||C.height!==c.height||w<P||h>F)){h>P&&(c.width+=h-P,c.x=P),w<F&&(c.width=F-h),f.splice(p,1);break}}else{b>G&&(c.height+=b-G,c.y=G),R<oe&&(c.height=oe-b),f.splice(p,1);break}}}return f},n.findHostInstance=Cd,n.findHostInstanceWithNoPortals=function(f){return f=z(f),f=f!==null?Z(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return Cd(f)},n.flushControlled=function(f){var p=Gt;Gt|=1;var C=Bn.transition,P=dn;try{Bn.transition=null,dn=1,f()}finally{dn=P,Bn.transition=C,Gt=p,Gt===0&&(Mo(),zs())}},n.flushPassiveEffects=Ko,n.flushSync=es,n.focusWithin=function(f,p){if(!Fe)throw Error(o(363));for(f=ph(f),p=Sd(f,p),p=Array.from(p),f=0;f<p.length;){var C=p[f++];if(!Le(C)){if(C.tag===5&&Oe(C.stateNode))return!0;for(C=C.child;C!==null;)p.push(C),C=C.sibling}}return!1},n.getCurrentUpdatePriority=function(){return dn},n.getFindAllNodesFailureDescription=function(f,p){if(!Fe)throw Error(o(363));var C=0,P=[];f=[ph(f),0];for(var F=0;F<f.length;){var G=f[F++],oe=f[F++],ve=p[oe];if((G.tag!==5||!Le(G))&&(mh(G,ve)&&(P.push(Du(ve)),oe++,oe>C&&(C=oe)),oe<p.length))for(G=G.child;G!==null;)f.push(G,oe),G=G.sibling}if(C<p.length){for(f=[];C<p.length;C++)f.push(Du(p[C]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return ne(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:mg,findFiberByHostInstance:f.findFiberByHostInstance||gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{pu=p.inject(f),fo=p}catch{}f=!!p.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,p,C,P){if(!Fe)throw Error(o(363));f=ku(f,p);var F=j(f,C,P).disconnect;return{disconnect:function(){F()}}},n.registerMutableSourceForHydration=function(f,p){var C=p._getVersion;C=C(p._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[p,C]:f.mutableSourceEagerHydrationData.push(p,C)},n.runWithPriority=function(f,p){var C=dn;try{return dn=f,p()}finally{dn=C}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,p,C,P){var F=p.current,G=Gr(),oe=mi(F);return C=$o(C),p.context===null?p.context=C:p.pendingContext=C,p=qi(G,oe),p.payload={element:f},P=P===void 0?null:P,P!==null&&(p.callback=P),Pr(F,p),f=gi(F,oe,G),f!==null&&qc(f,F,oe),oe},n};aO.exports=Pne;var Rne=aO.exports;const Tne=y1(Rne),gb={},Lne=t=>void Object.assign(gb,t);function Nne(t,e){function n(d,{args:m=[],attach:g,...v},y){let x=`${d[0].toUpperCase()}${d.slice(1)}`,S;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=v.object;S=$h(_,{type:d,root:y,attach:g,primitive:!0})}else{const _=gb[x];if(!_)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");S=$h(new _(...m),{type:d,root:y,attach:g,memoizedProps:{args:m}})}return S.__r3f.attach===void 0&&(S.isBufferGeometry?S.__r3f.attach="geometry":S.isMaterial&&(S.__r3f.attach="material")),x!=="inject"&&GM(S,v),S}function r(d,m){let g=!1;if(m){var v,y;(v=m.__r3f)!=null&&v.attach?HM(d,m,m.__r3f.attach):m.isObject3D&&d.isObject3D&&(d.add(m),g=!0),g||(y=d.__r3f)==null||y.objects.push(m),m.__r3f||$h(m,{}),m.__r3f.parent=d,V2(m),Zh(m)}}function i(d,m,g){let v=!1;if(m){var y,x;if((y=m.__r3f)!=null&&y.attach)HM(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:m});const S=d.children.filter(M=>M!==m),_=S.indexOf(g);d.children=[...S.slice(0,_),m,...S.slice(_)],v=!0}v||(x=d.__r3f)==null||x.objects.push(m),m.__r3f||$h(m,{}),m.__r3f.parent=d,V2(m),Zh(m)}}function s(d,m,g=!1){d&&[...d].forEach(v=>o(m,v,g))}function o(d,m,g){if(m){var v,y,x;if(m.__r3f&&(m.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(A=>A!==m)),(y=m.__r3f)!=null&&y.attach)i5(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){var S;d.remove(m),(S=m.__r3f)!=null&&S.root&&Bne(ly(m),m)}const M=(x=m.__r3f)==null?void 0:x.primitive,E=!M&&(g===void 0?m.dispose!==null:g);if(!M){var _;s((_=m.__r3f)==null?void 0:_.objects,m,E),s(m.children,m,E)}if(delete m.__r3f,E&&m.dispose&&m.type!=="Scene"){const A=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?H2.unstable_scheduleCallback(H2.unstable_IdlePriority,A):A()}Zh(d)}}function a(d,m,g,v){var y;const x=(y=d.__r3f)==null?void 0:y.parent;if(!x)return;const S=n(m,g,d.__r3f.root);if(d.children){for(const _ of d.children)_.__r3f&&r(S,_);d.children=d.children.filter(_=>!_.__r3f)}d.__r3f.objects.forEach(_=>r(S,_)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(x,d),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),r(x,S),S.raycast&&S.__r3f.eventCount&&ly(S).getState().internal.interaction.push(S),[v,v.alternate].forEach(_=>{_!==null&&(_.stateNode=S,_.ref&&(typeof _.ref=="function"?_.ref(S):_.ref.current=S))})}const l=()=>{};return{reconciler:Tne({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,m)=>{if(!m)return;const g=d.getState().scene;g.__r3f&&(g.__r3f.root=d,r(g,m))},removeChildFromContainer:(d,m)=>{m&&o(d.getState().scene,m)},insertInContainerBefore:(d,m,g)=>{if(!m||!g)return;const v=d.getState().scene;v.__r3f&&i(v,m,g)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},prepareUpdate(d,m,g,v){var y;if(((y=d==null?void 0:d.__r3f)!=null?y:{}).primitive&&v.object&&v.object!==d)return[!0];{const{args:S=[],children:_,...M}=v,{args:E=[],children:A,...L}=g;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((U,O)=>U!==E[O]))return[!0];const D=gO(d,M,L,!0);return D.changes.length?[!1,D]:null}},commitUpdate(d,[m,g],v,y,x,S){m?a(d,v,x,S):GM(d,g)},commitMount(d,m,g,v){var y;const x=(y=d.__r3f)!=null?y:{};d.raycast&&x.handlers&&x.eventCount&&ly(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>$h(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var m;const{attach:g,parent:v}=(m=d.__r3f)!=null?m:{};g&&v&&i5(v,d,g),d.isObject3D&&(d.visible=!1),Zh(d)},unhideInstance(d,m){var g;const{attach:v,parent:y}=(g=d.__r3f)!=null?g:{};v&&y&&HM(y,d,v),(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0),Zh(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Vn.fun(performance.now)?performance.now:Vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:GM}}var e5,t5;const zM=t=>"colorSpace"in t||"outputColorSpace"in t,cO=()=>{var t;return(t=gb.ColorManagement)!=null?t:null},dO=t=>t&&t.isOrthographicCamera,Dne=t=>t&&t.hasOwnProperty("current"),q1=typeof window<"u"&&((e5=window.document)!=null&&e5.createElement||((t5=window.navigator)==null?void 0:t5.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function fO(t){const e=V.useRef(t);return q1(()=>void(e.current=t),[t]),e}function kne({set:t}){return q1(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class hO extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}hO.getDerivedStateFromError=()=>({error:!0});const pO="__default",n5=new Map,Fne=t=>t&&!!t.memoized&&!!t.changes;function mO(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Yg=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function ly(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Vn={obj:t=>t===Object(t)&&!Vn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Vn.str(t)||Vn.num(t)||Vn.boo(t))return t===e;const s=Vn.obj(t);if(s&&r==="reference")return t===e;const o=Vn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!Vn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(Vn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function One(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function $h(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function G2(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const r5=/-\d+$/;function HM(t,e,n){if(Vn.str(n)){if(r5.test(n)){const s=n.replace(r5,""),{target:o,key:a}=G2(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=G2(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function i5(t,e,n){var r,i;if(Vn.str(n)){const{target:s,key:o}=G2(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function gO(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const d=t.__r3f,m=Object.entries(i),g=[];if(u){const y=Object.keys(l);for(let x=0;x<y.length;x++)i.hasOwnProperty(y[x])||m.unshift([y[x],pO+"remove"])}m.forEach(([y,x])=>{var S;if((S=t.__r3f)!=null&&S.primitive&&y==="object"||Vn.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return g.push([y,x,!0,[]]);let _=[];y.includes("-")&&(_=y.split("-")),g.push([y,x,!1,_]);for(const M in i){const E=i[M];M.startsWith(`${y}-`)&&g.push([M,E,!1,M.split("-")])}});const v={...i};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:g}}function GM(t,e){var n;const r=t.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Fne(e)?e:gO(t,e),l=r==null?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let g=0;g<a.length;g++){let[v,y,x,S]=a[g];if(zM(t)){const A="srgb",L="srgb-linear";v==="encoding"?(v="colorSpace",y=y===3001?A:L):v==="outputEncoding"&&(v="outputColorSpace",y=y===3001?A:L)}let _=t,M=_[v];if(S.length&&(M=S.reduce((E,A)=>E[A],t),!(M&&M.set))){const[E,...A]=S.reverse();_=A.reverse().reduce((L,D)=>L[D],t),v=E}if(y===pO+"remove")if(_.constructor){let E=n5.get(_.constructor);E||(E=new _.constructor,n5.set(_.constructor,E)),y=E[v]}else y=0;if(x&&r)y?r.handlers[v]=y:delete r.handlers[v],r.eventCount=Object.keys(r.handlers).length;else if(M&&M.set&&(M.copy||M instanceof sf)){if(Array.isArray(y))M.fromArray?M.fromArray(y):M.set(...y);else if(M.copy&&y&&y.constructor&&M.constructor===y.constructor)M.copy(y);else if(y!==void 0){var u;const E=(u=M)==null?void 0:u.isColor;!E&&M.setScalar?M.setScalar(y):M instanceof sf&&y instanceof sf?M.mask=y.mask:M.set(y),!cO()&&s&&!s.linear&&E&&M.convertSRGBToLinear()}}else{var d;if(_[v]=y,(d=_[v])!=null&&d.isTexture&&_[v].format===Gi&&_[v].type===va&&s){const E=_[v];zM(E)&&zM(s.gl)?E.colorSpace=s.gl.outputColorSpace:E.encoding=s.gl.outputEncoding}}Zh(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const g=ly(t).getState().internal,v=g.interaction.indexOf(t);v>-1&&g.interaction.splice(v,1),r.eventCount&&g.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&V2(t),t}function Zh(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function V2(t){t.onUpdate==null||t.onUpdate(t)}function Ine(t,e){t.manual||(dO(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function k_(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Une(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return i0.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return i0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return i0.ContinuousEventPriority;default:return i0.DefaultEventPriority}}function vO(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function Bne(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{vO(n.capturedMap,e,r,i)})}function zne(t){function e(l){const{internal:u}=t.getState(),d=l.offsetX-u.initialClick[0],m=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=u.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function r(l,u){const d=t.getState(),m=new Set,g=[],v=u?u(d.internal.interaction):d.internal.interaction;for(let _=0;_<v.length;_++){const M=Yg(v[_]);M&&(M.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function y(_){const M=Yg(_);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var E;M.events.compute==null||M.events.compute(l,M,(E=M.previousRoot)==null?void 0:E.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(_,!0):[]}let x=v.flatMap(y).sort((_,M)=>{const E=Yg(_.object),A=Yg(M.object);return!E||!A?_.distance-M.distance:A.events.priority-E.events.priority||_.distance-M.distance}).filter(_=>{const M=k_(_);return m.has(M)?!1:(m.add(M),!0)});d.events.filter&&(x=d.events.filter(x,d));for(const _ of x){let M=_.object;for(;M;){var S;(S=M.__r3f)!=null&&S.eventCount&&g.push({..._,eventObject:M}),M=M.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let _ of d.internal.capturedMap.get(l.pointerId).values())m.has(k_(_.intersection))||g.push(_.intersection);return g}function i(l,u,d,m){const g=t.getState();if(l.length){const v={stopped:!1};for(const y of l){const x=Yg(y.object)||g,{raycaster:S,pointer:_,camera:M,internal:E}=x,A=new re(_.x,_.y,0).unproject(M),L=T=>{var z,W;return(z=(W=E.capturedMap.get(T))==null?void 0:W.has(y.eventObject))!=null?z:!1},D=T=>{const z={intersection:y,target:u.target};E.capturedMap.has(T)?E.capturedMap.get(T).set(y.eventObject,z):E.capturedMap.set(T,new Map([[y.eventObject,z]])),u.target.setPointerCapture(T)},U=T=>{const z=E.capturedMap.get(T);z&&vO(E.capturedMap,y.eventObject,z,T)};let O={};for(let T in u){let z=u[T];typeof z!="function"&&(O[T]=z)}let B={...y,...O,pointer:_,intersections:l,stopped:v.stopped,delta:d,unprojectedPoint:A,ray:S.ray,camera:M,stopPropagation(){const T="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!T||T.has(y.eventObject))&&(B.stopped=v.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(z=>z.eventObject===y.eventObject))){const z=l.slice(0,l.indexOf(y));s([...z,y])}},target:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:U},currentTarget:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:U},nativeEvent:u};if(m(B),v.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const d of u.hovered.values())if(!l.length||!l.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const g=d.eventObject.__r3f,v=g==null?void 0:g.handlers;if(u.hovered.delete(k_(d)),g!=null&&g.eventCount){const y={...d,intersections:l};v.onPointerOut==null||v.onPointerOut(y),v.onPointerLeave==null||v.onPointerLeave(y)}}}function o(l,u){for(let d=0;d<u.length;d++){const m=u[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=t.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:m,internal:g}=t.getState();g.lastEvent.current=d;const v=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=r(d,v?n:void 0),_=y?e(d):0;l==="onPointerDown"&&(g.initialClick=[d.offsetX,d.offsetY],g.initialHits=S.map(E=>E.eventObject)),y&&!S.length&&_<=2&&(o(d,g.interaction),m&&m(d)),v&&s(S);function M(E){const A=E.eventObject,L=A.__r3f,D=L==null?void 0:L.handlers;if(L!=null&&L.eventCount)if(v){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const U=k_(E),O=g.hovered.get(U);O?O.stopped&&E.stopPropagation():(g.hovered.set(U,E),D.onPointerOver==null||D.onPointerOver(E),D.onPointerEnter==null||D.onPointerEnter(E))}D.onPointerMove==null||D.onPointerMove(E)}else{const U=D[l];U?(!y||g.initialHits.includes(A))&&(o(d,g.interaction.filter(O=>!g.initialHits.includes(O))),U(E)):y&&g.initialHits.includes(A)&&o(d,g.interaction.filter(O=>!g.initialHits.includes(O)))}}i(S,d,_,M)}}return{handlePointer:a}}const _O=t=>!!(t!=null&&t.render),yO=V.createContext(null),Hne=(t,e)=>{const n=bne((a,l)=>{const u=new re,d=new re,m=new re;function g(_=l().camera,M=d,E=l().size){const{width:A,height:L,top:D,left:U}=E,O=A/L;M.isVector3?m.copy(M):m.set(...M);const B=_.getWorldPosition(u).distanceTo(m);if(dO(_))return{width:A/_.zoom,height:L/_.zoom,top:D,left:U,factor:1,distance:B,aspect:O};{const T=_.fov*Math.PI/180,z=2*Math.tan(T/2)*B,W=z*(A/L);return{width:W,height:z,top:D,left:U,factor:A/W,distance:B,aspect:O}}}let v;const y=_=>a(M=>({performance:{...M.performance,current:_}})),x=new Ge;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>t(l(),_),advance:(_,M)=>e(_,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new cb,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();v&&clearTimeout(v),_.performance.current!==_.performance.min&&y(_.performance.min),v=setTimeout(()=>y(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:_=>a(M=>({...M,events:{...M.events,..._}})),setSize:(_,M,E,A,L)=>{const D=l().camera,U={width:_,height:M,top:A||0,left:L||0,updateStyle:E};a(O=>({size:U,viewport:{...O.viewport,...g(D,d,U)}}))},setDpr:_=>a(M=>{const E=mO(_);return{viewport:{...M.viewport,dpr:E,initialDpr:M.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,_!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,M,E)=>{const A=l().internal;return A.priority=A.priority+(M>0?1:0),A.subscribers.push({ref:_,priority:M,store:E}),A.subscribers=A.subscribers.sort((L,D)=>L.priority-D.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(M>0?1:0),L.subscribers=L.subscribers.filter(D=>D.ref!==_))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:d,set:m}=n.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var g;i=l,s=u.dpr,Ine(a,l),d.setPixelRatio(u.dpr);const v=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,v)}a!==o&&(o=a,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let F_,Gne=new Set,Vne=new Set,Wne=new Set;function VM(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function qg(t,e){switch(t){case"before":return VM(Gne,e);case"after":return VM(Vne,e);case"tail":return VM(Wne,e)}}let WM,jM;function XM(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),WM=e.internal.subscribers,F_=0;F_<WM.length;F_++)jM=WM[F_],jM.ref.current(jM.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function jne(t){let e=!1,n=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,qg("before",u),n=!0;for(const m of t.values()){var d;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(r+=XM(u,s))}if(n=!1,qg("after",u),r===0)return qg("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,d=1){var m;if(!u)return t.forEach(g=>a(g.store.getState(),d));(m=u.gl.xr)!=null&&m.isPresenting||!u.internal.active||u.frameloop==="never"||(d>1?u.internal.frames=Math.min(60,u.internal.frames+d):n?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,d=!0,m,g){if(d&&qg("before",u),m)XM(u,m,g);else for(const v of t.values())XM(u,v.store.getState());d&&qg("after",u)}return{loop:o,invalidate:a,advance:l}}function xO(){const t=V.useContext(yO);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Xne(t=n=>n,e){return xO()(t,e)}function Yne(t,e=0){const n=xO(),r=n.getState().internal.subscribe,i=fO(t);return q1(()=>r(i,e,n),[e,r,n]),null}const Kp=new Map,{invalidate:s5,advance:o5}=jne(Kp),{reconciler:Ox,applyProps:qh}=Nne(Kp,Une),Kh={objects:"shallow",strict:!1},qne=(t,e)=>{const n=typeof t=="function"?t(e):t;return _O(n)?n:new sO({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Kne(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function $ne(t){const e=Kp.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Hne(s5,o5),o=n||Ox.createContainer(s,i0.ConcurrentRoot,null,!1,null,"",i,null);e||Kp.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(d={}){let{gl:m,size:g,scene:v,events:y,onCreated:x,shadows:S=!1,linear:_=!1,flat:M=!1,legacy:E=!1,orthographic:A=!1,frameloop:L="always",dpr:D=[1,2],performance:U,raycaster:O,camera:B,onPointerMissed:T}=d,z=s.getState(),W=z.gl;z.gl||z.set({gl:W=qne(m,t)});let K=z.raycaster;K||z.set({raycaster:K=new ZF});const{params:Z,...te}=O||{};if(Vn.equ(te,K,Kh)||qh(K,{...te}),Vn.equ(Z,K.params,Kh)||qh(K,{params:{...K.params,...Z}}),!z.camera||z.camera===u&&!Vn.equ(u,B,Kh)){u=B;const se=B instanceof B1,he=se?B:A?new Y1(0,0,0,0,.1,1e3):new ai(75,0,.1,1e3);se||(he.position.z=5,B&&(qh(he,B),("aspect"in B||"left"in B||"right"in B||"bottom"in B||"top"in B)&&(he.manual=!0,he.updateProjectionMatrix())),!z.camera&&!(B!=null&&B.rotation)&&he.lookAt(0,0,0)),z.set({camera:he}),K.camera=he}if(!z.scene){let se;v!=null&&v.isScene?se=v:(se=new WA,v&&qh(se,v)),z.set({scene:$h(se)})}if(!z.xr){var ne;const se=(ze,ge)=>{const De=s.getState();De.frameloop!=="never"&&o5(ze,!0,De,ge)},he=()=>{const ze=s.getState();ze.gl.xr.enabled=ze.gl.xr.isPresenting,ze.gl.xr.setAnimationLoop(ze.gl.xr.isPresenting?se:null),ze.gl.xr.isPresenting||s5(ze)},Me={connect(){const ze=s.getState().gl;ze.xr.addEventListener("sessionstart",he),ze.xr.addEventListener("sessionend",he)},disconnect(){const ze=s.getState().gl;ze.xr.removeEventListener("sessionstart",he),ze.xr.removeEventListener("sessionend",he)}};typeof((ne=W.xr)==null?void 0:ne.addEventListener)=="function"&&Me.connect(),z.set({xr:Me})}if(W.shadowMap){const se=W.shadowMap.enabled,he=W.shadowMap.type;if(W.shadowMap.enabled=!!S,Vn.boo(S))W.shadowMap.type=g0;else if(Vn.str(S)){var de;const Me={basic:ak,percentage:cE,soft:g0,variance:sa};W.shadowMap.type=(de=Me[S])!=null?de:g0}else Vn.obj(S)&&Object.assign(W.shadowMap,S);(se!==W.shadowMap.enabled||he!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}const Y=cO();Y&&("enabled"in Y?Y.enabled=!E:"legacyMode"in Y&&(Y.legacyMode=E)),l||qh(W,{outputEncoding:_?3e3:3001,toneMapping:M?Za:PA}),z.legacy!==E&&z.set(()=>({legacy:E})),z.linear!==_&&z.set(()=>({linear:_})),z.flat!==M&&z.set(()=>({flat:M})),m&&!Vn.fun(m)&&!_O(m)&&!Vn.equ(m,W,Kh)&&qh(W,m),y&&!z.events.handlers&&z.set({events:y(s)});const ae=Kne(t,g);return Vn.equ(ae,z.size,Kh)||z.setSize(ae.width,ae.height,ae.updateStyle,ae.top,ae.left),D&&z.viewport.dpr!==mO(D)&&z.setDpr(D),z.frameloop!==L&&z.setFrameloop(L),z.onPointerMissed||z.set({onPointerMissed:T}),U&&!Vn.equ(U,z.performance,Kh)&&z.set(se=>({performance:{...se.performance,...U}})),a=x,l=!0,this},render(d){return l||this.configure(),Ox.updateContainer(k.jsx(Zne,{store:s,children:d,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){SO(t)}}}function Zne({store:t,children:e,onCreated:n,rootElement:r}){return q1(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),k.jsx(yO.Provider,{value:t,children:e})}function SO(t,e){const n=Kp.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),Ox.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),One(i),Kp.delete(t)}catch{}},500)})}}Ox.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});const YM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Qne(t){const{handlePointer:e}=zne(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(YM).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=YM[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=YM[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function a5(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function Jne({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,d=V.useRef(!1);V.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,g,v]=V.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:M,top:E,width:A,height:L,bottom:D,right:U,x:O,y:B}=a.current.element.getBoundingClientRect(),T={left:M,top:E,width:A,height:L,bottom:D,right:U,x:O,y:B};a.current.element instanceof HTMLElement&&r&&(T.height=a.current.element.offsetHeight,T.width=a.current.element.offsetWidth),Object.freeze(T),d.current&&!rre(a.current.lastBounds,T)&&o(a.current.lastBounds=T)};return[_,u?a5(_,u):_,l?a5(_,l):_]},[o,r,l,u]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=_=>{!_||_===a.current.element||(y(),a.current.element=_,a.current.scrollContainers=EO(_),x())};return tre(v,!!e),ere(g),V.useEffect(()=>{y(),x()},[e,v,g]),V.useEffect(()=>y,[]),[S,s,m]}function ere(t){V.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function tre(t,e){V.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function EO(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...EO(t.parentElement)]}const nre=["x","y","top","bottom","left","right","width","height"],rre=(t,e)=>nre.every(n=>t[n]===e[n]),ire=V.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Qne,eventSource:a,eventPrefix:l,shadows:u,linear:d,flat:m,legacy:g,orthographic:v,frameloop:y,dpr:x,performance:S,raycaster:_,camera:M,scene:E,onPointerMissed:A,onCreated:L,...D},U){V.useMemo(()=>Lne(Mne),[]);const O=U6(),[B,T]=Jne({scroll:!0,debounce:{scroll:50,resize:0},...r}),z=V.useRef(null),W=V.useRef(null);V.useImperativeHandle(U,()=>z.current);const K=fO(A),[Z,te]=V.useState(!1),[ne,de]=V.useState(!1);if(Z)throw Z;if(ne)throw ne;const Y=V.useRef(null);q1(()=>{const se=z.current;T.width>0&&T.height>0&&se&&(Y.current||(Y.current=$ne(se)),Y.current.configure({gl:s,events:o,shadows:u,linear:d,flat:m,legacy:g,orthographic:v,frameloop:y,dpr:x,performance:S,raycaster:_,camera:M,scene:E,size:T,onPointerMissed:(...he)=>K.current==null?void 0:K.current(...he),onCreated:he=>{he.events.connect==null||he.events.connect(a?Dne(a)?a.current:a:W.current),l&&he.setEvents({compute:(Me,ze)=>{const ge=Me[l+"X"],De=Me[l+"Y"];ze.pointer.set(ge/ze.size.width*2-1,-(De/ze.size.height)*2+1),ze.raycaster.setFromCamera(ze.pointer,ze.camera)}}),L==null||L(he)}}),Y.current.render(k.jsx(O,{children:k.jsx(hO,{set:de,children:k.jsx(V.Suspense,{fallback:k.jsx(kne,{set:te}),children:e??null})})})))}),V.useEffect(()=>{const se=z.current;if(se)return()=>SO(se)},[]);const ae=a?"none":"auto";return k.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...i},...D,children:k.jsx("div",{ref:B,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:z,style:{display:"block"},children:n})})})}),sre=V.forwardRef(function(e,n){return k.jsx(dA,{children:k.jsx(ire,{...e,ref:n})})});function W2(){return W2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W2.apply(null,arguments)}var ore=Object.defineProperty,are=(t,e,n)=>e in t?ore(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lre=(t,e,n)=>(are(t,e+"",n),n);class ure{constructor(){lre(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var cre=Object.defineProperty,dre=(t,e,n)=>e in t?cre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ot=(t,e,n)=>(dre(t,typeof e!="symbol"?e+"":e,n),n);let fre=class extends ure{constructor(e,n){super(),ot(this,"enabled",!0),ot(this,"screen",{left:0,top:0,width:0,height:0}),ot(this,"rotateSpeed",1),ot(this,"zoomSpeed",1.2),ot(this,"panSpeed",.3),ot(this,"noRotate",!1),ot(this,"noZoom",!1),ot(this,"noPan",!1),ot(this,"staticMoving",!1),ot(this,"dynamicDampingFactor",.2),ot(this,"minDistance",0),ot(this,"maxDistance",1/0),ot(this,"keys",["KeyA","KeyS","KeyD"]),ot(this,"mouseButtons",{LEFT:ry.ROTATE,MIDDLE:ry.DOLLY,RIGHT:ry.PAN}),ot(this,"object"),ot(this,"domElement"),ot(this,"cursorZoom",!1),ot(this,"target",new re),ot(this,"mousePosition",new Ge),ot(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),ot(this,"EPS",1e-6),ot(this,"lastZoom",1),ot(this,"lastPosition",new re),ot(this,"cursorVector",new re),ot(this,"targetVector",new re),ot(this,"_state",this.STATE.NONE),ot(this,"_keyState",this.STATE.NONE),ot(this,"_eye",new re),ot(this,"_movePrev",new Ge),ot(this,"_moveCurr",new Ge),ot(this,"_lastAxis",new re),ot(this,"_lastAngle",0),ot(this,"_zoomStart",new Ge),ot(this,"_zoomEnd",new Ge),ot(this,"_touchZoomDistanceStart",0),ot(this,"_touchZoomDistanceEnd",0),ot(this,"_panStart",new Ge),ot(this,"_panEnd",new Ge),ot(this,"target0"),ot(this,"position0"),ot(this,"up0"),ot(this,"zoom0"),ot(this,"changeEvent",{type:"change"}),ot(this,"startEvent",{type:"start"}),ot(this,"endEvent",{type:"end"}),ot(this,"onScreenVector",new Ge),ot(this,"getMouseOnScreen",(r,i)=>(this.onScreenVector.set((r-this.screen.left)/this.screen.width,(i-this.screen.top)/this.screen.height),this.onScreenVector)),ot(this,"onCircleVector",new Ge),ot(this,"getMouseOnCircle",(r,i)=>(this.onCircleVector.set((r-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-i))/this.screen.width),this.onCircleVector)),ot(this,"axis",new re),ot(this,"quaternion",new as),ot(this,"eyeDirection",new re),ot(this,"objectUpDirection",new re),ot(this,"objectSidewaysDirection",new re),ot(this,"moveDirection",new re),ot(this,"angle",0),ot(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),ot(this,"zoomCamera",()=>{let r;if(this._state===this.STATE.TOUCH_ZOOM_PAN)r=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(r):this.object.isOrthographicCamera?(this.object.zoom/=r,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(r=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(r-1)>this.EPS&&r>0&&(this.object.isPerspectiveCamera?(r>1&&this._eye.length()>=this.maxDistance-this.EPS&&(r=1),this._eye.multiplyScalar(r)):this.object.isOrthographicCamera?(r>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(r=1),this.object.zoom/=r):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let i=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(i,this.target,r)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),ot(this,"mouseChange",new Ge),ot(this,"objectUp",new re),ot(this,"pan",new re),ot(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const r=this.object,i=(r.right-r.left)/this.object.zoom,s=(r.top-r.bottom)/this.object.zoom;this.mouseChange.x*=i,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),ot(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),ot(this,"handleResize",()=>{if(!this.domElement)return;const r=this.domElement.getBoundingClientRect(),i=this.domElement.ownerDocument.documentElement;this.screen.left=r.left+window.pageXOffset-i.clientLeft,this.screen.top=r.top+window.pageYOffset-i.clientTop,this.screen.width=r.width,this.screen.height=r.height}),ot(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),ot(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),ot(this,"keydown",r=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(r.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:r.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:r.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),ot(this,"onPointerDown",r=>{if(this.enabled!==!1)switch(r.pointerType){case"mouse":case"pen":this.onMouseDown(r);break}}),ot(this,"onPointerMove",r=>{if(this.enabled!==!1)switch(r.pointerType){case"mouse":case"pen":this.onMouseMove(r);break}}),ot(this,"onPointerUp",r=>{if(this.enabled!==!1)switch(r.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),ot(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),ot(this,"onMouseDown",r=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(r.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}const i=this._keyState!==this.STATE.NONE?this._keyState:this._state;i===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(r.pageX,r.pageY)),this._movePrev.copy(this._moveCurr)):i===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(r.pageX,r.pageY)),this._zoomEnd.copy(this._zoomStart)):i===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(r.pageX,r.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),ot(this,"onMouseMove",r=>{if(this.enabled===!1)return;const i=this._keyState!==this.STATE.NONE?this._keyState:this._state;i===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(r.pageX,r.pageY))):i===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(r.pageX,r.pageY)):i===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(r.pageX,r.pageY))}),ot(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),ot(this,"mousewheel",r=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(r.preventDefault(),r.deltaMode){case 2:this._zoomStart.y-=r.deltaY*.025;break;case 1:this._zoomStart.y-=r.deltaY*.01;break;default:this._zoomStart.y-=r.deltaY*25e-5;break}this.mousePosition.x=r.offsetX/this.screen.width*2-1,this.mousePosition.y=-(r.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),ot(this,"touchstart",r=>{if(this.enabled!==!1){switch(r.preventDefault(),r.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(r.touches[0].pageX,r.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const i=r.touches[0].pageX-r.touches[1].pageX,s=r.touches[0].pageY-r.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(i*i+s*s);const o=(r.touches[0].pageX+r.touches[1].pageX)/2,a=(r.touches[0].pageY+r.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),ot(this,"touchmove",r=>{if(this.enabled!==!1)switch(r.preventDefault(),r.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(r.touches[0].pageX,r.touches[0].pageY));break;default:const i=r.touches[0].pageX-r.touches[1].pageX,s=r.touches[0].pageY-r.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(i*i+s*s);const o=(r.touches[0].pageX+r.touches[1].pageX)/2,a=(r.touches[0].pageY+r.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),ot(this,"touchend",r=>{if(this.enabled!==!1){switch(r.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(r.touches[0].pageX,r.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),ot(this,"contextmenu",r=>{this.enabled!==!1&&r.preventDefault()}),ot(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),ot(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,n!==void 0&&this.connect(n),this.update()}};const hre=V.forwardRef(({makeDefault:t,camera:e,domElement:n,regress:r,onChange:i,onStart:s,onEnd:o,...a},l)=>{const{invalidate:u,camera:d,gl:m,events:g,set:v,get:y,performance:x,viewport:S}=Xne(),_=e||d,M=n||g.connected||m.domElement,E=V.useMemo(()=>new fre(_),[_]);return Yne(()=>{E.enabled&&E.update()},-1),V.useEffect(()=>(E.connect(M),()=>void E.dispose()),[M,r,E,u]),V.useEffect(()=>{const A=L=>{u(),r&&x.regress(),i&&i(L)};return E.addEventListener("change",A),s&&E.addEventListener("start",s),o&&E.addEventListener("end",o),()=>{s&&E.removeEventListener("start",s),o&&E.removeEventListener("end",o),E.removeEventListener("change",A)}},[i,s,o,E,u]),V.useEffect(()=>{E.handleResize()},[S]),V.useEffect(()=>{if(t){const A=y().controls;return v({controls:E}),()=>v({controls:A})}},[t,E]),V.createElement("primitive",W2({ref:l,object:E},a))}),pre=(t,e)=>[t/e.maxY*255,t/e.maxY*255,t/e.maxY*255,255];function mre(t){const e=V.useMemo(()=>t.Hedr[1e3].obj,[t.Hedr]),n=V.useMemo(()=>t.YCrd[1e3].obj.flatMap(i=>pre(i,e)),[t.YCrd[1e3].obj]);return{heightImg:V.useMemo(()=>{const i=document.createElement("canvas");i.width=e.mapWidth+1,i.height=e.mapHeight+1;const s=i.getContext("2d");if(!s)throw new Error("Could not get canvas context");return s.putImageData(new ImageData(new Uint8ClampedArray(n),e.mapWidth+1,e.mapHeight+1),0,0),i},[e,t.YCrd[1e3].obj])}}function gre(t,e,n){if(t.length===0)throw new Error("No map images to combine");const r=e.Hedr[1e3].obj.mapWidth,i=e.Hedr[1e3].obj.mapHeight,s=document.createElement("canvas");s.width=n.SUPERTILE_TEXMAP_SIZE/n.TILES_PER_SUPERTILE*r,console.log("width",n.SUPERTILE_TEXMAP_SIZE/n.TILES_PER_SUPERTILE*r),s.height=n.SUPERTILE_TEXMAP_SIZE/n.TILES_PER_SUPERTILE*i;const o=s.getContext("2d");if(!o)throw new Error("Could not get canvas context");const a=r/n.TILES_PER_SUPERTILE,l=i/n.TILES_PER_SUPERTILE;for(let u=0;u<a;u++)for(let d=0;d<l;d++){const m=e.STgd[1e3].obj[u+d*a].superTileId,g=t[m];g&&o.drawImage(g,u*n.SUPERTILE_TEXMAP_SIZE,d*n.SUPERTILE_TEXMAP_SIZE)}return s}function vre({data:t,mapImages:e}){const n=hn(Dr),{heightImg:r}=mre(t),i=V.useMemo(()=>gre(e,t,n),[e,t,n]),s=document.createElement("canvas");s.width=100,s.height=100;const o=s.getContext("2d");if(!o)throw new Error("Could not get canvas context");o.fillStyle="red",o.fillRect(0,0,100,100),console.log(r);const a=V.useMemo(()=>new N2(r),[r,s]),l=V.useMemo(()=>new N2(i),[i]),u=t.Hedr[1e3].obj,d=u.mapWidth,m=u.mapHeight,g=V.useRef(null),v=V.useRef(null),y=u.tileSize,x=n.TILE_INGAME_SIZE/y;return console.log("mapTileSize",y,"yScale",x),k.jsx(k.Fragment,{children:k.jsxs("mesh",{ref:g,position:[d*n.TILE_INGAME_SIZE/2,0,m*n.TILE_INGAME_SIZE/2],rotation:[-Math.PI/2,0,0],children:[k.jsx("planeGeometry",{ref:v,args:[d*n.TILE_INGAME_SIZE,m*n.TILE_INGAME_SIZE,d,m]}),k.jsx("ambientLight",{intensity:1}),k.jsx("meshStandardMaterial",{side:No,needsUpdate:!0,alphaMap:a,displacementMap:a,displacementScale:u.maxY*x,map:l})]})})}const _re=300,yre=.5,xre=(t,e,n)=>{const r=Math.floor(t);return Math.floor(e)*(n.mapWidth+1)+r},O_=(t,e,n,r)=>{const i=n.Hedr[1e3].obj,s=xre(t,e,i),o=n.YCrd[1e3].obj,a=i.tileSize,l=r.TILE_INGAME_SIZE/a;return s<0||s>=o.length?(console.warn(`Index ${s} out of bounds for yCoords array of length ${o.length}`),i.minY*l):o[s]*l},j2=(t,e,n,r)=>{const i=t/r.TILE_SIZE,s=e/r.TILE_SIZE,o=Math.floor(i),a=Math.floor(s),l=Math.ceil(i),u=Math.ceil(s),d=O_(o,a,n,r),m=O_(l,a,n,r),g=O_(o,u,n,r),v=O_(l,u,n,r);(isNaN(d)||isNaN(m)||isNaN(g)||isNaN(v))&&console.warn("NaN height value(s) from getHeightAtTile:",{x:t,z:e,x1:o,z1:a,x2:l,z2:u,h11:d,h21:m,h12:g,h22:v});const y=l-o,x=u-a,S=y===0?0:(i-o)/y,_=x===0?0:(s-a)/x,M=d*(1-S)*(1-_)+m*S*(1-_)+g*(1-S)*_+v*S*_;return isNaN(M)&&console.warn("Interpolated height is NaN. Inputs:",{x_world:t,z_world:e,x_tile_units:i,z_tile_units:s,x1:o,z1:a,x2:l,z2:u,h11:d,h21:m,h12:g,h22:v,xFactor:S,zFactor:_,dx:y,dz:x}),M},Sre=({data:t})=>{var i,s,o,a;const e=hn(Dr);if(!t.Fenc||!t.Fenc[1e3]||!t.FnNb||!((s=(i=t.Hedr)==null?void 0:i[1e3])!=null&&s.obj)||!((a=(o=t.YCrd)==null?void 0:o[1e3])!=null&&a.obj))return null;const n=t.Fenc[1e3].obj,r=t.FnNb;return k.jsx("group",{name:"fences",children:n.map((l,u)=>{const d=1e3+u,m=r[d];if(!m||!m.obj||m.obj.length<2)return null;const g=m.obj,v=[];for(let y=0;y<g.length-1;y++){const x=g[y],S=g[y+1],_=x[0]*(e.TILE_INGAME_SIZE/e.TILE_SIZE),M=x[1]*(e.TILE_INGAME_SIZE/e.TILE_SIZE),E=S[0]*(e.TILE_INGAME_SIZE/e.TILE_SIZE),A=S[1]*(e.TILE_INGAME_SIZE/e.TILE_SIZE),L=j2(x[0],x[1],t,e),D=j2(S[0],S[1],t,e),U=Math.sqrt(Math.pow(E-_,2)+Math.pow(A-M,2));if(U===0)continue;const O=(_+E)/2,B=(M+A)/2,z=(L+D)/2,W=Math.atan2(E-_,A-M);v.push(k.jsxs("mesh",{position:[O,z,B],rotation:[0,W+Math.PI/2,0],children:[k.jsx("boxGeometry",{args:[U,_re,yre]}),k.jsx("meshStandardMaterial",{color:"saddlebrown"})]},`fence-${u}-segment-${y}`))}return k.jsx("group",{children:v},`fence-group-${u}`)})})},Ere=t=>{switch(t){case za.BLUEWATER:return{color:255,opacity:.7};case za.SOAP:return{color:16758465,opacity:.6};case za.GREENWATER:return{color:32768,opacity:.7};case za.OIL:return{color:0,opacity:.8};case za.JUNGLEWATER:return{color:6400,opacity:.7};case za.MUD:return{color:9127187,opacitF:.9};case za.RADIOACTIVE:return{color:3329330,opacity:.7};case za.LAVA:return{color:16711680,opacity:.9};default:return{color:255,opacity:.7}}},wre=({data:t})=>{var r,i;const e=hn(Dr);if(!((i=(r=t.Liqd)==null?void 0:r[1e3])!=null&&i.obj))return null;const n=t.Liqd[1e3].obj;return k.jsx("group",{children:n.map((s,o)=>{if(!s||s.numNubs<3)return null;const a=e.TILE_INGAME_SIZE/e.TILE_SIZE,l=s.nubs.slice(0,s.numNubs).map(v=>new Ge(v[0]*a,v[1]*a));if(l.length<3)return null;const u=new yc(l),{color:d,opacity:m}=Ere(s.type),g=j2(s.hotSpotX,s.hotSpotZ,t,e)+100;return console.log("Patch height",g),k.jsxs(Sn.Fragment,{children:[k.jsxs("mesh",{position:[0,g,0],rotation:[Math.PI/2,0,0],frustumCulled:!1,children:[k.jsx("shapeGeometry",{args:[u]}),k.jsx("meshStandardMaterial",{color:d,opacity:m,transparent:!0,side:No})]},`liquid-${o}`),k.jsxs("mesh",{position:[s.hotSpotX*a,g,s.hotSpotZ*a],children:[k.jsx("boxGeometry",{args:[55,55,55]})," ",k.jsx("meshStandardMaterial",{color:"red"})]},`liquid-hotspot-box-${o}`),k.jsxs("mesh",{position:[s.hotSpotX*a,g-100,s.hotSpotZ*a],children:[k.jsx("boxGeometry",{args:[55,55,55]})," ",k.jsx("meshStandardMaterial",{color:"red"})]},`liquid-hotspot-lower-box-${o}`)]},`liquid-fragment-${o}`)})})};function Mre({data:t,mapImages:e}){const n=hn(Dr),r=t.Hedr[1e3].obj,i=r.mapWidth,s=r.mapHeight,o=i*n.TILE_INGAME_SIZE,a=s*n.TILE_INGAME_SIZE;return r?k.jsxs(sre,{camera:{fov:110,near:.1,far:1e5,position:[o/2,5e3,a/2],rotation:[0,Math.PI,0]},children:[k.jsx(hre,{}),k.jsx(vre,{data:t,mapImages:e}),k.jsx(Sre,{data:t}),k.jsx(wre,{data:t})]}):null}function Cre({data:t,setData:e,mapImages:n,setMapImages:r,undoData:i,redoData:s,dataHistory:o}){console.log(t);const a=hn(nk),[l,u]=V.useState(0),[d,m]=E2({scale:1,x:0,y:0}),g=()=>m(y=>{y.scale=Math.max(.1,y.scale*1.1)}),v=()=>m(y=>{y.scale=Math.min(5,y.scale*.9)});return k.jsxs("div",{className:"flex flex-col flex-1 w-full gap-2 min-h-0",children:[k.jsxs("div",{className:"grid grid-cols-4 xl:grid-cols-7 gap-2 w-full overflow-clip",children:[k.jsx(et,{selected:l===0,onClick:()=>u(0),children:"Fences"}),k.jsx(et,{selected:l===1,onClick:()=>u(1),children:"Water"}),k.jsx(et,{selected:l===2,onClick:()=>u(2),children:"Items"}),k.jsx(et,{selected:l===3,onClick:()=>u(3),children:"Splines"}),k.jsx(et,{selected:l===4,onClick:()=>u(4),children:"Tiles"}),k.jsx(et,{disabled:t.STgd===void 0,selected:l===5,onClick:()=>u(5),children:"Supertiles"}),k.jsxs("div",{className:"grid col-span-2 xl:col-span-1 grid-cols-4 gap-2",children:[k.jsx(Rv,{disabled:o.index===0,onClick:i,children:"↩"}),k.jsx(Rv,{disabled:o.index===o.items.length-1,onClick:s,children:"↪"}),k.jsx(Rv,{onClick:v,children:"-"}),k.jsx(Rv,{onClick:g,children:"+"})]})]}),k.jsxs("div",{children:[l===0&&k.jsx(OY,{data:t,setData:e}),l===1&&k.jsx(QY,{data:t,setData:e}),l===2&&k.jsx(WY,{data:t,setData:e}),l===3&&k.jsx(YY,{data:t,setData:e}),l===4&&k.jsx(JY,{}),l===5&&k.jsx(eq,{data:t,setData:e,mapImages:n,setMapImages:r})]}),k.jsx("div",{className:"w-full min-h-0 flex-1 border-2 border-black overflow-clip",children:a===fp.THREE_D&&l===4?k.jsx(Mre,{data:t,mapImages:n}):k.jsx(cq,{data:t,setData:e,mapImages:n,view:l,stage:d,setStage:m})})]})}const Are=wi(!1),bre=1,Pre=1e6;let qM=0;function Rre(){return qM=(qM+1)%Number.MAX_SAFE_INTEGER,qM.toString()}const KM=new Map,l5=t=>{if(KM.has(t))return;const e=setTimeout(()=>{KM.delete(t),A0({type:"REMOVE_TOAST",toastId:t})},Pre);KM.set(t,e)},Tre=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,bre)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?l5(n):t.toasts.forEach(r=>{l5(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},uy=[];let cy={toasts:[]};function A0(t){cy=Tre(cy,t),uy.forEach(e=>{e(cy)})}function Lre({...t}){const e=Rre(),n=i=>A0({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>A0({type:"DISMISS_TOAST",toastId:e});return A0({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function wO(){const[t,e]=V.useState(cy);return V.useEffect(()=>(uy.push(e),()=>{const n=uy.indexOf(e);n>-1&&uy.splice(n,1)}),[t]),{...t,toast:Lre,dismiss:n=>A0({type:"DISMISS_TOAST",toastId:n})}}function Nre({pyodideWorker:t}){const e=hn(Dr),[n,r]=E2(null),[i,s]=E2({items:[],index:0}),[o,a]=or(Are),[l,u]=V.useState(void 0),[d,m]=V.useState(void 0),[g,v]=V.useState(void 0),[y,x]=V.useState(!1),{toast:S}=wO();V.useEffect(()=>{y&&(E(),x(!1))},[y,n]),V.useEffect(()=>{if(n||s(()=>({items:[],index:0})),o){a(!1);return}s(A=>{n&&(A.items.splice(A.index+1,A.items.length-A.index-1),A.items.push(n),A.index=A.items.length-1,A.items.length>10&&(A.items.shift(),A.index-=1))})},[n]);const _=()=>{i.index>0&&(s(A=>{A.index-=1}),r(i.items[i.index-1]),a(!0))},M=()=>{i.index<i.items.length-1&&(s(A=>{A.index+=1}),r(i.items[i.index+1]),a(!0))};async function E(){if(!l||!d)return;S({title:"Saving Map",description:"Processing map data"});const L=await new Promise((ne,de)=>{t.postMessage({type:"load_bytes_from_json",json_blob:n,converters:e.STRUCT_SPECS,only_types:[],skip_types:[],adf:"True"}),t.onmessage=Y=>{Y.data.type==="load_bytes_from_json"?ne(Y.data.result):de(new Error("Unexpected response from pyodide worker"))}}),D=new Blob([L],{type:".ter.rsrc"}),U=URL.createObjectURL(D);let O=document.createElement("a");if(O.href=U,O.setAttribute("download",l.name),O.click(),!g)return;S({title:"Saving Map",description:"Compressing textures"});const T=await new Promise((ne,de)=>{const Y=new Array(g.length),ae={count:0};console.time("compress");for(let se=0;se<g.length;se++){const he=g[se].getContext("2d");if(!he){de(new Error("Could not get canvas context"));return}const Me=he.getImageData(0,0,g[se].width,g[se].height),ze=new RN;ze.onmessage=ge=>{const De=ge.data;De.type==="compressRes"&&(Y[De.id]=new DataView(De.dataBuffer),ae.count++,ae.count===g.length&&(console.timeEnd("compress"),ne(Y)),ze.terminate())},console.log("Before",Me.data.buffer.byteLength),ze.postMessage({uIntArray:Me.data,type:"compress",id:se},[Me.data.buffer]),console.log("After",Me.data.buffer.byteLength)}});let z=0;for(const ne of T)z+=4+ne.byteLength;const W=new DataView(new ArrayBuffer(z));let K=0;for(let ne=0;ne<T.length;ne++){const de=T[ne];W.setInt32(K,de.byteLength),K+=4;for(let Y=0;Y<de.byteLength;Y++)W.setUint8(K,de.getUint8(Y)),K++}const Z=new Blob([W.buffer],{type:".ter"}),te=URL.createObjectURL(Z);O=document.createElement("a"),O.href=te,O.setAttribute("download",d.name),O.click(),S({title:"Map Downloaded!"})}return!l||!g?k.jsx(vY,{mapFile:l,setMapFile:u,setMapImagesFile:m,setMapImages:v,pyodideWorker:t,setData:r}):k.jsxs("div",{className:"flex flex-col gap-2 text-white h-screen max-h-screen overflow-clip min-w-full p-2 md:p-6",children:[k.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 mx-auto w-full",children:[k.jsx(et,{onClick:()=>{u(void 0),r(null),v(void 0),m(void 0)},children:"←New Map"}),k.jsx("div",{className:"flex-1"}),k.jsx(et,{onClick:()=>{ZV(r,e),a(!0),x(!0)},children:"Download"})]}),k.jsx("hr",{}),n!=null&&g?k.jsx(Cre,{data:n,setData:r,mapImages:g,setMapImages:v,undoData:_,redoData:M,dataHistory:i}):k.jsx("p",{children:"Loading..."})]})}var Ix=V.forwardRef((t,e)=>{const{children:n,...r}=t,i=V.Children.toArray(n),s=i.find(kre);if(s){const o=s.props.children,a=i.map(l=>l===s?V.Children.count(o)>1?V.Children.only(null):V.isValidElement(o)?o.props.children:null:l);return k.jsx(X2,{...r,ref:e,children:V.isValidElement(o)?V.cloneElement(o,void 0,a):null})}return k.jsx(X2,{...r,ref:e,children:n})});Ix.displayName="Slot";var X2=V.forwardRef((t,e)=>{const{children:n,...r}=t;if(V.isValidElement(n)){const i=Ore(n),s=Fre(r,n.props);return n.type!==V.Fragment&&(s.ref=e?pA(e,i):i),V.cloneElement(n,s)}return V.Children.count(n)>1?V.Children.only(null):null});X2.displayName="SlotClone";var Dre=({children:t})=>k.jsx(k.Fragment,{children:t});function kre(t){return V.isValidElement(t)&&t.type===Dre}function Fre(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Ore(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ire(t){const e=t+"CollectionProvider",[n,r]=L1(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:x}=v,S=Sn.useRef(null),_=Sn.useRef(new Map).current;return k.jsx(i,{scope:y,itemMap:_,collectionRef:S,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=Sn.forwardRef((v,y)=>{const{scope:x,children:S}=v,_=s(a,x),M=$n(y,_.collectionRef);return k.jsx(Ix,{ref:M,children:S})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",m=Sn.forwardRef((v,y)=>{const{scope:x,children:S,..._}=v,M=Sn.useRef(null),E=$n(y,M),A=s(u,x);return Sn.useEffect(()=>(A.itemMap.set(M,{ref:M,..._}),()=>void A.itemMap.delete(M))),k.jsx(Ix,{[d]:"",ref:E,children:S})});m.displayName=u;function g(v){const y=s(t+"CollectionConsumer",v);return Sn.useCallback(()=>{const S=y.collectionRef.current;if(!S)return[];const _=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((A,L)=>_.indexOf(A.ref.current)-_.indexOf(L.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},g,r]}var Ure=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cl=Ure.reduce((t,e)=>{const n=V.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Ix:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function MO(t,e){t&&Lc.flushSync(()=>t.dispatchEvent(e))}var Bre="DismissableLayer",Y2="dismissableLayer.update",zre="dismissableLayer.pointerDownOutside",Hre="dismissableLayer.focusOutside",u5,CO=V.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),AO=V.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=V.useContext(CO),[d,m]=V.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=V.useState({}),y=$n(e,U=>m(U)),x=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(S),M=d?x.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,A=M>=_,L=Vre(U=>{const O=U.target,B=[...u.branches].some(T=>T.contains(O));!A||B||(i==null||i(U),o==null||o(U),U.defaultPrevented||a==null||a())},g),D=Wre(U=>{const O=U.target;[...u.branches].some(T=>T.contains(O))||(s==null||s(U),o==null||o(U),U.defaultPrevented||a==null||a())},g);return J6(U=>{M===u.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))},g),V.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u5=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),c5(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=u5)}},[d,g,n,u]),V.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),c5())},[d,u]),V.useEffect(()=>{const U=()=>v({});return document.addEventListener(Y2,U),()=>document.removeEventListener(Y2,U)},[]),k.jsx(cl.div,{...l,ref:y,style:{pointerEvents:E?A?"auto":"none":void 0,...t.style},onFocusCapture:mn(t.onFocusCapture,D.onFocusCapture),onBlurCapture:mn(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:mn(t.onPointerDownCapture,L.onPointerDownCapture)})});AO.displayName=Bre;var Gre="DismissableLayerBranch",bO=V.forwardRef((t,e)=>{const n=V.useContext(CO),r=V.useRef(null),i=$n(e,r);return V.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),k.jsx(cl.div,{...t,ref:i})});bO.displayName=Gre;function Vre(t,e=globalThis==null?void 0:globalThis.document){const n=us(t),r=V.useRef(!1),i=V.useRef(()=>{});return V.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){PO(zre,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Wre(t,e=globalThis==null?void 0:globalThis.document){const n=us(t),r=V.useRef(!1);return V.useEffect(()=>{const i=s=>{s.target&&!r.current&&PO(Hre,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function c5(){const t=new CustomEvent(Y2);document.dispatchEvent(t)}function PO(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?MO(i,s):i.dispatchEvent(s)}var jre=AO,Xre=bO,Yre="Portal",RO=V.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=V.useState(!1);Ei(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?bN.createPortal(k.jsx(cl.div,{...r,ref:e}),o):null});RO.displayName=Yre;function qre(t,e){return V.useReducer((n,r)=>e[n][r]??n,t)}var TO=t=>{const{present:e,children:n}=t,r=Kre(e),i=typeof n=="function"?n({present:r.isPresent}):V.Children.only(n),s=$n(r.ref,$re(i));return typeof n=="function"||r.isPresent?V.cloneElement(i,{ref:s}):null};TO.displayName="Presence";function Kre(t){const[e,n]=V.useState(),r=V.useRef({}),i=V.useRef(t),s=V.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qre(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return V.useEffect(()=>{const u=I_(r.current);s.current=a==="mounted"?u:"none"},[a]),Ei(()=>{const u=r.current,d=i.current;if(d!==t){const g=s.current,v=I_(u);t?l("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&g!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ei(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,m=v=>{const x=I_(r.current).includes(v.animationName);if(v.target===e&&x&&(l("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},g=v=>{v.target===e&&(s.current=I_(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:V.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function I_(t){return(t==null?void 0:t.animationName)||"none"}function $re(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Zre="VisuallyHidden",vb=V.forwardRef((t,e)=>k.jsx(cl.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));vb.displayName=Zre;var _b="ToastProvider",[yb,Qre,Jre]=Ire("Toast"),[LO,Bie]=L1("Toast",[Jre]),[eie,HE]=LO(_b),NO=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=V.useState(null),[u,d]=V.useState(0),m=V.useRef(!1),g=V.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_b}\`. Expected non-empty \`string\`.`),k.jsx(yb.Provider,{scope:e,children:k.jsx(eie,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:V.useCallback(()=>d(v=>v+1),[]),onToastRemove:V.useCallback(()=>d(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:o})})};NO.displayName=_b;var DO="ToastViewport",tie=["F8"],q2="toast.viewportPause",K2="toast.viewportResume",kO=V.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=tie,label:i="Notifications ({hotkey})",...s}=t,o=HE(DO,n),a=Qre(n),l=V.useRef(null),u=V.useRef(null),d=V.useRef(null),m=V.useRef(null),g=$n(e,m,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;V.useEffect(()=>{const S=_=>{var E;r.length!==0&&r.every(A=>_[A]||_.code===A)&&((E=m.current)==null||E.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),V.useEffect(()=>{const S=l.current,_=m.current;if(y&&S&&_){const M=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(q2);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(K2);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},A=D=>{!S.contains(D.relatedTarget)&&E()},L=()=>{S.contains(document.activeElement)||E()};return S.addEventListener("focusin",M),S.addEventListener("focusout",A),S.addEventListener("pointermove",M),S.addEventListener("pointerleave",L),window.addEventListener("blur",M),window.addEventListener("focus",E),()=>{S.removeEventListener("focusin",M),S.removeEventListener("focusout",A),S.removeEventListener("pointermove",M),S.removeEventListener("pointerleave",L),window.removeEventListener("blur",M),window.removeEventListener("focus",E)}}},[y,o.isClosePausedRef]);const x=V.useCallback(({tabbingDirection:S})=>{const M=a().map(E=>{const A=E.ref.current,L=[A,...pie(A)];return S==="forwards"?L:L.reverse()});return(S==="forwards"?M.reverse():M).flat()},[a]);return V.useEffect(()=>{const S=m.current;if(S){const _=M=>{var L,D,U;const E=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!E){const O=document.activeElement,B=M.shiftKey;if(M.target===S&&B){(L=u.current)==null||L.focus();return}const W=x({tabbingDirection:B?"backwards":"forwards"}),K=W.findIndex(Z=>Z===O);$M(W.slice(K+1))?M.preventDefault():B?(D=u.current)==null||D.focus():(U=d.current)==null||U.focus()}};return S.addEventListener("keydown",_),()=>S.removeEventListener("keydown",_)}},[a,x]),k.jsxs(Xre,{ref:l,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&k.jsx($2,{ref:u,onFocusFromOutsideViewport:()=>{const S=x({tabbingDirection:"forwards"});$M(S)}}),k.jsx(yb.Slot,{scope:n,children:k.jsx(cl.ol,{tabIndex:-1,...s,ref:g})}),y&&k.jsx($2,{ref:d,onFocusFromOutsideViewport:()=>{const S=x({tabbingDirection:"backwards"});$M(S)}})]})});kO.displayName=DO;var FO="ToastFocusProxy",$2=V.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=HE(FO,n);return k.jsx(vb,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});$2.displayName=FO;var GE="Toast",nie="toast.swipeStart",rie="toast.swipeMove",iie="toast.swipeCancel",sie="toast.swipeEnd",OO=V.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=u2({prop:r,defaultProp:i,onChange:s});return k.jsx(TO,{present:n||a,children:k.jsx(lie,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:us(t.onPause),onResume:us(t.onResume),onSwipeStart:mn(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:mn(t.onSwipeMove,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:mn(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:mn(t.onSwipeEnd,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),l(!1)})})})});OO.displayName=GE;var[oie,aie]=LO(GE,{onClose(){}}),lie=V.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:v,...y}=t,x=HE(GE,n),[S,_]=V.useState(null),M=$n(e,Z=>_(Z)),E=V.useRef(null),A=V.useRef(null),L=i||x.duration,D=V.useRef(0),U=V.useRef(L),O=V.useRef(0),{onToastAdd:B,onToastRemove:T}=x,z=us(()=>{var te;(S==null?void 0:S.contains(document.activeElement))&&((te=x.viewport)==null||te.focus()),o()}),W=V.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(O.current),D.current=new Date().getTime(),O.current=window.setTimeout(z,Z))},[z]);V.useEffect(()=>{const Z=x.viewport;if(Z){const te=()=>{W(U.current),u==null||u()},ne=()=>{const de=new Date().getTime()-D.current;U.current=U.current-de,window.clearTimeout(O.current),l==null||l()};return Z.addEventListener(q2,ne),Z.addEventListener(K2,te),()=>{Z.removeEventListener(q2,ne),Z.removeEventListener(K2,te)}}},[x.viewport,L,l,u,W]),V.useEffect(()=>{s&&!x.isClosePausedRef.current&&W(L)},[s,L,x.isClosePausedRef,W]),V.useEffect(()=>(B(),()=>T()),[B,T]);const K=V.useMemo(()=>S?VO(S):null,[S]);return x.viewport?k.jsxs(k.Fragment,{children:[K&&k.jsx(uie,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),k.jsx(oie,{scope:n,onClose:z,children:Lc.createPortal(k.jsx(yb.ItemSlot,{scope:n,children:k.jsx(jre,{asChild:!0,onEscapeKeyDown:mn(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||z(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:k.jsx(cl.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:M,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:mn(t.onKeyDown,Z=>{Z.key==="Escape"&&(a==null||a(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,z()))}),onPointerDown:mn(t.onPointerDown,Z=>{Z.button===0&&(E.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:mn(t.onPointerMove,Z=>{if(!E.current)return;const te=Z.clientX-E.current.x,ne=Z.clientY-E.current.y,de=!!A.current,Y=["left","right"].includes(x.swipeDirection),ae=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,se=Y?ae(0,te):0,he=Y?0:ae(0,ne),Me=Z.pointerType==="touch"?10:2,ze={x:se,y:he},ge={originalEvent:Z,delta:ze};de?(A.current=ze,U_(rie,m,ge,{discrete:!1})):d5(ze,x.swipeDirection,Me)?(A.current=ze,U_(nie,d,ge,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(te)>Me||Math.abs(ne)>Me)&&(E.current=null)}),onPointerUp:mn(t.onPointerUp,Z=>{const te=A.current,ne=Z.target;if(ne.hasPointerCapture(Z.pointerId)&&ne.releasePointerCapture(Z.pointerId),A.current=null,E.current=null,te){const de=Z.currentTarget,Y={originalEvent:Z,delta:te};d5(te,x.swipeDirection,x.swipeThreshold)?U_(sie,v,Y,{discrete:!0}):U_(iie,g,Y,{discrete:!0}),de.addEventListener("click",ae=>ae.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),uie=t=>{const{__scopeToast:e,children:n,...r}=t,i=HE(GE,e),[s,o]=V.useState(!1),[a,l]=V.useState(!1);return fie(()=>o(!0)),V.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:k.jsx(RO,{asChild:!0,children:k.jsx(vb,{...r,children:s&&k.jsxs(k.Fragment,{children:[i.label," ",n]})})})},cie="ToastTitle",IO=V.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return k.jsx(cl.div,{...r,ref:e})});IO.displayName=cie;var die="ToastDescription",UO=V.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return k.jsx(cl.div,{...r,ref:e})});UO.displayName=die;var BO="ToastAction",zO=V.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?k.jsx(GO,{altText:n,asChild:!0,children:k.jsx(xb,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${BO}\`. Expected non-empty \`string\`.`),null)});zO.displayName=BO;var HO="ToastClose",xb=V.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=aie(HO,n);return k.jsx(GO,{asChild:!0,children:k.jsx(cl.button,{type:"button",...r,ref:e,onClick:mn(t.onClick,i.onClose)})})});xb.displayName=HO;var GO=V.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return k.jsx(cl.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function VO(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),hie(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...VO(r))}}),e}function U_(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?MO(i,s):i.dispatchEvent(s)}var d5=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function fie(t=()=>{}){const e=us(t);Ei(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function hie(t){return t.nodeType===t.ELEMENT_NODE}function pie(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $M(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var mie=NO,WO=kO,jO=OO,XO=IO,YO=UO,qO=zO,KO=xb;const f5=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,h5=WN,gie=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return h5(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],m=s==null?void 0:s[u];if(d===null)return null;const g=f5(d)||f5(m);return i[u][g]}),a=n&&Object.entries(n).reduce((u,d)=>{let[m,g]=d;return g===void 0||(u[m]=g),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:g,...v}=d;return Object.entries(v).every(y=>{let[x,S]=y;return Array.isArray(S)?S.includes({...s,...a}[x]):{...s,...a}[x]===S})?[...u,m,g]:u},[]);return h5(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},vie=mie,$O=V.forwardRef(({className:t,...e},n)=>k.jsx(WO,{ref:n,className:Si("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$O.displayName=WO.displayName;const _ie=gie("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-black text-white",destructive:"destructive group border-destructive bg-destructive text-destructive-white"}},defaultVariants:{variant:"default"}}),ZO=V.forwardRef(({className:t,variant:e,...n},r)=>k.jsx(jO,{ref:r,className:Si(_ie({variant:e}),t),...n}));ZO.displayName=jO.displayName;const yie=V.forwardRef(({className:t,...e},n)=>k.jsx(qO,{ref:n,className:Si("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));yie.displayName=qO.displayName;const QO=V.forwardRef(({className:t,...e},n)=>k.jsx(KO,{ref:n,className:Si("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:k.jsx(pY,{className:"h-4 w-4"})}));QO.displayName=KO.displayName;const JO=V.forwardRef(({className:t,...e},n)=>k.jsx(XO,{ref:n,className:Si("text-sm font-semibold [&+div]:text-xs",t),...e}));JO.displayName=XO.displayName;const eI=V.forwardRef(({className:t,...e},n)=>k.jsx(YO,{ref:n,className:Si("text-sm opacity-90",t),...e}));eI.displayName=YO.displayName;function xie(){const{toasts:t}=wO();return k.jsxs(vie,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return k.jsxs(ZO,{...s,children:[k.jsxs("div",{className:"grid gap-1",children:[n&&k.jsx(JO,{children:n}),r&&k.jsx(eI,{children:r})]}),i,k.jsx(QO,{})]},e)}),k.jsx($O,{})]})}function Sie(t){return new Worker("/PangeaRSEdit/assets/pyodideWorker-DI1wHgKO.js",{type:"module",name:t==null?void 0:t.name})}function Eie(){const[t,e]=V.useState(null),[n,r]=V.useState(!1);return V.useEffect(()=>{const i=new Sie;i.postMessage({type:"init"}),i.onmessage=s=>{s.data.type==="initRes"&&r(!0)},e(i)},[]),!n||!t?k.jsx("div",{className:"flex text-white m-auto flex-1 gap-8 flex-col items-center justify-center",children:k.jsxs("div",{className:"flex flex-col gap-2 lg:w-1/2",children:[k.jsx(Q6,{}),k.jsx("h1",{className:"flex-1 m-auto text-4xl",children:"Loading Map Editor..."})]})}):k.jsxs(k.Fragment,{children:[k.jsx(Nre,{pyodideWorker:t}),k.jsx(xie,{})]})}PN(document.getElementById("root")).render(k.jsx(V.StrictMode,{children:k.jsx(Eie,{})}));
