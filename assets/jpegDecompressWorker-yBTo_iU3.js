function nr(e0){return e0&&e0.__esModule&&Object.prototype.hasOwnProperty.call(e0,"default")?e0.default:e0}var z0={exports:{}};(function(e0){function n0(a0){var x0=Math.floor,c0=new Array(64),r0=new Array(64),h0=new Array(64),j=new Array(64),d0,i0,s0,t0,o0=new Array(65535),g0=new Array(65535),P0=new Array(64),b0=new Array(64),f0=[],u0=0,v0=7,F0=new Array(64),Z=new Array(64),x=new Array(64),M=new Array(256),e=new Array(2048),u,h=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],y=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],t=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _(r){for(var c=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],l=0;l<64;l++){var w=x0((c[l]*r+50)/100);w<1?w=1:w>255&&(w=255),c0[h[l]]=w}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Q=0;Q<64;Q++){var Y=x0((T[Q]*r+50)/100);Y<1?Y=1:Y>255&&(Y=255),r0[h[Q]]=Y}for(var o=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,d=0;d<8;d++)for(var i=0;i<8;i++)h0[f]=1/(c0[h[f]]*o[d]*o[i]*8),j[f]=1/(r0[h[f]]*o[d]*o[i]*8),f++}function m(r,c){for(var l=0,w=0,T=new Array,Q=1;Q<=16;Q++){for(var Y=1;Y<=r[Q];Y++)T[c[w]]=[],T[c[w]][0]=l,T[c[w]][1]=Q,w++,l++;l*=2}return T}function S(){d0=m(P,y),i0=m(G,W),s0=m(k,t),t0=m(K,F)}function I(){for(var r=1,c=2,l=1;l<=15;l++){for(var w=r;w<c;w++)g0[32767+w]=l,o0[32767+w]=[],o0[32767+w][1]=l,o0[32767+w][0]=w;for(var T=-(c-1);T<=-r;T++)g0[32767+T]=l,o0[32767+T]=[],o0[32767+T][1]=l,o0[32767+T][0]=c-1+T;r<<=1,c<<=1}}function L(){for(var r=0;r<256;r++)e[r]=19595*r,e[r+256>>0]=38470*r,e[r+512>>0]=7471*r+32768,e[r+768>>0]=-11059*r,e[r+1024>>0]=-21709*r,e[r+1280>>0]=32768*r+8421375,e[r+1536>>0]=-27439*r,e[r+1792>>0]=-5329*r}function v(r){for(var c=r[0],l=r[1]-1;l>=0;)c&1<<l&&(u0|=1<<v0),l--,v0--,v0<0&&(u0==255?(a(255),a(0)):a(u0),v0=7,u0=0)}function a(r){f0.push(r)}function b(r){a(r>>8&255),a(r&255)}function D(r,c){var l,w,T,Q,Y,o,f,d,i=0,C,R=8,g=64;for(C=0;C<R;++C){l=r[i],w=r[i+1],T=r[i+2],Q=r[i+3],Y=r[i+4],o=r[i+5],f=r[i+6],d=r[i+7];var H=l+d,V=l-d,q=w+f,z=w-f,p=T+o,l0=T-o,_0=Q+Y,B0=Q-Y,w0=H+_0,A0=H-_0,C0=q+p,m0=q-p;r[i]=w0+C0,r[i+4]=w0-C0;var E0=(m0+A0)*.707106781;r[i+2]=A0+E0,r[i+6]=A0-E0,w0=B0+l0,C0=l0+z,m0=z+V;var k0=(w0-m0)*.382683433,T0=.5411961*w0+k0,X0=1.306562965*m0+k0,O0=C0*.707106781,R0=V+O0,H0=V-O0;r[i+5]=H0+T0,r[i+3]=H0-T0,r[i+1]=R0+X0,r[i+7]=R0-X0,i+=8}for(i=0,C=0;C<R;++C){l=r[i],w=r[i+8],T=r[i+16],Q=r[i+24],Y=r[i+32],o=r[i+40],f=r[i+48],d=r[i+56];var V0=l+d,Y0=l-d,G0=w+f,S0=w-f,Q0=T+o,J0=T-o,N0=Q+Y,er=Q-Y,M0=V0+N0,D0=V0-N0,U0=G0+Q0,I0=G0-Q0;r[i]=M0+U0,r[i+32]=M0-U0;var $0=(I0+D0)*.707106781;r[i+16]=D0+$0,r[i+48]=D0-$0,M0=er+J0,U0=J0+S0,I0=S0+Y0;var Z0=(M0-I0)*.382683433,W0=.5411961*M0+Z0,q0=1.306562965*I0+Z0,K0=U0*.707106781,p0=Y0+K0,j0=Y0-K0;r[i+40]=j0+W0,r[i+24]=j0-W0,r[i+8]=p0+q0,r[i+56]=p0-q0,i++}var L0;for(C=0;C<g;++C)L0=r[C]*c[C],P0[C]=L0>0?L0+.5|0:L0-.5|0;return P0}function N(){b(65504),b(16),a(74),a(70),a(73),a(70),a(0),a(1),a(1),a(0),b(1),b(1),a(0),a(0)}function U(r){if(r){b(65505),r[0]===69&&r[1]===120&&r[2]===105&&r[3]===102?b(r.length+2):(b(r.length+5+2),a(69),a(120),a(105),a(102),a(0));for(var c=0;c<r.length;c++)a(r[c])}}function J(r,c){b(65472),b(17),a(8),b(c),b(r),a(3),a(1),a(17),a(0),a(2),a(17),a(1),a(3),a(17),a(1)}function X(){b(65499),b(132),a(0);for(var r=0;r<64;r++)a(c0[r]);a(1);for(var c=0;c<64;c++)a(r0[c])}function $(){b(65476),b(418),a(0);for(var r=0;r<16;r++)a(P[r+1]);for(var c=0;c<=11;c++)a(y[c]);a(16);for(var l=0;l<16;l++)a(k[l+1]);for(var w=0;w<=161;w++)a(t[w]);a(1);for(var T=0;T<16;T++)a(G[T+1]);for(var Q=0;Q<=11;Q++)a(W[Q]);a(17);for(var Y=0;Y<16;Y++)a(K[Y+1]);for(var o=0;o<=161;o++)a(F[o])}function B(r){typeof r>"u"||r.constructor!==Array||r.forEach(c=>{if(typeof c=="string"){b(65534);var l=c.length;b(l+2);var w;for(w=0;w<l;w++)a(c.charCodeAt(w))}})}function s(){b(65498),b(12),a(3),a(1),a(0),a(2),a(17),a(3),a(17),a(0),a(63),a(0)}function n(r,c,l,w,T){for(var Q=T[0],Y=T[240],o,f=16,d=63,i=64,C=D(r,c),R=0;R<i;++R)b0[h[R]]=C[R];var g=b0[0]-l;l=b0[0],g==0?v(w[0]):(o=32767+g,v(w[g0[o]]),v(o0[o]));for(var H=63;H>0&&b0[H]==0;H--);if(H==0)return v(Q),l;for(var V=1,q;V<=H;){for(var z=V;b0[V]==0&&V<=H;++V);var p=V-z;if(p>=f){q=p>>4;for(var l0=1;l0<=q;++l0)v(Y);p=p&15}o=32767+b0[V],v(T[(p<<4)+g0[o]]),v(o0[o]),V++}return H!=d&&v(Q),l}function O(){for(var r=String.fromCharCode,c=0;c<256;c++)M[c]=r(c)}this.encode=function(r,c){new Date().getTime(),c&&A(c),f0=new Array,u0=0,v0=7,b(65496),N(),B(r.comments),U(r.exifBuffer),X(),J(r.width,r.height),$(),s();var l=0,w=0,T=0;u0=0,v0=7,this.encode.displayName="_encode_";for(var Q=r.data,Y=r.width,o=r.height,f=Y*4,d,i=0,C,R,g,H,V,q,z,p;i<o;){for(d=0;d<f;){for(H=f*i+d,V=H,q=-1,z=0,p=0;p<64;p++)z=p>>3,q=(p&7)*4,V=H+z*f+q,i+z>=o&&(V-=f*(i+1+z-o)),d+q>=f&&(V-=d+q-f+4),C=Q[V++],R=Q[V++],g=Q[V++],F0[p]=(e[C]+e[R+256>>0]+e[g+512>>0]>>16)-128,Z[p]=(e[C+768>>0]+e[R+1024>>0]+e[g+1280>>0]>>16)-128,x[p]=(e[C+1280>>0]+e[R+1536>>0]+e[g+1792>>0]>>16)-128;l=n(F0,h0,l,d0,s0),w=n(Z,j,w,i0,t0),T=n(x,j,T,i0,t0),d+=32}i+=8}if(v0>=0){var l0=[];l0[1]=v0+1,l0[0]=(1<<v0+1)-1,v(l0)}return b(65497),Buffer.from(f0)};function A(r){if(r<=0&&(r=1),r>100&&(r=100),u!=r){var c=0;r<50?c=Math.floor(5e3/r):c=Math.floor(200-r*2),_(c),u=r}}function E(){var r=new Date().getTime();a0||(a0=50),O(),S(),I(),L(),A(a0),new Date().getTime()-r}E()}e0.exports=y0;function y0(a0,x0){typeof x0>"u"&&(x0=50);var c0=new n0(x0),r0=c0.encode(a0,x0);return{data:r0,width:a0.width,height:a0.height}}})(z0);var ar=z0.exports,rr={exports:{}};(function(e0){var n0=function(){var x0=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c0=4017,r0=799,h0=3406,j=2276,d0=1567,i0=3784,s0=5793,t0=2896;function o0(){}function g0(Z,x){for(var M=0,e=[],u,h,P=16;P>0&&!Z[P-1];)P--;e.push({children:[],index:0});var y=e[0],k;for(u=0;u<P;u++){for(h=0;h<Z[u];h++){for(y=e.pop(),y.children[y.index]=x[M];y.index>0;){if(e.length===0)throw new Error("Could not recreate Huffman Table");y=e.pop()}for(y.index++,e.push(y);e.length<=u;)e.push(k={children:[],index:0}),y.children[y.index]=k.children,y=k;M++}u+1<P&&(e.push(k={children:[],index:0}),y.children[y.index]=k.children,y=k)}return e[0].children}function P0(Z,x,M,e,u,h,P,y,k,t){M.precision,M.samplesPerLine,M.scanLines;var G=M.mcusPerLine,W=M.progressive;M.maxH,M.maxV;var K=x,F=0,_=0;function m(){if(_>0)return _--,F>>_&1;if(F=Z[x++],F==255){var o=Z[x++];if(o)throw new Error("unexpected marker: "+(F<<8|o).toString(16))}return _=7,F>>>7}function S(o){for(var f=o,d;(d=m())!==null;){if(f=f[d],typeof f=="number")return f;if(typeof f!="object")throw new Error("invalid huffman sequence")}return null}function I(o){for(var f=0;o>0;){var d=m();if(d===null)return;f=f<<1|d,o--}return f}function L(o){var f=I(o);return f>=1<<o-1?f:f+(-1<<o)+1}function v(o,f){var d=S(o.huffmanTableDC),i=d===0?0:L(d);f[0]=o.pred+=i;for(var C=1;C<64;){var R=S(o.huffmanTableAC),g=R&15,H=R>>4;if(g===0){if(H<15)break;C+=16;continue}C+=H;var V=x0[C];f[V]=L(g),C++}}function a(o,f){var d=S(o.huffmanTableDC),i=d===0?0:L(d)<<k;f[0]=o.pred+=i}function b(o,f){f[0]|=m()<<k}var D=0;function N(o,f){if(D>0){D--;return}for(var d=h,i=P;d<=i;){var C=S(o.huffmanTableAC),R=C&15,g=C>>4;if(R===0){if(g<15){D=I(g)+(1<<g)-1;break}d+=16;continue}d+=g;var H=x0[d];f[H]=L(R)*(1<<k),d++}}var U=0,J;function X(o,f){for(var d=h,i=P,C=0;d<=i;){var R=x0[d],g=f[R]<0?-1:1;switch(U){case 0:var H=S(o.huffmanTableAC),V=H&15,C=H>>4;if(V===0)C<15?(D=I(C)+(1<<C),U=4):(C=16,U=1);else{if(V!==1)throw new Error("invalid ACn encoding");J=L(V),U=C?2:3}continue;case 1:case 2:f[R]?f[R]+=(m()<<k)*g:(C--,C===0&&(U=U==2?3:0));break;case 3:f[R]?f[R]+=(m()<<k)*g:(f[R]=J<<k,U=0);break;case 4:f[R]&&(f[R]+=(m()<<k)*g);break}d++}U===4&&(D--,D===0&&(U=0))}function $(o,f,d,i,C){var R=d/G|0,g=d%G,H=R*o.v+i,V=g*o.h+C;o.blocks[H]===void 0&&t.tolerantDecoding||f(o,o.blocks[H][V])}function B(o,f,d){var i=d/o.blocksPerLine|0,C=d%o.blocksPerLine;o.blocks[i]===void 0&&t.tolerantDecoding||f(o,o.blocks[i][C])}var s=e.length,n,O,A,E,r,c;W?h===0?c=y===0?a:b:c=y===0?N:X:c=v;var l=0,w,T;s==1?T=e[0].blocksPerLine*e[0].blocksPerColumn:T=G*M.mcusPerColumn,u||(u=T);for(var Q,Y;l<T;){for(O=0;O<s;O++)e[O].pred=0;if(D=0,s==1)for(n=e[0],r=0;r<u;r++)B(n,c,l),l++;else for(r=0;r<u;r++){for(O=0;O<s;O++)for(n=e[O],Q=n.h,Y=n.v,A=0;A<Y;A++)for(E=0;E<Q;E++)$(n,c,l,A,E);if(l++,l===T)break}if(l===T)do{if(Z[x]===255&&Z[x+1]!==0)break;x+=1}while(x<Z.length-2);if(_=0,w=Z[x]<<8|Z[x+1],w<65280)throw new Error("marker was not found");if(w>=65488&&w<=65495)x+=2;else break}return x-K}function b0(Z,x){var M=[],e=x.blocksPerLine,u=x.blocksPerColumn,h=e<<3,P=new Int32Array(64),y=new Uint8Array(64);function k(I,L,v){var a=x.quantizationTable,b,D,N,U,J,X,$,B,s,n=v,O;for(O=0;O<64;O++)n[O]=I[O]*a[O];for(O=0;O<8;++O){var A=8*O;if(n[1+A]==0&&n[2+A]==0&&n[3+A]==0&&n[4+A]==0&&n[5+A]==0&&n[6+A]==0&&n[7+A]==0){s=s0*n[0+A]+512>>10,n[0+A]=s,n[1+A]=s,n[2+A]=s,n[3+A]=s,n[4+A]=s,n[5+A]=s,n[6+A]=s,n[7+A]=s;continue}b=s0*n[0+A]+128>>8,D=s0*n[4+A]+128>>8,N=n[2+A],U=n[6+A],J=t0*(n[1+A]-n[7+A])+128>>8,B=t0*(n[1+A]+n[7+A])+128>>8,X=n[3+A]<<4,$=n[5+A]<<4,s=b-D+1>>1,b=b+D+1>>1,D=s,s=N*i0+U*d0+128>>8,N=N*d0-U*i0+128>>8,U=s,s=J-$+1>>1,J=J+$+1>>1,$=s,s=B+X+1>>1,X=B-X+1>>1,B=s,s=b-U+1>>1,b=b+U+1>>1,U=s,s=D-N+1>>1,D=D+N+1>>1,N=s,s=J*j+B*h0+2048>>12,J=J*h0-B*j+2048>>12,B=s,s=X*r0+$*c0+2048>>12,X=X*c0-$*r0+2048>>12,$=s,n[0+A]=b+B,n[7+A]=b-B,n[1+A]=D+$,n[6+A]=D-$,n[2+A]=N+X,n[5+A]=N-X,n[3+A]=U+J,n[4+A]=U-J}for(O=0;O<8;++O){var E=O;if(n[8+E]==0&&n[16+E]==0&&n[24+E]==0&&n[32+E]==0&&n[40+E]==0&&n[48+E]==0&&n[56+E]==0){s=s0*v[O+0]+8192>>14,n[0+E]=s,n[8+E]=s,n[16+E]=s,n[24+E]=s,n[32+E]=s,n[40+E]=s,n[48+E]=s,n[56+E]=s;continue}b=s0*n[0+E]+2048>>12,D=s0*n[32+E]+2048>>12,N=n[16+E],U=n[48+E],J=t0*(n[8+E]-n[56+E])+2048>>12,B=t0*(n[8+E]+n[56+E])+2048>>12,X=n[24+E],$=n[40+E],s=b-D+1>>1,b=b+D+1>>1,D=s,s=N*i0+U*d0+2048>>12,N=N*d0-U*i0+2048>>12,U=s,s=J-$+1>>1,J=J+$+1>>1,$=s,s=B+X+1>>1,X=B-X+1>>1,B=s,s=b-U+1>>1,b=b+U+1>>1,U=s,s=D-N+1>>1,D=D+N+1>>1,N=s,s=J*j+B*h0+2048>>12,J=J*h0-B*j+2048>>12,B=s,s=X*r0+$*c0+2048>>12,X=X*c0-$*r0+2048>>12,$=s,n[0+E]=b+B,n[56+E]=b-B,n[8+E]=D+$,n[48+E]=D-$,n[16+E]=N+X,n[40+E]=N-X,n[24+E]=U+J,n[32+E]=U-J}for(O=0;O<64;++O){var r=128+(n[O]+8>>4);L[O]=r<0?0:r>255?255:r}}F0(h*u*8);for(var t,G,W=0;W<u;W++){var K=W<<3;for(t=0;t<8;t++)M.push(new Uint8Array(h));for(var F=0;F<e;F++){k(x.blocks[W][F],y,P);var _=0,m=F<<3;for(G=0;G<8;G++){var S=M[K+G];for(t=0;t<8;t++)S[m+t]=y[_++]}}}return M}function f0(Z){return Z<0?0:Z>255?255:Z}o0.prototype={load:function(x){var M=new XMLHttpRequest;M.open("GET",x,!0),M.responseType="arraybuffer",M.onload=function(){var e=new Uint8Array(M.response||M.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),M.send(null)},parse:function(x){var M=this.opts.maxResolutionInMP*1e3*1e3,e=0;x.length;function u(){var g=x[e]<<8|x[e+1];return e+=2,g}function h(){var g=u(),H=x.subarray(e,e+g-2);return e+=H.length,H}function P(g){var H=1,V=1,q,z;for(z in g.components)g.components.hasOwnProperty(z)&&(q=g.components[z],H<q.h&&(H=q.h),V<q.v&&(V=q.v));var p=Math.ceil(g.samplesPerLine/8/H),l0=Math.ceil(g.scanLines/8/V);for(z in g.components)if(g.components.hasOwnProperty(z)){q=g.components[z];var _0=Math.ceil(Math.ceil(g.samplesPerLine/8)*q.h/H),B0=Math.ceil(Math.ceil(g.scanLines/8)*q.v/V),w0=p*q.h,A0=l0*q.v,C0=A0*w0,m0=[];F0(C0*256);for(var E0=0;E0<A0;E0++){for(var k0=[],T0=0;T0<w0;T0++)k0.push(new Int32Array(64));m0.push(k0)}q.blocksPerLine=_0,q.blocksPerColumn=B0,q.blocks=m0}g.maxH=H,g.maxV=V,g.mcusPerLine=p,g.mcusPerColumn=l0}var y=null,k=null,t,G,W=[],K=[],F=[],_=[],m=u(),S=-1;if(this.comments=[],m!=65496)throw new Error("SOI not found");for(m=u();m!=65497;){var I,L;switch(m){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var v=h();if(m===65534){var a=String.fromCharCode.apply(null,v);this.comments.push(a)}m===65504&&v[0]===74&&v[1]===70&&v[2]===73&&v[3]===70&&v[4]===0&&(y={version:{major:v[5],minor:v[6]},densityUnits:v[7],xDensity:v[8]<<8|v[9],yDensity:v[10]<<8|v[11],thumbWidth:v[12],thumbHeight:v[13],thumbData:v.subarray(14,14+3*v[12]*v[13])}),m===65505&&v[0]===69&&v[1]===120&&v[2]===105&&v[3]===102&&v[4]===0&&(this.exifBuffer=v.subarray(5,v.length)),m===65518&&v[0]===65&&v[1]===100&&v[2]===111&&v[3]===98&&v[4]===101&&v[5]===0&&(k={version:v[6],flags0:v[7]<<8|v[8],flags1:v[9]<<8|v[10],transformCode:v[11]});break;case 65499:for(var b=u(),D=b+e-2;e<D;){var N=x[e++];F0(256);var U=new Int32Array(64);if(N>>4)if(N>>4===1)for(L=0;L<64;L++){var J=x0[L];U[J]=u()}else throw new Error("DQT: invalid table spec");else for(L=0;L<64;L++){var J=x0[L];U[J]=x[e++]}W[N&15]=U}break;case 65472:case 65473:case 65474:u(),t={},t.extended=m===65473,t.progressive=m===65474,t.precision=x[e++],t.scanLines=u(),t.samplesPerLine=u(),t.components={},t.componentsOrder=[];var X=t.scanLines*t.samplesPerLine;if(X>M){var $=Math.ceil((X-M)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${$}MP`)}var B=x[e++],s;for(I=0;I<B;I++){s=x[e];var n=x[e+1]>>4,O=x[e+1]&15,A=x[e+2];if(n<=0||O<=0)throw new Error("Invalid sampling factor, expected values above 0");t.componentsOrder.push(s),t.components[s]={h:n,v:O,quantizationIdx:A},e+=3}P(t),K.push(t);break;case 65476:var E=u();for(I=2;I<E;){var r=x[e++],c=new Uint8Array(16),l=0;for(L=0;L<16;L++,e++)l+=c[L]=x[e];F0(16+l);var w=new Uint8Array(l);for(L=0;L<l;L++,e++)w[L]=x[e];I+=17+l,(r>>4?F:_)[r&15]=g0(c,w)}break;case 65501:u(),G=u();break;case 65500:u(),u();break;case 65498:u();var T=x[e++],Q=[],Y;for(I=0;I<T;I++){Y=t.components[x[e++]];var o=x[e++];Y.huffmanTableDC=_[o>>4],Y.huffmanTableAC=F[o&15],Q.push(Y)}var f=x[e++],d=x[e++],i=x[e++],C=P0(x,e,t,Q,G,f,d,i>>4,i&15,this.opts);e+=C;break;case 65535:x[e]!==255&&e--;break;default:if(x[e-3]==255&&x[e-2]>=192&&x[e-2]<=254){e-=3;break}else if(m===224||m==225){if(S!==-1)throw new Error(`first unknown JPEG marker at offset ${S.toString(16)}, second unknown JPEG marker ${m.toString(16)} at offset ${(e-1).toString(16)}`);S=e-1;const g=u();if(x[e+g-2]===255){e+=g-2;break}}throw new Error("unknown JPEG marker "+m.toString(16))}m=u()}if(K.length!=1)throw new Error("only single frame JPEGs supported");for(var I=0;I<K.length;I++){var R=K[I].components;for(var L in R)R[L].quantizationTable=W[R[L].quantizationIdx],delete R[L].quantizationIdx}this.width=t.samplesPerLine,this.height=t.scanLines,this.jfif=y,this.adobe=k,this.components=[];for(var I=0;I<t.componentsOrder.length;I++){var Y=t.components[t.componentsOrder[I]];this.components.push({lines:b0(t,Y),scaleX:Y.h/t.maxH,scaleY:Y.v/t.maxV})}},getData:function(x,M){var e=this.width/x,u=this.height/M,h,P,y,k,t,G,W,K,F,_,m=0,S,I,L,v,a,b,D,N,U,J,X,$=x*M*this.components.length;F0($);var B=new Uint8Array($);switch(this.components.length){case 1:for(h=this.components[0],_=0;_<M;_++)for(t=h.lines[0|_*h.scaleY*u],F=0;F<x;F++)S=t[0|F*h.scaleX*e],B[m++]=S;break;case 2:for(h=this.components[0],P=this.components[1],_=0;_<M;_++)for(t=h.lines[0|_*h.scaleY*u],G=P.lines[0|_*P.scaleY*u],F=0;F<x;F++)S=t[0|F*h.scaleX*e],B[m++]=S,S=G[0|F*P.scaleX*e],B[m++]=S;break;case 3:for(X=!0,this.adobe&&this.adobe.transformCode?X=!0:typeof this.opts.colorTransform<"u"&&(X=!!this.opts.colorTransform),h=this.components[0],P=this.components[1],y=this.components[2],_=0;_<M;_++)for(t=h.lines[0|_*h.scaleY*u],G=P.lines[0|_*P.scaleY*u],W=y.lines[0|_*y.scaleY*u],F=0;F<x;F++)X?(S=t[0|F*h.scaleX*e],I=G[0|F*P.scaleX*e],L=W[0|F*y.scaleX*e],N=f0(S+1.402*(L-128)),U=f0(S-.3441363*(I-128)-.71413636*(L-128)),J=f0(S+1.772*(I-128))):(N=t[0|F*h.scaleX*e],U=G[0|F*P.scaleX*e],J=W[0|F*y.scaleX*e]),B[m++]=N,B[m++]=U,B[m++]=J;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(X=!1,this.adobe&&this.adobe.transformCode?X=!0:typeof this.opts.colorTransform<"u"&&(X=!!this.opts.colorTransform),h=this.components[0],P=this.components[1],y=this.components[2],k=this.components[3],_=0;_<M;_++)for(t=h.lines[0|_*h.scaleY*u],G=P.lines[0|_*P.scaleY*u],W=y.lines[0|_*y.scaleY*u],K=k.lines[0|_*k.scaleY*u],F=0;F<x;F++)X?(S=t[0|F*h.scaleX*e],I=G[0|F*P.scaleX*e],L=W[0|F*y.scaleX*e],v=K[0|F*k.scaleX*e],a=255-f0(S+1.402*(L-128)),b=255-f0(S-.3441363*(I-128)-.71413636*(L-128)),D=255-f0(S+1.772*(I-128))):(a=t[0|F*h.scaleX*e],b=G[0|F*P.scaleX*e],D=W[0|F*y.scaleX*e],v=K[0|F*k.scaleX*e]),B[m++]=255-a,B[m++]=255-b,B[m++]=255-D,B[m++]=255-v;break;default:throw new Error("Unsupported color mode")}return B},copyToImageData:function(x,M){var e=x.width,u=x.height,h=x.data,P=this.getData(e,u),y=0,k=0,t,G,W,K,F,_,m,S,I;switch(this.components.length){case 1:for(G=0;G<u;G++)for(t=0;t<e;t++)W=P[y++],h[k++]=W,h[k++]=W,h[k++]=W,M&&(h[k++]=255);break;case 3:for(G=0;G<u;G++)for(t=0;t<e;t++)m=P[y++],S=P[y++],I=P[y++],h[k++]=m,h[k++]=S,h[k++]=I,M&&(h[k++]=255);break;case 4:for(G=0;G<u;G++)for(t=0;t<e;t++)F=P[y++],_=P[y++],W=P[y++],K=P[y++],m=255-f0(F*(1-K/255)+K),S=255-f0(_*(1-K/255)+K),I=255-f0(W*(1-K/255)+K),h[k++]=m,h[k++]=S,h[k++]=I,M&&(h[k++]=255);break;default:throw new Error("Unsupported color mode")}}};var u0=0,v0=0;function F0(Z=0){var x=u0+Z;if(x>v0){var M=Math.ceil((x-v0)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${M}MB`)}u0=x}return o0.resetMaxMemoryUsage=function(Z){u0=0,v0=Z},o0.getBytesAllocated=function(){return u0},o0.requestMemoryAllocation=F0,o0}();e0.exports=y0;function y0(a0,x0={}){var c0={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},r0={...c0,...x0},h0=new Uint8Array(a0),j=new n0;j.opts=r0,n0.resetMaxMemoryUsage(r0.maxMemoryUsageInMB*1024*1024),j.parse(h0);var d0=r0.formatAsRGBA?4:3,i0=j.width*j.height*d0;try{n0.requestMemoryAllocation(i0);var s0={width:j.width,height:j.height,exifBuffer:j.exifBuffer,data:r0.useTArray?new Uint8Array(i0):Buffer.alloc(i0)};j.comments.length>0&&(s0.comments=j.comments)}catch(t0){throw t0 instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+i0):t0 instanceof ReferenceError&&t0.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):t0}return j.copyToImageData(s0,r0.formatAsRGBA),s0}})(rr);var xr=rr.exports,or=ar,ir=xr,sr={encode:or,decode:ir},tr=nr(sr);function fr(e0){const n0=tr.decode(new Uint8Array(e0),{useTArray:!0}),y0=new Uint8ClampedArray(n0.data.length);for(let a0=0;a0<n0.data.length;a0++)y0[a0]=n0.data[a0];return typeof ImageData<"u"?new ImageData(y0,n0.width,n0.height):{width:n0.width,height:n0.height,colorSpace:"srgb",data:y0}}onmessage=async e0=>{if(e0.data.type==="decompress"){const n0=await fr(e0.data.jpegData);postMessage({id:e0.data.id,type:"decompressRes",imageData:n0})}};
